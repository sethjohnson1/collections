/*
 Zoomify Image Viewer, version on line 26 below. Copyright Zoomify, Inc., 1999-2015. All rights reserved. You may
use this file on private and public websites, for personal and commercial purposes, with or without modifications, so long as this
notice is included. Redistribution via other means is not permitted without prior permission. Additional terms apply. For complete
license terms please see the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();Z.version="2.3.01 Enterprise";
Z.showImage=function(a,b,c){Z.showImage.done?(Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),Z.initialize()):(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.setCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,
null,"callbackFunction",b);-1==c&&(c=Z.callbacks.length);Z.callbacks[c]={callbackEvent:a,callbackFunction:b}},Z.setEditPermissionFunction=function(a){Z.externalEditPermissionFunction=a},Z.clearCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1!=c&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,c,1))},Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&("string"===
typeof c?(a=unescape(c),a=Z.Utils.stringUnescapeAmpersandCharacters(a),Z.parameters=Z.Utils.parseParameters(a)):Z.parameters=Z.Utils.parseParameters(c)),"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};
Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters(Z.parameters);Z.Viewer=new Z.ZoomifyImageViewer;Z.Utils.stringValidate(Z.copyrightPath)?Z.Utils.enforceCopyright():Z.Viewer.configureViewer();0<Z.debug&&Z.Utils.trace(Z.Utils.getResource("z445"),!1,!0)};
Z.ZoomifyImageViewer=function(){function a(a){if(a=Z.Utils.event(a)){var b=null;if(null!==Z.editing&&Z.Viewport.verifyEditsUnsaved())return b=Z.Utils.getResource("ALERT_UNSAVEDEDITSEXIST-BROWSER"),a.returnValue=b}}function b(a){function b(){Z.clearCallback("readyViewer",b);Z.viewportCurrent=Z.Viewport0;G.viewportSelect(Z.imageSetStart)}Z.imagePath="multiple";Z.tileSourceMultiple&&Z.Utils.validateImagePath(a[0].media);Z.setCallback("readyViewer",b);for(var c=0,d=a.length;c<d;c++){Z["Viewport"+c.toString()]=
new Z.ZoomifyViewport(c,a[c].media,Z.annotationFileShared?Z.imageSetAnnotationPath:a[c].annotationPath,Z.hotspotFileShared?Z.imageSetHotspotPath:a[c].hotspotPath);var f=c==Z.imageSetStart;f&&(Z.viewportCurrent=Z["Viewport"+c.toString()],G.viewportSelect(Z.imageSetStart));Z["Viewport"+c.toString()].setVisibility(f)}}function c(a,b){if("undefined"===typeof b||null===b)b="0";var c=document.getElementById("HotspotList"+b);c&&(c.style.visibility=a?"visible":"hidden")}function d(a,b){this.id=a.getAttribute("ID");
this.name=a.getAttribute("NAME");this.internalID=b;this.media=a.getAttribute("MEDIA");this.annotationPath=a.getAttribute("ANNOTATIONPATH");this.hotspotPath=a.getAttribute("HOTSPOTPATH")}function f(a,b,c,d){switch(a){case "0":d=a=-1E3;break;case "1":d=a=15;break;case "2":a=c-b-15+2;d=10;break;case "3":a=c-b-15;d=null!=toolbar?d-30:d-22.5;break;case "4":a=15;d=null!=toolbar?d-30:d-22.5;break;default:a=c-b,d=15}return new Z.Utils.Point(a,d)}function l(a){if(a=Z.Utils.event(a))if(a=Z.Utils.target(a),
"null"!=a.options[a.selectedIndex].value){var b=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0;G.viewportSelect(a.selectedIndex-b)}}function k(){document.getElementsByTagName("body")?document.getElementsByTagName("body")[0].onorientationchange=n:window.setTimeout(k,100)}function n(a){!Z.interactivityOff&&Z.fullView&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&
(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1),Z.Viewport&&(Z.Viewport.toggleFullViewMode(!1),Z.Viewport.toggleFullViewMode(!0)),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0))}function C(a){if(!Z.interactivityOff&&Z.keys&&"INPUT"!=
document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName&&(a=Z.Utils.event(a),18==a.keyCode||a.altKey||(Z.viewportCurrent.zoomAndPanAllStop(!0,!0),Z.maskingSelection&&Z.viewportCurrent.clearLabelMask()),a)){var b=a.type,c=a.keyCode;if("keydown"==b){Z.keyIsDown=!0;switch(c){case 90:Z.viewportCurrent.zoom("out");break;case 17:Z.viewportCurrent.zoom("out");break;case 65:Z.viewportCurrent.zoom("in");break;case 16:Z.viewportCurrent.zoom("in");break;case 37:Z.animation&&Z.viewportCurrent.getZoom()==
Z.minZ?Z.imageSet&&G.viewportPrior():Z.viewportCurrent.pan("left");break;case 38:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ?Z.imageSet&&G.viewportNext():Z.viewportCurrent.pan("up");break;case 40:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ?Z.imageSet&&G.viewportPrior():Z.viewportCurrent.pan("down");break;case 39:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ?Z.imageSet&&G.viewportNext():Z.viewportCurrent.pan("right");break;case 27:Z.fullView?Z.viewportCurrent.toggleFullViewMode(!1):Z.viewportCurrent.reset();
break;case 190:Z.rotationVisible&&Z.viewportCurrent.rotateClockwise();break;case 188:Z.rotationVisible&&Z.viewportCurrent.rotateCounterwise();break;case 33:Z.imageSet&&G.viewportNext();break;case 34:Z.imageSet&&G.viewportPrior()}!Z.imageSet||33!=c&&34!=c||(a.preventDefault?a.preventDefault():a.returnValue=!1)}else"keyup"==b&&(Z.keyIsDown=!1,90==c||17==c||65==c||16==c?Z.viewportCurrent.zoom("stop"):37==c||39==c?Z.viewportCurrent.pan("horizontalStop"):38==c||40==c?Z.viewportCurrent.pan("verticalStop"):
!Z.imageSet||33!=c&&34!=c||(Z.imageSet&&Z.viewportCurrent.updateView(!0),a.preventDefault?a.preventDefault():a.returnValue=!1))}}function E(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c=Z.Utils.isRightMouseButton(a),d=a.altKey;if(!("mouseover"!=b&&"mouseout"!=b&&Z.interactivityOff||"mousedown"==b&&(Z.interactivityOff||Z.coordinatesVisible&&d)||c)){Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==
document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mouseout":Z.Viewer.initializeViewerKeyDefaultListeners(!1)}var d=Z.Utils.event(a),f=d.type;if(d&&f){var l;a=Z.Utils.target(d);c=Z.Utils.relatedTarget(d);"resize"!=f&&(l=Z.Utils.getMousePosition(d));"DOMMouseScroll"==f&&(f="mousewheel");switch(f){case "mouseover":d=Z.Utils.nodeIsInViewer(a);f=Z.Utils.nodeIsInViewer(c);d&&f||(Z.viewportCurrent&&Z.viewportCurrent.showLists(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&
Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.RulerDisplay&&1<Z.rulerVisible&&Z.Ruler.setVisibility(!0),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!0),Z.mouseOutDownPoint=null);break;case "mouseout":d=Z.Utils.nodeIsInViewer(a);f=Z.Utils.nodeIsInViewer(c);d&&f||"[object HTMLSelectElement]"==a||"[object HTMLOptionElement]"==a||"[object HTMLSelectElement]"==c||"[object HTMLOptionElement]"==
c||(Z.mouseIsDown?Z.mouseOutDownPoint=new Z.Utils.Point(l.x,l.y):(Z.viewportCurrent&&Z.viewportCurrent.showLists(!1),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.RulerDisplay&&1<Z.rulerVisible&&Z.Ruler.setVisibility(!1),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1)));break;case "resize":W||(W=window.setTimeout(B,P));break;case "mousewheel":l=
Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),Z.viewportCurrent.mouseWheelHandler(l)}}if("mousedown"==b||"mousemove"==b)return!1}}}function B(a){W&&(window.clearTimeout(W),W=null,Q())}function Q(){var a=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay),b=Z.viewportCurrent.calculateZoomForResize(Z.viewportCurrent.getZoom(),Z.viewerW,Z.viewerH,a.x,a.y);G.resizeViewer(a.x,a.y,b)}var G=this,M=[];Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative",
"hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);Z.Utils.getElementStyle(Z.pageContainer);Z.ViewerDisplay.style["-webkit-touch-callout"]="none";Z.ViewerDisplay.style["-moz-user-select"]="none";Z.ViewerDisplay.style["-khtml-user-select"]="none";Z.ViewerDisplay.style["-webkit-user-select"]="none";Z.ViewerDisplay.style["-ms-user-select"]="none";Z.ViewerDisplay.style["-o-user-select"]="none";Z.ViewerDisplay.style["user-select"]=
"none";var q=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay);Z.viewerW=q.x;Z.viewerH=q.y;Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);Z.autoResize=!1!==Z.autoResize&&Z.Utils.isElementFluid(Z.pageContainer);var P=parseInt(Z.Utils.getResource("DEFAULT_AUTORESIZESKIPDURATION"),10),W;Z.mouseWheelCompleteDuration=parseInt(Z.Utils.getResource("z165"),10);if(Z.imageSet)var w=[],I=[];this.configureViewer=function(){function a(){Z.clearCallback(c,a);G.initializeViewerKeyEventListeners(!0);
Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",E);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",E);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",E);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault);k();Z.autoResize&&Z.Utils.addEventListener(window,"resize",E);G.configureComponents(Z.viewportCurrent)}function b(){Z.clearCallback("readyViewer",b);Z.Utils.getMessage()!=Z.Utils.getResource("ALERT_LOADINGIMAGESET")&&
Z.Utils.getMessage()!=Z.Utils.getResource("ALERT_LOADINGANNOTATIONS")||Z.Utils.hideMessage();Z.imageSet&&z619Delayed()}var c=Z.imageSet?"initializedViewer":"initializedViewport";Z.setCallback(c,a);Z.setCallback("readyViewer",b);if(Z.imageSet){Z.Utils.showMessage(Z.Utils.getResource("ALERT_LOADINGIMAGESET"),!1,null,"center");var d,f=new Z.NetConnector;".xml"!=Z.imageSetPath.toLowerCase().substring(Z.imageSetPath.length-4,Z.imageSetPath.length)&&(Z.imageSetPath=Z.imageSetPath+"/"+Z.Utils.getResource("DEFAULT_IMAGESETXMLFILE"));
d=Z.Utils.cacheProofPath(Z.imageSetPath);f.loadXML(d)}else Z.Viewport=new Z.ZoomifyViewport,Z.viewportCurrent=Z.Viewport};this.configureComponents=function(a){0<Z.toolbarVisible&&!Z.Toolbar&&(Z.Toolbar=new Z.ZoomifyToolbar(a));0<Z.navigatorVisible&&!Z.Navigator&&(Z.Navigator=new Z.ZoomifyNavigator(a),Z.Navigator&&Z.Navigator.z682());0<Z.rulerVisible&&!Z.Ruler&&(Z.Ruler=new Z.ZoomifyRuler(a))};this.getVersion=function(){return Z.version};this.setSizeAndPosition=function(a,b,c,d,f){Z.viewerW=a;Z.viewerH=
b;Z.ViewerDisplay.style.width=a+"px";Z.ViewerDisplay.style.height=b+"px";Z.Viewport&&Z.Viewport.getStatus("initialized")&&Z.Viewport.setSizeAndPosition(a,b,c,d);b=1==Z.toolbarPosition?b-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.Toolbar.setSizeAndPosition(a,null,null,b),Z.toolbarAutoShowHide&&Z.Toolbar.show(!0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,c,d,Z.navigatorFit),1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0));f&&
Z.Viewport.updateView(!0)};this.getImagePath=function(){return G.getImage()};this.getImage=function(){return Z.imagePath};this.setImagePath=function(a,b){"undefined"!==typeof b&&Z.Utils.stringValidate(b)&&(Z.imageProperties=b);G.setImage(a)};this.setImage=function(a,b,c){if(Z.Viewport&&(Z.Viewport.getStatus("initialized")||c)){Z.Viewport.zoomAndPanAllStop(!0);var d=!0;null!==Z.editing&&(d=!0,null!==Z.editing&&Z.Viewport.verifyEditsUnsaved()&&(d=confirm(Z.Utils.getResource("ALERT_UNSAVEDEDITSEXIST-CUSTOM"))));
d&&(Z.maskingSelection&&G.clearLabelMask(),Z.Utils.clearImageParameters(),Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.Utils.validateImagePath(),Z.Viewport.setImagePath(Z.imagePath),"undefined"!==typeof b&&(Z.parameters=Z.Utils.parseParameters(b)),c&&Z.Utils.setParameters(Z.parameters),"unconverted"==Z.tileSource?Z.Viewport.loadUnconvertedImage(a):Z.imageProperties?(a=Z.Utils.xmlConvertTextToDoc(Z.imageProperties),Z.Viewport.z602(a)):(a=new Z.NetConnector,Z.Viewport.loadImageProperties(Z.imagePath,
a)))}};this.setImageWithFade=function(a,b,c){Z.Viewport&&(Z.Viewport.getStatus("initialized")||c)&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler("out",a,b,c)},50))};this.setTourPath=function(a,b){Z.Viewport&&Z.Viewport.getStatus("initialized")&&Z.Viewport.setHotspotPath(a,b)};this.setHotspotPath=function(a,b){Z.Viewport&&Z.Viewport.getStatus("initialized")&&Z.Viewport.setHotspotPath(a,b)};this.setAnnotationPath=function(a,b){Z.Viewport&&Z.Viewport.getStatus("initialized")&&
Z.Viewport.setAnnotationPath(a,b)};this.initializePageExitEventHandler=function(){Z.Utils.addEventListener(window,"beforeunload",a)};this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(M,"state",a);return-1==a?!1:M[a].status};this.setStatus=function(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(M,"state",a);-1==d?(c=b,M[M.length]={state:a,status:b}):(!M[d].status&&b&&(c=!0),M[d].status=b);c&&(Z.Utils.validateCallback(a+"Viewer"),G.validateViewerReady(a))};this.validateViewerStatus=function(a){var b=
!0;if(Z.imageSet)for(var c=0,d=Z.imageSetLength;c<d;c++)if(!Z["Viewport"+c.toString()].getStatus(a)){b=!1;break}b&&G.setStatus(a,!0)};this.validateViewerReady=function(a){a=Z.Viewport&&Z.Viewport.getStatus("initialized")&&("unconverted"==Z.tileSource||Z.Viewport.getStatus("precacheLoaded")&&Z.Viewport.getStatus("backfillLoaded")&&Z.Viewport.getStatus("backfillDrawn"))&&Z.Viewport.getStatus("displayLoaded")&&Z.Viewport.getStatus("displayDrawn");var b=!Z.hotspots||Z.Viewport.getStatus("hotspotsLoaded"),
c=!Z.annotations||Z.Viewport.getStatus("annotationsLoaded")&&Z.Viewport.getStatus("annotationPanelInitialized"),d=0==Z.ToolbarVisible||Z.Toolbar&&Z.Toolbar.getInitialized(),f=!Z.NavigatorVisible||Z.Navigator&&Z.Navigator.getInitialized(),l=!Z.RulerVisible||Z.Ruler&&Z.Ruler.getInitialized(),k=!Z.imageSet||Z.Viewer&&Z.Viewer.getStatus("initialized")&&("unconverted"==Z.tileSource||Z.Viewer.getStatus("precacheLoaded")&&Z.Viewer.getStatus("backfillLoaded")&&Z.Viewer.getStatus("backfillDrawn"))&&Z.Viewer.getStatus("displayLoaded")&&
Z.Viewer.getStatus("displayDrawn"),w=!Z.imageSet||!Z.hotspots||Z.Viewer&&Z.Viewer.getStatus("hotspotsLoaded"),n=!Z.imageSet||!Z.annotations||Z.Viewer&&Z.Viewer.getStatus("annotationsLoaded")&&Z.Viewer.getStatus("annotationPanelInitialized");(a=a&&b&&c&&d&&f&&l&&k&&w&&n)&&Z.Viewer.setStatus("ready",!0);return a};this.parseImageSetXML=function(a,c){Z.Utils.arrayClear(w);Z.Utils.arrayClear(I);Z.imageSetListPosition=Z.Utils.getResource("DEFAULT_IMAGESETLISTPOSITION");var k=Z.Utils.getResource("DEFAULT_IMAGESETLISTSOURCE");
Z.imageSetListTitle=Z.Utils.getResource("UI_IMAGESETLISTTITLE");Z.imageSetStart=parseInt(Z.Utils.getResource("UI_IMAGESETSTART"),10);Z.imageSetLoop="1"==Z.Utils.getResource("UI_IMAGESETLOOP");Z.sliderImageSetVisible="1"==Z.Utils.getResource("UI_IMAGESETSLIDER");Z.animationAxis=Z.Utils.getResource("DEFAULT_ANIMATIONAXIS");Z.animator=Z.Utils.getResource("DEFAULT_ANIMATOR");var n=a.getElementsByTagName("SETUP")[0];if(n){var q=n.getAttribute("CHOICELIST");Z.Utils.stringValidate(q)&&(Z.imageSetListPosition=
q);q=n.getAttribute("LISTSOURCE");Z.Utils.stringValidate(q)&&(k=q);q=n.getAttribute("LISTTITLE");Z.Utils.stringValidate(q)&&(Z.imageSetListTitle=q);q=n.getAttribute("HOTSPOTPATH");Z.Utils.stringValidate(q)&&(Z.imageSetHotspotPath=q,Z.hotspotFileShared=!0);q=n.getAttribute("ANNOTATIONPATH");Z.Utils.stringValidate(q)&&(Z.imageSetAnnotationPath=q,Z.annotationFileShared=!0);q=n.getAttribute("START");Z.Utils.stringValidate(q)&&(Z.imageSetStart=parseInt(q,10)-1);q=n.getAttribute("LOOP");Z.Utils.stringValidate(q)&&
(Z.imageSetLoop="1"==q);q=n.getAttribute("SLIDER");Z.Utils.stringValidate(q)&&(Z.sliderImageSetVisible="1"==q);q=n.getAttribute("AXIS");Z.Utils.stringValidate(q)&&(Z.animationAxis=q);n=n.getAttribute("ANIMATOR");Z.Utils.stringValidate(n)&&(Z.animator=n)}for(var n=a.getElementsByTagName("animation"==c?"IMAGE":"SLIDE"),q=0,B=n.length;q<B;q++){var C=new d(n[q],q);w[w.length]=C;var t="NAME"==k?C.name:C.media.substring(C.media.lastIndexOf("/")+1,C.media.length);I[I.length]={text:t,value:C.internalID}}Z.imageSetLength=
w.length;C=Z.imageSetListPosition;k=Z.imageSetListTitle;n=I;q="0"==C?"hidden":"visible";B=parseInt(Z.Utils.getResource("DEFAULT_IMAGESETLISTWIDTH"),10);C=f(C,B,Z.viewerW,Z.viewerH);"undefined"===typeof imageSetList||null===imageSetList?(imageSetList=new Z.Utils.createSelectElement("imageSetList",k,n,B,C.x,C.y,null,q,l,"change"),Z.ViewerDisplay.appendChild(imageSetList),k=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0,imageSetList.selectedIndex=k):Z.Utils.arrayClear(n);
k=parseInt(Z.Utils.getResource("z230"),10);imageSetList.style.zIndex=(k+4).toString();b(w)};z619Delayed=function(){for(var a=0,b=Z.imageSetLength;a<b;a++){var c=Z["Viewport"+a.toString()];c.getStatus("backfillPrecached")||c.z619(!0)}};this.viewportChange=function(a){"stop"!=a?("forward"==a?Z.Viewer.viewportNext():Z.Viewer.viewportPrior(),Z.animation&&(Z.viewportChangeTimeout=window.setTimeout(function(){Z.Viewer.viewportChange(a)},10))):Z.viewportChangeTimeout&&(window.clearTimeout(Z.viewportChangeTimeout),
Z.viewportChangeTimeout=null)};this.viewportPrior=function(a){a="undefined"===typeof a||null===a?0:Math.round(a);var b=Z.imageSetLength-1;a=Z.viewportCurrentID-(1-a);0>a&&(Z.imageSetLoop?(a<-b&&(a=-(-a%b)),0>a&&(a+=b+1)):a=0);G.viewportSelect(a)};this.viewportNext=function(a){a="undefined"===typeof a||null===a?0:Math.round(a);var b=Z.imageSetLength-1;a=Z.viewportCurrentID+(1+a);a>b&&(a=Z.imageSetLoop?a%(b+1):b);G.viewportSelect(a)};this.viewportSelect=function(a,b){var d=Z.mouseIsDown||Z.buttonIsDown||
Z.keyIsDown,f=null===Z.Viewport;if("undefined"===typeof a||null===a)a=0;a=Math.abs(a);var l=a.toString(),k=Z["Viewport"+l],w=k==Z.viewportCurrent;"undefined"===typeof k||w&&!f&&d||(d=Z.viewportCurrentID.toString(),f=Z.viewportCurrent,Z.viewportCurrent=k,Z.viewportCurrentID=a,Z.viewportCurrent.setVisibility(!0),Z.Viewport=Z.viewportCurrent,w||f.setVisibility(!1),Z.viewportCurrent&&Z.viewportCurrent.getStatus("initialized")&&(Z.viewportCurrent.getViewW()!=Z.viewerW||Z.viewportCurrent.getViewH()!=Z.viewerH?
Z.viewportCurrent.syncViewportResize(Z.imageX,Z.imageY,Z.imageZ,Z.imageR):Z.viewportCurrent.updateView(!0),f&&(Z.hotspotFileShared||Z.annotationFileShared)&&(k=f.getHotspots())&&Z.viewportCurrent.setHotspots(k),Z.Navigator&&Z.Navigator.getInitialized()&&0<Z.navigatorVisible&&Z.Navigator.setViewport(Z.viewportCurrent),Z.Toolbar&&Z.Toolbar.getInitialized()&&(0<Z.toolbarVisible&&("undefined"!==typeof b&&null!==b&&b||Z.Toolbar.syncSliderToViewportImageSet(Z.viewportCurrentID),Z.Toolbar.setViewport(Z.viewportCurrent)),
Z.annotationFileShared&&(k=f.getCurrentLabel().internalID,Z.viewportCurrent.setCurrentLabel(k,!0),Z.viewportCurrent.setEditModeLabel(Z.labelMode,!0,null,!0)),Z.annotationPanelVisibleState&&(Z.annotationFileShared?Z.Toolbar.setVisibilityAnnotationPanel(!0,"0"):(Z.Toolbar.setVisibilityAnnotationPanel(!1,d),Z.Toolbar.setVisibilityAnnotationPanel(!0,l)))),Z.hotspots&&(c(!1,d),c(!0,l)),imageSetList&&(imageSetList.blur(),l=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0,imageSetList.selectedIndex=
Z.viewportCurrentID+l)))};this.setVisibilityHotspotChoiceList=function(a,b){c(a,b)};this.sizeAndPositionImageSetList=function(){var a=parseInt(Z.Utils.getResource("z65"),10)+2,a=f(Z.imageSetListPosition,a,Z.viewerW,Z.viewerH);imageSetList.style.left=a.x+"px";imageSetList.style.top=a.y+"px"};this.initializeViewerKeyEventListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",C),Z.Utils.addEventListener(document,"keyup",C)):(Z.Utils.removeEventListener(document,"keydown",C),Z.Utils.removeEventListener(document,
"keyup",C))};this.initializeViewerKeyDefaultListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)):(Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault))};this.autoResizeViewer=function(){Q()};this.resizeViewer=function(a,b,c){G.setSizeAndPosition(a,b,0,0,!1);Z.viewportCurrent.resizeViewport(Z.imageX,Z.imageY,
c,Z.imageR)};this.z586=function(a){Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteTimer&&(window.clearTimeout(Z.mouseWheelCompleteTimer),Z.mouseWheelCompleteTimer=null,Z.zooming="stop",Z.viewportCurrent.updateView(!0))}};
Z.ZoomifyViewport=function(a,b,c,d){function f(e){e=Z.Utils.getResource("z209");".xml"!=Z.slidePath.toLowerCase().substring(Z.slidePath.length-4,Z.slidePath.length)&&(Z.slidePath=Z.slidePath+"/"+e);XMLPath=Z.Utils.cacheProofPath(Z.slidePath);"undefined"!==typeof XMLPath&&Z.Utils.stringValidate(XMLPath)&&(e=new Z.NetConnector,e.loadXML(XMLPath))}function l(e,a,A,b,H,g,c,d,h,f,l){B();Z.imageW=e;Z.imageH=a;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;Wd=g;pe=c;Oc=d;yd=H;fb=A;Aa=b;null!==h&&null!==
f&&null!==l&&(Z.sourceMagnification=h,Z.focal=f,Z.quality=l);q();Q(qa,na,Bg,cf);m.validateXYZDefaults();Bb>Cg?(Vb=Oa(lc,Z.initialZ),ta&&$a.scale(Vb,Vb)):$a=bc=ta=null;cc=Oa(gb,Z.initialZ);wc=ya=Oa(ea,Z.initialZ);if(Z.useCanvas)try{xb.scale(ya,ya)}catch(k){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function initializeViewportContinue scaling canvas:  "+k)}ab&&qe();Z.screensaver&&(Z.Utils.validateCallback("screensaverStarting"),Z.Utils.functionCallWithDelay(function(){m.tourStart()},
750));ba&&(m.setDrawingColor("buttonColor0"+Ma,!0),re(Ma));Z.virtualPointerVisible&&m.showVirtualPointer();"unconverted"!=Z.tileSource&&m.z619();Xd(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0);Z.coordinatesVisible&&m.setCoordinatesDisplayVisibility(!0);Z.initialFullPage&&m.toggleFullViewMode(!0);Z.Utils.addEventListener(za,"mousedown",xa);Z.Utils.addEventListener(za,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(za,"touchstart",xa);Z.Utils.addEventListener(za,"touchmove",xa);
Z.Utils.addEventListener(za,"touchend",xa);Z.Utils.addEventListener(za,"touchcancel",xa);Z.Utils.addEventListener(za,"gesturestart",xa);Z.Utils.addEventListener(za,"gesturechange",xa);Z.Utils.addEventListener(za,"gestureend",xa);Z.Utils.addEventListener(aa,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(ua,"contextmenu",Z.Utils.preventDefault);ab&&Z.Utils.addEventListener(ab,"contextmenu",Z.Utils.preventDefault);ba&&Z.Utils.addEventListener(ba,"contextmenu",Z.Utils.preventDefault);
m.setStatus("initialized",!0);m.syncViewportRelated();Z.slideshow&&(e=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,"undefined"!==typeof Wb&&(Wb.selectedIndex=e),Vf&&!Z.slideshowPlaying?m.slideshowStart():Z.slideshowPlaying&&m.nextSlide());"multiple"==Z.imagePath&&(e=Z.hotspots?"hotspotsLoadedViewer":Z.annotations?"annotationsLoadedViewer":null,null!==e&&Z.setCallback(e,function(){window.setTimeout(function(){Z.viewportCurrent.z623()},1500)}))}function k(e,a,A,b,H,g,c,d,h,
f,l){m.setStatus("initialized",!1);n();ab&&("undefined"!==typeof uh&&Z.Utils.arrayClear(uh),"undefined"!==typeof vh&&Z.Utils.arrayClear(vh));ba&&("undefined"!==typeof p&&Z.Utils.arrayClear(p),"undefined"!==typeof Xb&&Z.Utils.arrayClear(Xb),null!=ga?(ga.parentNode.removeChild(ga),ga=null,"undefined"!==typeof pc&&Z.Utils.arrayClear(pc)):(null!=S&&(S.parentNode.removeChild(S),S=null,"undefined"!==typeof pa&&Z.Utils.arrayClear(pa)),null!=ia&&(ia.parentNode.removeChild(ia),ia=null,"undefined"!==typeof ka&&
Z.Utils.arrayClear(ka),"undefined"!==typeof db&&Z.Utils.arrayClear(db)),null!=Ia&&(Ia.parentNode.removeChild(Ia),Ia=null,"undefined"!==typeof Ga&&Z.Utils.arrayClear(Ga),"undefined"!==typeof pb&&Z.Utils.arrayClear(pb))));ta&&Z.Utils.clearDisplay(ta);aa&&Z.Utils.clearDisplay(aa);ua&&Z.Utils.clearDisplay(ua);Mb&&Z.Utils.clearDisplay(Mb);ab&&Z.Utils.clearDisplay(ab);Sa&&Z.Utils.clearDisplay(Sa);ba&&(Z.Utils.clearDisplay(ba),ba=null);se&&(m.clearAnnotationPanel(Ma),m.setStatus("annotationPanelInitialized",
!1),se=null);hb&&Z.Utils.clearDisplay(hb);Pa&&Z.Utils.clearDisplay(Pa);Xc&&Z.Utils.clearDisplay(Xc);Pc&&Z.Utils.clearDisplay(Pc);Z.imageW=e;Z.imageH=a;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;Wd=g;pe=c;Oc=d;yd=H;fb=A;Aa=b;q();Z.Utils.setParameters(Z.parameters);null!==Z.annotationPath&&(bb=Z.annotationPath,Ea=Z.annotationFolder);E();B();m.validateXYZDefaults();Bb>Cg?(Vb=Oa(lc,Z.initialZ),$a.restore(),$a.scale(Vb,Vb)):ta=bc=$a=null;cc=Oa(gb,Z.initialZ);wc=ya=Oa(ea,Z.initialZ);Z.useCanvas&&
(xb.restore(),xb.scale(ya,ya));ab&&qe();ba&&(m.setDrawingColor("buttonColor0"+Ma,!0),re(Ma));Z.virtualPointerVisible&&m.showVirtualPointer();"unconverted"!=Z.tileSource&&m.z619();m.setSizeAndPosition(qa,na,Bg,cf);Xd(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0);m.setStatus("initialized",!0);Z.Navigator&&0<Z.navigatorVisible&&Z.Navigator.setImage(Z.imagePath);Z.slideshowPlaying&&m.nextSlide()}function n(){Ec=Yc=0;"undefined"!==typeof Yb&&Z.Utils.arrayClear(Yb);"undefined"!==typeof Cb&&Z.Utils.arrayClear(Cb);
"undefined"!==typeof Zc&&Z.Utils.arrayClear(Zc);"undefined"!==typeof Fc&&Z.Utils.arrayClear(Fc);"undefined"!==typeof Ba&&Z.Utils.arrayClear(Ba);"undefined"!==typeof Db&&Z.Utils.arrayClear(Db);"undefined"!==typeof $c&&Z.Utils.arrayClear($c);"undefined"!==typeof Qc&&Z.Utils.arrayClear(Qc);"undefined"!==typeof Gc&&Z.Utils.arrayClear(Gc);"undefined"!==typeof qc&&Z.Utils.arrayClear(qc);"undefined"!==typeof ad&&Z.Utils.arrayClear(ad);"undefined"!==typeof nd&&Z.Utils.arrayClear(nd);"undefined"!==typeof Va&&
Z.Utils.arrayClear(Va);"undefined"!==typeof ib&&Z.Utils.arrayClear(ib);"undefined"!==typeof Eb&&Z.Utils.arrayClear(Eb);"undefined"!==typeof te&&Z.Utils.arrayClear(te);"undefined"!==typeof od&&Z.Utils.arrayClear(od);"undefined"!==typeof ue&&Z.Utils.arrayClear(ue);"undefined"!==typeof bd&&Z.Utils.arrayClear(bd);"undefined"!==typeof fullImageTilesAllCachedNames&&Z.Utils.arrayClear(fullImageTilesAllCachedNames)}function C(){Bb=1;gb=ea=0;qb=!1;"undefined"!==typeof cb&&Z.Utils.arrayClear(cb);"undefined"!==
typeof Wa&&Z.Utils.arrayClear(Wa);"undefined"!==typeof yb&&Z.Utils.arrayClear(yb);"undefined"!==typeof rc&&Z.Utils.arrayClear(rc);"undefined"!==typeof rb&&Z.Utils.arrayClear(rb);"undefined"!==typeof Yd&&Z.Utils.arrayClear(Yd);"undefined"!==typeof tierTileOffsetsCount&&Z.Utils.arrayClear(tierTileOffsetsCount);"undefined"!==typeof tierTileOffsetChunks&&Z.Utils.arrayClear(tierTileOffsetChunks);"undefined"!==typeof tierTileOffsetLast&&Z.Utils.arrayClear(tierTileOffsetLast);"undefined"!==typeof pd&&Z.Utils.arrayClear(pd);
"undefined"!==typeof tierTileByteCountsCount&&Z.Utils.arrayClear(tierTileByteCountsCount);"undefined"!==typeof tierTileByteCountChunks&&Z.Utils.arrayClear(tierTileByteCountChunks);"undefined"!==typeof tierTileByteCountLast&&Z.Utils.arrayClear(tierTileByteCountLast);"undefined"!==typeof Nb&&Z.Utils.arrayClear(Nb);"undefined"!==typeof Wf&&Z.Utils.arrayClear(Wf)}function E(e){if("undefined"===typeof e||null===e)e=0;e=e.toString();Z.useCanvas&&!ta&&(xc=Z.Utils.createContainerElement("canvas","oversizeDisplay"+
e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(xc),ta=xc,bc=ta.style);za||(sb=Z.Utils.createContainerElement("div","viewportContainer"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(sb),za=sb,R=za.style);aa||(ve=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay"+e,"inline-block",
"absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(ve),aa=ve,ca=aa.style);ua||(dc=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay"+e,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(dc),ua=dc,Ta=ua.style);Z.useCanvas&&(Mb||(Dg=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px",
"0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(Dg),Mb=Dg,we=Mb.style),Z.imageFiltersVisible&&(Pc||(Eg=Z.Utils.createContainerElement("canvas","imageFilterBackfillCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(Eg),Pc=Eg,Fg=Pc.style),Xc||(Gg=Z.Utils.createContainerElement("canvas","imageFilterCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px",
"normal"),sb.appendChild(Gg),Xc=Gg,Hg=Xc.style)));Z.Utils.stringValidate(Z.watermarkPath)&&!ab&&(Ig=Z.Utils.createContainerElement("div","watermarkDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(Ig),ab=Ig,xe=ab.style);Z.maskVisible&&(Z.hotspots||Z.annotations)&&!Sa&&(Jg=Z.Utils.createContainerElement("canvas","maskCanvas","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","normal"),sb.appendChild(Jg),Sa=Jg,Ob=Sa.style,Ob.display="none");if(Z.measureVisible||Z.tour&&!Z.screensaver||Z.hotspots||Z.annotations)(Z.annotations||Z.measureVisible)&&Z.useCanvas&&!hb&&(Kg=Z.Utils.createContainerElement("canvas","drawingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(Kg),hb=Kg,Hc=hb.style,null!==Z.editMode||Z.measureVisible&&!Pa)&&(Lg=Z.Utils.createContainerElement("canvas",
"editingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(Lg),Pa=Lg,Ic=Pa.style),ba||(Xf=Z.Utils.createContainerElement("div","hotspotDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(Xf),ba=Xf,Jc=ba.style,Z.Utils.addEventListener(Xf,"mousedown",Z.Utils.preventDefault)),ec||(Mg=Z.Utils.createContainerElement("canvas","savingDisplay",
"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),sb.appendChild(Mg),ec=Mg,df=ec.style,df.display="none");Z.useCanvas||(aa.innerHTML="",ua.innerHTML="");ab&&(ab.innerHTML="");ba&&(ba.innerHTML="")}function B(){ta&&($a=ta.getContext("2d"));Kc=aa.getContext("2d");xb=ua.getContext("2d");Zd=Mb.getContext("2d");hb&&(Yf=hb.getContext("2d"));Pa&&(Qa=Pa.getContext("2d"));Sa&&(Ja=Sa.getContext("2d"));ec&&(Xa=ec.getContext("2d"));Z.imageFiltersVisible&&
(ye=Xc.getContext("2d"),Ng=Pc.getContext("2d"))}function Q(e,a,A,b){if("undefined"===typeof A||null===A)A=0;if("undefined"===typeof b||null===b)b=0;Z.viewerW=qa=e;Z.viewerH=na=a;Ca=qa*wh;Da=na*wh;e=Z.imageSet?di:"unconverted"==Z.tileSource&&Z.browser==Z.browsers.FIREFOX?ei:fi;a=Z.constrainPanStrict?Z.imageW:2*Z.imageW;var H=Z.constrainPanStrict?Z.imageH:2*Z.imageH;Ca>e&&(Ca=e);Da>e&&(Da=e);Ca>a&&(Ca=a);Da>H&&(Da=H);Ca<qa&&(Ca=qa);Da<na&&(Da=na);fc=Z.Utils.roundToFixed(Ca/2,4);Pb=Z.Utils.roundToFixed(Da/
2,4);Fb=Z.Utils.roundToFixed(-((Ca-qa)/2)+A,4);Z.Utils.roundToFixed((Ca-qa)/2+A,4);Qb=Z.Utils.roundToFixed(-((Da-na)/2)+b,4);Z.Utils.roundToFixed((Da-na)/2+b,4);ta&&(ta.width=qa,ta.height=na,bc.width=qa+"px",bc.height=na+"px",bc.left="0px",bc.top="0px");za.width=Ca;za.height=Da;R.width=Ca+"px";R.height=Da+"px";R.left=Fb+"px";R.top=Qb+"px";ua.width=Ca;ua.height=Da;Ta.width=Ca+"px";Ta.height=Da+"px";ab&&(ab.width=Ca,ab.height=Da,xe.width=Ca+"px",xe.height=Da+"px");Sa&&(Sa.width=Ca,Sa.height=Da,Ob.width=
Ca+"px",Ob.height=Da+"px");ba&&(ba.width=Ca,ba.height=Da,Jc.width=Ca+"px",Jc.height=Da+"px",Og&&(A=parseInt(Z.Utils.getResource("z133"),10),A=cd(Zf,A,qa,na),Pg.left=A.x+"px",Pg.top=A.y+"px"));hb&&(hb.width=Ca,hb.height=Da,Hc.width=Ca+"px",Hc.height=Da+"px");Pa&&(Pa.width=Ca,Pa.height=Da,Ic.width=Ca+"px",Ic.height=Da+"px");se&&(A=new m.calculateAnnotationPanelDimensions(Dd,Zb,Ed,zd),b=m.calculateAnnotationPanelCoords($f,A.w,A.h,qa,na),m.sizeAndPositionAnnotationPanel(ze,A.w,A.h,b.x,b.y));Z.imageSet&&
Z.Viewer.sizeAndPositionImageSetList();if(Z.useCanvas){ta&&($a.translate(qa/2,na/2),$a.save());try{xb.translate(fc,Pb)}catch(g){Z.Utils.showMessage(Z.Utils.getResource("ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function setSizeAndPosition translating canvas:  "+g)}xb.save();Sa&&(Ja.translate(fc,Pb),Ja.save());hb&&(Yf.translate(fc,Pb),Yf.save());Pa&&(Qa.translate(fc,Pb),Qa.save())}}function G(e,a,A){if("ZoomifyImageFile"==Z.tileSource){A=parseFloat(Z.Utils.getResource("z125"));
var b=parseFloat(Z.Utils.getResource("z124"));a.loadByteRange(e,A,b,"header")}else if("ZoomifyImageFolder"==Z.tileSource)e=Z.Utils.cacheProofPath(e+"/ImageProperties.xml"),a.loadXML(e,A);else if("ZoomifyPFFFile"==Z.tileSource){var b=Z.Utils.getResource("z125"),H=Z.Utils.getResource("z123");e=e.replace(".","%2E");a.loadXML(Z.tileHandlerPathFull+"?file="+e+"&requestType=1&begin="+b+"&end="+H,A)}}function M(e,a){C();if("undefined"===typeof m.getStatus)window.setTimeout(function(){M(e,a)},100);else{var A=
null,b=null,H=null,g=null,c=null,d=null,h=null,f=null,oe=null,u=null,w=null;"ZoomifyImageFolder"==Z.tileSource?(A=parseInt(e.documentElement.getAttribute("WIDTH"),10),b=parseInt(e.documentElement.getAttribute("HEIGHT"),10),c=parseInt(e.documentElement.getAttribute("NUMTILES"),10),parseInt(e.documentElement.getAttribute("NUMIMAGES"),10),d=parseInt(e.documentElement.getAttribute("VERSION"),10),H=g=parseInt(e.documentElement.getAttribute("TILESIZE"),10)):"ZoomifyPFFFile"==Z.tileSource?(A=parseInt(e.documentElement.getAttribute("WIDTH"),
10),b=parseInt(e.documentElement.getAttribute("HEIGHT"),10),H=g=parseInt(e.documentElement.getAttribute("TILESIZE"),10),c=parseInt(e.documentElement.getAttribute("NUMTILES"),10),parseInt(e.documentElement.getAttribute("NUMIMAGES"),10),d=parseInt(e.documentElement.getAttribute("VERSION"),10),h=parseInt(e.documentElement.getAttribute("HEADERSIZE"),10),f=1060+h):"ImageServer"==Z.tileSource&&(A=parseInt(e.documentElement.getAttribute("WIDTH"),10),b=parseInt(e.documentElement.getAttribute("HEIGHT"),10),
g=e.documentElement.getAttribute("TILESIZE"),H=Z.Utils.stringValidate(g)?parseInt(g,10):fb,g=Z.Utils.stringValidate(g)?parseInt(g,10):Aa,oe=e.documentElement.getAttribute("MAGNIFICATION"),oe=Z.Utils.stringValidate(oe)?parseInt(oe,10):Z.sourceMagnification,u=e.documentElement.getAttribute("FOCAL"),u=Z.Utils.stringValidate(u)?parseInt(u,10):Z.focal,w=e.documentElement.getAttribute("QUALITY"),w=Z.Utils.stringValidate(w)?parseInt(w,10):Z.quality);null!==Z.tileW&&(H=Z.tileW);null!==Z.tileH&&(g=Z.tileH);
if("ZoomifyImageFolder"==Z.tileSource||"ImageServer"==Z.tileSource){if(null===H||isNaN(H))H=fb;if(null===g||isNaN(g))g=Aa;if(null===c||isNaN(c))c=1}!isNaN(A)&&0<A&&!isNaN(b)&&0<b&&!isNaN(H)&&0<H&&!isNaN(g)&&0<g&&0<c?m.getStatus("initialized")?k(A,b,H,g,c,d,h,f,oe,u,w,a):l(A,b,H,g,c,d,h,f,oe,u,w,a):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}}function q(){if("unconverted"==Z.tileSource)cb[0]=Z.imageW,Wa[0]=Z.imageH,
yb[0]=1,rc[0]=1,Bb=rb[0]=1;else if("ZoomifyImageFile"==Z.tileSource)for(var e=Bb-1;0<=e;e--)yb[e]=Math.ceil(cb[e]/fb),rc[e]=Math.ceil(Wa[e]/Aa),rb[e]=yb[e]*rc[e];else{for(var e=Z.imageW,a=Z.imageH;e>fb||a>Aa;)e/=2,a/=2,Bb++;for(var e=Z.imageW,a=Z.imageH,A=0,b=Bb-1;0<=b;b--)cb[b]=e,Wa[b]=a,yb[b]=Math.ceil(cb[b]/fb),rc[b]=Math.ceil(Wa[b]/Aa),rb[b]=yb[b]*rc[b],e/=2,a/=2,A+=rb[b];if(A!=yd&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){cb=[];Wa=
[];yb=[];rc=[];Bb=1;e=Z.imageW;a=Z.imageH;for(A=2;e>fb||a>Aa;)e=Math.floor(Z.imageW/A),a=Math.floor(Z.imageH/A),A*=2,e%2&&e++,a%2&&a++,Bb++;e=Z.imageW;a=Z.imageH;A=2;tileCounter=0;for(b=Bb-1;0<=b;b--)yb[b]=Math.floor(e/fb),e%fb&&yb[b]++,rc[b]=Math.floor(a/Aa),a%Aa&&rc[b]++,rb[b]=yb[b]*rc[b],tileCounter+=rb[b],cb[b]=e,Wa[b]=a,e=Math.floor(Z.imageW/A),a=Math.floor(Z.imageH/A),A*=2,e%2&&e++,a%2&&a++;e=tileCounter;e!=yd&&Z.Utils.showMessage(Z.Utils.getResource("z254"))}}}function P(e,a){for(var A=yb[e]-
1,b=rc[e]-1,H=0;H<=A;H++)for(var g=0;g<=b;g++)a[a.length]=e+"-"+H+"-"+g}function W(e){if(e){e=m.z542(gb);Z.Utils.arrayClear(Cb);Z.Utils.arrayClear(Zc);a=e.l;for(A=e.r;a<=A;a++)for(b=e.t,H=e.b;b<=H;b++)g=gb+"-"+a+"-"+b,Zc[Zc.length]=g,Cb[Cb.length]=g;ja(Cb,U,"simple","image-backfill")}else{Z.Utils.arrayClear(Fc);Z.Utils.arrayClear(Qc);Z.Utils.arrayClear(Gc);Z.Utils.arrayClear(Ba);e=m.z542();for(var a=e.l,A=e.r;a<=A;a++)for(var b=e.t,H=e.b;b<=H;b++){var g=ea+"-"+a+"-"+b;Fc[Fc.length]=g;Ba[Ba.length]=
g}if(m.getStatus("initialized")&&0<Yb.length&&(ea==Ae||ea==Be||ea==$d))for(a=0,A=Yb.length;a<A;a++)(b=Yb[a])&&b.t==ea&&b.c>=e.l&&b.c<=e.r&&b.r>=e.t&&b.r<=e.b&&(Gc[Gc.length]=b.name,Qc[Qc.length]=b,H=Z.Utils.arrayIndexOf(Ba,b.name),-1!=H&&(Ba=Z.Utils.arraySplice(Ba,H,1)));a=0;for(A=Db.length;a<A;a++)(b=Db[a])&&b.t==ea&&b.c>=e.l&&b.c<=e.r&&b.r>=e.t&&b.r<=e.b&&(H=Z.Utils.arrayIndexOf(Gc,b.name),-1==H&&(Gc[Gc.length]=b.name,Qc[Qc.length]=b),b=Z.Utils.arrayIndexOf(Ba,b.name),-1!=b&&(Ba=Z.Utils.arraySplice(Ba,
b,1)));if(0!=Ec){a=0;for(A=qc.length;a<A;a++)b=qc[a],b.alpha=1;Z.Utils.arrayClear(qc);Z.Utils.arrayClear(ad)}Yc=Ba.length;m.traceDebugValues("tilesToDisplay",null,Fc.length,Fc);m.traceDebugValues("tilesInCache",null,Gc.length,Gc);m.traceDebugValues("tilesToLoad",null,Ba.length,Ba)}}function w(e,a,A,b,H,g){H||Z.Utils.clearDisplay(e);if("canvasCopy"==b)Z.Utils.clearDisplay(ua),xb.restore(),xb.save(),xb.scale(1,1),xb.drawImage(Mb,-fc,-Pb),xb.restore(),xb.save(),xb.scale(ya,ya);else{H=m.z542(a);g=[];
if(null===A)for(var c=0,d=Qc.length;c<d;c++)g[c]=Qc[c];else if(0<A.length)for(c=0,d=A.length;c<d;c++){var h=A[c];h&&h.t==a&&(a==gb&&!qb||h.c>=H.l&&h.c<=H.r&&h.r>=H.t&&h.r<=H.b)&&(g[g.length]=A[c])}if(0<g.length)if(m.traceDebugValues("z622-"+e.id,null,null,g),"centerOut"==b)for(c=Math.floor(g.length/2),d=g.length;c<d;c++)O(e,a,g[c]),g.length-c-1!=c&&O(e,a,g[g.length-c-1]);else for(c=0,d=g.length;c<d;c++)O(e,a,g[c]);else m.traceDebugValues("No cached tiles in view");m.traceDebugValues("blankLine")}}
function I(e,a){var A=m.z542();syncTransitionCanvas();for(var b=0,H=a.length;b<H;b++){var g=a[b];g&&g.t==e&&(e==gb||g.c>=A.l&&g.c<=A.r&&g.r>=A.t&&g.r<=A.b)&&O(Mb,e,g)}}function r(e){mc=null;mc=new Image;mc.onload=L;mc.onerror=ma;mc.src=e}function L(){if("undefined"!==typeof mc){var e=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",qa+"px",na+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);e.appendChild(mc);e.removeChild(mc);
var e=null,e=mc.width,a=mc.height;m.setStatus("displayLoaded",!0);m.setStatus("displayDrawn",!0);0!=e&&0!=a?l(e,a,e,a,null,null,null,null,null,null,null):window.setTimeout(function(){L()},100)}else window.setTimeout(function(){L()},100)}function ma(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNCONVERTEDIMAGEPATHINVALID"))}function ja(e,a,A,b){var H="undefined"!==typeof b&&null!==b?"-"+b:"";if(0<e.length){m.traceDebugValues("z577"+H,null,null,e);H=(new Date).getTime();if("centerOut"==A&&4<e.length){var g=
[],c=0,d=0,h=0,f=0;for(A=0;A<e.length;A++){var l=e[A];l&&(l=new La(l,b),g[g.length]=l,0==A?(c=d=l.c,h=f=l.r):(l.c<c?c=l.c:l.c>d&&(d=l.c),l.r<h?h=l.r:l.r>f&&(f=l.r)))}e=c+(d-c)/2;b=h+(f-h)/2;for(A=0;A<g.length;A++)g[A].r-=b,g[A].c-=e;g.sort(function(e,a){return e.r*e.r+e.c*e.c-(a.r*a.r+a.c*a.c)});for(A=0;A<g.length;A++)g[A].r+=b,g[A].c+=e,ra(g[A],H,a)}else for(A=0,g=e.length;A<g;A++)if(l=e[A])l=new La(l,b),ra(l,H,a);m.traceDebugValues("blankLine")}else m.traceDebugValues("z577"+H,"No new tiles requested")}
function La(e,a){this.name=e;var A=new Y(e);this.t=A.t;this.c=A.c;this.r=A.r;this.x=Math.floor(this.c*fb);this.y=Math.floor(this.r*Aa);this.image=null;this.alpha=0;this.url=m.formatTilePath(this.t,this.c,this.r,a);this.style=this.elmt=this.loadTime=null}function Y(e){this.t=parseInt(e.substring(0,e.indexOf("-")),10);this.c=parseInt(e.substring(e.indexOf("-")+1,e.lastIndexOf("-")),10);this.r=parseInt(e.substring(e.lastIndexOf("-")+1),10)}function Lb(e,a,A){A=a+A*yb[e];a=8*A+Yd[e];A=Math.floor(A/tb);
var b=A*tb,b=b+tb>rb[e]?8*(rb[e]-b):ag;this.chunkStart=Yd[e]+A*ag;this.chunkEnd=this.chunkStart+b;this.offsetStartInChunk=a-this.chunkStart;this.chunkID=e.toString()+"-"+A.toString()}function t(e,a,A){A=a+A*yb[e];a=4*A+pd[e];A=Math.floor(A/tb);var b=A*tb,b=b+tb>rb[e]?4*(rb[e]-b):ae;this.chunkStart=pd[e]+A*ae;this.chunkEnd=this.chunkStart+b;this.bcStartInChunk=a-this.chunkStart;this.chunkID=e.toString()+"-"+A.toString()}function wa(e,a,A){Wf[e]=A;A=$b.replace(".","%2E");e=Z.tileHandlerPathFull+"?file="+
A+"&requestType=2&begin="+e+"&end="+a;(new Z.NetConnector).loadXML(e)}function da(e,a){for(var A=0,b=Va.length;A<b;A++){var H=Va[A].split(",");H[0]==e&&H[5]==a&&(void 0!==H[4]&&"image-display"==H[4]?ib[ib.length]=H[1]+"-"+H[2]+"-"+H[3]:"image-backfill"==H[4]&&(Eb[Eb.length]=H[1]+"-"+H[2]+"-"+H[3]),Va=Z.Utils.arraySplice(Va,A,1),A--,b--)}0<ib.length&&(ib.sort(),ib=Z.Utils.arrayUnique(ib),m.traceDebugValues("z637",ib),A=m.getStatus("imageSaving")?qd:Na,T(ib,A,"simple","image-display"));0<Eb.length&&
(Eb.sort(),Eb=Z.Utils.arrayUnique(Eb),A=m.getStatus("imageSaving")?Fd:U,T(Eb,A,"simple","image-backfill"))}function T(e,a,A,b){A=(new Date).getTime();for(var H=0,g=e.length;H<g;H++){var c=null;if(c=e[H])if(e=Z.Utils.arraySplice(e,H,1),H--,g--,index=Z.Utils.arrayIndexOfObjectValue(nd,"name",c),-1!=index?(c=nd[index],nd=Z.Utils.arraySplice(nd,index,1),c.url=m.formatTilePath(c.t,c.c,c.r,b)):c=new La(c,b),null!=c&&-1==c.url.indexOf("NaN"))m.traceDebugValues("z577Retry",c.name+"  "+c.url),ra(c,A,a);else if(-1==
c.url.indexOf("NaN")){var d=parseInt(Z.Utils.getResource("z268MEDIUM"),10);Z.Utils.showMessage(Z.Utils.getResource("z280-ZIF")+c.name+".jpg",!1,d,"center",!1)}}}function ra(e,a,A){var b=e.name;if("z647"==e.url.substr(0,8)){h(e);a=e.name;A=Z.Utils.arrayIndexOf(Ba,a);-1!=A&&(Ba=Z.Utils.arraySplice(Ba,A,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)A=Z.Utils.arrayIndexOf(ib,a),-1!=A&&(ib=Z.Utils.arraySplice(ib,A,1));qc[qc.length]=e;ad[ad.length]=a}else if("offsetLoading"==e.url)-1==
Z.Utils.arrayIndexOfObjectValue(nd,"name",b)&&(nd[nd.length]=e),m.traceDebugValues("z581DelayForOffset",b);else if("offsetLoading"!=e.url){var H;if(A==Na||A==qd)H="image-display";else if(A==U||A==Fd)H="image-backfill";var g=e.t==Ae&&xh||e.t==Be&&yh||e.t==$d&&zh;"image-display"==H&&g||(e.loadTime=a,m.traceDebugValues("z581-"+H,b),gi.loadImage(e.url,Z.Utils.createCallback(null,A,e),H,e))}}function Na(e,a){if(e&&a){e.image=a;var A=e.name,b=Z.Utils.arrayIndexOf(Ba,A);if(-1!=b){Ba=Z.Utils.arraySplice(Ba,
b,1);h(e);-1==Z.Utils.arrayIndexOf(ad,A)&&(ad[ad.length]=A,qc[qc.length]=e);bg||(bg=window.setInterval(K,50));Ec=Ba.length;if(0==Ec){Z.useCanvas&&0<Lc&&(Qg?(I(ea,Db),w(ua,ea,Db,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),window.setTimeout(function(){Z.Utils.clearDisplay(Mb)},200),Qg=!1):w(ua,ea,Db,"centerOut",!1,"4. Updating view: all new tiles loaded"));for(Z.imageFiltersVisible&&be&&rd(null,null,!0);$c.length>Lc&&Db.length>Lc;)$c=Z.Utils.arraySplice($c,0,1),Db=Z.Utils.arraySplice(Db,
0,1);Yc=0}m.traceDebugValues("onTileLoad",e.name,e.loadTime);m.updateProgress(Yc,Ec)}cg==dg+sd&&m.setStatus("displayLoaded",!0)}else"undefined"!==typeof a&&null!==a||console.log(Z.Utils.getResource("z280")+e.name+".jpg")}function U(e,a){if(e&&a){e.image=a;var A=e.name;Yb[Yb.length]=e;var b=Z.Utils.arrayIndexOf(Cb,A);-1!=b&&(Cb=Z.Utils.arraySplice(Cb,b,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)A=Z.Utils.arrayIndexOf(Eb,A),-1!=A&&(Eb=Z.Utils.arraySplice(Eb,A,1));e.alpha=
1;e.t==gb&&O(aa,gb,e);m.traceDebugValues("onTileBackfillPrecache",e.name);Ah==Rg&&m.setStatus("precacheLoaded",!0);m.traceDebugValues("z599",e.name);Sg<=0+Tg&&m.setStatus("backfillLoaded",!0);e.t==ea&&Na(e,a)}else if("undefined"===typeof a||null===a)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+e.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+e.name+".jpg")}function K(e){for(var a=e=0,A=qc.length;a<A;a++){var b=qc[a];b.t==ea?(0!=Ug&&1>b.alpha+Ug?b.alpha+=Ug:(b.alpha=1,e++),
O(ua,ea,b),e>=A&&(window.clearInterval(bg),bg=null,a=A)):(qc=Z.Utils.arraySplice(qc,a,1),ad=Z.Utils.arraySplice(ad,a,1),b=Z.Utils.arrayIndexOf(Ba,b.name),-1!=b&&(Ba=Z.Utils.arraySplice(Ba,b,1)),A--)}}function O(e,a,b){if("z647"!=b.url.substr(0,8)&&0!=b.image.width&&0!=b.image.height){var x=b.x,H=b.y;a=eb(a,1);Vb=Oa(lc,m.getZoom());var g=8<Vb;Z.useCanvas?(e==ua||e==Mb||e==aa&&qb?(x-=Z.imageX*a,H-=Z.imageY*a):e==ta&&(qb||g)&&(g=m.calculateCurrentCenterCoordinates(),x-=g.x*a,H-=g.y*a),Fa(e,b,x,H)):(e==
ua?(x-=Z.imageX*a-fc/ya,H-=Z.imageY*a-Pb/ya,a=ya):a=cc,b.elmt||(b.elmt=Z.Utils.createContainerElement("img"),b.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(b.elmt,"contextmenu",Z.Utils.preventDefault),b.elmt.src=b.url,b.style=b.elmt.style,b.style.position="absolute",Z.Utils.renderQuality(b,Z.renderQuality),Z.cssTransformsSupported&&(b.style[Z.cssTransformProperty+"Origin"]="0px 0px")),b.elmt.parentNode!=e&&e.appendChild(b.elmt),g=b.style,g.display="none",Z.cssTransformsSupported?
g[Z.cssTransformProperty]=["matrix(",(b.image.width/b.elmt.width*a).toFixed(8),",0,0,",(b.image.height/b.elmt.height*a).toFixed(8),",",(x*a).toFixed(8),Z.cssTransformNoUnits?",":"px,",(H*a).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(g.width=b.image.width*a+"px",g.height=b.image.height*a+"px",g.left=x*a+"px",g.top=H*a+"px"),g.display="inline-block",Z.Utils.setOpacity(b,b.alpha),2==Z.debug&&X(e,b.name,x,H,a));e==ua?(m.traceDebugValues("z507",b.name),cg==ef&&m.setStatus("displayDrawn",!0)):
(m.traceDebugValues("displayBackfillTile",b.name),Sg<=Vg&&m.setStatus("backfillDrawn",!0))}}function Fa(e,a,b,x){var H=e.getContext("2d");Z.alphaSupported&&1>a.alpha&&"transitionCanvas"!=e.id&&-1==e.id.indexOf("oversizeDisplay")&&"savingDisplay"!=e.id&&!be&&(H.globalAlpha=a.alpha);if(Z.imageFiltersVisible&&0!=gc.length)if(be)-1!=e.id.indexOf("oversizeDisplay")?H=$a:-1!=e.id.indexOf("viewportDisplay")?H=ye:-1!=e.id.indexOf("viewportBackfillDisplay")?H=Ng:-1!=e.id.indexOf("transitionCanvas")?H=ye:"savingDisplay"==
e.id&&(H=Xa),H.drawImage(a.image,b,x);else{var g;g=Z.Utils.getImageData(a.image);g=Ce(g);Z.Utils.clearDisplay(Mb);Zd.putImageData(g,0,0);H.drawImage(Mb,b,x)}else H.drawImage(a.image,b,x);Z.alphaSupported&&1>a.alpha&&"transitionCanvas"!=e.id&&"oversizeDisplay"!=e.id&&"savingDisplay"!=e.id&&!be&&(H.globalAlpha=1);2==Z.debug&&X(e,a.name,b,x,ya)}function X(e,a,b,x,H){if(Z.useCanvas){var g=parseInt(Z.Utils.getResource("z129"),10),c=parseInt(Z.Utils.getResource("z160"),10),d=parseInt(Z.Utils.getResource("z151"),
10),g=Math.round(g*H),c=2*(g<c?c:g>d?d:g);e=e.getContext("2d");e.font=c+"px verdana";e.textAlign="left";e.textBaseline="top";c=fb*H/2;H=Aa*H/2;e.fillStyle="#FFFFFF";e.fillText(a,b+c,x+H);e.fillStyle="#000000";e.fillText(a,b+c+1,x+H+1)}else{var g=parseInt(Z.Utils.getResource("z129"),10),c=parseInt(Z.Utils.getResource("z160"),10),d=parseInt(Z.Utils.getResource("z151"),10),g=Math.round(g*H),m=2*(g<c?c:g>d?d:g),c=parseInt(Z.Utils.getResource("z130"),10)*H,d=Z.Utils.createContainerElement("div","tileNameTextBox",
"inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",c+"px","nowrap"),g=document.createTextNode(a);d.appendChild(g);e.appendChild(d);Z.Utils.setTextNodeStyle(g,"white","verdana",m+"px","none","normal","normal","normal","normal","1em","center","none");var h=Z.Utils.createContainerElement("div","tileNameTextBox2","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",c+"px","nowrap"),f=document.createTextNode(a);
h.appendChild(f);e.appendChild(h);Z.Utils.setTextNodeStyle(f,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","center","none");c=parseFloat(d.style.padding);e=parseFloat(Z.Utils.getElementStyleProperty(d,"width"));isNaN(e)&&(e=parseFloat(Z.Utils.getResource("z115")),e=parseFloat(d.style.fontSize)/e,e=Math.round(parseFloat(a.length*e)));a=fb*H/2;m=Aa*H/2;d.style.left=b*H+(a-e/2-c)+"px";d.style.top=x*H+m+"px";h.style.left=1+b*H+(a-e/2-c)+"px";h.style.top=1+x*H+m+"px";Z.Utils.addEventListener(d,
"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(g);Z.Utils.addEventListener(h,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(f)}}function la(e,a){var b=eb(a,1),x=Math.floor(e.l*b/fb),c=Math.floor(e.r*b/fb),g=Math.floor(e.t*b/Aa),b=Math.floor(e.b*b/Aa);0>x&&(x=0);c>yb[a]-1&&(c=yb[a]-1);0>g&&(g=0);b>rc[a]-1&&(b=rc[a]-1);this.l=x;this.r=c;this.t=g;this.b=b}function ub(e,a,b,x,c,g,d){this.l=e+b/d;this.r=e+x/d;this.t=a+c/d;this.b=a+g/d}function zb(e,a){var b=
e-Z.Utils.getElementPosition(Z.ViewerDisplay).x,x=a-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(b,x)}function Ya(e,a){var b=zb(e,a),x=Z.Utils.getPageScroll();return new Z.Utils.Point(b.x-Fb+x.x,b.y-Qb+x.y)}function Gb(e,a,b,x){if("undefined"===typeof b||null===b)b=Z.imageZ;if("undefined"===typeof x||null===x)x=Z.imageR;0>x&&(x+=360);var c=parseFloat(R.left)+fc,g=parseFloat(R.top)+Pb;e-=c;a-=g;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(e,a,x),e=viewportClickPt.x,a=
viewportClickPt.y);return new Z.Utils.Point(Z.imageX+e/b,Z.imageY+a/b)}function yc(e,a,b,x){if("undefined"===typeof b||null===b)b=Z.imageZ;if("undefined"===typeof x||null===x)x=Z.imageR;0>x&&(x+=360);e=(Z.imageX-e)*b;a=(Z.imageY-a)*b;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(e,a,-x),e=viewportClickPt.x,a=viewportClickPt.y);return new Z.Utils.Point(Fb+e,Qb+a)}function eb(e,a){return cb[e]/Z.imageW*a}function Oa(e,a){return a/(cb[e]/Z.imageW)}function v(e,a,b,x,c){if(Z.constrainPan){x=Math.round(x);
var g=e,d=a;b="undefined"!==typeof b&&null!==b?b:Z.imageZ;x="undefined"!==typeof x&&null!==x?x:Z.imageR;0>x&&(x+=360);var m=Z.Utils.getDisplayPositionRotated(R,x),h=Z.imageW,f=Z.imageH,l=qa,k=na,u=Math.round(h*b),w=Math.round(f*b);if("container"==c){var p=b,vb=x;if("undefined"===typeof p||null===p)p=Z.imageZ;if("undefined"===typeof vb||null===vb)vb=Z.imageR;0>vb&&(vb+=360);e=(Fb-e)/p;a=(Qb-a)/p;var n,y;switch(vb){case 0:n=Z.imageX+e;y=Z.imageY+a;break;case 90:n=Z.imageX+a;y=Z.imageY-e;break;case 180:n=
Z.imageX-e;y=Z.imageY-a;break;case 270:n=Z.imageX-a,y=Z.imageY+e}a=new Z.Utils.Point(n,y);e=a.x;a=a.y}vb=Z.constrainPanStrict?0:l/2/b;y=Z.constrainPanStrict?0:k/2/b;n=(l+m.y)/2/b-vb;vb=h-(l+m.y)/2/b+vb;p=(k+m.x)/2/b-y;m=f-(k+m.x)/2/b+y;e=(0==x||180==x)&&u>l||(90==x||270==x)&&u>k||!Z.constrainPanStrict?e<=n?n:e>=vb?vb:e:h/2;a=(0==x||180==x)&&w>k||(90==x||270==x)&&w>l||!Z.constrainPanStrict?a<=p?p:a>=m?m:a:f/2;if("container"==c){var v;c=b;b=x;if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===
typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var r;switch(b){case 0:v=e-Z.imageX;r=a-Z.imageY;break;case 90:v=Z.imageY-a;r=e-Z.imageX;break;case 180:v=Z.imageX-e;r=Z.imageY-a;break;case 270:v=a-Z.imageY,r=Z.imageX-e}v=new Z.Utils.Point(Fb-v*c,Qb-r*c);e=v.x;a=v.y}e==g&&a==d||Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(e,a)}function jb(e){e>Z.maxZ?(e=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):e<Z.minZ&&(e=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return e}
function Za(e){e=90*Math.round(Math.abs(e)/90)*Z.Utils.getSign(e);-360>=e?e+=360:360<=e&&(e-=360);return e}function h(e){if(0<Lc){var a=Z.Utils.arrayIndexOf($c,e.name);-1!=a&&($c=Z.Utils.arraySplice($c,a,1),Db=Z.Utils.arraySplice(Db,a,1));$c[$c.length]=e.name;Db[Db.length]=e}}function y(){window.clearTimeout(De);De=null;ce=((new Date).getTime()-tilesTimeStart)/1E3;var e=eg*ce,e=Ad&&sd<e,a=Ad&&sd>=ff;if(2==Z.debug||3==Z.debug)Z.Utils.trace("View validation-time elapsed: "+ce),0<Ad&&(e?Z.Utils.trace("Loading delay - re-calling updateView"):
a?Z.Utils.trace("Display delay - re-calling updateView"):Z.Utils.trace("Progress slow, resetting timer")),Z.Utils.trace(""),Z.traces.scrollTop=Z.traces.scrollHeight,Z.Utils.traceTileSpeed(ce,eg);0<Ad?fg<hi?e||a?(fg+=1,m.updateView(!0)):De=window.setTimeout(y,Bh):console.log(Z.Utils.getResource("ERROR_VALIDATEVIEW")):(fg=0,Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs"))}function sc(){Z.Utils.showMessage(Z.Utils.getResource("z291")+this.url,
!0)}function u(e){if((e=Z.Utils.event(e))&&fa){Z.Utils.removeEventListener(fa,"mousedown",u);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Bd);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseup",sa);var a=Z.Utils.getMousePosition(e);kb=new Z.Utils.Point(a.x,a.y);var a=Ya(e.clientX,e.clientY),b=new Z.Utils.Point(parseFloat(fa.style.left),parseFloat(fa.style.top));e=a.x-b.x;a=a.y-b.y;fa.mouseXPrior=kb.x;fa.mouseYPrior=kb.y;fa.mouseXOffset=e;fa.mouseYOffset=a}}function Bd(e){if((e=Z.Utils.event(e))&&
fa){e=Z.Utils.getMousePosition(e);Ra=new Z.Utils.Point(e.x,e.y);var a=Ra.x-fa.mouseXPrior,b=Ra.y-fa.mouseYPrior;fa.mouseXPrior=Ra.x;fa.mouseYPrior=Ra.y;e=fa.style;a=parseFloat(e.left)+a;b=parseFloat(e.top)+b;e.left=a+"px";e.top=b+"px"}}function sa(e){if((e=Z.Utils.event(e))&&fa){e=Z.Utils.getMousePosition(e);e=Z.mouseOutDownPoint?Z.mouseOutDownPoint:new Z.Utils.Point(e.x,e.y);Z.Utils.removeEventListener(Z.ViewerDisplay,"mousemove",Bd);Z.Utils.removeEventListener(Z.ViewerDisplay,"mouseup",sa);Z.Utils.addEventListener(fa,
"mousedown",u);var a=e.x-fa.mouseXPrior,b=e.y-fa.mouseYPrior;e=fa.style;a=parseFloat(e.left)+a;b=parseFloat(e.top)+b;e.left=a+"px";e.top=b+"px"}}function gf(e){if(e=Z.Utils.event(e))if(e.preventDefault(),!Z.interactivityOff&&fa&&(e=Z.Utils.getFirstTouch(e)))e=new Z.Utils.Point(e.pageX,e.pageY),kb=new Z.Utils.Point(e.x,e.y),fa.mouseXPrior=e.x,fa.mouseYPrior=e.y}function hf(e){if(e=Z.Utils.event(e)){e.preventDefault();if(Z.interactivityOff||!Z.mousePan)return;if(fa&&(e=Z.Utils.getFirstTouch(e))){e=
new Z.Utils.Point(e.pageX,e.pageY);var a=fa.style,b=parseFloat(a.left),x=parseFloat(a.top);a.left=b+(e.x-fa.mouseXPrior)+"px";a.top=x+(e.y-fa.mouseYPrior)+"px";fa.mouseXPrior=e.x;fa.mouseYPrior=e.y}}return!1}function jf(e){if(e=Z.Utils.event(e))if(e.preventDefault(),!Z.interactivityOff&&fa&&(e=Z.Utils.getFirstTouch(e))){e=new Z.Utils.Point(e.pageX,e.pageY);e=new Z.Utils.Point(e.x,e.y);var a=e.x-fa.mouseXPrior,b=e.y-fa.mouseYPrior;e=fa.style;a=parseFloat(e.left)+a;b=parseFloat(e.top)+b;e.left=a+"px";
e.top=b+"px"}}function Ee(e){if(e=Z.Utils.event(e))if(e.preventDefault(),!Z.interactivityOff&&fa&&(e=Z.Utils.getFirstTouch(e))){e=new Z.Utils.Point(e.pageX,e.pageY);e=new Z.Utils.Point(e.x,e.y);var a=e.x-fa.mouseXPrior,b=e.y-fa.mouseYPrior;e=fa.style;a=parseFloat(e.left)+a;b=parseFloat(e.top)+b;e.left=a+"px";e.top=b+"px"}}function qe(){Cd=new Image;Ch=parseFloat(Z.Utils.getResource("z234"));Cd.url=Z.watermarkPath;Cd.onload=Fe;Cd.onerror=gg;Cd.src=Z.watermarkPath}function Fe(){if(ab)for(var e=parseFloat(Z.Utils.getResource("z235")),
a=parseFloat(Z.Utils.getResource("z237")),b=parseFloat(Z.Utils.getResource("z236")),x=m.getZoom(),c=(Z.imageW*x-ab.width)/2,g=(Z.imageH*x-ab.height)/2,d=(Z.imageW/2-Z.imageX)*x,h=(Z.imageH/2-Z.imageY)*x,f=x<e?e:x,a=Math.round(Z.imageW/a),b=Math.round(Z.imageH/b),e=m.z541(),l=Cd.width*f,f=Cd.height*f,k=0,u=0,w=1;w<=a;w++)for(var p=1;p<=b;p++){var n=Math.round(Z.imageW/(a+1)*w),vb=Math.round(Z.imageH/(b+1)*p);if(n>e.l&&n<e.r&&vb>e.t&&vb<e.b){var y=Math.round(n*x-l/2-c+d),v=Math.round(vb*x-f/2-g+h);
if(4E3<Z.imageW){vb=u+100;if(y<k+100&&v<vb)continue;k=y;u=v}var vb=l,n=f,r=v,v=Cd.cloneNode(!1);Z.Utils.setOpacity(v,Ch);v.width=vb;v.height=n;vb=Z.Utils.createContainerElement("div","wiC","inline-block","absolute","hidden",vb+"px",n+"px",y+"px",r+"px","none","0px","transparent none","0px","0px","normal");vb.appendChild(v);ab.appendChild(vb);Z.Utils.addEventListener(v,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(v,"mousedown",Z.Utils.preventDefault)}}}function gg(){Z.Utils.showMessage(Z.Utils.getResource("z292")+
this.url)}function ii(e){if(ec&&df&&Xa){var a=new m.HotspotsAllBoundingBoxInPixels,b=Math.min(a.l,0),x=Math.min(a.t,0),c=Math.max(Z.imageW,a.r),a=Math.max(Z.imageH,a.b),g=2*parseInt(Z.Utils.getResource("DEFAULT_SAVEIMAGELABELMARGIN"),10);if(0>b||0>x||c>Z.imageW||a>Z.imageH)b-=0>b?0:g,x-=0>x?0:g,c+=c>Z.imageW?0:g,a+=a>Z.imageH?0:g;var d,h;if(e){var g=e?1:m.getZoom(),f=c-b,l=a-x;e=f*g;g*=l;d=e+"px";h=g+"px";x=a-Z.imageH+x;b=parseInt(f/2-(c-Z.imageW+b)/2,10);c=parseInt(l/2-x/2,10)}else e=qa,g=na,d=qa+
"px",h=na+"px",b=qa/2,c=na/2;ec.width=e;ec.height=g;df.width=d;df.height=h;Xa.restore();Xa.save();Xa.translate(b,c);Z.Utils.colorCanvas(ec,Z.saveImageBackColor)}}function ji(e){Z.setCallback("loadingTilesFullImageComplete",function(){td(e)});Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVELOADINGDATA"),!1,"none","center");ki()}function ki(){for(var e=Bb-1;1E4<cb[e]||1E4<cb[e];)e--;var a=e>hg?$d:e>ig?Be:Ae;n();P(a,od);for(var a=0,b=od.length;a<b;a++)Ba[Ba.length]=od[a];P(e,bd);a=0;for(b=bd.length;a<
b;a++)Ba[Ba.length]=bd[a];Yc=Ba.length;ja(od,Fd,"simple","image-backfill");ja(bd,qd,"simple","image-display")}function Fd(e,a){qd(e,a,!0)}function qd(e,a,b){e&&a?(e.image=a,a=Z.Utils.arrayIndexOf(Ba,e.name),Ba=Z.Utils.arraySplice(Ba,a,1),b?(od[od.length]=e.name,te[te.length]=e):(bd[bd.length]=e.name,ue[ue.length]=e),Ec=Ba.length,0==Ec&&(Yc=0),m.traceDebugValues("onTileLoad",e.name,e.loadTime),m.updateProgress(Yc,Ec),Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVERECEIVINGTILE")+e.name,!1,
"none","center"),0==Yc&&Z.Utils.validateCallback("loadingTilesFullImageComplete")):"undefined"!==typeof a&&null!==a||console.log(Z.Utils.getResource("z280")+e.name+".jpg")}function td(e){if(Xa){if(e){for(var a=Bb-1;1E4<cb[a]||1E4<cb[a];)a--;var b=a>hg?$d:a>ig?Be:Ae;Xa.save();var x=Oa(b,1);Xa.scale(x,x);x=-cb[b]/2;b=-Wa[b]/2;Xa.translate(x,b);x=0;for(b=te.length;x<b;x++){var c=te[x];Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEDRAWINGTILE")+c.name,!1,"none","center");Fa(ec,c,c.x,c.y)}Xa.restore();
Xa.save();x=Oa(a,1);Xa.scale(x,x);x=-cb[a]/2;b=-Wa[a]/2;Xa.translate(x,b);x=0;for(b=ue.length;x<b;x++)c=ue[x],Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEDRAWINGTILE")+c.name,!1,"none","center"),Fa(ec,c,c.x,c.y)}else{Xa.save();Xa.scale(cc,cc);a=eb(gb,1);x=-(Z.imageX-Z.imageW/2)*a;b=-(Z.imageY-Z.imageH/2)*a;Xa.translate(x,b);Xa.drawImage(aa,-aa.width/2,-aa.height/2,aa.width,aa.height);Xa.restore();Xa.save();var x=m.getZoom(),a=-(Z.imageX-Z.imageW/2)*x,x=-(Z.imageY-Z.imageH/2)*x,b=cb[ea]*
ya,c=Wa[ea]*ya,g=xb.getImageData((ua.width-b)/2+a,(ua.height-c)/2+x,b,c);Xa.putImageData(g,(qa-b)/2+a,(na-c)/2+x)}Xa.restore()}e&&(a=1/m.getZoom(),Xa.scale(a,a));Wg=0;if(ba&&Jc&&"inline-block"==Jc.display&&0<p.length)for(new Ka,a=0,x=p.length;a<x;a++)Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEDRAWINGANNOTATION")+p[a].name,!1,"none","center"),"polygon"==p[a].media?Rc(p[a],null,null,null,!0,e,a):li(p[a],null,null,null,!0,e,a);else Z.Utils.validateCallback("drawLabelsOnCanvasComplete")}
function li(e,a,b,x,c,g,d){if(e.visibility&&(Z.Utils.stringValidate(e.media)||"text"==e.mediaType)){var h=new Ka,f=e.z/100;targetCtx=Xa;if("text"==e.mediaType)targetCtx.save(),b=g?Z.imageW/2:Z.imageX,x=g?Z.imageH/2:Z.imageY,hCaption=Gd(e,h),ba.appendChild(hCaption),d=new de(hCaption,f,!0),ba.removeChild(hCaption),targetCtx.translate((e.x-d.w/2/f-b)*Z.imageZ,(e.y-d.h/2/f-x)*Z.imageZ),F(e,h,a,null,null,!0),targetCtx.restore(),c&&Hd();else{var l=document.createElement("img");l.src=e.media;l.onload=function(){var b=
m.getZoom();targetCtx.save();targetCtx.translate((e.x-l.width/2/f-(g?Z.imageW/2:Z.imageX))*Z.imageZ,(e.y-l.height/2/f-(g?Z.imageH/2:Z.imageY))*Z.imageZ);targetCtx.save();var A=ya/wc,x=e.xScale/100/f/A*b,b=e.yScale/100/f/A*b;1!=x&&1!=b&&targetCtx.scale(x,b);targetCtx.drawImage(l,0,0);targetCtx.restore();F(e,h,a,null,null,!0);targetCtx.restore();c&&Hd()}}}}function F(e,a,b,x,c,g,d){if(Z.Utils.stringValidate(e.caption)||Z.Utils.stringValidate(e.captionHTML)||"measure"==e.mediaType){var h=0,m=0;c=x=0;
var f=100,l=20,k=0,u=0,w=Z.captionBoxes||"measure"==e.mediaType;captionFontWeight="normal";var v=!w,n=null,p=Xa,y=Z.Utils.stringValidate(e.textColor)?e.textColor:Mc,r=Z.Utils.stringValidate(e.backColor)?e.backColor:Dh;Z.captionBoxes&&Z.captionsColorsDefault&&"measure"!=e.mediaType&&(y=e.backColor,background=e.textColor);y==r&&("#ffffff"==y?r="#000000":"#000000"==y&&(r="#ffffff"));var q=e.z/100,h=a.currentZ/q;"polygon"!=e.media&&(0<a.constrainedScaleMin&&h<a.constrainedScaleMin&&(h=a.constrainedScaleMin),
0<a.constrainedScaleMax&&h>a.constrainedScaleMax&&(h=a.constrainedScaleMax));n=new Xg(e,a,b);m=n.w;b=n.h;n=Gd(e,a);ba.appendChild(n);a=Eh(n,e.captionPosition,m,b,Z.imageR,t,sc);"polygon"==e.media&&(u=d?Z.imageH/2:Z.imageY,k=(e.x-(d?Z.imageW/2:Z.imageX)-e.iW/2)*h,u=(e.y-u-e.iH/2)*h);var t=D==e.internalID&&"polygon"==e.media,sc=g&&"polygon"==e.mediaType,h=a.x+k,m=a.y+u;g=parseFloat(n.style.padding);d=n.style.fontSize;t=parseInt(Z.Utils.getResource("z160"),10);parseInt(d,10)<t+2&&!w&&(captionFontWeight=
"bold");w&&(l=new de(n,q,!0),h+=g,m+=g,x=a.x+k,c=a.y+u,f=l.w+2*g,l=l.h);ba.removeChild(n);w&&(p.beginPath(),p.rect(x,c,f,l),p.fillStyle=r,p.fill(),p.lineWidth=1,p.strokeStyle="#696969",p.stroke());"undefined"!==typeof e.captionHTML&&Z.Utils.stringValidate(e.captionHTML)?(e=parseInt(Z.Utils.getResource("z268MEDIUM"),10),Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEHTMLCAPTIONUNSUPPORTED"),!1,e,"center")):"undefined"!==typeof e.caption&&Z.Utils.stringValidate(e.caption)&&(p.textBaseline=
"hanging",v&&(p.fillStyle=r,p.font=captionFontWeight+"  "+d+" Verdana",p.fillText(e.caption,h+1,m+1)),p.fillStyle=y,p.font=captionFontWeight+"  "+d+" Verdana",p.fillText(e.caption,h,m))}}function Xg(e,a,b,x){var c,g,d=e.z/100;x=(x?1:a.currentZ)/d;x=x<a.constrainedScaleMin?a.constrainedScaleMin:x>a.constrainedScaleMax?a.constrainedScaleMax:x;"text"==e.mediaType?(a=new Ka,d=e.z/100,hCaption=Gd(e,a),ba.appendChild(hCaption),a=new de(hCaption,d,!0),ba.removeChild(hCaption),c=a.w,g=a.h):"icon"==e.mediaType?
(c=e.iW,g=e.iH):"polygon"==e.mediaType&&(a=Z.Utils.polygonDimensions(e.polygonPts,b),c=a.x,g=a.y);c=e.xScale/100*c*x;g=e.yScale/100*g*x;this.w=c;this.h=g}function Hd(){Wg++;Wg==p.length&&Z.Utils.validateCallback("drawLabelsOnCanvasComplete")}function re(e){if(Z.Utils.stringValidate(Rb))if(Z.simplePath)dataPath=Rb;else{if(".xml"!=Rb.toLowerCase().substring(Rb.length-4,Rb.length)){var a=Z.tour?Z.Utils.getResource("z227"):Z.Utils.getResource("z135");Rb=Rb+"/"+a}dataPath=Z.Utils.cacheProofPath(Rb)}else Z.Utils.stringValidate(bb)&&
(Z.simplePath?dataPath=bb:(".json"!=bb.toLowerCase().substring(bb.length-5,bb.length)&&".xml"!=bb.toLowerCase().substring(bb.length-4,bb.length)&&(bb=bb+"/"+Z.Utils.getResource("z69")),dataPath=Z.Utils.cacheProofPath(bb)));"undefined"!==typeof dataPath&&Z.Utils.stringValidate(dataPath)?(vpIDTemp=Z.imageSet?e:null,e=new Z.NetConnector,-1!=dataPath.toLowerCase().indexOf(".xml")?e.loadXML(dataPath,vpIDTemp):-1!=dataPath.toLowerCase().indexOf(".json")&&e.loadJSON(dataPath,vpIDTemp)):"string"===typeof Z.annotationXMLText&&
Z.Utils.stringValidate(Z.annotationXMLText)?(e=Z.Utils.xmlConvertTextToDoc(Z.annotationXMLText),m.parseAnnotationsXML(e)):"object"===typeof Z.annotationJSONObject?(e=Z.Utils.jsonConvertObjectToXMLText(Z.annotationJSONObject),e=Z.Utils.xmlConvertTextToDoc(e),m.parseAnnotationsXML(e)):Z.measureVisible&&null==Z.editMode&&(e=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),m.parseAnnotationsXML(e))}function Fh(e,a){var b=Z.Utils.arrayIndexOfObjectValue(Xb,"media",e.media);if(-1!=b){var x=new Image;x.src=e.media;
var c=x.width,x=x.height;Xb[b].element&&(e.image=Xb[b].element.cloneNode(!1));e.iW=c;e.iH=x;a&&(b=new Ka,ud(e,b))}else Xb[Xb.length]={media:e.media,element:null},b=(new Date).getTime(),c=e.media,mi.loadImage(c,Z.Utils.createCallback(null,ni,c,b),"hotspot")}function oi(e){var a;a=e.getAttribute("ID");this.id=""!=a?a:Hb("labelExternal");a=e.getAttribute("INTERNALID");this.internalID=isNaN(parseInt(a))?ga?Hb("hotspot"):Hb("label"):a;this.poiID=e.getAttribute("POIID");a=e.getAttribute("NAME");this.name=
""!=a?a:this.id;this.mediaType=e.getAttribute("MEDIATYPE");this.media=e.getAttribute("MEDIA");this.iH=this.iW=this.image=null;a=parseFloat(e.getAttribute("X"));this.x=isNaN(a)?0:a;a=parseFloat(e.getAttribute("Y"));this.y=isNaN(a)?0:a;a=parseFloat(e.getAttribute("ZOOM"));this.z=isNaN(a)?-1:a;a=parseFloat(e.getAttribute("XSCALE"));this.xScale=isNaN(a)?100:a;a=parseFloat(e.getAttribute("YSCALE"));this.yScale=isNaN(a)?100:a;this.clickURL=e.getAttribute("CLICKURL");this.urlTarget=e.getAttribute("URLTARGET");
a=e.getAttribute("ROLLOVER");this.rollover="1"==a||"true"==a;this.caption=e.getAttribute("CAPTION");this.comment=e.getAttribute("COMMENT");this.tooltip=e.getAttribute("TOOLTIP");this.user=e.getAttribute("USER");this.date=e.getAttribute("DATE");this.textColor=e.getAttribute("TEXTCOLOR");this.backColor=e.getAttribute("BACKCOLOR");this.lineColor=e.getAttribute("LINECOLOR");this.fillColor=e.getAttribute("FILLCOLOR");a=e.getAttribute("TEXTVISIBLE");this.textVisible="false"!=a&&"0"!=a&&Z.captionTextVisible;
a=e.getAttribute("BACKVISIBLE");this.backVisible="false"!=a&&"0"!=a&&Z.captionBackVisible;a=e.getAttribute("LINEVISIBLE");this.lineVisible="false"!=a&&"0"!=a&&Z.polygonLineVisible;a=e.getAttribute("FILLVISIBLE");this.fillVisible="false"!=a&&"0"!=a&&Z.polygonFillVisible;a=e.getAttribute("CAPTIONPOSITION");this.captionPosition=Z.Utils.stringValidate(a)?a:"8";a=e.getAttribute("SAVED");this.saved=null===a?!0:a;this.visibility=!0;a=e.getElementsByTagName("CAPTION");0<a.length&&(this.captionHTML=unescape(Z.Utils.xmlConvertDocToText(a[0])));
a=e.getElementsByTagName("TOOLTIP");0<a.length&&(this.tooltipHTML=unescape(Z.Utils.xmlConvertDocToText(a[0])));if(("freehand"==e.getAttribute("MEDIA")||"rectangle"==e.getAttribute("MEDIA")||"polygon"==e.getAttribute("MEDIA")||"measure"==e.getAttribute("MEDIA"))&&0<e.getElementsByTagName("POLYGON").length){a=e.getElementsByTagName("POLYGON")[0];this.polyClosed="0"!=a.getAttribute("CLOSED");a=a.getElementsByTagName("POINT");for(var b=[],x=0,c=a.length;x<c;x++){var g=parseFloat(a[x].getAttribute("X")),
g=isNaN(g)?0:g,d=parseFloat(a[x].getAttribute("Y")),d=isNaN(d)?0:d;b[b.length]={x:g,y:d}}this.polygonPts=b}this.audio=e.getAttribute("AUDIO");Z.Utils.stringValidate(this.audio)&&(Z.audioContent=!0);a=parseFloat(e.getAttribute("SHOWFOR"));this.showFor=isNaN(a)?0:a;this.transition=e.getAttribute("TRANSITION");a=parseFloat(e.getAttribute("CHANGEFOR"));this.changeFor=isNaN(a)?0:a;a=parseFloat(e.getAttribute("ROTATION"));this.rotation=isNaN(a)?0:a;this.category=e.getAttribute("CATEGORY");this.zIndex=p.length.toString()}
function ni(e,a,b){if(e&&a&&b){a=new Ka;for(var x=0,c=p.length;x<c;x++){var g=p[x];if(g.media==e){var d=Z.Utils.arrayIndexOfObjectValue(Xb,"media",e);-1!=d?Xb[d].element=b:Xb[Xb.length]={media:e,element:b};g.image=b.cloneNode(!1);g.iW=b.width;g.iH=b.height;ud(g,a)}}}else Z.Utils.showMessage(Z.Utils.getResource("z248"))}function ac(){ba&&m.getStatus("initialized")&&(Z.Utils.clearDisplay(ba),hb&&Z.Utils.clearDisplay(hb),Pa&&Z.Utils.clearDisplay(Pa),"inline-block"==Jc.display&&Gh())}function Gh(){for(var e=
new Ka,a=0,b=p.length;a<b;a++)ud(p[a],e);0==ba.childNodes.length&&(e=Z.Utils.createContainerElement("div","hotspotImmortal","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),ba.appendChild(e))}function ud(e,a){if(0<kf.length){var b=Z.Utils.arrayIndexOf(kf,e.id);if(-1==b)return}else if(0<lf.length&&(b=Z.Utils.arrayIndexOf(lf,e.internalID),-1==b))return;"polygon"==e.media&&(!Z.hotspotsDrawOnlyInView||e.x+dd>a.box.l&&e.x-dd<a.box.r&&e.y+
dd>a.box.t&&e.y-dd<a.box.b)&&Rc(e);(!Z.hotspotsDrawOnlyInView||e.x>a.box.l&&e.x<a.box.r&&e.y>a.box.t&&e.y<a.box.b)&&mf(e,a,null,Z.mouseIsDown&&0==e.rollover)}function mf(e,a,b,x){-1!=Z.Utils.arrayIndexOfObjectValue(p,"internalID",e.internalID)&&Id(e.internalID);Z.useCanvas&&"polygon"==e.media&&e.polygonPts&&(b=Z.Utils.polygonDimensions(e.polygonPts,b),e.iW=b.x,e.iH=b.y);b=!Z.Utils.stringValidate(e.media);var c=!Z.Utils.stringValidate(e.caption)&&!Z.Utils.stringValidate(e.captionHTML)&&"measure"!=
e.mediaType,g=null===e.iW||null===e.iH,d="polygon"!=e.media;if(!(b&&c&&g&&d)){g=a.currentZ/("polygon"!=e.media?e.z/100:1);"polygon"!=e.media&&(0<a.constrainedScaleMin&&g<a.constrainedScaleMin&&(g=a.constrainedScaleMin),0<a.constrainedScaleMax&&g>a.constrainedScaleMax&&(g=a.constrainedScaleMax));b=e.xScale/100*g*e.iW;var g=e.yScale/100*g*e.iH,h;"placeholder"!=e.media&&e.image&&(h=e.image,h.align="top",h.width=b,h.height=g);var f=Math.round(e.x*a.currentZ-b/2-a.displayOffsetL+a.imageOffsetL),l=Math.round(e.y*
a.currentZ-g/2-a.displayOffsetT+a.imageOffsetT),k=d=null;c||(Z.captionBoxes||"measure"==e.mediaType?d=Gd(e,a):(k=Gd(e,a,!0,!0),d=Gd(e,a,!0,!1)));a=Z.Utils.createContainerElement("div","hCloak","inline-block","absolute","visible");f=Z.Utils.createContainerElement("div","hot"+e.internalID.toString(),"inline-block","absolute","visible",b+"px",g+"px",f+"px",l+"px","none","0px","transparent none","0px","0px","normal");"TOOLTIP"==Yg?f.title=Z.Utils.stringValidate(e.tooltip)?e.tooltip:"":"COMMENT"==Yg&&
(f.title=Z.Utils.stringValidate(e.comment)?e.comment:"");if(!Z.labelClickSelect&&Z.Utils.stringValidate(e.clickURL)){if(null!==Z.editMode)Z.Utils.addEventListener(a,"mousedown",nf),Z.Utils.addEventListener(a,"touchstart",jg);else if("function"==e.clickURL)Z.Utils.addEventListener(f,"mousedown",Ge),Z.Utils.addEventListener(f,"touchstart",Ge);else{if(h){var u=document.createElement("a");u.setAttribute("href",e.clickURL);u.setAttribute("target",e.urlTarget);u.setAttribute("outline","none");u.appendChild(h);
h.style.cursor="help";h.style.border="none"}if(d){var w=document.createElement("a");w.setAttribute("href",e.clickURL);w.setAttribute("target",e.urlTarget);w.setAttribute("outline","none");k&&(w.appendChild(k),k.style.cursor="help");w.appendChild(d);d.style.cursor="help"}a.style.border="none"}null===Z.editMode&&(Z.clickZoom||Z.clickPan)&&(Z.Utils.addEventListener(a,"mousedown",kg),Z.Utils.addEventListener(a,"touchstart",lg))}!Z.labelClickSelect&&Z.Utils.stringValidate(e.clickURL)&&null===Z.editMode&&
"function"!=e.clickURL?(u&&a.appendChild(u),w&&a.appendChild(w)):(h&&a.appendChild(h),k&&a.appendChild(k),d&&a.appendChild(d));f.appendChild(a);ba.appendChild(f);f.zIndex=e.zIndex;c||!Z.captionBoxes&&"measure"!=e.mediaType||!(w=e.backColor.toString())||(h=Z.Utils.hexToRGB(w).r,u=Z.Utils.hexToRGB(w).g,w=Z.Utils.hexToRGB(w).b,d.style.backgroundColor="rgba("+h+","+u+","+w+","+pi+")");e.rollover&&(a.rollover=e.rollover);f.internalID=e.internalID;x||m.setHotspotVisibility(f,!e.rollover&&e.visibility);
k&&Zg(e,k,b,g,!0);Zg(e,d,b,g);e.rollover&&(Z.Utils.addEventListener(f,"mouseover",of),Z.Utils.addEventListener(f,"mouseout",pf));Z.Utils.addEventListener(f,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(f,"contextmenu",Z.Utils.preventDefault)}}function Ka(e){ba&&(this.box=m.z541(e),this.currentZ=m.getZoom(),this.constrainedScale=this.currentZ<He?He:this.currentZ>Ie?Ie:this.currentZ,this.constrainedScaleMax=Ie,this.constrainedScaleMin=He,this.displayOffsetL=(Z.imageW*this.currentZ-ba.width)/
2,this.displayOffsetT=(Z.imageH*this.currentZ-ba.height)/2,this.imageOffsetL=(Z.imageW/2-Z.imageX)*this.currentZ,this.imageOffsetT=(Z.imageH/2-Z.imageY)*this.currentZ)}function ed(e){if("undefined"===typeof e||null===e)e=document.getElementById("progressTextBox");var a=null;-1!=e.id.indexOf("hot")&&-1==e.id.indexOf("hotspotDisplay")?a=e:e.parentNode&&-1!=e.parentNode.id.indexOf("hot")&&-1==e.parentNode.id.indexOf("hotspotDisplay")?a=e.parentNode:e.parentNode.parentNode&&-1!=e.parentNode.parentNode.id.indexOf("hot")&&
-1==e.parentNode.parentNode.id.indexOf("hotspotDisplay")?a=e.parentNode.parentNode:e.parentNode.parentNode.parentNode&&-1!=e.parentNode.parentNode.parentNode.id.indexOf("hot")&&-1==e.parentNode.parentNode.parentNode.id.indexOf("hotspotDisplay")&&(a=e.parentNode.parentNode.parentNode);return a}function qf(e,a,b){var x=a.id.substring(3,a.id.length),x=Z.Utils.arrayIndexOfObjectValue(p,"internalID",x);if(-1!=x&&(x=p[x],"mouseup"==e.type||"mousemove"==e.type&&"polygon"==x.media)){var c=b.x-=a.mouseXOffset-
parseFloat(a.style.width)/2;a=b.y-=a.mouseYOffset-parseFloat(a.style.height)/2;a=new Z.Utils.Point(c,a);e=m.getClickCoordsInImage(e,m.getZoom(),a);"polygon"==x.media&&(Hh(x,e),fd());x.x=e.x;x.y=e.y}}function Hh(e,a){for(var b=a.x-e.x,x=a.y-e.y,c=e.polygonPts.slice(0),g=0,d=c.length;g<d;g++)c[g].x+=b,c[g].y+=x;e.polygonPts=c.slice(0)}function Gd(e,a,b,x){var c=a.currentZ/(e.z/100);0<a.constrainedScaleMin&&c<a.constrainedScaleMin&&(c=a.constrainedScaleMin);0<a.constrainedScaleMax&&c>a.constrainedScaleMax&&
(c=a.constrainedScaleMax);a=Math.round(qi*c);a="text"==e.mediaType?a:a<Ih?Ih:a>Jh?Jh:a;var c=ri*c,g=c<Kh?Kh:c>Lh?Lh:c,d,c=Z.Utils.stringValidate(e.textColor)?e.textColor:Mc;"undefined"!==typeof b&&null!==b&&b?(b="0px",d="transparent none"):e.backVisible?(b="1px",d=e.backColor):(b="1px",d=Z.Utils.stringValidate(e.backColor)?e.backColor:Dh);"undefined"!==typeof x&&null!==x&&x&&(c=e.backColor);e.textVisible||(c="transparent none");Z.captionBoxes&&Z.captionsColorsDefault&&"measure"!=e.mediaType&&(c=e.backColor,
d=e.textColor);c==d&&("#ffffff"==c?d="#000000":"#000000"==c&&(d="#ffffff"));x=Z.Utils.createContainerElement("div","captionTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","solid",b,d,"0px",g+"px","pre");"undefined"!==typeof e.captionHTML&&Z.Utils.stringValidate(e.captionHTML)?(x.innerHTML=e.captionHTML,Z.Utils.setHTMLTextDefaultCaptionStyle(x,e.captionHTML,c,"verdana",a+"px","none","normal","normal","normal","normal","1em","center","none")):"transparent none"!=c&&"undefined"!==
typeof e.caption&&Z.Utils.stringValidate(e.caption)?(e=document.createTextNode(e.caption),x.appendChild(e),Z.Utils.setTextNodeStyle(e,c,"verdana",a+"px","none","normal","normal","normal","normal","1em","center","none"),Z.Utils.disableTextInteraction(e)):"measure"==e.mediaType&&(a=new Z.Utils.Point(e.x,e.y),Jd(e,a));Z.Utils.addEventListener(x,"contextmenu",Z.Utils.preventDefault);return x}function Zg(e,a,b,x,c){a&&(e=Eh(a,e.captionPosition,b,x,Z.imageR,D==e.internalID&&"polygon"==e.media))&&(c=c?1:
0,a.style.left=e.x+c+"px",a.style.top=e.y+c+"px")}function Eh(e,a,b,c,H,g){var d,h=e.style;g=g&&("addLabel"==Z.editing||"editLabel"==Z.editing||null===Z.editMode&&"measure"==Z.labelMode)?40:0;var m=parseFloat(h.padding);d=H;a=parseInt(a,10);0>d&&(d+=360);switch(a){case 1:a=0==d?a:90==d?7:180==d?9:270==d?3:5;break;case 2:a=0==d?a:90==d?4:180==d?8:270==d?6:5;break;case 3:a=0==d?a:90==d?1:180==d?7:270==d?9:5;break;case 4:a=0==d?a:90==d?8:180==d?6:270==d?2:5;break;case 6:a=0==d?a:90==d?2:180==d?4:270==
d?8:5;break;case 7:a=0==d?a:90==d?9:180==d?3:270==d?1:5;break;case 8:a=0==d?a:90==d?6:180==d?2:270==d?4:5;break;case 9:a=0==d?a:90==d?3:180==d?1:270==d?7:5}a=a.toString();a=parseInt(a,10);0>H&&(H+=360);var f=new de(e);e=(b-f.w)/2-m;d=(c-f.h)/2-m;Z.Utils.rotateElement(h,-H);b=b/2+f.w/2+m+g;c=c/2+f.h+m+g;if(90==H||270==H)H=b,b=c,c=H;switch(a){case 1:e-=b;d-=c;break;case 2:d-=c;break;case 3:e+=b;d-=c;break;case 4:e-=b;break;case 6:e+=b;break;case 7:e-=b;d+=c;break;case 8:d+=c;break;case 9:e+=b,d+=c}return new Z.Utils.Point(e,
d)}function de(e,a,b){if("undefined"===typeof a||null===a)a=1;var c=e.style,d=m.getZoom(),g=parseFloat(Z.Utils.getElementStyleProperty(e,"width"));isNaN(g)&&(g=parseFloat(Z.Utils.getResource("z115")),g=parseFloat(c.fontSize)/g,g=Math.round(parseFloat(e.firstChild.length*g)));e=parseInt(Z.Utils.getResource("z129"),10);parseFloat(c.fontSize);var c=2*parseFloat(Z.Utils.getResource("z160")),h=2*parseFloat(Z.Utils.getResource("z151"));a=1.7*e*d/a;b&&(a<c?a=c:a>h&&(a=h));this.w=g;this.h=a}function Jd(e,
a){var b=e.polyClosed,c=e.polygonPts.slice(0),d=c.length,g="",h=0,m="",f="pixels"==Z.units?0:4,l="um"!=Z.units?Z.units:"\u03bcm";0==d?(g=si,h=Z.Utils.polygonPerimeter(c,b,a,f),captionText=g+h.toString()+"  "+l):0<d&&!b?(g=ti,h=Z.Utils.polygonPerimeter(c,b,a,f),captionText=g+h.toString()+"  "+l):(g=ui,h=Z.Utils.polygonPerimeter(c,b,a,f),m=vi,captionText=g+h.toString()+"  "+l,g=wi,h=Z.Utils.polygonArea(c,b,a,f),captionText+="\n"+g+h.toString()+"  "+l+m);e.caption=captionText;Kd&&Kd.firstChild&&Kd.firstChild.value&&
(Kd.firstChild.value=J.caption)}function $g(e,a,b,c){if("undefined"===typeof c||null===c)c=Ma;c=c.toString();var d="0"==e||Z.imageSet?"hidden":"visible",g=parseInt(Z.Utils.getResource("z133"),10),h=parseInt(Z.Utils.getResource("DEFAULT_IMAGESETLISTWIDTH"),10),g=Z.imageSet?h:g,h=cd(e,g,qa,na);"undefined"===typeof ga||null===ga?(Z["HotspotList"+c]=new Z.Utils.createSelectElement("HotspotList"+c,a,b,g,h.x,h.y,null,d,Je,"mousedown"),Og=ga=Z["HotspotList"+c],Pg=Og.style,"0"!=e&&Z.ViewerDisplay.appendChild(ga),
Z.tour&&(Ld=0),e=Z.Utils.stringValidate(Z.hotspotListTitle)&&"none"!=Z.hotspotListTitle?1:0,ga.selectedIndex=e):Z.Utils.arrayClear(b)}function Id(e){e=document.getElementById("hot"+e);null!==e&&e.parentNode.removeChild(e)}function cd(e,a,b,c){var d=Z.imageSet?13:25;switch(e){case "0":c=e=0;break;case "1":c=e=d;break;case "2":e=b-a-d;c=Z.imageSet?32:20;break;case "3":e=b-a-d;c=null!=toolbar?c-2*d:c-1.5*d;break;case "4":e=d;c=null!=toolbar?c-2*d:c-1.5*d;break;default:e=b-a,c=d}return new Z.Utils.Point(e,
c)}function Md(e){var a=e.getAttribute("MEDIATYPE"),b=e.getAttribute("MEDIA");if("symbol"==a){switch(b){case "circle":b=Ea+"/circle.png";break;case "square":b=Ea+"/square.png";break;case "triangle":b=Ea+"/triangle.png";break;case "arrowDown":b=Ea+"/arrowDown.png";break;case "arrowDownLeft":b=Ea+"/arrowDownLeft.png";break;case "arrowLeft":b=Ea+"/arrowLeft.png";break;case "arrowUpLeft":b=Ea+"/arrowUpLeft.png";break;case "arrowUp":b=Ea+"/arrowUp.png";break;case "arrowUpRight":b=Ea+"/arrowUpRight.png";
break;case "arrowRight":b=Ea+"/arrowRight.png";break;case "arrowDownRight":b=Ea+"/arrowDownRight.png";break;case "lineHorizontal":b=Ea+"/lineHorizontal.png";break;case "lineVertical":b=Ea+"/lineVertical.png";break;default:b=Ea+"/noSubstitutePlaceholder.png"}e.setAttribute("MEDIATYPE","icon");e.setAttribute("MEDIA",b);rf=!0}return e}function vd(){return Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>")}function lb(e,a){var b;switch(a){case "root":b=e.getElementsByTagName("ZAS")[0];break;case "setup":b=e.createElement("SETUP");
b.setAttribute("PANELPOSITION","2");b.setAttribute("INITIALVISIBILITY","1");b.setAttribute("POIVISIBILITY","0");b.setAttribute("LABELVISIBILITY","1");b.setAttribute("NOTEVISIBILITY","0");b.setAttribute("COMMENTVISIBILITY","1");b.setAttribute("MINSCALE","0.2");b.setAttribute("MAXSCALE","2");b.setAttribute("ZOOMIFYXMLVERSION","5");break;case "poi":b=e.createElement("POI");b.setAttribute("ID","0");b.setAttribute("NAME",Z.Utils.getResource("z43"));b.setAttribute("X","center");b.setAttribute("Y","center");
b.setAttribute("ZOOM","-1");b.setAttribute("USER",Z.Utils.getResource("z44"));b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());break;case "label":b=e.createElement("LABEL");b.setAttribute("ID","0");b.setAttribute("NAME",Z.Utils.getResource("z37"));b.setAttribute("MEDIATYPE","text");b.setAttribute("MEDIA","");b.setAttribute("X","center");b.setAttribute("Y","center");b.setAttribute("ZOOM","100");b.setAttribute("XSCALE","100");b.setAttribute("YSCALE","100");b.setAttribute("CLICKURL","");b.setAttribute("URLTARGET",
"");b.setAttribute("ROLLOVER","0");b.setAttribute("CAPTION","");b.setAttribute("COMMENT","");b.setAttribute("TOOLTIP","");b.setAttribute("USER",Z.Utils.getResource("z39"));b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());b.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25"));b.setAttribute("BACKCOLOR",Z.Utils.getResource("z22"));b.setAttribute("LINECOLOR",Z.Utils.getResource("z48"));b.setAttribute("FILLCOLOR",Z.Utils.getResource("z46"));b.setAttribute("TEXTVISIBLE",Z.Utils.getResource("z26"));
b.setAttribute("BACKVISIBLE",Z.Utils.getResource("z23"));b.setAttribute("LINEVISIBLE",Z.Utils.getResource("z49"));b.setAttribute("FILLVISIBLE",Z.Utils.getResource("z47"));b.setAttribute("CAPTIONPOSITION",Z.Utils.getResource("z24"));b.setAttribute("CATEGORY","");break;case "polygon":b=e.createElement("POLYGON");break;case "point":b=e.createElement("POINT");b.setAttribute("X","0");b.setAttribute("Y","0");break;case "note":b=e.createElement("NOTE"),b.setAttribute("ID","0"),b.setAttribute("NAME",Z.Utils.getResource("z40")),
b.setAttribute("TEXT",Z.Utils.getResource("z41")),b.setAttribute("USER",Z.Utils.getResource("z42")),b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString())}return b}function Ke(e,a,b,c,d,g){e=Z.Utils.arrayToArrayOfStrings([e,a,b,c,d,g]);e=Z.Utils.xmlConvertTextToDoc('<POI ID="'+e[0]+'" NAME="'+e[1]+'" X="'+e[2]+'" Y="'+e[3]+'" ZOOM="'+e[4]+'" INTERNALID="'+e[5]+'" ></POI>').getElementsByTagName("POI")[0];sf(e,!0)}function sf(e,a){m.saveEditsPOI(!0);a&&(e=Nd(e,"poi"));var b=Z.Utils.arrayIndexOfObjectValue(pa,
"value",e.getAttribute("INTERNALID"));-1==b&&(b=pa.length);pa[b]={text:e.getAttribute("NAME"),value:e.getAttribute("INTERNALID"),id:e.getAttribute("ID"),x:e.getAttribute("X"),y:e.getAttribute("Y"),z:e.getAttribute("ZOOM"),user:e.getAttribute("USER"),date:e.getAttribute("DATE")}}function gd(e,a){m.saveEditsNote(!0);a&&(e=Nd(e,"note"));var b=Z.Utils.arrayIndexOfObjectValue(Ga,"value",e.getAttribute("INTERNALID"));-1==b&&(b=Ga.length);Ga[b]={text:e.getAttribute("NAME"),value:e.getAttribute("INTERNALID"),
noteText:e.getAttribute("TEXT"),poiID:e.getAttribute("POIID"),id:e.getAttribute("ID"),user:e.getAttribute("USER"),date:e.getAttribute("DATE")}}function Nd(e,a){var b,c;switch(a){case "hotspot":b=ga?Hb("hotspot"):Hb("label");c=Z.Utils.stringValidate(Z.labelMode)?Z.labelMode:"";Z.Utils.stringValidate(e.getAttribute("ID"))||e.setAttribute("ID",b);var d=ga?Z.Utils.getResource("z34"):Z.Utils.getResource("z37");Z.Utils.stringValidate(e.getAttribute("NAME"))||e.setAttribute("NAME",d+b+": "+c);c=ga?Z.Utils.getResource("z33"):
Z.Utils.getResource("z35");Z.Utils.stringValidate(e.getAttribute("CAPTION"))||"freehand"==Z.editMode||Z.tourPath||Z.Utils.stringValidate(e.getAttribute("MEDIA"))||Z.Utils.stringValidate(e.getAttribute("MEDIA")&&"polygon"==e.getAttribute("MEDIA"))||e.setAttribute("CAPTION",c+b);e.setAttribute("NAME",Z.Utils.xmlUnescapeMinimal(unescape(e.getAttribute("NAME"))));e.setAttribute("CAPTION",Z.Utils.xmlUnescapeMinimal(unescape(e.getAttribute("CAPTION"))));Z.Utils.stringValidate(e.getAttribute("X"))||e.setAttribute("X",
Z.imageX.toString());Z.Utils.stringValidate(e.getAttribute("Y"))||e.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(e.getAttribute("ZOOM"))||e.setAttribute("ZOOM",(100*Z.imageZ).toString());!Z.Utils.stringValidate(e.getAttribute("CLICKURL"))&&Z.Utils.stringValidate(e.getAttribute("URL"))&&e.setAttribute("CLICKURL",e.getAttribute("URL"));isNaN(parseInt(e.getAttribute("INTERNALID"),10))&&e.setAttribute("INTERNALID",b);c=e.getAttribute("MEDIATYPE");Z.Utils.stringValidate(e.getAttribute("TEXTCOLOR"))&&
Z.Utils.stringValidate(e.getAttribute("BACKCOLOR"))&&(Z.captionsColorsDefault=!1);(Z.captionBoxes||"measure"==c)&&Z.captionsColorsDefault&&(e.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25")),e.setAttribute("BACKCOLOR",Z.Utils.getResource("z22")));break;case "poi":b=Hb("poi");Z.Utils.stringValidate(e.getAttribute("ID"))||e.setAttribute("ID",b);Z.Utils.stringValidate(e.getAttribute("NAME"))||e.setAttribute("NAME",Z.Utils.getResource("z43")+b);Z.Utils.stringValidate(e.getAttribute("X"))||e.setAttribute("X",
Z.imageX.toString());Z.Utils.stringValidate(e.getAttribute("Y"))||e.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(e.getAttribute("ZOOM"))||e.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(e.getAttribute("INTERNALID"),10))&&e.setAttribute("INTERNALID",b);break;case "label":b=Hb("label");c=Z.Utils.stringValidate(Z.labelMode)?Z.labelMode:"";Z.Utils.stringValidate(e.getAttribute("ID"))||e.setAttribute("ID",b);Z.Utils.stringValidate(e.getAttribute("NAME"))||e.setAttribute("NAME",
Z.Utils.getResource("z37")+b+": "+c);c=e.getAttribute("MEDIATYPE");d=e.getAttribute("MEDIA");Z.Utils.stringValidate(d)||"text"==c||(e.setAttribute("MEDIA",Ea+"/"+Z.Utils.getResource("z57")),e.setAttribute("MEDIATYPE",Z.Utils.getResource("z57TYPE")));Z.Utils.stringValidate(e.getAttribute("TEXTCOLOR"))&&Z.Utils.stringValidate(e.getAttribute("BACKCOLOR"))&&(Z.captionsColorsDefault=!1);(Z.captionBoxes||"measure"==c)&&Z.captionsColorsDefault&&(e.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25")),e.setAttribute("BACKCOLOR",
Z.Utils.getResource("z22")));Z.Utils.stringValidate(e.getAttribute("CAPTION"))||e.setAttribute("CAPTION",Z.Utils.getResource("z35")+b);Z.Utils.stringValidate(e.getAttribute("COMMENT"))||e.setAttribute("COMMENT",Z.Utils.getResource("CONTENT_LABELCOMMENT"));!Z.Utils.stringValidate(e.getAttribute("CLICKURL"))&&Z.Utils.stringValidate(e.getAttribute("URL"))&&e.setAttribute("CLICKURL",e.getAttribute("URL"));Z.Utils.stringValidate(e.getAttribute("X"))||e.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(e.getAttribute("Y"))||
e.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(e.getAttribute("ZOOM"))||e.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(e.getAttribute("INTERNALID"),10))&&e.setAttribute("INTERNALID",b);isNaN(parseInt(e.getAttribute("POIID"),10))&&e.setAttribute("POIID",S.options[S.selectedIndex].value);break;case "note":b=Hb("note"),Z.Utils.stringValidate(e.getAttribute("ID"))||e.setAttribute("ID",b),Z.Utils.stringValidate(e.getAttribute("NAME"))||e.setAttribute("NAME",Z.Utils.getResource("z40")+
b),Z.Utils.stringValidate(e.getAttribute("TEXT"))||e.setAttribute("TEXT",""),isNaN(parseInt(e.getAttribute("INTERNALID"),10))&&e.setAttribute("INTERNALID",b),isNaN(parseInt(e.getAttribute("POIID"),10))&&e.setAttribute("POIID",S.options[S.selectedIndex].value)}return e}function Sb(e,a){var b=0,c="",d="";if("none"!=Z.annotationSort){switch(Z.annotationSort){case "id":c=e.value.toLowerCase();d=a.value.toLowerCase();break;case "name":c=e.text.toLowerCase(),d=a.text.toLowerCase()}c<d?b=-1:c>d&&(b=1)}return b}
function Od(e){var a=e.toString();if(Z.ToolbarDisplay&&Z.Toolbar.getInitialized()){var b=Z.Toolbar.getSkinArray(),c=Z.Toolbar.getSkinSizes(),d=parseInt(Z.Utils.getResource("z63"),10);if("markup"!=Z.editMode)var g=parseFloat(Z.Utils.getResource("z86")/1.5),h=Z.Utils.getResource("z83"),f=Z.Utils.getResource("z83NOALPHA");if("markup"!=Z.editMode){var m=Z.Utils.createContainerElement("div","buttonContainerPOI"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","normal","default",!0);oa.appendChild(m);Z.Utils.addEventListener(m,"mouseover",Z.Toolbar.backgroundEventsHandler);var l=Z.Utils.createTextElement("poiNameTextElement"+a,"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(l.firstChild,"focus",Sc);Z.Utils.addEventListener(l.firstChild,"blur",hc);oa.appendChild(l);if(l=document.getElementById("textBoxFor-poiNameTextElement"+a))l.style.visibility="hidden";l=new Z.Utils.Button("buttonPOIAdd"+
a,null,Z.skinPath,b[153],b[154],b[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z373");m.appendChild(l.elmt);l=new Z.Utils.Button("buttonPOIEdit"+a,null,Z.skinPath,b[156],b[157],b[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z376");m.appendChild(l.elmt);l=new Z.Utils.Button("buttonPOIDelete"+a,null,Z.skinPath,b[147],b[148],b[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z375");m.appendChild(l.elmt);l=new Z.Utils.Button("buttonPOICancel"+a,null,Z.skinPath,b[159],b[160],
b[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z374");m.appendChild(l.elmt);Z.saveHandlerProvided&&(l=new Z.Utils.Button("buttonPOISave"+a,null,Z.skinPath,b[150],b[151],b[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z377"),m.appendChild(l.elmt));m=Z.Utils.createContainerElement("div","overlayPOIDisable"+a,"none","absolute","visible","1px","1px","0px","0px","none","0px",h,"0px","0px","normal","default",!0);Z.Utils.setOpacity(m,g,f);oa.appendChild(m)}null!==Z.editMode&&(m=Z.Utils.createTextElement("labelNameTextElement"+
a,"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off"),Z.Utils.addEventListener(m.firstChild,"focus",Sc),Z.Utils.addEventListener(m.firstChild,"blur",hc),oa.appendChild(m),"markup"!=Z.editMode&&(m=document.getElementById("textBoxFor-labelNameTextElement"+a)))&&(m.style.visibility="hidden");"markup"!=Z.editMode&&(m=Z.Utils.createContainerElement("div","buttonBorderLabel"+a,"inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",
"transparent none","0px","0px","normal","default",!0),oa.appendChild(m));l=Z.Utils.createContainerElement("div","buttonContainerLabelModes"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);oa.appendChild(l);m=Z.Utils.createContainerElement("div","buttonContainerLabelEdit"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);oa.appendChild(m);Z.Utils.addEventListener(l,
"mouseover",Z.Toolbar.backgroundEventsHandler);Z.Utils.addEventListener(m,"mouseover",Z.Toolbar.backgroundEventsHandler);h=Z.Utils.createContainerElement("div","buttonBorderLg"+a,"inline-block","absolute","hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);h.style.borderColor=Z.Utils.getResource("z87");l.appendChild(h);bblG=h;bblgS=bblG.style;h=new Z.Utils.Button("buttonViewMode"+a,null,Z.skinPath,b[101],b[102],b[103],"1px","1px","1px","1px","mouseover",
Z.Toolbar.z457,"z397");l.appendChild(h.elmt);"markup"!=Z.editMode&&(h=new Z.Utils.Button("buttonEditColorPicker"+a,null,Z.skinPath,b[104],b[105],b[106],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z334"),l.appendChild(h.elmt));h=new Z.Utils.Graphic("editModeDivider"+a,Z.skinPath,b[107],"1px","1px","1px","1px");l.appendChild(h.elmt);Z.freehandVisible&&(h=new Z.Utils.Button("buttonEditModeFreehand"+a,null,Z.skinPath,b[108],b[109],b[110],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z335"),
l.appendChild(h.elmt));Z.textVisible&&(h=new Z.Utils.Button("buttonEditModeText"+a,null,Z.skinPath,b[111],b[112],b[113],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z340"),l.appendChild(h.elmt));Z.iconVisible&&(h=new Z.Utils.Button("buttonEditModeIcon"+a,null,Z.skinPath,b[114],b[115],b[116],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z336"),l.appendChild(h.elmt));Z.rectangleVisible&&(h=new Z.Utils.Button("buttonEditModeRectangle"+a,null,Z.skinPath,b[117],b[118],b[119],"1px","1px","1px",
"1px","mouseover",Z.Toolbar.z457,"z339"),l.appendChild(h.elmt));Z.polygonVisible&&(h=new Z.Utils.Button("buttonEditModePolygon"+a,null,Z.skinPath,b[120],b[121],b[122],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z338"),l.appendChild(h.elmt));Z.measureVisible&&(h=new Z.Utils.Button("buttonEditModeMeasure"+a,null,Z.skinPath,b[46],b[47],b[48],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z337"),l.appendChild(h.elmt));var h=Z.Utils.createContainerElement("div","labelCaptionTextBox"+a,"inline-block",
"absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),k=document.createTextNode(Z.Utils.getResource("z407"));h.appendChild(k);k=Z.Utils.getResource("z35");Kd=Z.Utils.createTextElement("captionTextElement"+a,k,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(Kd.firstChild,"focus",Sc);Z.Utils.addEventListener(Kd.firstChild,"blur",hc);oa.appendChild(h);oa.appendChild(Kd);
if("markup"!=Z.editMode){h=Z.Utils.createContainerElement("div","labelTooltipTextBox"+a,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);k=document.createTextNode(Z.Utils.getResource("z413"));h.appendChild(k);k=Z.Utils.getResource("z38");k=Z.Utils.createTextElement("tooltipTextElement"+a,k,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(k.firstChild,
"focus",Sc);Z.Utils.addEventListener(k.firstChild,"blur",hc);oa.appendChild(h);oa.appendChild(k);h=Z.Utils.createContainerElement("div","labelClickURLTextBox"+a,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);k=document.createTextNode(Z.Utils.getResource("z414"));h.appendChild(k);k=Z.Utils.getResource("z36");k=Z.Utils.createTextElement("clickURLTextElement"+a,k,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",
null,1,"hidden","hidden","off");Z.Utils.addEventListener(k.firstChild,"focus",Sc);Z.Utils.addEventListener(k.firstChild,"blur",hc);oa.appendChild(h);oa.appendChild(k);for(var h=Z.Utils.getResource("z401").split(","),k=Z.Utils.getResource("z402").split(","),u=0,w=h.length;u<w;u++)labelCaptionPositionListDP[labelCaptionPositionListDP.length]={text:h[u],value:k[u]};h=new Z.Utils.createSelectElement("labelCaptionPositionList"+a,"",labelCaptionPositionListDP,1,1,0,d,"hidden",mg,"change");oa.appendChild(h);
h=Z.Utils.getResource("z405").split(",");k=Z.Utils.getResource("z406").split(",");u=0;for(w=h.length;u<w;u++)labelTargetListDP[labelTargetListDP.length]={text:h[u],value:k[u]};h=new Z.Utils.createSelectElement("labelTargetList"+a,"",labelTargetListDP,1,1,0,d,"hidden",tf,"change");oa.appendChild(h);h=Z.Utils.createContainerElement("div","labelScaleTextBox"+a,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);k=document.createTextNode(Z.Utils.getResource("z412"));
h.appendChild(k);oa.appendChild(h);h=new Z.Utils.Button("buttonLabelScaleDown"+a,null,Z.skinPath,b[27],b[28],b[29],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z358");oa.appendChild(h.elmt);h=new Z.Utils.Button("buttonLabelScaleUp"+a,null,Z.skinPath,b[24],b[25],b[26],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z359");oa.appendChild(h.elmt);h=Z.Utils.createContainerElement("div","labelRolloverTextBox"+a,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0);k=document.createTextNode(Z.Utils.getResource("z411"));h.appendChild(k);k=new Z.Utils.Checkbox("checkboxRollover"+a,"test","1px","1px","1px","1px","click",uf,"z379");oa.appendChild(h);oa.appendChild(k)}k=Z.Utils.createContainerElement("div","buttonContainerLabelColors"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);l.appendChild(k);"markup"!=Z.editMode&&(h=Z.Utils.getResource("z83"),h=Z.Utils.createContainerElement("div",
"buttonContainerLabelColorsBackground"+a,"inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",h,"0px","0px","normal",null,!0),k.appendChild(h),k.style.display="none");h=Z.Utils.createContainerElement("div","buttonBorderSm"+a,"inline-block","absolute","hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);h.style.borderColor=Z.Utils.getResource("z87");k.appendChild(h);bbsM=h;bbsmS=bbsM.style;h=new Z.Utils.Button("buttonColor0"+a,null,Z.skinPath,
b[123],b[124],b[125],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z324");k.appendChild(h.elmt);h=new Z.Utils.Button("buttonColor1"+a,null,Z.skinPath,b[126],b[127],b[128],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z325");k.appendChild(h.elmt);h=new Z.Utils.Button("buttonColor2"+a,null,Z.skinPath,b[129],b[130],b[131],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z326");k.appendChild(h.elmt);h=new Z.Utils.Button("buttonColor3"+a,null,Z.skinPath,b[132],b[133],b[134],"1px","1px",
"1px","1px","mouseover",Z.Toolbar.z457,"z327");k.appendChild(h.elmt);h=new Z.Utils.Button("buttonColor4"+a,null,Z.skinPath,b[135],b[136],b[137],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z328");k.appendChild(h.elmt);h=new Z.Utils.Button("buttonColor5"+a,null,Z.skinPath,b[138],b[139],b[140],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z329");k.appendChild(h.elmt);h=new Z.Utils.Button("buttonColor6"+a,null,Z.skinPath,b[141],b[142],b[143],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,
"z330");k.appendChild(h.elmt);h=new Z.Utils.Button("buttonColor7"+a,null,Z.skinPath,b[144],b[145],b[146],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z331");k.appendChild(h.elmt);"edit"==Z.editMode&&(h=new Z.Utils.Button("buttonLabelAdd"+a,null,Z.skinPath,b[153],b[154],b[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z353"),m.appendChild(h.elmt),h=new Z.Utils.Button("buttonLabelEdit"+a,null,Z.skinPath,b[156],b[157],b[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z356"),
m.appendChild(h.elmt),h=new Z.Utils.Button("buttonLabelCancel"+a,null,Z.skinPath,b[159],b[160],b[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z354"),m.appendChild(h.elmt));h=new Z.Utils.Button("buttonLabelDelete"+a,null,Z.skinPath,b[147],b[148],b[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z355");m.appendChild(h.elmt);Z.saveHandlerProvided&&Z.saveButtonVisible&&(h=new Z.Utils.Button("buttonLabelSave"+a,null,Z.skinPath,b[150],b[151],b[152],"1px","1px","1px","1px","mouseover",
Z.Toolbar.z457,"z357"),m.appendChild(h.elmt));var p=Z.Utils.createContainerElement("div","buttonContainerLabelIcons"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!1);oa.appendChild(p);h=Z.Utils.getResource("z83");u=Z.Utils.createContainerElement("div","buttonContainerLabelIconsBackground"+a,"inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",h,"0px","0px","normal",null,!0);p.appendChild(u);p.style.display=
"none";for(var n=Z.Utils.getResource("z403").split(","),v=Z.Utils.getResource("z404").split(","),u=0,w=n.length;u<w;u++)vf[vf.length]={text:n[u],value:v[u]};d=new Z.Utils.createSelectElement("labelIconList"+a,"",vf,1,1,0,d,"visible",wf,"change");p.appendChild(d);if("markup"!=Z.editMode){var d=Z.Utils.createContainerElement("div","overlayLabelDisable"+a,"none","absolute","visible","1px","1px","0px","0px","none","0px",h,"0px","0px","normal","default",!0),u=Z.Utils.createContainerElement("div","overlayLabelDetailDisable"+
a,"none","absolute","visible","1px","1px","0px","0px","none","0px",h,"0px","0px","normal","default",!0),w=Z.Utils.createContainerElement("div","overlayLabelDetailEditableDisable"+a,"none","absolute","visible","1px","1px","0px","0px","none","0px",h,"0px","0px","normal","default",!0),n=Z.Utils.createTextElement("overlayMessageBox"+a,"","1px","1px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null),v=Z.Utils.createContainerElement("div","overlayLabelNameEditableDisable"+
a,"none","absolute","visible","1px","1px","0px","0px","none","0px",h,"0px","0px","normal","default",!0),y=Z.Utils.createContainerElement("div","overlayLabelCaptionPositionDisable"+a,"none","absolute","visible","1px","1px","0px","0px","none","0px",h,"0px","0px","normal","default",!0);Z.Utils.setOpacity(d,g,f);Z.Utils.setOpacity(u,g,f);Z.Utils.setOpacity(w,g,f);Z.Utils.setOpacity(v,g,f);Z.Utils.setOpacity(y,g,f);oa.appendChild(d);oa.appendChild(u);oa.appendChild(w);oa.appendChild(n);oa.appendChild(v);
oa.appendChild(y);Z.overlayMessage=document.getElementById("overlayMessageBox"+a);w=document.getElementById("textBoxFor-overlayMessageBox"+a);Z.overlayMessage&&w&&(Z.overlayMessage.value=Z.Utils.getResource("z4SHORT"),Z.Utils.setHTMLTextStyle(Z.overlayMessage,"#666666","verdana","12px","none","normal","normal","normal","normal","1em","center","none"),w.style.display="none");w=parseInt(Z.Utils.getResource("z230"),10);k.style.zIndex=(w+5).toString();w=parseInt(Z.Utils.getResource("z230"),10);l.style.zIndex=
(w+6).toString();p.style.zIndex=(w+7).toString();u.style.zIndex=(w+8).toString();d.style.zIndex=(w+8).toString()}if("markup"!=Z.editMode){var r=Z.Utils.createTextElement("noteNameTextElement"+a,"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(r.firstChild,"focus",Sc);Z.Utils.addEventListener(r.firstChild,"blur",hc);oa.appendChild(r);if(r=document.getElementById("textBoxFor-noteNameTextElement"+a))r.style.visibility="hidden";
r=Z.Utils.createContainerElement("div","buttonContainerNote"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);oa.appendChild(r);Z.Utils.addEventListener(r,"mouseover",Z.Toolbar.backgroundEventsHandler);d=new Z.Utils.Button("buttonNoteAdd"+a,null,Z.skinPath,b[153],b[154],b[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z364");r.appendChild(d.elmt);d=new Z.Utils.Button("buttonNoteEdit"+a,null,Z.skinPath,b[156],
b[157],b[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z367");r.appendChild(d.elmt);d=new Z.Utils.Button("buttonNoteDelete"+a,null,Z.skinPath,b[147],b[148],b[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z366");r.appendChild(d.elmt);d=new Z.Utils.Button("buttonNoteCancel"+a,null,Z.skinPath,b[159],b[160],b[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z365");r.appendChild(d.elmt);Z.saveHandlerProvided&&(d=new Z.Utils.Button("buttonNoteSave"+a,null,Z.skinPath,b[150],
b[151],b[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z368"),r.appendChild(d.elmt));d=Z.Utils.createContainerElement("div","overlayNoteDetailDisable"+a,"none","absolute","visible","1px","1px","0px","0px","none","0px",h,"0px","0px","normal","default",!0);Z.Utils.setOpacity(d,g,f);l=Z.Utils.createContainerElement("div","overlayNoteDisable"+a,"none","absolute","visible","1px","1px","0px","0px","none","0px",h,"0px","0px","normal","default",!0);Z.Utils.setOpacity(l,g,f);oa.appendChild(d);oa.appendChild(l)}if(1==
Z.helpVisible||2==Z.helpVisible)"markup"==Z.editMode?(a=new Z.Utils.Button("buttonHelpMarkup"+a,null,Z.skinPath,b[43],b[44],b[45],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z342MARKUP"),m.appendChild(a.elmt)):"edit"==Z.editMode&&(a=new Z.Utils.Button("buttonHelpAnnotation"+a,null,Z.skinPath,b[43],b[44],b[45],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z342ANNOTATION"),r.appendChild(a.elmt));Le(c,e);xf();Z.unsavedEditsTest&&Z.Viewer.initializePageExitEventHandler()}else window.setTimeout(function(){Od(e)},
100)}function Le(e,a){var b=a.toString(),c=new m.calculateAnnotationPanelDimensions(Dd,Zb,Ed,zd),d=m.calculateAnnotationPanelCoords($f,c.w,c.h,qa,na);m.sizeAndPositionAnnotationPanel(ze,c.w,c.h,d.x,d.y);Z.annotationPanelVisibleState=!(0==Z.annotationPanelVisible||3==Z.annotationPanelVisible||4==Z.annotationPanelVisible||"0"==$f||Z.measureVisible&&null===Z.editMode||Z.imageSet&&Z.annotationFileShared&&0==a);ze.display=Z.annotationPanelVisibleState?"inline-block":"none";var g=parseInt(Z.Utils.getResource("z53"),
10),h=parseInt(Z.Utils.getResource("z51"),10),f=parseInt(Z.Utils.getResource("z55"),10),l=parseInt(Z.Utils.getResource("z54"),10),k=parseInt(Z.Utils.getResource("z56"),10),u=parseInt(Z.Utils.getResource("z62"),10);parseInt(Z.Utils.getResource("z63"),10);var w=parseInt(Z.Utils.getResource("z64"),10),p=parseInt(Z.Utils.getResource("z72SMALL"),10),n=parseInt(Z.Utils.getResource("z72"),10),r=parseFloat(Z.Utils.getResource("z82")),v=Z.Utils.getResource("z83"),y=Z.Utils.getResource("z83LIGHT"),q=Z.Utils.getResource("z83NOALPHA"),
t=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONCOMMENTHEIGHT"),10),sc=parseInt(Z.Utils.getResource("z59"),10);zd||(t=0);var I=9,L=f-24,D=0,C=Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.SAFARI?-2:0,B=0,F=0,E=0,jb=0,G=0,J=0,O=0,Bd=0,U=0;if("edit"==Z.editMode)var Za=0,N=0,Na=0,K=0,M=0,P=0,Q=0,ma=0,R=0,X=0,W=0,ja=0;var La=0;if(null===Z.editMode)Dd&&(Za=k+4,La=Za+17),Zb&&(B=La+4+2,O=B+17+4,La=zd?O+t:B+17),Ed&&(R=La+4+1,X=R+17+4);else{var sa=e[6],ha=e[7],Y=e[8],fa=e[4],Fa=e[5];15<sa&&(sa=15);
15<ha&&(ha=15);22<Y&&(Y=22);1<fa&&(fa=1);18<Fa&&(Fa=18);var aa=.75*sa,ba=.75*ha,ga=2*aa,da=k+3,oa=1.5*ha,pa=2*ha+1.5*ba,ta=sa/2,ua=(Fa-ha)/2,ka=.5*ha,ea=1.75*k,T=c.w-2*k-2,va=7*ha+46.5,V=0,wa=c.w-3*k,ya=40.5,ca=c.w-k-sa-5,la=ca-Y,xa=la-Y;if("markup"==Z.editMode){if(I=0,ea=k+4,f=c.w-2*k,L=f-24,da=0,F=2,E=ka,jb=E+ha+8.5-1,G=F+2*ha-1,rIconList=11.5,B=F+pa+8.5-4-2,J=B+15+8,O=J+15+8,Bd=zd?O+t+5:J+15+5,U=ka-5,1==Z.helpVisible||2==Z.helpVisible)D=Y}else if("edit"==Z.editMode){Dd&&(Za=k+4,N=Za+17-1,Na=ka,
La=N+oa+4);Zb&&(B=La+k,F=B+17+4+1,E=ka+1,K=E+ha+ka,jb=5,G=F+2*ha-1,rIconList=12.75,J=F+oa+8.5+4,O=J+ha+8.5,M=zd?O+t+5:J+ha+8.5,P=M+ha+8.5,Q=P+ha+8.5,ma=Q+ha+8.5,Bd=ma+ha+8.5+5,U=ka-5,La=Bd+oa+4-5);Ed&&(R=La+k,X=R+17+4+1,W=X+sc+2,ja=ka);var Ba=8.5*ga+1,re=1.8*ba}}var za=document.getElementById("annotationPanelBackground"+b);if(za){var qe=za.style;qe.width=c.w+"px";qe.height=c.h+"px";qe.backgroundColor=v;Z.Utils.setOpacity(za,r,q)}if(Dd){var Fe=document.getElementById("labelPOITextBox"+b);if(Fe&&S){var Ca=
Fe.style;Ca.width=g+"px";Ca.height="15px";Ca.left=k+"px";Ca.top=Za+3+"px";Ca.visibility="visible";Z.Utils.setTextNodeStyle(Fe,"black","verdana",u+"px","none","normal","normal","normal","normal","1em","left","none");var Da=S.style;Da.width=f+"px";Da.left=g+"px";Da.top=Za+C+"px";Da.visibility="visible";if(null!==Z.editMode){var Ga=document.getElementById("textBoxFor-poiNameTextElement"+b);if(Ga){var Ea=Ga.style;Ea.width=L+"px";Ea.height="15px";Ea.left=g+"px";Ea.top=Za+"px";Z.Utils.setTextAreaStyle(Ga,
"black","verdana",w+"px","none","normal","normal","normal","normal","1em","left","none",p+"px")}var Ka=document.getElementById("buttonContainerPOI"+b);if(Ka){var Ja=Ka.style;Ja.width=c.w+"px";Ja.height=oa+"px";Ja.left="0px";Ja.top=N+"px"}var gf=document.getElementById("buttonPOIEdit"+b);if(gf){Z.Utils.buttonSize(gf,sa,ha);var gg=gf.style;gg.left=ca+"px";gg.top=Na+"px"}var Ma=document.getElementById("buttonPOIAdd"+b);if(Ma){Z.Utils.buttonSize(Ma,sa,ha);var Qa=Ma.style;Qa.left=la+"px";Qa.top=Na+"px"}var Ha=
document.getElementById("buttonPOISave"+b);if(Ha){Z.Utils.buttonSize(Ha,sa,ha);var Oa=Ha.style;Oa.left=ca+"px";Oa.top=Na+"px";Oa.display="none"}var Pa=document.getElementById("buttonPOICancel"+b);if(Pa){Z.Utils.buttonSize(Pa,sa,ha);var Ta=Pa.style;Ta.left=Ha?la+"px":ca+"px";Ta.top=Na+"px";Ta.display="none"}var ra=document.getElementById("buttonPOIDelete"+b);if(ra){Z.Utils.buttonSize(ra,sa,ha);var Ua=ra.style;Ua.left=Ha&&Pa?xa+"px":Ha?la+"px":ca+"px";Ua.top=Na+"px";Ua.display="none"}var $a=document.getElementById("overlayPOIDisable"+
b);if($a){var Sa=$a.style;Sa.width=c.w+"px";Sa.height=k+15+ha+17+4+"px";Sa.left="0px";Sa.top="0px"}}}}if(Zb){var Xa=document.getElementById("labelLabelTextBox"+b);if(Xa){var Ra=Xa.style;Ra.width=g+"px";Ra.height="15px";Ra.left=k+"px";Ra.top=B+3+"px";Ra.visibility="visible";Z.Utils.setTextNodeStyle(Xa,"black","verdana",u+"px","none","normal","normal","normal","normal","1em","left","none")}}if(("markup"==Z.editMode||Zb)&&ia){var Va=ia.style;Va.width=f+"px";Va.left="markup"==Z.editMode?k+"px":g+"px";
Va.top=B+C+"px";Va.visibility="visible"}if("edit"==Z.editMode&&Zb||"markup"==Z.editMode){var jf=document.getElementById("textBoxFor-labelNameTextElement"+b);if(jf){var ab=jf.style;ab.width=L+"px";ab.height="15px";ab.left="markup"==Z.editMode?k+"px":g+"px";ab.top=B+"px";Z.Utils.setTextAreaStyle(jf,"black","verdana",w+"px","none","normal","normal","normal","normal","1em","left","none",p+"px")}var db=document.getElementById("buttonBorderLabel"+b);if(db){var Aa=db.style;Aa.width=T+"px";Aa.height=va+"px";
Aa.left=k+"px";Aa.top=F+"px"}var gb=document.getElementById("buttonContainerLabelModes"+b);if(gb){var bb=gb.style;bb.width=c.w-2+"px";bb.height="markup"==Z.editMode?pa+"px":.7*pa+"px";bb.left="0px";bb.top=F+"px"}var cb=document.getElementById("buttonViewMode"+b);if(cb){V+=ea+1;Z.Utils.buttonSize(cb,sa,ha);var ub=cb.style;ub.left=V+"px";ub.top=E+"px"}var ed=document.getElementById("buttonEditColorPicker"+b);if(ed){V+=Y;Z.Utils.buttonSize(ed,sa,ha);var ob=ed.style;ob.left=V+"px";ob.top=E+"px"}var fb=
document.getElementById("editModeDivider"+b);if(fb){V+=Y+1;"markup"==Z.editMode&&(V+=ta-1);Z.Utils.graphicSize(fb,fa,Fa);var qb=fb.style;qb.left=V+"px";qb.top=E-ua+"px"}var eb=document.getElementById("buttonEditModeFreehand"+b);if(eb){V+=Y-sa+4;"markup"==Z.editMode&&(V+=ta-4);Z.Utils.buttonSize(eb,sa,ha);var Ya=eb.style;Ya.left=V+"px";Ya.top=E+"px"}var kb=document.getElementById("buttonEditModeText"+b);if(kb){V+=Y;Z.Utils.buttonSize(kb,sa,ha);var mf=kb.style;mf.left=V+"px";mf.top=E+"px"}var lb=document.getElementById("buttonEditModeIcon"+
b);if(lb){V+=Y;Z.Utils.buttonSize(lb,sa,ha);var xb=lb.style;xb.left=V+"px";xb.top=E+"px"}var hb=document.getElementById("buttonEditModeRectangle"+b);if(hb){V+=Y;Z.Utils.buttonSize(hb,sa,ha);var ib=hb.style;ib.left=V+"px";ib.top=E+"px"}var mb=document.getElementById("buttonEditModePolygon"+b);if(mb){V+=Y;Z.Utils.buttonSize(mb,sa,ha);var nb=mb.style;nb.left=V+"px";nb.top=E+"px"}var pb=document.getElementById("buttonEditModeMeasure"+b);if(pb){V+=Y;Z.Utils.buttonSize(pb,sa,ha);var sb=pb.style;sb.left=
V+"px";sb.top=E+"px"}if("markup"!=Z.editMode){var Ab=document.getElementById("buttonContainerLabelColorsBackground"+b);if(Ab){var wb=Ab.style;wb.width=Ba+"px";wb.height=re+"px";wb.left="0px";wb.top="0px"}}var Bb=document.getElementById("buttonContainerLabelColors"+b);if(Bb){var Eb=Bb.style;Eb.left=da+"px";Eb.top=K+"px"}var yb=document.getElementById("buttonColor0"+b);if(yb){V=k+4+1;Z.Utils.buttonSize(yb,aa,ba);var tb=yb.style;tb.left=V+"px";tb.top=jb+"px"}var ud=document.getElementById("buttonColor1"+
b);if(ud){V+=ga;Z.Utils.buttonSize(ud,aa,ba);var Lb=ud.style;Lb.left=V+"px";Lb.top=jb+"px"}var Cb=document.getElementById("buttonColor2"+b);if(Cb){V+=ga;Z.Utils.buttonSize(Cb,aa,ba);var Ob=Cb.style;Ob.left=V+"px";Ob.top=jb+"px"}var Fb=document.getElementById("buttonColor3"+b);if(Fb){V+=ga;Z.Utils.buttonSize(Fb,aa,ba);var Qb=Fb.style;Qb.left=V+"px";Qb.top=jb+"px"}var hf=document.getElementById("buttonColor4"+b);if(hf){V+=ga;Z.Utils.buttonSize(hf,aa,ba);var Rb=hf.style;Rb.left=V+"px";Rb.top=jb+"px"}var Hb=
document.getElementById("buttonColor5"+b);if(Hb){V+=ga;Z.Utils.buttonSize(Hb,aa,ba);var Sb=Hb.style;Sb.left=V+"px";Sb.top=jb+"px"}var Ib=document.getElementById("buttonColor6"+b);if(Ib){V+=ga;Z.Utils.buttonSize(Ib,aa,ba);var Ub=Ib.style;Ub.left=V+"px";Ub.top=jb+"px"}var Kb=document.getElementById("buttonColor7"+b);if(Kb){V+=ga;Z.Utils.buttonSize(Kb,aa,ba);var Vb=Kb.style;Vb.left=V+"px";Vb.top=jb+"px"}var Yb=document.getElementById("buttonBorderLg"+b);if(Yb){var Wa=Yb.style;Wa.width=sa+"px";Wa.height=
ha+"px";cb?(Wa.left=parseFloat(ub.left)-2+"px",Wa.top=parseFloat(ub.top)-2+"px"):eb?(Wa.left=parseFloat(Ya.left)-2+"px",Wa.top=parseFloat(Ya.top)-2+"px"):hb?(Wa.left=parseFloat(ib.left)-2+"px",Wa.top=parseFloat(ib.top)-2+"px"):mb?(Wa.left=parseFloat(nb.left)-2+"px",Wa.top=parseFloat(nb.top)-2+"px"):pb&&(Wa.left=parseFloat(sb.left)-2+"px",Wa.top=parseFloat(sb.top)-2+"px")}var Gb=document.getElementById("buttonBorderSm"+b);if(Gb&&tb){var ac=Gb.style;ac.width=aa+"px";ac.height=ba+"px";ac.left=parseFloat(tb.left)-
2+"px";ac.top=parseFloat(tb.top)-2+"px"}}if("markup"==Z.editMode||"edit"==Z.editMode&&Zb){var Tb=document.getElementById("labelCaptionTextBox"+b),Xb=document.getElementById("textBoxFor-captionTextElement"+b);if(Tb&&Xb){var Db=Tb.style;Db.width=g+"px";Db.height="15px";Db.left=ea+"px";Db.top=J+3+"px";Db.visibility="markup"==Z.editMode?"hidden":"visible";Z.Utils.setTextNodeStyle(Tb,"black","verdana",u+"px","none","normal","normal","normal","normal","1em","left","none");var Nb=Xb.style;Nb.width="markup"==
Z.editMode?c.w-2*k-4+1+"px":h+I+"px";Nb.height="15px";Nb.left="markup"==Z.editMode?k+"px":ea+g+"px";Nb.top=J+"px";Z.Utils.setTextAreaStyle(Xb,"black","verdana",w+"px","none","normal","normal","normal","normal","1em","left","none",p+"px")}}var $b=document.getElementById("textBoxFor-commentTextElement"+b);if($b){var gc=c.w-2*k-(null===Z.editMode?2:3),Jb=$b.style;Jb.width=gc+"px";Jb.height=t+"px";Jb.left=k+"px";Jb.top=O+"px";Jb.visibility="visible";Z.Utils.setTextAreaStyle($b,"black","verdana",w+"px",
"none","normal","normal","normal","normal","1.5em","left","none","0px");var kc=document.getElementById("commentTextElement"+b),k=gc*(1-.98);kc.style.marginLeft=k+"px";kc.style.width="98%"}if("edit"==Z.editMode&&Zb){var bc=document.getElementById("labelTooltipTextBox"+b),cc=document.getElementById("textBoxFor-tooltipTextElement"+b);if(bc&&cc){var Mb=bc.style;Mb.width=g+"px";Mb.height="15px";Mb.left=ea+"px";Mb.top=M+3+"px";Mb.visibility="visible";Z.Utils.setTextNodeStyle(bc,"black","verdana",u+"px",
"none","normal","normal","normal","normal","1em","left","none");var rb=cc.style;rb.width=h+I+"px";rb.height="15px";rb.left=ea+g+"px";rb.top=M+"px";Z.Utils.setTextAreaStyle(cc,"black","verdana",w+"px","none","normal","normal","normal","normal","1em","left","none",p+"px")}var ec=document.getElementById("labelClickURLTextBox"+b),fc=document.getElementById("textBoxFor-clickURLTextElement"+b);if(ec&&fc){var Pb=ec.style;Pb.width=g+"px";Pb.height="15px";Pb.left=ea+"px";Pb.top=P+3+"px";Pb.visibility="visible";
Z.Utils.setTextNodeStyle(ec,"black","verdana",u+"px","none","normal","normal","normal","normal","1em","left","none");rb=fc.style;rb.width=h+I+"px";rb.height="15px";rb.left=ea+g+"px";rb.top=P+"px";Z.Utils.setTextAreaStyle(fc,"black","verdana",w+"px","none","normal","normal","normal","normal","1em","left","none",p+"px")}var mc=document.getElementById("labelCaptionPositionList"+b);if(mc){var qd=mc.style;qd.width=l+"px";qd.left=ea+"px";qd.top=Q+"px";qd.visibility="visible"}var zb=document.getElementById("labelTargetList"+
b);if(zb){var Ee=zb.style;Ee.width=l+"px";Ee.left=ea+l+Y-sa+"px";Ee.top=Q+"px";Ee.visibility="visible"}var ic=document.getElementById("labelScaleTextBox"+b),jc=document.getElementById("buttonLabelScaleDown"+b),lc=document.getElementById("buttonLabelScaleUp"+b);if(ic&&jc&&lc){var V=ea+12,Wb=ic.style;Wb.width=g+"px";Wb.height="15px";Wb.left=V+"px";Wb.top=ma+3+"px";Wb.visibility="visible";Z.Utils.setTextNodeStyle(ic,"black","verdana",u+"px","none","normal","normal","normal","normal","1em","left","none");
V+=g-10;Z.Utils.buttonSize(jc,sa,ha);var pc=jc.style;pc.left=V+"px";pc.top=ma+"px";V+=Y;Z.Utils.buttonSize(lc,sa,ha);var rc=lc.style;rc.left=V+"px";rc.top=ma+"px";V+=Y+3}var nc=document.getElementById("labelRolloverTextBox"+b),tc=document.getElementById("containerFor-checkboxRollover"+b),qc=document.getElementById("checkboxRollover"+b);if(nc&&tc&&qc){var dc=nc.style;dc.width=g+"px";dc.height="15px";dc.left=V+"px";dc.top=ma+3+"px";dc.visibility="visible";Z.Utils.setTextNodeStyle(nc,"black","verdana",
u+"px","none","normal","normal","normal","normal","1em","left","none");var V=V+(g-1),Hd=tc.style;Hd.width=1.5*sa+"px";Hd.height=1.5*ha+"px";Hd.left=V+3+"px";Hd.top=ma-3+"px";qc.width=sa;qc.height=ha}}if("edit"==Z.editMode&&Zb||"markup"==Z.editMode){var Bc=document.getElementById("buttonContainerLabelEdit"+b);if(Bc){var oc=Bc.style;oc.width=c.w+"px";oc.height=oa+"px";oc.left="0px";oc.top=Bd+"px"}}if("edit"==Z.editMode&&Zb){var vc=document.getElementById("buttonLabelEdit"+b);if(vc){Z.Utils.buttonSize(vc,
sa,ha);var Cc=vc.style;Cc.left=ca+"px";Cc.top=U+"px"}var wc=document.getElementById("buttonLabelAdd"+b);if(wc){Z.Utils.buttonSize(wc,sa,ha);var Jc=wc.style;Jc.left=la+"px";Jc.top=U+"px"}}if("edit"==Z.editMode&&Zb||"markup"==Z.editMode){var hc=document.getElementById("buttonLabelSave"+b);if(hc){Z.Utils.buttonSize(hc,sa,ha);var zc=hc.style;zc.left=ca-D+"px";zc.top=U+"px";"markup"!=Z.editMode&&(zc.display="none")}}if("edit"==Z.editMode&&Zb){var uc=document.getElementById("buttonLabelCancel"+b);if(uc){Z.Utils.buttonSize(uc,
sa,ha);var Hc=uc.style;Hc.left=hc?la+"px":ca+"px";Hc.top=U+"px";"markup"!=Z.editMode&&(Hc.display="none")}}if("edit"==Z.editMode&&Zb||"markup"==Z.editMode){var Ic=document.getElementById("buttonLabelDelete"+b);if(Ic){Z.Utils.buttonSize(Ic,sa,ha);var Kc=Ic.style;Kc.left=hc&&uc?xa-D+"px":hc?la-D+"px":ca-D+"px";Kc.top=U+"px";"markup"!=Z.editMode&&(Kc.display="none")}}if("markup"==Z.editMode){var Lc=document.getElementById("buttonHelpMarkup"+b);if(Lc){Z.Utils.buttonSize(Lc,sa,ha);var yc=Lc.style;yc.left=
ca+"px";yc.top=U+"px"}}if("edit"==Z.editMode&&Zb||"markup"==Z.editMode){var Sc=document.getElementById("buttonContainerLabelIcons"+b);if(Sc){var Tc=Sc.style;Tc.left=k/2+"px";Tc.top=G+"px"}var Wc=document.getElementById("buttonContainerLabelIconsBackground"+b);if(Wc){var Dc=Wc.style;Dc.width=wa+2*k-1+"px";Dc.height=ya+"px";Dc.left="0px";Dc.top="0px"}var Xc=document.getElementById("labelIconList"+b);if(Xc){var Pc=Xc.style;Pc.width=wa+"px";Pc.left=k+"px";Pc.top=rIconList+"px"}}if("edit"==Z.editMode&&
Zb){var $c=document.getElementById("overlayLabelDisable"+b);if($c){var Gc=$c.style;Gc.width=c.w+"px";Gc.height=va+2*ka+2*ha+8+"px";Gc.left="0px";Gc.top=B+"px"}var ad=document.getElementById("overlayLabelDetailDisable"+b);if(ad&&Aa){var xc=ad.style;xc.width=parseFloat(Aa.width)+2+"px";xc.height=parseFloat(Aa.height)+2+"px";xc.left=parseFloat(Aa.left)+"px";xc.top=parseFloat(Aa.top)+"px";xc.display="inline-block"}var cd=document.getElementById("overlayLabelDetailEditableDisable"+b);if(cd){var Mc=cd.style;
Mc.width=parseFloat(Aa.width)+"px";Mc.height=parseFloat(Aa.height)+"px";Mc.left=parseFloat(Aa.left)+1+"px";Mc.top=parseFloat(Aa.top)+1+"px"}var fd=document.getElementById("overlayMessageBox"+b),hd=document.getElementById("textBoxFor-overlayMessageBox"+b);if(fd&&hd){var Ac=hd.style;Ac.width=T-50+"px";Ac.height="25px";Ac.left=parseFloat(Aa.left)+21+"px";Ac.top=parseFloat(Aa.top)+45+"px";Ac.backgroundColor=y;fd.style.backgroundColor=y}var jd=document.getElementById("overlayLabelNameEditableDisable"+
b);if(jd){var Nc=jd.style;Nc.width=c.w+"px";Nc.height="25px";Nc.left="0px";Nc.top=B-4+"px"}var ld=document.getElementById("overlayLabelCaptionPositionDisable"+b);if(ld){var Oc=ld.style;Oc.width=c.w/2-12+"px";Oc.height="24.5px";Oc.left=k+1+"px";Oc.top=parseFloat(qd.top)-4+"px"}}if(Ed){var Yc=document.getElementById("labelNoteTextBox"+b),Zc=document.getElementById("textBoxFor-noteTextElement"+b);if(Yc&&Ia&&Zc){var Fc=Yc.style;Fc.width=g+"px";Fc.height="15px";Fc.left=k+"px";Fc.top=R+3+"px";Fc.visibility=
"visible";Z.Utils.setTextNodeStyle(Yc,"black","verdana",u+"px","none","normal","normal","normal","normal","1em","left","none");var Qc=Ia.style;Qc.width=f+"px";Qc.left=g+"px";Qc.top=R+C+"px";Qc.visibility="visible";var nd=c.w-2*k-2,td=Zc.style;td.width=nd+"px";td.height=sc+"px";td.left=k+"px";td.top=X+"px";td.visibility="visible";Z.Utils.setTextAreaStyle(Zc,"black","verdana",w+"px","none","normal","normal","normal","normal","1.5em","left","none","0px");var vd=document.getElementById("noteTextElement"+
b),k=nd*(1-.98);vd.style.marginLeft=k+"px";vd.style.width="98%";if(null!==Z.editMode){var gd=document.getElementById("textBoxFor-noteNameTextElement"+b);if(gd){var Uc=gd.style;Uc.width=L+"px";Uc.height="15px";Uc.left=g+"px";Uc.top=R+"px";Z.Utils.setTextAreaStyle(gd,"black","verdana",w+"px","none","normal","normal","normal","normal","1em","left","none",p+"px")}var wd=document.getElementById("buttonContainerNote"+b);if(wd){var Vc=wd.style;Vc.width=c.w+"px";Vc.height=pa+"px";Vc.left="0px";Vc.top=W+"px"}var kd=
document.getElementById("buttonNoteEdit"+b);if(kd){Z.Utils.buttonSize(kd,sa,ha);var xd=kd.style;xd.left=ca+"px";xd.top=ja+"px"}var md=document.getElementById("buttonNoteAdd"+b);if(md){Z.Utils.buttonSize(md,sa,ha);var yd=md.style;yd.left=la+"px";yd.top=ja+"px"}var Ec=document.getElementById("buttonNoteSave"+b);if(Ec){Z.Utils.buttonSize(Ec,sa,ha);var od=Ec.style;od.left=ca+"px";od.top=ja+"px";od.display="none"}var bd=document.getElementById("buttonNoteCancel"+b);if(bd){Z.Utils.buttonSize(bd,sa,ha);
var pd=bd.style;pd.left=Ec?la+"px":ca+"px";pd.top=ja+"px";pd.display="none"}var Fd=document.getElementById("buttonNoteDelete"+b);if(Fd){Z.Utils.buttonSize(Fd,sa,ha);var rd=Fd.style;rd.left=Ec&&bd?xa+"px":Ec?la+"px":ca+"px";rd.top=ja+"px";rd.display="none"}if("edit"==Z.editMode){var sd=document.getElementById("buttonHelpAnnotation"+b);if(sd){Z.Utils.buttonSize(sd,sa,ha);var Ad=sd.style;Ad.left=ea+"px";Ad.top=ja+"px"}}var Cd=document.getElementById("overlayNoteDetailDisable"+b);if(Cd){var Rc=Cd.style;
Rc.width=parseFloat(td.width)+2+"px";Rc.height=parseFloat(td.height)+2+"px";Rc.left=parseFloat(td.left)+"px";Rc.top=parseFloat(td.top)+"px";Rc.display="inline-block"}var Gd=document.getElementById("overlayNoteDisable"+b);if(Gd){var dd=Gd.style;dd.width=c.w+"px";dd.height=23.5+sc+n+8.5+ha+4+"px";dd.left="0px";dd.top=R+"px"}}}}0<a&&(ze.display="none")}function xf(){Tc("0");m.getStatus("annotationPanelInitialized")||Z.editMode&&!document.getElementById("buttonLabelSave"+Ma.toString())||m.setStatus("annotationPanelInitialized",
!0)}function Hb(e){var a=0,b=[];switch(e){case "slide":if(Tb){e=0;for(var c=Tb.length;e<c;e++)b[b.length]=parseInt(Tb[e].internalID,10)}break;case "hotspot":if(p)for(e=0,c=p.length;e<c;e++)b[b.length]=parseInt(p[e].internalID,10);break;case "poi":if(pa)for(e=0,c=pa.length;e<c;e++)b[b.length]=parseInt(pa[e].value,10);break;case "label":if(ka)for(e=0,c=ka.length;e<c;e++)b[b.length]=parseInt(ka[e].value,10);break;case "labelExternal":if(p)for(e=0,c=p.length;e<c;e++)b[b.length]=parseInt(p[e].id,10);break;
case "note":if(Ga)for(e=0,c=Ga.length;e<c;e++)b[b.length]=parseInt(Ga[e].value,10)}0<b.length&&(b=Z.Utils.arraySortNumericAscending(b),a=b[b.length-1]+1);return a.toString()}function yf(){if(Sa){Z.Utils.clearDisplay(Sa);Ja.save();Ja.scale(cc,cc);var e=eb(gb,1);Ja.translate(-(Z.imageX-Z.imageW/2)*e,-(Z.imageY-Z.imageH/2)*e);Ja.drawImage(aa,-aa.width/2,-aa.height/2,aa.width,aa.height);Ja.restore();Ja.drawImage(ua,-ua.width/2,-ua.height/2,ua.width,ua.height);e=Ja.getImageData(0,0,Sa.width,Sa.height);
e=Z.Utils.filterImage(e,"grayscale","");Ja.putImageData(e,0,0)}}function of(e){if(e=Z.Utils.event(e)){var a=Z.Utils.target(e);e=Z.Utils.relatedTarget(e);var b=ed(a);null===b||null===e||"captionTextBox"==e.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||"captionTextBox"==a.id&&-1!=e.id.indexOf("hot")&&-1==e.id.indexOf("hotspotDisplay")||m.setHotspotVisibility(b,!0)}}function kg(e){if(e=Z.Utils.event(e))Z.clickZoomAndPanBlock=!0}function pf(e){if(e=Z.Utils.event(e)){var a=Z.Utils.target(e);
e=Z.Utils.relatedTarget(e);var b=ed(a);null===b||null===e||"captionTextBox"==e.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||"captionTextBox"==a.id&&-1!=e.id.indexOf("hot")&&-1==e.id.indexOf("hotspotDisplay")||m.setHotspotVisibility(b,!1)}}function lg(e){if(e=Z.Utils.event(e))Z.clickZoomAndPanBlock=!0}function nf(e){(e=Z.Utils.event(e))&&!e.altKey&&(e=Z.Utils.target(e),e=ed(e),e=e.id.substring(3,e.id.length),Z.Utils.arrayIndexOfObjectValue(p,"internalID",e),e=Z.Utils.getResource("z3"),
Z.Utils.showMessage(e,!0,null,"center",!0))}function jg(e){(e=Z.Utils.event(e))&&!e.altKey&&(e=Z.Utils.target(e),e=ed(e),e=e.id.substring(3,e.id.length),Z.Utils.arrayIndexOfObjectValue(p,"internalID",e),e=Z.Utils.getResource("z3"),Z.Utils.showMessage(e,!0,null,"center",!0))}function Ge(){var e=Z.Viewport.z538(this),e=e.id.substring(3,e.id.length),e=Z.Utils.arrayIndexOfObjectValue(p,"internalID",e);-1!=e&&(e=unescape(p[e].urlTarget),e=new Function(e),window.setTimeout(e,200))}function Je(e){Z.Utils.removeEventListener(ga,
"mousedown",Je);if(!Z.hotspotListTitle||!Z.Utils.stringValidate(Z.hotspotListTitle)||"none"==Z.hotspotListTitle)if(e=Z.Utils.getResource("UI_LISTMOUSEDOWNTEXT"),ga.options[0].text!=e){var a=document.createElement("option");a.text=e;a.value=null;ga.add(a,0)}ga.selectedIndex=0;Z.Utils.addEventListener(ga,"change",Me)}function Me(e){if(e=Z.Utils.event(e))Z.tourPlaying&&m.tourStop(),e=Z.Utils.target(e),e=e.options[e.selectedIndex].value,isNaN(parseInt(e),10)||(e=Z.Utils.arrayIndexOfObjectValue(p,"internalID",
e),-1!=e&&(e=p[e],Z.Utils.playAudio(zf,e.audio),m.zoomAndPanToView(e.x,e.y,e.z/100,e.rotation))),Z.Utils.removeEventListener(ga,"change",Me),window.setTimeout(function(){Z.Utils.addEventListener(ga,"mousedown",Je)},10)}function Tc(e,a,b){pa.sort(Sb);Z.Utils.updateSelectElement(S,pa,e);if("undefined"===typeof e||null===e)0==S.options.length&&(e=Z.Utils.getResource("z27"),Ke("0",e,"center","center","-1","0"),Ne="0"),e="0";else{var c=Z.Utils.arrayIndexOfObjectValue(pa,"value",e);-1!=c&&(e=pa[c].value)}var d=
Ma.toString(),c=Z.Utils.arrayIndexOfObjectValue(pa,"value",e);(d=document.getElementById("poiNameTextElement"+d))&&-1!=c&&(d.value=pa[c].text);zc(e,a);"markup"!=Z.editMode&&Pd(e,b)}function zc(e,a){ka.sort(Sb);db="markup"==Z.editMode?Z.Utils.arrayClone("labels",ka,db):Qd(ka,e);Z.Utils.updateSelectElement(ia,db,a);if("undefined"===typeof a||null===a)a=0<ia.options.length?ia.options[0].value:null;Af(a)}function Af(e){var a=Ma.toString();D=e;Ha=Bf=null;Ua=!0;var b=Z.Utils.arrayIndexOfObjectValue(p,"internalID",
D);J=-1!=b?p[b]:null;if(zd&&(e=document.getElementById("commentTextElement"+a))&&(e.value="markup"==Z.editMode&&0<ia.length?"":Z.Utils.getResource("CONTENT_LABELCOMMENTMARKUPNOLABELS"),null!==J)){var c=J.comment;null!==c&&Z.Utils.stringValidate(c)&&(e.value=c)}if(null!==Z.editMode){if(e=document.getElementById("labelNameTextElement"+a))e.value=null!==J?J.name:"";if(e=document.getElementById("captionTextElement"+a))e.value="",null!==J&&(c=J.captionHTML,"undefined"!==typeof c&&Z.Utils.stringValidate(c)?
e.value=c:e.value=J.caption);if("markup"!=Z.editMode){var d=document.getElementById("labelIconList"+a),g=document.getElementById("tooltipTextElement"+a),c=document.getElementById("clickURLTextElement"+a),h=document.getElementById("labelCaptionPositionList"+a);e=document.getElementById("labelTargetList"+a);a=document.getElementById("checkboxRollover"+a);if(d&&g&&c&&h&&e&&a&&(d.selectedIndex=0,g.value="",c.value="",h.selectedIndex=0,e.selectedIndex=0,a.checked=!1,null!==J)){if("icon"==J.mediaType){var b=
J.media,f=b.lastIndexOf("/")+1,l=b.lastIndexOf(".");-1!=f&&-1!=l&&(b=b.substring(f,l).toLowerCase(),b=Z.Utils.arrayIndexOfObjectValueSubstring(d,"value",b,null,!0),-1!=b&&(d.selectedIndex=b),m.toggleLabelIconPicker(!1))}d=J.captionPosition;Z.Utils.stringValidate(d)&&(b=Z.Utils.arrayIndexOfObjectValue(h,"value",d),-1!=b&&(h.selectedIndex=b));h=J.tooltipHTML;"undefined"!==typeof h&&Z.Utils.stringValidate(h)?g.value=h:g.value=J.tooltip;g=J.clickURL;Z.Utils.stringValidate(g)&&(c.value=g);c=J.urlTarget;
Z.Utils.stringValidate(c)&&(b=Z.Utils.arrayIndexOfObjectValue(e,"value",c),-1!=b&&(e.selectedIndex=b));a.checked=1==J.rollover}}}null!==J&&(D=J.internalID);D!=Rd&&Z.Viewer.getStatus("ready")&&Z.Utils.validateCallback("currentLabelChangedGetID");N?fd():ac()}function Pd(e,a){Ga.sort(Sb);pb=Qd(Ga,e);Z.Utils.updateSelectElement(Ia,pb,a);if("undefined"===typeof a||null===a)a=null,Ia.selectedIndex=0,0<Ia.options.length&&(a=Ia.options[0].value);Cf(a)}function Cf(e){var a=Ma.toString();e=Z.Utils.arrayIndexOfObjectValue(pb,
"value",e);if(null!==Z.editMode){var b=document.getElementById("noteNameTextElement"+a);b&&(b.value=-1!=e?pb[e].text:"")}if(a=document.getElementById("noteTextElement"+a))a.value=-1!=e?pb[e].noteText:""}function ee(e){Z.Utils.removeEventListener(S,"mousedown",ee);e=Z.Utils.getResource("UI_LISTMOUSEDOWNTEXT");if(S&&S.options&&S.options[0]&&S.options[0].text!=e){var a=document.createElement("option");a.text=e;a.value=null;S.add(a,0)}S.selectedIndex=0;Z.Utils.addEventListener(S,"change",Oe)}function Oe(e){if(e=
Z.Utils.event(e)){e=Z.Utils.target(e);if((e=e.options[e.selectedIndex].value)&&!isNaN(parseInt(e),10)){m.saveEditsPOI(!0);Tc(e);var a=Z.Utils.arrayIndexOfObjectValue(pa,"value",e);if(-1!=a){var b;b=pa[a].x;e="center"==b?Z.imageCenterX:parseFloat(b);b=pa[a].y;var c="center"==b?Z.imageCenterY:parseFloat(b);b=pa[a].z;a="-1"==b?Z.fitZ:parseFloat(b);m.getStatus("annotationPanelInitialized")?m.zoomAndPanToView(e,c,a/100):m.setView(e,c,a/100)}}Z.Utils.removeEventListener(S,"change",Oe);window.setTimeout(function(){Z.Utils.addEventListener(S,
"mousedown",ee)},10)}}function fe(e){Z.Utils.removeEventListener(ia,"mousedown",fe);e=Z.Utils.getResource("UI_LISTMOUSEDOWNTEXT");if(ia&&ia.options&&ia.options[0]&&ia.options[0].text!=e){var a=document.createElement("option");a.text=e;a.value=null;ia.add(a,0)}ia.selectedIndex=0;Z.Utils.addEventListener(ia,"change",Pe)}function Pe(e){if(e=Z.Utils.event(e))e=Z.Utils.target(e),(e=e.options[e.selectedIndex].value)&&!isNaN(parseInt(e,10))&&(m.saveEditsLabel(!0,!1,!1),Af(e),D=e,Ua=!0,e=Z.Utils.arrayIndexOfObjectValue(p,
"internalID",D),J=-1!=e?p[e]:null,Z.maskVisible&&(Z.Utils.arrayClear(Uc),Uc[Uc.length]=J.id,m.setLabelMaskByDisplayList(Uc,!1)),"view"!=Z.labelMode&&m.setEditModeLabel(J.mediaType,!0,J.media,!0),m.goToLabelByID(null,J),Z.Utils.removeEventListener(ia,"change",Pe),window.setTimeout(function(){Z.Utils.addEventListener(ia,"mousedown",fe)},10))}function wf(e){m.toggleLabelIconPicker(!1);e=Z.Utils.event(e);e=Z.Utils.target(e);e=e[e.selectedIndex].value;"External Graphics File"!=e&&"markup"!=Z.editMode&&
"editLabel"==Z.editing&&"shim"!=e&&(e=Ea+"/"+e,m.modifyHotspot(D,"mediaType","icon",!0,!0),m.modifyHotspot(D,"media",e,!1,!0))}function mg(e){e=Z.Utils.event(e);e=Z.Utils.target(e);e=labelCaptionPositionListDP[e.selectedIndex].value;"shim"!==e&&m.modifyHotspot(D,"captionPosition",e,!1,!0)}function tf(e){e=Z.Utils.event(e);e=Z.Utils.target(e);e=labelTargetListDP[e.selectedIndex].value;"shim"!==e&&m.modifyHotspot(D,"urlTarget",e,!1,!0)}function uf(e){if(e=Z.Utils.event(e))e=Z.Utils.target(e),m.modifyHotspot(D,
"rollover",e.checked,!1,!0)}function Df(e){var a;if(e=Z.Utils.event(e))e=Z.Utils.target(e),a=e.options[e.selectedIndex].value;a&&!isNaN(parseInt(a,10))&&(m.saveEditsNote(!0),Cf(a))}function Sc(e){if(e=Z.Utils.event(e))if(e=Z.Utils.target(e))Ef(e.id),Z.Viewer.initializeViewerKeyEventListeners(!1),Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault)}function hc(e){var a=Z.viewportCurrentID,b=Z.annotationFileShared?
"0":a;if(e=Z.Utils.event(e)){if(e=Z.Utils.target(e)){if(0==ia.options.length&&(e.id=="labelNameTextElement"+b||e.id=="captionTextElement"+b||e.id=="tooltipTextElement"+b||e.id=="clickURLTextElement"+b)){e=parseInt(Z.Utils.getResource("z6"),10);Z.Utils.showMessage(Z.Utils.getResource("z4"),!0,e,"center",!0);return}a=null;switch(e.id){case "poiNameTextElement"+b:var c=S.selectedIndex;pa[c].text=e.value;c=S[c].value;pa.sort(Sb);Z.Utils.updateSelectElement(S,pa,c);break;case "labelNameTextElement"+b:c=
ia.selectedIndex;db[c].text=e.value;c=ia[c].value;d=Z.Utils.arrayIndexOfObjectTwoValues(ka,"poiID",d,null,"value",c);-1!=d&&(ka[d].text=e.value);ka.sort(Sb);db.sort(Sb);Z.Utils.updateSelectElement(ia,db,c);d=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D);-1!=d&&(p[d].name=e.value);break;case "captionTextElement"+b:c=e.value;a=-1!=c.indexOf("<CAPTION>")?"captionHTML":"caption";break;case "commentTextElement"+b:c=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D);-1!=c&&(p[c].comment=e.value);break;
case "tooltipTextElement"+b:a=c&&-1!=c.indexOf("<TOOLTIP>")?"tooltipHTML":"tooltip";break;case "clickURLTextElement"+b:a="clickURL";break;case "noteNameTextElement"+b:c=Ia.selectedIndex;pb[c].text=e.value;var d=pb[c].poiID,c=pb[c].value,d=Z.Utils.arrayIndexOfObjectTwoValues(Ga,"poiID",d,null,"value",c);-1!=d&&(Ga[d].text=e.value);Ga.sort(Sb);pb.sort(Sb);Z.Utils.updateSelectElement(Ia,pb,c);break;case "noteTextElement"+b:c=Ia.selectedIndex,pb[c].noteText=e.value,d=pb[c].poiID,c=pb[c].value,d=Z.Utils.arrayIndexOfObjectTwoValues(Ga,
"poiID",d,null,"value",c),-1!=d&&(Ga[d].noteText=e.value)}null!==a&&Z.viewportCurrent.modifyHotspot(D,a,e.value,!1,!0)}Z.Viewer.initializeViewerKeyEventListeners(!0);Z.Viewer.initializeViewerKeyDefaultListeners(!0)}}function Ef(e){var a=Ma.toString();if("markup"==Z.editMode){var b=document.getElementById("labelNameTextElement"+a),c=document.getElementById("captionTextElement"+a),d=document.getElementById("commentTextElement"+a),g=d?1:0;if(b&&c)switch(e){case "labelNameTextElement"+a:b.tabIndex=1;
c.tabIndex=2;d&&(d.tabIndex=3);break;case "captionTextElement"+a:b.tabIndex=3;c.tabIndex=1;d&&(d.tabIndex=2);break;case "commentTextElement"+a:b.tabIndex=2,c.tabIndex=3,d&&(d.tabIndex=1)}}else if(null!==Z.editMode){var g=document.getElementById("poiNameTextElement"+a),b=document.getElementById("labelNameTextElement"+a),c=document.getElementById("captionTextElement"+a),d=document.getElementById("commentTextElement"+a),h=document.getElementById("tooltipTextElement"+a),m=document.getElementById("clickURLTextElement"+
a),f=document.getElementById("noteNameTextElement"+a),a=document.getElementById("noteTextElement"+a);g&&(g.tabIndex="");b&&(b.tabIndex="");c&&(c.tabIndex="");d&&(d.tabIndex="");h&&(h.tabIndex="");m&&(m.tabIndex="");f&&(f.tabIndex="");a&&(a.tabIndex="");switch(e){case "poi":g.tabIndex=1;break;case "label":g=d?1:0;b.tabIndex=1;c.tabIndex=2;d&&(d.tabIndex=3);h.tabIndex=3+g;m.tabIndex=4+g;break;case "note":f.tabIndex=1;a.tabIndex=2;break;case "noteNameTextElement":f.tabIndex=1;a.tabIndex=2;break;case "noteTextElement":f.tabIndex=
2;a.tabIndex=1;break;case "clickURLTextElement":b.tabIndex=2;c.tabIndex=3;h.tabIndex=4;m.tabIndex=1;break;default:b.tabIndex=1,c.tabIndex=2,h.tabIndex=3,m.tabIndex=4}}}function Qd(e,a){for(var b=[],c=0,d=e.length;c<d;c++)e[c].poiID==a&&(b[b.length]=e[c]);return b}function Rc(e,a,b,c,d,g,h){if(Z.useCanvas&&("polygon"==e.media||c)){if(e.visibility||e.rollover||b){b=e.internalID;if("undefined"!==typeof e.polygonPts&&null!==e.polygonPts&&0<e.polygonPts.length||c){h=c?Ja:"view"!=Z.labelMode&&b===D||d?
d?Xa:Qa:Yf;h.save();h.translate((e.x-(g?Z.imageW/2:Z.imageX))*Z.imageZ,(e.y-(g?Z.imageH/2:Z.imageY))*Z.imageZ);var f=ya/wc,l=m.getZoom(),k=(e.xScale+e.yScale)/2/100,u=e.xScale/100/f*l,f=e.yScale/100/f*l;1!=u&&1!=f&&h.scale(u,f);c?h.lineWidth=1E-6:"freehand"==e.mediaType?h.lineWidth=Mh/l:(h.lineWidth=e.lineVisible?Nh/l/k:0,h.fillStyle=e.fillColor);h.strokeStyle=e.lineColor;u=e.x;f=e.y;h.beginPath();if(e.polygonPts){var w=e.polygonPts.slice(0);"measure"!=Z.labelMode||e.polyClosed||Ua||"undefined"===
typeof a||null===a||(w[w.length]={x:a.x,y:a.y});var p=w[0].x-u,n=w[0].y-f;h.moveTo(p,n);for(var r=1,v=w.length;r<v;r++){var y=w[r].x-u,q=w[r].y-f;h.lineTo(y,q)}"freehand"!=e.mediaType&&(e.polyClosed||Z.mouseIsDown&&0==Ha)&&(e.polyClosed&&(h.lineTo(p,n),h.closePath()),c||!e.fillVisible||!e.polyClosed&&b==D||(h.globalAlpha=xi,h.fill()),h.globalAlpha=1)}else r=100/e.z*e.iW,v=100/e.z*e.iH,u=0,f=-1==e.media.indexOf("triangle")?0:.23*e.iH,r=Math.max(r,v)/2*1.2,h.arc(u,f,r,0,2*Math.PI);h.stroke();if(!c&&
(null===Z.editMode&&"measure"==Z.labelMode||"addLabel"==Z.editing||"editLabel"==Z.editing)&&("rectangle"==Z.labelMode&&4==w.length||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&e.internalID==D&&"undefined"!==typeof e&&null!==e&&"freehand"!=e.mediaType)for(l=1/l/k,r=0,v=w.length;r<v;r++)y=w[r].x-u,q=w[r].y-f,Qe(y,q,!Ua&&0==r,l);h.restore()}d?(c=new Ka,F(e,c,a,null,null,!0,g)):!Z.mouseIsDown||c&&"polygon"!=e.media||null===b||"undefined"===typeof a||N||hd(b,a,d,g)}d&&Hd()}else ng||(Z.Utils.showMessage(Z.Utils.getResource("z9")),
ng=!0)}function Qe(e,a,b,c){var d=og*c;Qa.lineWidth=yi*c;Qa.strokeStyle=ah;Qa.fillStyle=b?zi:Ai;Qa.beginPath();Qa.arc(e,a,d,0,2*Math.PI,!1);Qa.closePath();Qa.globalAlpha=.5;Qa.fill();Qa.globalAlpha=1;Qa.stroke()}function Ff(e,a,b){Z.Utils.clearDisplay(Pa);var c=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D);if(-1!=c){c=p[c];Rc(c);var d=m.getZoom(),g=c.polygonPts;if(g){var h=g[g.length-1],g=(h.x-Z.imageX)*d,d=(h.y-Z.imageY)*d;c.polyClosed||(Qa.lineWidth=Nh,Qa.strokeStyle=lineStrokeColor,Qa.beginPath(),
Qa.moveTo(g,d),Qa.lineTo(e,a),Qa.closePath(),Qa.stroke())}"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===D||hd(D,b)}}function fd(e){hb&&Z.Utils.clearDisplay(hb);Pa&&Z.Utils.clearDisplay(Pa);if("inline-block"==Jc.display)for(var a=new Ka,b=0,c=p.length;b<c;b++){var d=p[b];if("polygon"==d.media&&d.visibility&&(e||"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof D||null===D||D!==b)){var g=d.x,h=d.y;(!Z.hotspotsDrawOnlyInView||g+dd>a.box.l&&g-dd<a.box.r&&
h+dd>a.box.t&&h-dd<a.box.b)&&Rc(d,null,e)}}}function Gf(a,b,c,d,h){Qa.lineWidth=Mh;Qa.strokeStyle=lineStrokeColor;Qa.beginPath();Qa.moveTo(a,b);Qa.lineTo(c,d);Qa.closePath();Qa.stroke();Qa.strokeStyle=ah;2<Z.Utils.calculatePointsDistance(a,b,c,d)&&Ab(D,!1,h);Z.mouseIsDown||ac()}function Re(a,b,c){Sd=!0;Z.Utils.clearDisplay(Pa);a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",a);if(-1!=a){a=p[a];a.polygonPts[b]=c;var d=a.polygonPts.length;"rectangle"==Z.labelMode&&4==d&&(a.polygonPts=Td(a.polygonPts,
b));Rc(a,c)}}function Td(a,b){var c=a[b].x,d=a[b].y,h=b-1;0>h&&(h+=4);var g=b+1;3<g&&(g-=4);1==h||3==h?(a[h].x=c,a[g].y=d):(a[g].x=c,a[h].y=d);return a}function ic(a,b,c){var d=(a=Z.Utils.event(a))?Z.Utils.isRightMouseButton(a):null,h=a?a.altKey:null;if("undefined"===typeof D||null===D)Ab(null,!0,b);else{var g=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D);-1!=g&&(g=p[g],Bf=g.polygonPts,g=g.polyClosed,null===Bf?(Ab(D,!0,b),hd(D,b)):(Ha=ge(a,b),g?null===Ha&&Ab(null,!0,b):null===Ha?h||d||c?(Ab(D,
!1,b),Ac(D,!1)):Ab(D,!1,b):0==Ha&&2<Bf.length&&!Ua&&Ac(D,!0)))}(!h||"measure"==Z.labelMode&&null!==D)&&hd(D,b)}function Ab(a,b,c){var d,h=!1,g=!1;"undefined"!==typeof a&&null!==a&&(null!==Z.editing&&"addLabel"!=Z.editing||!Ua||"polygon"!=Z.labelMode&&"measure"!=Z.labelMode)?(a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",a),-1!=a&&(d=p[a],a=d.polygonPts?d.polygonPts:[],a[a.length]={x:c.x,y:c.y},d.polyClosed=!1,d.polygonPts=a,d.saved=!1)):(null===Z.editMode&&"measure"==Z.labelMode&&0<p.length&&m.deleteAllMeasureHotspots(),
d="freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode?Z.labelMode:null,h=[],h[0]={x:c.x,y:c.y},g="undefined"!==typeof S&&0<S.options.length?g=S.options[S.selectedIndex].value:1,a=(100*m.getZoom()).toString(),m.createHotspotFromParameters(null,null,d,"polygon",null,c.x.toString(),c.y.toString(),a,null,null,null,null,null,null,null,Mc,null,lineStrokeColor,null,null,null,null,null,"8","0",null,g,null,null,"0",h),d=p[p.length-1],D=d.internalID,h=d,g=d.poiID,
Z.measureVisible&&null===Z.editMode||(a=Z.Utils.arrayIndexOfObjectValue(ka,"value",D),-1!=a?(ka[a]={text:h.name,value:D,poiID:g},a=Z.Utils.arrayIndexOfObjectValue(db,"value",D),-1!=a&&(db[a]={text:h.name,value:D,poiID:g},m.getStatus("XMLParsed")&&Z.Utils.updateSelectElement(ia,db))):(ka[ka.length]={text:h.name,value:D,poiID:g},db[db.length]={text:h.name,value:D,poiID:g}),m.getStatus("XMLParsed")&&ia&&(h=ka[ka.length-1],zc(h.poiID,h.value))),h=g=!0);"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&
"measure"!=Z.labelMode||"undefined"===typeof d||null===d||"freehand"==d.mediaType||(d=m.getZoom(),Qe((c.x-Z.imageX)*d,(c.y-Z.imageY)*d,h,1));"rectangle"!=Z.labelMode&&"freehand"!=Z.labelMode&&(Ua=!1);g?ac():b&&fd()}function ge(a,b){for(var c=null,d=(og+1)/Z.imageZ,h=0,g=p.length;h<g;h++)if("polygon"==p[h].media&&p[h].internalID==D){var f=p[h].polygonPts;if("undefined"!==typeof f&&null!==f)for(var m=0,l=f.length;m<l;m++)Z.Utils.calculatePointsDistance(b.x,b.y,f[m].x,f[m].y)<d&&(c=m)}return c}function Ac(a,
b){Z.Utils.clearDisplay(Pa);var c=Z.Utils.arrayIndexOfObjectValue(p,"internalID",a);p[c].polyClosed=b;Ua=!0;if(-1!=c){var c=p[c],d=Z.Utils.polygonCenter(c.polygonPts,c.polyClosed);c.x=d.x;c.y=d.y;"freehand"!=Z.labelMode&&""==c.caption&&"undefined"===typeof c.captionHTML&&(d=Z.Utils.getResource("z45"),c.caption=d+a.toString());d=new Ka;ud(c,d)}}function hd(a,b,c,d){var h=Z.Utils.arrayIndexOfObjectValue(p,"internalID",a);if(-1!=h){h=p[h];if("measure"==Z.labelMode&&"measure"==h.mediaType)Jd(h,b);else if("freehand"!=
Z.labelMode&&"freehand"!=h.mediaType&&""==h.caption&&"undefined"===typeof h.captionHTML){var g=Z.Utils.getResource("z45");h.caption=g+a.toString()}g=h.polyClosed;a=h.polygonPts?h.polygonPts.slice(0):[];g=Z.Utils.polygonCenter(a,g,b);a=Z.Utils.polygonDimensions(a,b);h.x=g.x;h.y=g.y;h.iW=a.x;h.iH=a.y;a=new Ka;N?(c=b=null,(b=document.getElementById("hot"+h.id))&&(c=Z.Utils.getChildElementByID(b,"captionTextBox")),b=c,c=Z.Utils.polygonDimensions(h.polygonPts),d=a.currentZ/("polygon"!=h.media?h.z/100:
1),Zg(h,b,h.xScale/100*d*c.x,h.yScale/100*d*c.y)):c?F(h,a,b,null,null,!0,d):mf(h,a,b,!0)}}function mb(a,b){var c=Ma.toString(),c=Z.annotationFileShared?"0":c;Z.editing=b;var d=null!==b?"none":"inline-block",h=null!==b||"markup"==Z.editMode?"inline-block":"none";switch(a){case "poi":var g=document.getElementById("buttonPOIAdd"+c),f=document.getElementById("buttonPOIEdit"+c),m=document.getElementById("buttonPOIDelete"+c),l=document.getElementById("buttonPOICancel"+c),k=document.getElementById("buttonPOISave"+
c);break;case "labelPartial":g=document.getElementById("buttonLabelAdd"+c);f=document.getElementById("buttonLabelEdit"+c);m=document.getElementById("buttonLabelDelete"+c);l=document.getElementById("buttonLabelCancel"+c);k=document.getElementById("buttonLabelSave"+c);break;case "label":g=document.getElementById("buttonLabelAdd"+c);f=document.getElementById("buttonLabelEdit"+c);m=document.getElementById("buttonLabelDelete"+c);l=document.getElementById("buttonLabelCancel"+c);k=document.getElementById("buttonLabelSave"+
c);break;case "note":g=document.getElementById("buttonNoteAdd"+c),f=document.getElementById("buttonNoteEdit"+c),m=document.getElementById("buttonNoteDelete"+c),l=document.getElementById("buttonNoteCancel"+c),k=document.getElementById("buttonNoteSave"+c)}g&&(Z.Utils.setButtonDefaults(g),g.style.display=d);f&&(Z.Utils.setButtonDefaults(f),f.style.display=d);m&&(Z.Utils.setButtonDefaults(m),m.style.display=h);l&&(Z.Utils.setButtonDefaults(l),l.style.display=h);k&&(Z.Utils.setButtonDefaults(k),k.style.display=
h);var g=document.getElementById("overlayPOIDisable"+c),f=document.getElementById("overlayLabelDisable"+c),m=document.getElementById("overlayLabelDetailDisable"+c),l=document.getElementById("overlayLabelDetailEditableDisable"+c),k=parseFloat(Z.Utils.getResource("z82")),d=Z.Utils.getResource("z83NOALPHA"),h=document.getElementById("textBoxFor-overlayMessageBox"+c),u=document.getElementById("overlayLabelNameEditableDisable"+c),w=document.getElementById("overlayLabelCaptionPositionDisable"+c),p=document.getElementById("overlayNoteDisable"+
c),r=document.getElementById("overlayNoteDetailDisable"+c),n=document.getElementById("textBoxFor-poiNameTextElement"+c),v=document.getElementById("textBoxFor-labelNameTextElement"+c),y=document.getElementById("commentTextElement"+c),q=document.getElementById("textBoxFor-noteNameTextElement"+c),c=document.getElementById("noteTextElement"+c);if(g&&f&&m&&l&&u&&w&&r&&n&&v&&q&&c)if(null===b)Z.Viewer.initializeViewerKeyEventListeners(!0),g.style.display="none",f.style.display="none",m.style.display="inline-block",
l.style.display="none",Z.Utils.setOpacity(l,k,d),h&&(h.style.display="none"),u.style.display="none",w.style.display="none",p.style.display="none",r.style.display="inline-block",n.style.visibility="hidden",v.style.visibility="hidden",q.style.visibility="hidden",y&&(y.readOnly=!0),c.readOnly=!0;else{switch(a){case "poi":n.style.visibility="visible";f.style.display="inline-block";m.style.display="none";p.style.display="inline-block";r.style.display="none";break;case "labelPartial":m.style.display="none";
l.style.display="inline-block";Z.Utils.setOpacity(l,k,d);h&&(h.style.display="inline-block");u.style.display="inline-block";w.style.display="text"==Z.labelMode?"inline-block":"none";v.style.visibility="visible";g.style.display="inline-block";p.style.display="inline-block";r.style.display="none";break;case "label":m.style.display="none";l.style.display="none";Z.Utils.setOpacity(l,k,d);h&&(h.style.display="none");u.style.display="none";w.style.display="text"==Z.labelMode?"inline-block":"none";v.style.visibility=
"visible";g.style.display="inline-block";p.style.display="inline-block";r.style.display="none";y&&(y.readOnly=!1);break;case "note":g.style.display="inline-block",f.style.display="inline-block",m.style.display="none",r.style.display="none",q.style.visibility="visible",c.readOnly=!1}Ef(a)}}function nb(a,b){switch(b){case "pois":"save"==a?bh=Z.Utils.arrayClone("pois",pa,bh):pa=Z.Utils.arrayClone("pois",bh,pa);break;case "labels":var c=Z.Utils.arrayIndexOfObjectValue(p,"internalID",Rd);if("save"==a)J&&
J.polygonPts&&(pg=Z.Utils.arrayClone("polygon",J.polygonPts,pg)),ch=Z.Utils.arrayClone("labels",ka,ch),dh=Z.Utils.arrayClone("hotspots",p,dh),J=-1!=c?p[c]:null;else if(ka=Z.Utils.arrayClone("labels",ch,ka),p=Z.Utils.arrayClone("hotspots",dh,p),J=-1!=c?p[c]:null)0<pg.length?J.polygonPts=Z.Utils.arrayClone("polygon",pg,J.polygonPts):"polygon"!=J.media&&Z.Utils.arrayClear(J.polygonPts);break;case "notes":"save"==a?eh=Z.Utils.arrayClone("notes",Ga,eh):Ga=Z.Utils.arrayClone("notes",eh,Ga)}}function he(a){var b=
vd(),c=lb(b,"root"),d=lb(b,"setup");a=a.getElementsByTagName("SETUP")[0];var h;h=a.getAttribute("PANELPOSITION");Z.Utils.stringValidate(h)&&d.setAttribute("PANELPOSITION",h);h=a.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(h)&&d.setAttribute("INITIALVISIBILITY",h);h=a.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(h)&&d.setAttribute("POIVISIBILITY",h);h=a.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(h)&&d.setAttribute("LABELVISIBILITY",h);h=a.getAttribute("NOTEVISIBILITY");
Z.Utils.stringValidate(h)&&d.setAttribute("NOTEVISIBILITY",h);h=a.getAttribute("COMMENTVISIBILITY");Z.Utils.stringValidate(h)&&d.setAttribute("COMMENTVISIBILITY",h);h=a.getAttribute("MINSCALE");Z.Utils.stringValidate(h)&&!isNaN(parseFloat(h))&&0<=parseFloat(h)&&d.setAttribute("MINSCALE",h);h=a.getAttribute("MAXSCALE");Z.Utils.stringValidate(h)&&!isNaN(parseFloat(h))&&0<=parseFloat(h)&&d.setAttribute("MAXSCALE",h);c.appendChild(d);a=0;for(d=pa.length;a<d;a++){h=lb(b,"poi");var g=pa[a],f=Z.Utils.xmlEscapeMinimal(g.text);
Z.Utils.stringValidate(f)&&h.setAttribute("NAME",f);f=g.value;Z.Utils.stringValidate(f)&&h.setAttribute("INTERNALID",f);var f=g.id;Z.Utils.stringValidate(f)&&h.setAttribute("ID",f);f=g.x;Z.Utils.stringValidate(f)&&!isNaN(parseFloat(f))&&h.setAttribute("X","center"==f?Z.imageCenterX.toString():f);f=g.y;Z.Utils.stringValidate(f)&&!isNaN(parseFloat(f))&&h.setAttribute("Y","center"==f?Z.imageCenterY.toString():f);f=g.z;Z.Utils.stringValidate(f)&&!isNaN(parseFloat(f))&&h.setAttribute("ZOOM",f);f=g.user;
Z.Utils.stringValidate(f)&&h.setAttribute("USER",f);f=g.date;Z.Utils.stringValidate(f)&&h.setAttribute("DATE",f);c.appendChild(h);labelListTempDP=Qd(ka,pa[a].value);if(0<labelListTempDP.length){g=b.createElement("LABELS");h.appendChild(g);for(var f=0,l=labelListTempDP.length;f<l;f++){var k=lb(b,"label"),u=Z.Utils.arrayIndexOfObjectValue(p,"internalID",labelListTempDP[f].value);-1!=u&&(k=m.convertLabelToXML(p[u]));g.appendChild(k)}}noteListTempDP=Qd(Ga,pa[a].value);if(0<noteListTempDP.length)for(g=
b.createElement("NOTES"),h.appendChild(g),h=0,f=noteListTempDP.length;h<f;h++)l=lb(b,"note"),k=noteListTempDP[h],u=Z.Utils.xmlEscapeMinimal(k.text),Z.Utils.stringValidate(u)&&l.setAttribute("NAME",u),u=k.value,Z.Utils.stringValidate(u)&&l.setAttribute("INTERNALID",u),u=Z.Utils.xmlEscapeMinimal(k.noteText),Z.Utils.stringValidate(u)&&l.setAttribute("TEXT",u),u=k.poiID,Z.Utils.stringValidate(u)&&l.setAttribute("POIID",u),u=k.id,Z.Utils.stringValidate(u)&&l.setAttribute("ID",u),u=k.user,Z.Utils.stringValidate(u)&&
l.setAttribute("USER",u),u=k.date,Z.Utils.stringValidate(u)&&l.setAttribute("DATE",u),g.appendChild(l)}return b}function Hf(a){var b;this.id=a.getAttribute("ID");this.name=a.getAttribute("NAME");this.internalID=a.getAttribute("INTERNALID");isNaN(parseInt(this.internalID,10))&&(this.internalID=Hb("slide"));this.media=a.getAttribute("MEDIA");this.audio=a.getAttribute("AUDIO");Z.Utils.stringValidate(this.audio)&&(Z.audioContent=!0);this.initialX=a.getAttribute("INITIALX");this.initialY=a.getAttribute("INITIALY");
this.initialZoom=a.getAttribute("INITIALZOOM");this.minZoom=a.getAttribute("MINZOOM");this.maxZoom=a.getAttribute("MAXZOOM");b=parseFloat(a.getAttribute("SHOWFOR"));this.showFor=isNaN(b)?0:b;this.transition=a.getAttribute("TRANSITION");b=parseFloat(a.getAttribute("CHANGEFOR"));this.changeFor=isNaN(b)?0:b}function qg(a){if(a=Z.Utils.event(a))if(Z.slideshowPlaying&&m.slideshowStop(),a=Z.Utils.target(a),"null"!=a.options[a.selectedIndex].value){var b=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=
Z.slideListTitle?1:0;m.goToSlide(a.selectedIndex-b,null,!0)}}function Se(a){if("undefined"!==typeof Wb&&null!==Wb&&0<Wb.length){var b=Z.slideshowPlaying?Tb[wd].showFor:0;Z.Utils.stringValidate(Tb[wd].audio)&&(b+=500);var c=Ud(wd,a,Tb.length-1);null!==c?Z.Utils.functionCallWithDelay(function(){m.goToSlide(c,null,null,!0)},b):m.slideshowStop()}}function Ud(a,b,c){for(var d=fh||gh,h="Skip";"Skip"==h;)"next"==b?(a+=1,a>c&&(a=d?0:null)):(--a,0>a&&(a=d?c:null)),h=p?null!==a?p[a].transition:null:Tb?null!==
a?Tb[a].transition:null:null;return a}function ie(a){Z.preventDupCall||(Z.priorX=Z.imageX,Z.priorY=Z.imageY,Z.priorZ=Z.imageZ,Z.priorR=Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof a&&null!==a}function Xd(a,b,c,d,h,g){g||m.zoomAndPanAllStop();Z.maskingSelection&&Z.maskClearOnUserAction&&m.clearMask();if("undefined"===typeof a||null===a)a=Z.imageW/2;if("undefined"===typeof b||null===b)b=Z.imageH/2;"undefined"===typeof c||null===c?c=Z.fitZ:1<c&&(c/=100);if("undefined"===typeof d||null===
d)d=Z.imageR;c=jb(c);d=Za(d);a=v(a,b,c,d,"image");Z.imageX=Te=a.x;Z.imageY=je=a.y;Z.imageZ=c;d!=Z.imageR&&Z.Utils.rotateElement(R,d);Z.imageR=d;m.updateView(!0);"function"===typeof h&&h()}function ke(){if(Vc&&(0!=nc||0!=tc||0!=jc)){var a=nc,b=tc,c=jc,d=m.getZoom();0!=c&&(d=eb(ea,ya*(1+c)),d=jb(d),d!=Z.imageZ&&Ue(d));if(0!=a||0!=b)a=parseFloat(R.left)+a,b=parseFloat(R.top)+b,d=v(a,b,d,Z.imageR,"container"),R.left=Math.round(d.x)+"px",R.top=Math.round(d.y)+"px",b=d.x-Fb,d=d.y-Qb,ta&&qb&&(Z.mobileDevice||
Math.abs(b)>qa/2||Math.abs(d)>na/2)&&w(ta,lc,Yb,"simple",!1,"Updating backfill oversize display");p&&30<p.length?0==hh%2&&m.syncViewportRelated():m.syncViewportRelated();hh++;Vc=window.setTimeout(ke,ih)}}function If(a,b,c,d,h,g,f){Jf++;var l=h/g,k=Jf*l,u=Z.Utils.easing(Z.imageX,a,k,h),r=Z.Utils.easing(Z.imageY,b,k,h),n=Z.Utils.easing(Z.imageZ,c,k,h),k=Z.Utils.easing(Z.imageR,d,k,h),r=yc(u,r,n),u=r.x,r=r.y,v=!1,y=syncOversize=!1;if(parseFloat(R.left)!=u||parseFloat(R.top)!=r)R.left=u+"px",R.top=r+
"px",y=!0,ta&&qb&&(syncOversize=!0);n!=Z.imageZ&&(Ue(n,!1),v=y=!0,ta&&qb&&($a.restore(),$a.save(),$a.scale(Vb,Vb),syncOversize=!0));k!=Z.imageR&&(Z.Utils.rotateElement(R,k),ta&&qb&&($a.rotate((k-Z.imageR)*Math.PI/180),syncOversize=!0),Z.imageR=k,y=!0);syncOversize&&w(ta,lc,Yb,"simple",!1,"Updating backfill oversize display");m.syncViewportRelated(!1,p&&40>p.length,!1,!1,!1);0==Jf%2&&m.syncViewportRelated(!1,!1,v,y,v);n=Z.tour&&Z.tourStop&&0==Math.round(Z.imageR%90);Jf<g+1&&!n?Vd=window.setTimeout(function(){If(a,
b,c,d,h,g,f)},l):(n&&(Z.tourPlaying=!1),Z.interactivityOff=!1,Vd&&(window.clearTimeout(Vd),Vd=null),m.updateView(),m.toggleWatermarks(!0),p&&39<p.length&&m.setHotspotsVisibility(!0),"function"===typeof f&&f())}function Ve(){hh=jc=tc=nc=0;Vc&&(window.clearTimeout(Vc),Vc=null)}function Ue(a,b){var c=!1,d=Oa(ea,a);if(d!=ya){ya=d;var c=d/wc,h=Ca*c,g=Da*c,f=(Ca-h)/2,l=(Da-g)/2;d<wc&&(d=v(parseFloat(R.left),parseFloat(R.top),a,Z.imageR,"container"),R.left=d.x+"px",R.top=d.y+"px");if(Z.useCanvas)if(Ta.width=
h+"px",Ta.height=g+"px",Ta.left=f+"px",Ta.top=l+"px",Sa&&(Ob.width=h+"px",Ob.height=g+"px",Ob.left=f+"px",Ob.top=l+"px"),hb&&(Hc.width=h+"px",Hc.height=g+"px",Hc.left=f+"px",Hc.top=l+"px"),Pa&&(Ic.width=h+"px",Ic.height=g+"px",Ic.left=f+"px",Ic.top=l+"px"),Vb=Oa(lc,m.getZoom()),d=8<Vb,qb||d){if(null!==$a&&"undefined"===typeof b||null===b||b&&ta&&("in"!=Z.zooming||h>Z.scaleThreshold||g>Z.scaleThreshold))$a.restore(),$a.save(),$a.scale(Vb,Vb),$a.rotate(Z.imageR*Math.PI/180),w(ta,lc,Yb,"simple",!1,"Updating backfill oversize display");
cc=c=Oa(gb,a);h=c/tierBackfillScalePrior;c=jd*h;h*=Nc;g=Bc+(jd-c)/2;d=oc+(Nc-h)/2;ca.width=c+"px";ca.height=h+"px";ca.left=g+"px";ca.top=d+"px"}else ta&&Z.Utils.clearDisplay(ta),h=jd*c,g=Nc*c,f=Bc+Z.imageX*(1-c)*Z.imageZ,l=oc+Z.imageY*(1-c)*Z.imageZ,ca.width=h+"px",ca.height=g+"px",ca.left=f+"px",ca.top=l+"px";else w(ua,ea,Db,"centerOut",!1,"Scaling: non-canvas zoom"),qb?(c=Oh,jd=Ca*c,Nc=Da*c,Bc=-(Ca/c),oc=-(Da/c),jh=fc*c,kh=Pb*c,aa.width=jd,aa.height=Nc,ca.width=aa.width+"px",ca.height=aa.height+
"px"):(c=Wa[gb],aa.width=cb[gb],aa.height=c,c=Z.imageY*a,Bc=fc-Z.imageX*a,oc=Pb-c),ca.left=Bc+"px",ca.top=oc+"px",w(aa,gb,Yb,"simple",!1,"Scaling: non-canvas zoom - backfill");c=!0}return c}function We(){if(le&&0!=uc){var a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D);if(-1!=a){var a=p[a],b=a.yScale*(1+uc);m.modifyHotspot(D,"xScale",a.xScale*(1+uc),!0,!0);m.modifyHotspot(D,"yScale",b,!1,!0);le=window.setTimeout(We,Ph)}}}function rg(){m.toggleFullViewMode(!1)}function rd(a,b,c){"undefined"!==
typeof sg&&null===sg&&"undefined"!==typeof tg&&null===tg?(Z.Utils.showMessage(Z.Utils.getResource("z11"),!1,null,"center"),sg=window.setTimeout(function(){Xe(ua,a,b,c);Z.Utils.hideMessage();sg=null;Z.Utils.showMessage(Z.Utils.getResource("z10"),!1,null,"center");tg=window.setTimeout(function(){Xe(aa,a,b,c);Z.Utils.hideMessage();tg=null},1)},1)):void 0!==typeof Kf&&(null!==Kf&&(window.clearTimeout(Kf),Kf=null),Kf=window.setTimeout(function(){rd(a,b)},200))}function Xe(a,b,c,d){d=(d?"viewportDisplay"==
a.id?ye:Ng:a.getContext("2d")).getImageData(0,0,a.width,a.height);b="undefined"!==typeof b&&null!==b?Z.Utils.filterImage(d,b,c):Ce(d,b,c);a.getContext("2d").putImageData(b,0,0)}function Ce(a){for(var b=0,c=gc.length;b<c;b++){var d=gc[b].filter,h=gc[b].value;0!=h&&(a=Z.Utils.filterImage(a,d,h))}return a}function Ye(a){Z.imageFiltersVisible&&be&&Xc&&Pc&&("frontfill"==a?(Z.Utils.clearDisplay(Xc),Xc.width=ua.width,Xc.height=ua.height,Hg.width=Ta.width,Hg.height=Ta.height,ye.translate(fc,Pb),ye.scale(ya,
ya)):(Z.Utils.clearDisplay(Pc),Pc.width=aa.width,Pc.height=aa.height,Fg.width=ca.width,Fg.height=ca.height))}function xa(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c=!Ua&&("polygon"==Z.labelMode||"measure"==Z.labelMode),d=Z.Utils.isRightMouseButton(a),h=a.altKey;if("mouseover"!=b&&"mouseout"!=b&&Z.interactivityOff||"mousedown"==b&&(Z.interactivityOff||Z.coordinatesVisible&&h)||d&&!c)Z.tourStop=!0;else{if("mousedown"==b||"touchstart"==b||Z.tourPlaying&&Z.tourStop)m.zoomAndPanAllStop(),m.tourStop(),
Z.tourStop=!0,Z.interactivityOff=!1;Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();if("mousedown"==b)window.setTimeout(function(){m.zoomAndPanAllStop(!1,!0)},1),Z.maskingSelection&&Z.maskClearOnUserAction&&m.clearMask();else if("touchstart"==b||"gesturestart"==b)c=!1,touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,d=ed(target),null===d?c=!0:(d=d.id.substring(3,d.id.length),d=Z.Utils.arrayIndexOfObjectValue(p,"internalID",
d),-1!=d&&(d=p[d],null!==d&&"function"==d.clickURL&&(c=!0)))),c&&a.preventDefault(),m.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&m.clearMask();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mousedown":!Z.fullView&&document.activeElement&&document.activeElement.blur();Z.Viewer.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(document,"mousemove",xa);Z.Utils.addEventListener(document,
"mouseup",xa);break;case "mouseup":Z.Utils.removeEventListener(document,"mousemove",xa),Z.Utils.removeEventListener(document,"mouseup",xa)}ug(a);if("mousedown"==b||"mousemove"==b)return!1}}}function ug(a){var b=Ma.toString();a=Z.Utils.event(a);var c=a.type;if(a&&c){var d,h,g;if("touchstart"==c||"touchmove"==c||"touchend"==c||"touchcancel"==c)d=Z.Utils.getFirstTouch(a),"undefined"!==typeof d&&(h=d.target,g=new Z.Utils.Point(d.pageX,d.pageY));else{h=Z.Utils.target(a);Z.Utils.relatedTarget(a);var f=
Z.Utils.isRightMouseButton(a),l=a.altKey;"resize"!=c&&(g=Z.Utils.getMousePosition(a));Z.smoothPan&&(Wc=g)}"DOMMouseScroll"==c&&(c="mousewheel");var k=m.getZoom(),u=(100*k).toString(),r;"undefined"!==typeof g&&null!==g&&(r=m.getClickCoordsInImage(a,k,g));switch(c){case "mousedown":Z.mouseIsDown=!0;kb=new Z.Utils.Point(g.x,g.y);za.mouseXPrior=g.x;za.mouseYPrior=g.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==D||"rectangle"==Z.labelMode&&null===D)Ha=ge(a,r);
if(!l&&"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing||null===Z.editMode&&"measure"==Z.labelMode)){"markup"!=Z.editMode&&m.toggleLabelColorPicker(!1);m.toggleLabelIconPicker(!1);Z.Utils.hideMessage();if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===
Ha)&&m.saveEditsLabel(!0,!1,!1);a=!1;"freehand"==Z.labelMode&&Z.mouseIsDown?("editLabel"==Z.editing&&J&&Z.Utils.arrayClear(J.polygonPts),a="editLabel"==Z.editing?D:null,Ab(a,!1,r),Ze=(r.x-Z.imageX)*k,$e=(r.y-Z.imageY)*k,Ac(D,!1),a=!0):"rectangle"==Z.labelMode&&null===Ha&&(g=1,a=null,"editLabel"==Z.editing&&(a=D,J&&null===Ha&&Z.Utils.arrayClear(J.polygonPts)),Ab(a,!1,r),Ab(D,!1,new Z.Utils.Point(r.x+g,r.y)),Ab(D,!1,new Z.Utils.Point(r.x+g,r.y+g)),Ab(D,!1,new Z.Utils.Point(r.x,r.y+g)),Ac(D,!0),Ha=2,
a=!0);a&&!Z.annotationsAddMultiple&&(Z.editing="editLabel")}else if(!l||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)Z.smoothPan&&!l&&Z.mousePan&&1<Z.smoothPanEasing&&(kd(void 0),Lf=kb,null===me&&(me=new Z.Utils.Point(parseFloat(R.left),parseFloat(R.top))),null===ld&&(ld=window.setInterval(Mf,50)));else if(N=ed(h)){g=Ya(a.clientX,a.clientY);u=new Z.Utils.Point(parseFloat(N.style.left),parseFloat(N.style.top));a=g.x-u.x;g=g.y-u.y;N.mouseXPrior=kb.x;N.mouseYPrior=kb.y;N.mouseXOffset=a;N.mouseYOffset=
g;N.style.zIndex=p.length+1;a=N.id.substring(3,N.id.length);if(D&&D!=a){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;nb("save","labels");a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",a);-1!=a&&(a=p[a],Tc(a.poiID,a.internalID));Z.Utils.validateCallback("labelSelectedInViewportGetIDs")}ga&&(Z.hotspotListTitle||Z.tourListTitle)&&(ga.selectedIndex=0)}break;case "mousemove":Ra=new Z.Utils.Point(g.x,g.y);u=(r.x-Z.imageX)*k;b=(r.y-Z.imageY)*k;va&&
(clearTimeout(va),va=null,ic(a,r,n));if(l||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))if(N){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;u=N.style;l=Ra.x-N.mouseXPrior;b=Ra.y-N.mouseYPrior;l=parseFloat(u.left)+l;b=parseFloat(u.top)+b;u.left=l+"px";u.top=b+"px";N.mouseXPrior=Ra.x;N.mouseYPrior=Ra.y;qf(a,N,Ra)}else!l&&Z.mousePan&&(ld?Wc=g:Z.animation&&m.getZoom()==Z.minZ?(g.x>
za.mouseXPrior?Z.Viewer.viewportNext():g.x<za.mouseXPrior&&Z.Viewer.viewportPrior(),za.mouseXPrior=g.x,za.mouseYPrior=g.y):(u=g.x-za.mouseXPrior,a=g.y-za.mouseYPrior,isNaN(u)||isNaN(a)||(u=parseFloat(R.left)+u,a=parseFloat(R.top)+a,b=v(u,a,Z.imageZ,Z.imageR,"container"),R.left=b.x+"px",R.top=b.y+"px",za.mouseXPrior=g.x,za.mouseYPrior=g.y,u=b.x-Fb,a=b.y-Qb,ta&&qb&&(Z.mobileDevice||Math.abs(u)>qa/2||Math.abs(a)>na/2)&&w(ta,lc,Yb,"simple",!1,"Updating backfill oversize display"),Z.Navigator&&(a=m.calculateCurrentCenterCoordinates(b,
Z.imageZ,Z.imageR),Z.Navigator.z658(a)))));else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D);a=-1!=a?p[a].polyClosed:!1;"freehand"==Z.labelMode&&Z.mouseIsDown?(Gf(Ze,$e,u,b,r),Ze=u,$e=b):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===Ha||!Z.mouseIsDown?"polygon"!=
Z.labelMode&&"measure"!=Z.labelMode||a||Z.mouseIsDown&&(!Z.mouseIsDown||null===Ha)||Ff(u,b,r):Re(D,Ha,r)}break;case "mouseup":Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(g=Z.mouseOutDownPoint,r=m.getClickCoordsInImage(a,k,Z.mouseOutDownPoint)):g=new Z.Utils.Point(g.x,g.y);k=Z.Utils.calculatePointsDistance(kb.x,kb.y,g.x,g.y);if(4>k||!l&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode))if(!N&&(null===Z.editMode&&"measure"==Z.labelMode||"view"!=Z.labelMode&&
("addLabel"==Z.editing||"editLabel"==Z.editing))){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"addLabel"!=Z.editing||l||!Ua||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||m.saveEditsLabel(!0,!1,!1);if(l&&Ua&&!f||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode)l?l&&("text"==Z.labelMode||"icon"==Z.labelMode)&&J&&(m.modifyHotspot(D,"x",r.x,!0,!0),m.modifyHotspot(D,
"y",r.y,!1,!0)):(g="undefined"!==typeof S&&0<S.options.length?g=S.options[S.selectedIndex].value:0,a=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(m.createLabelFromParameters(null,null,"text",null,null,r.x.toString(),r.y.toString(),u,null,null,null,null,null,null,null,null,Mc,null,null,null,null,null,null,null,"5","0",null,g),a=!0):J&&(m.modifyHotspot(D,"x",r.x,!0,!0),m.modifyHotspot(D,"y",r.y,!1,!0)):"icon"==Z.labelMode&&(b=document.getElementById("labelIconList"+b))&&(b=b[b.selectedIndex].value,
b="shim"==b?"":"External Graphics File"==b?b:Ea+"/"+b,"addLabel"==Z.editing?(m.createLabelFromParameters(null,null,"icon",b,null,r.x.toString(),r.y.toString(),u,null,null,null,null,null,null,null,null,Mc,null,null,null,null,null,null,null,null,"0",null,g),a=!0):J&&(m.modifyHotspot(D,"x",r.x,!0,!0),m.modifyHotspot(D,"y",r.y,!1,!0))),a&&(a=ka[ka.length-1],zc(a.poiID,a.value),Z.annotationsAddMultiple||(Z.editing="editLabel")));else if(l||f)ic(a,r),Ua||Z.Utils.addEventListener(document,"mousemove",xa);
else{Z.Utils.addEventListener(document,"mousemove",xa);var n=!1;va?(n=!0,clearTimeout(va),va=null,ic(a,r,n),Z.Utils.removeEventListener(document,"mousemove",xa)):(va=setTimeout(function(a){va=null;ic(a,r,n)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"mousemove",xa))}mb("label",Z.editing)}else if(null!==N&&(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations))N=null;else{if((null===Z.editing||"view"==Z.labelMode)&&!N)if(g=null,Z.labelClickSelect&&
(g=ed(h)),null!==g)a=g.id.substring(3,g.id.length),a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",a),-1!=a&&(a=p[a],Tc(a.poiID,a.internalID),m.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation),Z.Utils.validateCallback("labelSelectedInViewportGetIDs")),ga&&(Z.hotspotListTitle||Z.tourListTitle)&&(ga.selectedIndex=0);else{if(Z.clickZoom||Z.clickPan){g=va&&Z.doubleClickZoom?!0:!1;var y=m.getClickZoomCoords3D(a,kb,ea,ya,g)}Z.clickZoom?Z.doubleClickZoom?va?(clearTimeout(va),va=null,m.zoomAndPanToView(y.x,
y.y,y.z)):va=setTimeout(function(a){va=null;m.zoomAndPanToView(y.x,y.y,y.z)},Z.doubleClickDelay):window.setTimeout(function(){m.zoomAndPanToView(y.x,y.y,y.z)},1):Z.clickPan&&m.zoomAndPanToView(y.x,y.y,Z.imageZ)}}else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!Sd&&(null!==Ha||Ua)?N&&(u=N.style,l=g.x-N.mouseXPrior,b=g.y-N.mouseYPrior,l=parseFloat(u.left)+l,b=parseFloat(u.top)+
b,u.left=l+"px",u.top=b+"px",qf(a,N,g),N.style.zIndex=N.zIndex,N=null):(Ha=null,Sd=!1,a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D),-1!=a&&(a=p[a],g=Z.Utils.polygonCenter(a.polygonPts,a.polyClosed),a.x=g.x,a.y=g.y,Z.Utils.clearDisplay(Pa),g=new Ka,ud(a,g),Ua||Z.Utils.addEventListener(document,"mousemove",xa)));Ra=null;Z.mousePan&&!Z.smoothPan&&m.updateView()}Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),
Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1));break;case "touchstart":if(d&&!xd){Z.mouseIsDown=!0;Nf=!1;kb=new Z.Utils.Point(g.x,g.y);za.mouseXPrior=g.x;za.mouseYPrior=g.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==D||"rectangle"==Z.labelMode&&null===D)Ha=ge(a,r);if(!l&&"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing||null===Z.editMode&&"measure"==Z.labelMode)){"markup"!=
Z.editMode&&m.toggleLabelColorPicker(!1);m.toggleLabelIconPicker(!1);Z.Utils.hideMessage();if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===Ha)&&m.saveEditsLabel(!0,!1,!1);"freehand"==Z.labelMode&&Z.mouseIsDown?("editLabel"==Z.editing&&J&&Z.Utils.arrayClear(J.polygonPts),
a="editLabel"==Z.editing?D:null,Ab(a,!1,r),Ze=(r.x-Z.imageX)*k,$e=(r.y-Z.imageY)*k,Ac(D,!1)):"rectangle"==Z.labelMode&&null===Ha&&(g=1,a=null,"editLabel"==Z.editing&&(a=D,J&&null===Ha&&Z.Utils.arrayClear(J.polygonPts)),Ab(a,!1,r),Ab(D,!1,new Z.Utils.Point(r.x+g,r.y)),Ab(D,!1,new Z.Utils.Point(r.x+g,r.y+g)),Ab(D,!1,new Z.Utils.Point(r.x,r.y+g)),Ac(D,!0),Ha=2)}else if(l&&("addLabel"==Z.editing||"editLabel"==Z.editing)&&(N=ed(h))){g=Ya(a.clientX,a.clientY);u=new Z.Utils.Point(parseFloat(N.style.left),
parseFloat(N.style.top));a=g.x-u.x;g=g.y-u.y;N.mouseXPrior=kb.x;N.mouseYPrior=kb.y;N.mouseXOffset=a;N.mouseYOffset=g;N.style.zIndex=p.length+1;a=N.id.substring(3,N.id.length);if(D&&D!=a){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;nb("save","labels");a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",a);-1!=a&&(a=p[a],Tc(a.poiID,a.internalID));Z.Utils.validateCallback("labelSelectedInViewportGetIDs")}ga&&(Z.hotspotListTitle||Z.tourListTitle)&&(ga.selectedIndex=
0)}}break;case "touchmove":if(d&&!xd&&!Nf)if(Ra=new Z.Utils.Point(g.x,g.y),u=(r.x-Z.imageX)*k,b=(r.y-Z.imageY)*k,va&&(clearTimeout(va),va=null,ic(a,r,n)),l||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))if(N){if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;u=N.style;l=Ra.x-N.mouseXPrior;b=Ra.y-N.mouseYPrior;l=parseFloat(u.left)+l;b=parseFloat(u.top)+b;u.left=l+"px";u.top=b+"px";N.mouseXPrior=
Ra.x;N.mouseYPrior=Ra.y;qf(a,N,Ra)}else!l&&Z.mousePan&&(ld?Wc=g:(u=g.x-za.mouseXPrior,a=g.y-za.mouseYPrior,isNaN(u)||isNaN(a)||(u=parseFloat(R.left)+u,a=parseFloat(R.top)+a,b=v(u,a,Z.imageZ,Z.imageR,"container"),R.left=b.x+"px",R.top=b.y+"px",za.mouseXPrior=g.x,za.mouseYPrior=g.y,u=b.x-Fb,a=b.y-Qb,ta&&qb&&(Z.mobileDevice||Math.abs(u)>qa/2||Math.abs(a)>na/2)&&w(ta,lc,Yb,"simple",!1,"Updating backfill oversize display"),Z.Navigator&&(a=m.calculateCurrentCenterCoordinates(b,Z.imageZ,Z.imageR),Z.Navigator.z658(a)))));
else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction()&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode))break;a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D);a=-1!=a?p[a].polyClosed:!1;"freehand"==Z.labelMode&&Z.mouseIsDown?(Gf(Ze,$e,u,b,r),Ze=u,$e=b):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===Ha||!Z.mouseIsDown?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||a||
Z.mouseIsDown&&(!Z.mouseIsDown||null===Ha)||Ff(u,b,r):Re(D,Ha,r)}break;case "touchend":if(!xd&&!Nf){Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(g=Z.mouseOutDownPoint,r=m.getClickCoordsInImage(a,k,Z.mouseOutDownPoint)):g="undefined"!==typeof g&&null!==g?new Z.Utils.Point(g.x,g.y):"undefined"!==typeof Ra&&null!==Ra?Ra:kb;k=Z.Utils.calculatePointsDistance(kb.x,kb.y,g.x,g.y);if(4>k||!l&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode))if(N||(null!==Z.editMode||
"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))null!==N&&(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations)?N=null:null!==Z.editing&&"view"!=Z.labelMode||N||(Z.clickZoom?(g=va&&Z.doubleClickZoom?!0:!1,y=m.getClickZoomCoords3D(a,kb,ea,ya,g),Z.doubleClickZoom?va?(clearTimeout(va),va=null,m.zoomAndPanToView(y.x,y.y,y.z)):va=setTimeout(function(a){va=null;m.zoomAndPanToView(y.x,y.y,y.z)},Z.doubleClickDelay):window.setTimeout(function(){m.zoomAndPanToView(y.x,
y.y,y.z)},1)):Z.clickPan&&m.zoomAndPanToView(y.x,y.y,Z.imageZ));else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"addLabel"!=Z.editing||l||!Ua||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||m.saveEditsLabel(!0,!1,!1);l&&Ua||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?l?l&&("text"==Z.labelMode||"icon"==Z.labelMode)&&J&&(m.modifyHotspot(D,"x",r.x,!0,
!0),m.modifyHotspot(D,"y",r.y,!1,!0)):(g="undefined"!==typeof S&&0<S.options.length?g=S.options[S.selectedIndex].value:0,a=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(m.createLabelFromParameters(null,null,"text",null,null,r.x.toString(),r.y.toString(),u,null,null,null,null,null,null,null,null,Mc,null,null,null,null,null,null,null,"5","0",null,g),a=!0):J&&(m.modifyHotspot(D,"x",r.x,!0,!0),m.modifyHotspot(D,"y",r.y,!1,!0)):"icon"==Z.labelMode&&(b=document.getElementById("labelIconList"+b))&&(b=b[b.selectedIndex].value,
b="shim"==b?"":"External Graphics File"==b?b:Ea+"/"+b,"addLabel"==Z.editing?(m.createLabelFromParameters(null,null,"icon",b,null,r.x.toString(),r.y.toString(),u,null,null,null,null,null,null,null,null,Mc,null,null,null,null,null,null,null,null,"0",null,g),a=!0):J&&(m.modifyHotspot(D,"x",r.x,!0,!0),m.modifyHotspot(D,"y",r.y,!1,!0))),a&&(a=ka[ka.length-1],zc(a.poiID,a.value))):l||f?(ic(a,r),Ua||Z.Utils.addEventListener(document,"mousemove",viewerEventsHandler)):(Z.Utils.addEventListener(document,"touchmove",
xa),n=!1,va?(n=!0,clearTimeout(va),va=null,ic(a,r,n),Z.Utils.removeEventListener(document,"touchmove",xa)):(va=setTimeout(function(a){va=null;ic(a,r,n)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"touchmove",xa)));mb("label",Z.editing)}else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!Sd&&(null!==Ha||Ua)?N&&(u=
N.style,l=g.x-N.mouseXPrior,b=g.y-N.mouseYPrior,l=parseFloat(u.left)+l,b=parseFloat(u.top)+b,u.left=l+"px",u.top=b+"px",qf(a,N,g),N.style.zIndex=N.zIndex,N=null):(Ha=null,Sd=!1,a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D),-1!=a&&(a=p[a],g=Z.Utils.polygonCenter(a.polygonPts,a.polyClosed),a.x=g.x,a.y=g.y,Z.Utils.clearDisplay(Pa),g=new Ka,ud(a,g),Ua||Z.Utils.addEventListener(document,"touchmove",xa)));Ra=null;Z.mousePan&&!ld&&m.updateView()}Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&
Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1))}break;case "touchcancel":if(!xd&&!Nf){Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(g=Z.mouseOutDownPoint,r=m.getClickCoordsInImage(a,k,Z.mouseOutDownPoint)):g="undefined"!==typeof g&&null!==g?new Z.Utils.Point(g.x,g.y):"undefined"!==typeof Ra&&
null!==Ra?Ra:kb;k=Z.Utils.calculatePointsDistance(kb.x,kb.y,g.x,g.y);if(4>k||!l&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode))if(N||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))null!==N&&(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations)?N=null:null!==Z.editing&&"view"!=Z.labelMode||N||(Z.clickZoom?(g=va&&Z.doubleClickZoom?!0:!1,y=m.getClickZoomCoords3D(a,kb,ea,ya,g),Z.doubleClickZoom?va?(clearTimeout(va),va=null,m.zoomAndPanToView(y.x,
y.y,y.z)):va=setTimeout(function(a){va=null;m.zoomAndPanToView(y.x,y.y,y.z)},Z.doubleClickDelay):window.setTimeout(function(){m.zoomAndPanToView(y.x,y.y,y.z)},1)):Z.clickPan&&m.zoomAndPanToView(y.x,y.y,Z.imageZ));else{if("function"===typeof Z.externalEditPermissionFunction&&!Z.externalEditPermissionFunction())break;"addLabel"!=Z.editing||l||!Ua||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||m.saveEditsLabel(!0,!1,!1);l&&Ua||"freehand"!=Z.labelMode&&"rectangle"!=
Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?l?l&&("text"==Z.labelMode||"icon"==Z.labelMode)&&J&&(m.modifyHotspot(D,"x",r.x,!0,!0),m.modifyHotspot(D,"y",r.y,!1,!0)):(g="undefined"!==typeof S&&0<S.options.length?g=S.options[S.selectedIndex].value:0,a=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(m.createLabelFromParameters(null,null,"text",null,null,r.x.toString(),r.y.toString(),u,null,null,null,null,null,null,null,null,Mc,null,null,null,null,null,null,null,"5","0",null,g),a=!0):J&&
(m.modifyHotspot(D,"x",r.x,!0,!0),m.modifyHotspot(D,"y",r.y,!1,!0)):"icon"==Z.labelMode&&(b=document.getElementById("labelIconList"+b))&&(b=b[b.selectedIndex].value,b="shim"==b?"":"External Graphics File"==b?b:Ea+"/"+b,"addLabel"==Z.editing?(m.createLabelFromParameters(null,null,"icon",b,null,r.x.toString(),r.y.toString(),u,null,null,null,null,null,null,null,null,Mc,null,null,null,null,null,null,null,null,"0",null,g),a=!0):J&&(m.modifyHotspot(D,"x",r.x,!0,!0),m.modifyHotspot(D,"y",r.y,!1,!0))),a&&
(a=ka[ka.length-1],zc(a.poiID,a.value))):l||f?(ic(a,r),Ua||Z.Utils.addEventListener(document,"mousemove",viewerEventsHandler)):(Z.Utils.addEventListener(document,"touchmove",xa),n=!1,va?(n=!0,clearTimeout(va),va=null,ic(a,r,n),Z.Utils.removeEventListener(document,"touchmove",xa)):(va=setTimeout(function(a){va=null;ic(a,r,n)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"touchmove",xa)));mb("label",Z.editing)}else{if("function"===typeof Z.externalEditPermissionFunction&&
!Z.externalEditPermissionFunction())break;"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!Sd&&(null!==Ha||Ua)?N&&(u=N.style,l=g.x-N.mouseXPrior,b=g.y-N.mouseYPrior,l=parseFloat(u.left)+l,b=parseFloat(u.top)+b,u.left=l+"px",u.top=b+"px",qf(a,N,g),N.style.zIndex=N.zIndex,N=null):(Ha=null,Sd=!1,a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",D),-1!=a&&(a=p[a],g=Z.Utils.polygonCenter(a.polygonPts,a.polyClosed),a.x=g.x,a.y=g.y,Z.Utils.clearDisplay(Pa),g=new Ka,ud(a,g),Ua||Z.Utils.addEventListener(document,
"touchmove",xa)));Ra=null;Z.mousePan&&!ld&&m.updateView()}Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1))}break;case "gesturestart":Of(a);xd||(xd=window.setInterval(Pf,Bi));break;case "gesturechange":lh=Math.round(100*a.scale)/100;break;case "gestureend":xd&&(window.clearInterval(xd),
Nf=!0,xd=null),Z.mousePan&&m.updateView()}}}function kd(a){null!==ld&&a&&(window.clearInterval(ld),ld=null);me=Qf=Rf=wb=null;Ib=Ub=vc=Cc=0}function Mf(a){if(Z.animation&&m.getZoom()==Z.minZ){Z.animationCount++;null===Sf&&(Sf=parseFloat(R.left));null===Tf&&(Tf=parseFloat(R.top));a=Sf;var b=Tf;if(Z.mouseIsDown||wb){var c=(wb?Qf:Wc.x)-Lf.x,d=(wb?Rf:Wc.y)-Lf.y,h=a-me.x,g=b-me.y;if(!(isNaN(c)||isNaN(d)||isNaN(h)||isNaN(g)||0==c&&0==d&&0==h&&0==g)){var f=wb?Z.smoothPanGlide:1,l=wb?1:100;Ib=Math.round((c-
h)/(Z.smoothPanEasing*f)*l/l);Ub=Math.round((d-g)/(Z.smoothPanEasing*f)*l/l);Z.mouseIsDown?(vc=Ib,Cc=Ub):(Math.abs(Ib)>Math.abs(vc)&&(Ib=vc),Math.abs(Ub)>Math.abs(Cc)&&(Ub=Cc));b+=Ub;Sf=a+Ib;Tf=b;var k,u,r,y;"motion"==Z.animator?(k="horizontal"==Z.animationAxis?Ib:Ub,dimensionAxis="horizontal"==Z.animationAxis?qa:na,u=Math.round(Ci/Z.imageSetLength),r=k/40,y=0):"position"==Z.animator&&(k="horizontal"==Z.animationAxis?h:g,dimensionAxis="horizontal"==Z.animationAxis?qa:na,u=Math.max(0,Math.round((dimensionAxis/
2-Math.abs(k))/Di)),r=0,y="horizontal"==Z.animationAxis?qa/10:na/10);0==u&&u++;0==Z.animationCount%u&&(k<-y?Z.Viewer.viewportPrior(r):k>y&&Z.Viewer.viewportNext(r));wb&&0==Math.round(Ib*l)/l&&0==Math.round(Ub*l)/l&&(wb=!1)}}else if(Z.mouseIsDown||null!==wb||0==Ib||0==Ub)kd(!0),Tf=Sf=null;else if(0!=vc||0!=Cc)Qf=Wc.x+vc,Rf=Wc.y+Cc,wb=!0}else if(r=parseFloat(R.left),u=parseFloat(R.top),Z.mouseIsDown||wb)y=(wb?Qf:Wc.x)-Lf.x,a=(wb?Rf:Wc.y)-Lf.y,h=r-me.x,g=u-me.y,isNaN(y)||isNaN(a)||isNaN(h)||isNaN(g)||
0==y&&0==a&&0==h&&0==g||(l=wb?Z.smoothPanGlide:1,k=wb?1:100,Ib=Math.round((y-h)/(Z.smoothPanEasing*l)*k/k),Ub=Math.round((a-g)/(Z.smoothPanEasing*l)*k/k),Z.mouseIsDown?(vc=Ib,Cc=Ub):(Math.abs(Ib)>Math.abs(vc)&&(Ib=vc),Math.abs(Ub)>Math.abs(Cc)&&(Ub=Cc)),r+=Ib,u+=Ub,y=v(r,u,Z.imageZ,Z.imageR,"container"),R.left=y.x+"px",R.top=y.y+"px",Ib-=r-y.x,Ub-=u-y.y,u=y.x-Fb,r=y.y-Qb,ta&&qb&&(wb||Z.mobileDevice||Math.abs(u)>qa/2||Math.abs(r)>na/2)&&w(ta,lc,Yb,"simple",!1,"Updating backfill oversize display"),
wb&&0==Math.round(Ib*k)/k&&0==Math.round(Ub*k)/k&&(wb=!1),Z.Navigator&&(k=m.calculateCurrentCenterCoordinates(y,Z.imageZ,Z.imageR),Z.Navigator.z658(k)));else if(Z.mouseIsDown||null!==wb||0==Ib||0==Ub)kd(!0),m.updateView();else if(y=v(r+vc,u+Cc,Z.imageZ,Z.imageR,"container"),vc=y.x-r,Cc=y.y-u,0!=vc||0!=Cc)Qf=Wc.x+vc,Rf=Wc.y+Cc,wb=!0}function Of(a){a=Z.Utils.event(a);a.preventDefault();lh=Math.round(100*a.scale)/100}function Pf(a){if(Z.mousePan){a=eb(ea,wc*lh);var b=jb(a);a!=Z.imageZ&&m.z633(b)}}function ob(a){if(a=
Z.Utils.event(a)){var b;b=Z.Utils.event(a);var c=m.getZoom(),d=m.getClickCoordsInImage(b,c);b=Math.round(d.x).toString();d=Math.round(d.y).toString();c=(Math.round(1E3*c)/10).toString();coordsString='X="'+b+'"   Y="'+d+'"   ZOOM="'+c+'"';"mousemove"==a.type?Z.Utils.showCoordinates(coordsString):"mousedown"==a.type&&a.altKey&&Z.Utils.saveCoordinates(coordsString)}}var Rb,Jb,bb,Ea,Te=null,je=null,Ma=0;"undefined"!==typeof a&&null!==a&&(Ma=a);var $b;$b="undefined"!==typeof b&&null!==b?b:Z.imagePath;
"undefined"===typeof d||null===d?Jb=Rb=Z.hotspotPath:(Jb=Rb=d,".xml"==Jb.toLowerCase().substring(Jb.length-4,Jb.length)&&(Jb=Jb.substring(0,Jb.lastIndexOf("/"))));"undefined"===typeof c||null===c?(bb=Z.annotationPath,Ea=Z.annotationFolder):(Ea=bb=c,".xml"==Ea.toLowerCase().substring(Ea.length-4,Ea.length)&&(Ea=Ea.substring(0,Ea.lastIndexOf("/"))));Rb?(Z.hotspots=!0,Z.annotationPathProvided=!0,Z.imageSet&&(Z.hotspotPath="multiple")):bb&&(Z.annotations=!0,Z.annotationPathProvided=!0,Z.imageSet&&(Z.annotationPath=
"multiple"));var m=this,Dc=[],Wd=-1,pe=0,Oc=0,tb=parseInt(Z.Utils.getResource("z90"),10),ag=8*tb,ae=4*tb,yd=0,fb=parseInt(Z.Utils.getResource("z221"),10),Aa=parseInt(Z.Utils.getResource("z219"),10),kc=parseFloat(Z.Utils.getResource("z218")),vg=kc/2,Lc=parseInt(Z.Utils.getResource("z220"),10),ne=1==Z.toolbarVisible?Z.toolbarH:0,xc,ta,bc,$a,sb,za,R,ve,aa,ca,Kc,dc,ua,Ta,xb,Dg,Mb,we,Zd,Ig,ab,xe,Xf,ba,Jc,Og,Pg,se,ze,Kg,hb,Hc,Yf,Lg,Pa,Ic,Qa,Gg,Xc,Hg,ye,Eg,Pc,Fg,Ng,Ze,$e,Jg,Sa,Ob,Ja,Mg,ec,df,Xa;E(Ma);var mc,
Bb=1,ea=0,gb=0,qb=!1,lc=0,Qg=!1,ya,wc,cc,Vb,cb=[],Wa=[],yb=[],rc=[],rb=[],Yd=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];var pd=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=[];var Zc=[],Yb=[],Cb=[],qc=[],ad=[],Yc=0,Ec=0,Ah=0,Rg=0,Sg=0,Tg=0,Vg=0,Qh,cg=0,dg=0,ff=0,sd=0,ef=0,Ad=0,ce=0,eg=0,Fc=[],Ba=[],Db=[],$c=[],Qc=[],Gc=[],De=null,fg=0,hi=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYLIMIT"),10),Bh=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYDELAY"),
10),Nb=[],Wf=[],ib=[],Va=[],nd=[],Eb=[],gi=new Z.NetConnector,Wg,bd=[],ue=[],od=[],te=[],Cg=parseInt(Z.Utils.getResource("z81"),10),Ei=parseInt(Z.Utils.getResource("z78"),10),hg=parseInt(Z.Utils.getResource("z80"),10),$d=parseInt(Z.Utils.getResource("z77"),10),lc=$d,ig=parseInt(Z.Utils.getResource("z79"),10),Be=parseInt(Z.Utils.getResource("z76"),10),Ae=parseInt(Z.Utils.getResource("z75"),10),xh=null,yh=null,zh=null,Fi=parseFloat(Z.Utils.getResource("z173UNCONVERTED"),10),Gi=null!==Z.panBuffer?Z.panBuffer:
parseFloat(Z.Utils.getResource("z173"),10),wh="unconverted"!=Z.tileSource?Gi:Fi,Oh=parseFloat(Z.Utils.getResource("z74"),10),fi=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXBROWSER"),10),ei=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXFIREFOX"),10),di=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXIMAGESET"),10),qa,na,Bg,cf,Ca,Da,fc,Pb,Fb,Qb,jd,Nc,jh,kh,Bc,oc;qa=Z.viewerW;na=Z.viewerH;Bg=cf=0;na-=ne;0==Z.toolbarPosition&&(cf+=ne);var va=null,kb,Ra,xd=null,lh=null,Nf=!1,Bi=parseInt(Z.Utils.getResource("z122"),
10),wg=Math.round(parseFloat(Z.Utils.getResource("z176"))*Z.panSpeed),nc=0,tc=0,Sf=null,Tf=null,Ci=parseInt(Z.Utils.getResource("DEFAULT_ANIMATIONOPTIMALMOTIONIMAGES"),10),Di=parseInt(Z.Utils.getResource("DEFAULT_ANIMATIONOPTIMALPOSITIONDELTA"),10),Ib=0,Ub=0,vc=0,Cc=0,wb=null,Qf=null,Rf=null,ld=null,Lf=null,me=null,Wc=null,af=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(af/=2);var jc=0,Vc=null,hh=0,ih=parseInt(Z.Utils.getResource("z238"),10),Ug=parseFloat(Z.Utils.getResource("z112"))*
Z.fadeInSpeed,bg=null,Hi=parseFloat(Z.Utils.getResource("z239")),mh=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(mh/=2);var Vd=null,Jf=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var nh,Rh,Sh,Th,Uh,oh,Vh,bf,ph;if(Z.virtualPointerVisible)var Wh=Z.Utils.getResource("z232"),fa,md;Z.crosshairsVisible&&Z.Utils.drawCrosshairs(Z.ViewerDisplay,qa,na);if(Z.measureVisible||null!==Z.editMode){var si=Z.Utils.getResource("z431"),ti=Z.Utils.getResource("z431TOTAL"),ui=Z.Utils.getResource("z433"),
wi=Z.Utils.getResource("z430"),vi=Z.Utils.getResource("z434"),pi=parseFloat(Z.Utils.getResource("DEFAULT_MEASURECAPTIONBACKOPACITY"));parseInt(Z.Utils.getResource("z154"),10);parseInt(Z.Utils.getResource("z156"),10)}if(Z.imageFiltersVisible)var sg=null,tg=null,Kf=null,be=!1,gc=[];if(Z.Utils.stringValidate(Z.watermarkPath))var Cd,Ch,uh=[],vh=[];if(Z.tour)var Ld,zf,qh,fh;null!==Z.imagePath&&-1!=Z.imagePath.indexOf("zSlidePath")&&(Z.slidePath=Z.imagePath.substring(11,Z.imagePath.length),Z.slideshow=
!0);null!==Z.imagePath&&(-1!=Z.imagePath.indexOf("zAnimationPath")?(Z.imageSetPath=Z.imagePath.substring(15,Z.imagePath.length),Z.imageSet=!0,Z.animation=!0):-1!=Z.imagePath.indexOf("zSlidestackPath")&&(Z.imageSetPath=Z.imagePath.substring(16,Z.imagePath.length),Z.imageSet=!0,Z.slidestack=!0));if(Z.slideshow){var Tb=[],xg=[],wd,Wb,rh,sh,Vf,gh,Xh=parseFloat(Z.Utils.getResource("z211"))*Z.slideTransitionSpeed;Z.slideTransitionTimeout=null;Z.slideOpacity=0}if(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations){var rf=
!1,p=[],Xb=[],kf=[],lf=[],J=null,D=null,N=null,Ne=null,Rd=null,Uf=null,oa,Bf=null,ng=!1,Ua=!0,Ha=null,Sd=!1,mi=new Z.NetConnector,Nh=Z.Utils.getResource("z177"),xi=parseFloat(Z.Utils.getResource("z179")),dd=parseInt(Z.Utils.getResource("z180"),10),yi=Z.Utils.getResource("z96"),ah=Z.Utils.getResource("z98"),zi=Z.Utils.getResource("z113"),Ai=Z.Utils.getResource("z216"),og=parseInt(Z.Utils.getResource("z97"),10),Mh=Z.Utils.getResource("z177FREEHAND"),Mc=Z.Utils.getResource("z89"),Dh=Z.Utils.getResource("DEFAULT_CAPTIONBACKCOLOR"),
qi=parseInt(Z.Utils.getResource("z129"),10),Ih=parseInt(Z.Utils.getResource("z160"),10),Jh=parseInt(Z.Utils.getResource("z151"),10),ri=parseInt(Z.Utils.getResource("z130"),10),Kh=parseInt(Z.Utils.getResource("z161"),10),Lh=parseInt(Z.Utils.getResource("z152"),10);Z.mobileDevice&&(og*=2);if(Z.maskVisible){var Uc=[],Yh=parseFloat(Z.Utils.getResource("DEFAULT_MASKFADESTEP"))*Z.maskFadeSpeed;Z.setCallback("viewUpdateComplete",function(){Z.maskingSelection&&setMask()})}if(Z.tour||Z.hotspots)var ga,yg,
Zf,zg,He,Ie,Zh,pc=[];else if(Z.measureVisible||Z.annotations){var Kb,$f,S,Ia,ia,Kd,Dd,Zb,Ed,zd,$h,ai,bi,ci,Yg,pa=[],Ga=[],pb=[],ka=[],db=[],vf=[];labelCaptionPositionListDP=[];labelTargetListDP=[];var dh=[],bh=[],ch=[],pg=[],eh=[],uc=0,le=null,Ag=parseFloat(Z.Utils.getResource("z147")),Ph=parseInt(Z.Utils.getResource("z148"),10);Z.mobileDevice&&(Ag/=2)}}if(null!==Z.imagePath&&"null"!=Z.imagePath){if(1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z290"),!0);
return}if(1==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z289"),!0);return}1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)&&Z.Utils.showMessage(Z.Utils.getResource("z288"),!0);if(null!==Z.imageW&&null!==Z.imageH&&null!==Z.sourceMagnification)"undefined"!==typeof m.getStatus?l(Z.imageW,Z.imageH,fb,Aa,null,null,null,null,Z.sourceMagnification,
Z.focal,Z.quality):window.setTimeout(function(){l(Z.imageW,Z.imageH,fb,Aa,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality)},100);else if(null!==Z.imageProperties){var Ii=Z.Utils.xmlConvertTextToDoc(Z.imageProperties);M(Ii)}else if("unconverted"==Z.tileSource)r($b);else if(-1==Z.imagePath.indexOf("zSlidePath")&&-1==Z.imagePath.indexOf("zAnimationPath")){var th=new Z.NetConnector;G($b,th,Ma)}}Z.slideshow&&(th=new Z.NetConnector,f(th));this.setSizeAndPosition=function(a,b,c,d){Q(a,b,c,d)};
this.syncViewportResize=function(a,b,c,d,h,g,f){m.setSizeAndPosition(Z.viewerW,Z.viewerH,0,0);m.resizeViewport(a,b,c,d)};this.resizeViewport=function(a,b,c,d){m.validateXYZDefaults();m.setView(a,b,c,d)};this.loadImageProperties=function(a,b,c){G(a,b,c)};this.parseZIFHeader=function(a){C();if(73==a[0]&&73==a[1]&&43==a[2]&&0==a[3]&&8==a[4]&&0==a[5]&&0==a[6]&&0==a[7]&&16==a[8]&&0==a[9]&&0==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&0==a[15]){for(var b=Z.Utils.longValue(a,8),c=Z.Utils.longValue(a,
b),d=1,h=null,g=null,f=null,u=null,r=null,w=null,w=2;0!=b;){for(h=0;h<c;h++)switch(g=b+8+20*h,Z.Utils.shortValue(a,g)){case 256:cb[d-1]=Z.Utils.intValue(a,g+12);break;case 257:Wa[d-1]=Z.Utils.intValue(a,g+12);break;case 322:f=Z.Utils.intValue(a,g+12);break;case 323:u=Z.Utils.intValue(a,g+12);break;case 324:var y=tierTileOffsetsCount[d-1]=Z.Utils.longValue(a,g+4);Yd[d-1]=Z.Utils.longValue(a,g+12);r+=y;break;case 325:y=tierTileByteCountsCount[d-1]=Z.Utils.longValue(a,g+4),pd[d-1]=1==y?Z.Utils.intValue(a,
g+12):2==y?Z.Utils.intValue(a,g+12)+","+Z.Utils.intValue(a,g+16):Z.Utils.longValue(a,g+12)}b=Z.Utils.longValue(a,b+20*c+8);c=Z.Utils.longValue(a,b);d++}h=cb[0];g=Wa[0];Bb=d-1;cb.reverse();Wa.reverse();tierTileOffsetsCount.reverse();Yd.reverse();tierTileByteCountsCount.reverse();pd.reverse();!isNaN(h)&&0<h&&!isNaN(g)&&0<g&&!isNaN(f)&&0<f&&!isNaN(u)&&0<u&&0<r?"undefined"!==typeof m.getStatus?l(h,g,f,u,r,w,null,null,null,null,null):k(h,g,f,u,r,w,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?
Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}};this.parseZIFOffsetChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",b);-1!=c&&(tierTileOffsetChunks[c].chunk=a,da(b,"offset"))};this.parseZIFByteCountChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",b);-1!=c&&(tierTileByteCountChunks[c].chunk=a,da(b,"byteCount"))};this.parseZIFImage=function(a,b,c){a="data:image/jpeg;base64,"+
Z.Utils.encodeBase64(a);var d;"image-display"==c?d=m.getStatus("imageSaving")?qd:Na:"image-backfill"==c?d=m.getStatus("imageSaving")?Fd:U:"navigator"==c&&(d=Z.Navigator.z556);b=Z.Utils.createCallback(null,d,b);Z.Utils.createImageElementFromBytes(a,b)};this.z602=function(a){M(a)};this.validateXYZDefaults=function(a){a&&Z.Utils.resetParametersXYZ(Z.parameters);var b=parseFloat(Z.Utils.getResource("z143")),c=parseFloat(Z.Utils.getResource("z144")),d=parseFloat(Z.Utils.getResource("z145")),h=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR")),
g=parseFloat(Z.Utils.getResource("z163"));a=parseFloat(Z.Utils.getResource("z153"));b=isNaN(b)?null:b;c=isNaN(c)?null:c;d=isNaN(d)?null:d;h=isNaN(h)?null:h;g=isNaN(g)?null:g;a=isNaN(a)?null:a;Z.parameters?(Z.parameters.zInitialX||(Z.initialX=b),Z.parameters.zInitialY||(Z.initialY=c),Z.parameters.zInitialZoom||(Z.initialZ=d),Z.parameters.zInitialRotation||(Z.initialR=h),Z.parameters.zMinZoom||(Z.minZ=g),Z.parameters.zMaxZoom||(Z.maxZ=a)):(Z.initialX=b,Z.initialY=c,Z.initialZ=d,Z.initialR=h,Z.minZ=
g,Z.maxZ=a);null===Z.initialX&&(Z.initialX=Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=m.z468(0);Z.fillZ=m.calculateZoomToFill(0);b=m.getStatus("initialized")?m.getRotation():Z.initialR;a=m.z468(b);b=m.calculateZoomToFill(b);1<Z.fitZ&&(null!==Z.maxZ?Z.fitZ>Z.maxZ&&(Z.fitZ=Z.maxZ):"unconverted"==Z.tileSource&&(Z.fitZ=1));1<Z.fillZ&&(null!==Z.maxZ?Z.fillZ>Z.maxZ&&(Z.fillZ=Z.maxZ):"unconverted"==Z.tileSource&&(Z.fillZ=1));null===Z.minZ||-1==Z.minZ?Z.minZ=Z.fitZ:0==Z.minZ&&(Z.minZ=Z.fillZ);
if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=1;null===Z.initialZ||-1==Z.initialZ?Z.initialZ=a:0==Z.initialZ&&(Z.initialZ=b);Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getViewW=function(){return qa};this.getViewH=function(){return na};this.getDisplayW=function(){return Ca};this.getDisplayH=function(){return Da};this.getImagePath=function(){return $b};this.setImagePath=function(a){$b=a};this.getViewportID=function(){return Ma};this.getTierCount=function(){return Bb};
this.getTileW=function(){return fb};this.getTileH=function(){return Aa};this.getTierCurrent=function(){return ea};this.getTierBackfill=function(){return gb};this.getTierBackfillDynamic=function(){return qb};this.getTierBackfillOversize=function(){return lc};this.getTierScale=function(){return ya};this.getX=function(){var a=parseFloat(R.left)-Fb,b=m.getZoom();return Te-a/b};this.getY=function(){var a=parseFloat(R.top)-Qb,b=m.getZoom();return je-a/b};this.getZoom=function(){return eb(ea,ya)};this.getRotation=
function(){return Z.imageR};this.getTiersScaleUpMax=function(){return kc};this.getTiersScaleDownMax=function(){return vg};this.getTilesCacheMax=function(){return Lc};this.getTierWs=function(){return cb.join(",")};this.getTierHs=function(){return Wa.join(", ")};this.getTierTileCounts=function(){return rb.join(", ")};this.getTilesToLoad=function(){return Yc};this.getTilesLoadingNames=function(){return""==Ba.join(", ")?"Current view loading complete":Ba.join(", ")};this.getTilesToDraw=function(){return Ad};
this.getConstrainPan=function(a){return Z.constrainPan};this.setConstrainPan=function(a){Z.constrainPan=0!=a;Z.constrainPanStrict=2==a?!0:!1;Z.constrainPan&&m.toggleConstrainPan(!0)};this.getSmoothPan=function(){return Z.smoothPan};this.setSmoothPan=function(a){Z.smoothPan=a};this.getSmoothPanEasing=function(){return Z.smoothPanEasing};this.setSmoothPanEasing=function(a){Z.smoothPanEasing=a};this.getSmoothPanGlide=function(){return Z.smoothPanGlide};this.setSmoothPanGlide=function(a){Z.smoothPanGlide=
a};this.setCoordinatesDisplayVisibility=function(a){a?(Z.Utils.addEventListener(document,"mousemove",ob),Z.Utils.addEventListener(document,"mousedown",ob)):(Z.coordinatesVisible=!1,Z.Utils.removeEventListener(document,"mousemove",ob),Z.Utils.removeEventListener(document,"mousedown",ob))};this.setTourPath=function(a,b){m.setHotspotPath(a,b)};this.setHotspotPath=function(a,b){"undefined"===typeof a||Z.Utils.stringValidate(a)?(Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.hotspotFolder=
Z.hotspotPath,".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/"))),b||(m.deleteAllHotspots(),re(Ma))):(Z.hotspotPath=null,Z.hotspotFolder=null,m.deleteAllHotspots())};this.getHotspots=function(){return p};this.setHotspots=function(a){p=a.slice(0)};this.setAnnotationPath=function(a,b){"undefined"!==typeof a&&Z.Utils.stringValidate(a)?(Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(a),
Z.annotationFolder=Z.annotationPath,".json"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length)&&".xml"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationPath=Z.annotationPath+"/"+Z.Utils.getResource("z69")),".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/"))),Z.annotations=
!0,b||(m.deleteAllAnnotations(),re(Ma))):(Z.annotationPath=null,Z.annotationFolder=null,m.deleteAllAnnotations(),Z.annotations=!1)};this.getAnnotationsXML=function(){return Kb=he(Kb)};this.setAnnotationsXML=function(a){Kb=a};this.testSetAnnotationPath=function(){m.setAnnotationPath("Assets/Annotations/annotations2.xml")};this.setVisibility=function(a){a=a?"inline-block":"none";xc&&!bc&&(bc=xc.style);bc&&(bc.display=a);sb&&!R&&(R=sb.style);R&&(R.display=a)};this.showLists=function(a){var b=a?"visible":
"hidden";Z.hotspots&&Z.Viewer.setVisibilityHotspotChoiceList(a,Ma.toString());Wb&&(Wb.style.visibility=b);Z.imageSet&&imageSetList&&(imageSetList.style.visibility=b)};this.z619=function(b){b||(P(Ae,Cb),xh=!0);(!Z.imageSet||a==Z.imageSetStart||b)&&Bb>ig&&(P(Be,Cb),yh=!0,Bb>hg&&(P($d,Cb),zh=!0),m.setStatus("backfillPrecached",!0));Cb.sort();Cb=Z.Utils.arrayUnique(Cb);Zc=Cb.slice(0);m.traceDebugValues("tilesBackfillToPrecache",null,Zc.length);ja(Cb,U,"simple","image-backfill")};this.updateView=function(b){if("undefined"===
typeof a||null===a)a=0;var c=Z.mouseIsDown||Z.buttonIsDown||Z.keyIsDown||Z.mouseWheelIsDown,d=ya!=wc||m.getZoom()!=Z.imageZ||Z.imageZ!=Z.priorZ,h=parseFloat(R.left)!=Fb||parseFloat(R.top)!=Qb||m.getX()!=Z.imageX||m.getY()!=Z.imageY,f=Z.fullViewPrior;if(d||h||f||"undefined"!==typeof b&&b&&(!c||Z.animation)){if(!Z.imageSet||!Z.Viewer.getStatus("ready")||a>Z.viewportCurrentID-1&&a<Z.viewportCurrentID+1){ie();var g=!1;if(b||parseFloat(Ta.width)!=ua.width){if(Z.useCanvas){Ta.width=ua.width+"px";Ta.height=
ua.height+"px";Ta.left="0px";Ta.top="0px";xb.restore();xb.save();try{xb.scale(ya,ya)}catch(l){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function z630 scaling canvas:  "+l)}Sa&&(Ob.width=ua.width+"px",Ob.height=ua.height+"px",Ob.left="0px",Ob.top="0px");hb&&(Hc.width=hb.width+"px",Hc.height=hb.height+"px",Hc.left="0px",Hc.top="0px");Pa&&(Ic.width=Pa.width+"px",Ic.height=Pa.height+"px",Ic.left="0px",Ic.top="0px");aa&&(qb?(ca.width=aa.width+"px",
ca.height=aa.height+"px",ca.left=Bc+"px",ca.top=oc+"px",Kc.restore(),Kc.save(),Kc.scale(cc,cc)):(ca.width=jd+"px",ca.height=Nc+"px",ca.left=Bc+"px",ca.top=oc+"px"))}g=!0}if(b||parseFloat(R.left)!=Fb||parseFloat(R.top)!=Qb)g=parseFloat(R.left)-Fb,c=parseFloat(R.top)-Qb,0!=Z.imageR&&(c=Z.Utils.rotatePoint(g,c,Z.imageR),g=c.x,c=c.y),R.left=Fb+"px",R.top=Qb+"px",qb||(Bc=parseFloat(ca.left)+g,oc=parseFloat(ca.top)+c,ca.left=Bc+"px",ca.top=oc+"px"),f=m.getZoom(),Z.imageX=Te=Z.imageX-g/f,Z.imageY=je=Z.imageY-
c/f,g=!0;g&&(w(ua,ea,Db,"centerOut",!1,"1a. Updating view: resetting display positions"),Z.maskingSelection&&Sa&&yf(),qb&&w(aa,gb,Yb,"simple",!1,"1b. Updating view: resetting backfill positions"));g=!1;if("undefined"!==typeof b&&b||ya!=wc||m.getZoom()!=Z.imageZ||!m.getStatus("initialized")){ya!=wc&&(Z.imageZ=m.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);Z.imageZ>Z.maxZ&&(Z.imageZ=Z.maxZ);f=kc;for(c=Bb;f/2>=Z.imageZ;)c--,f/=2;c=0>c-1?0:c-1;f=Oa(c,Z.imageZ);if(c!=ea||f!=ya)Z.useCanvas&&(xb.restore(),
xb.save(),xb.scale(f,f)),ea!=c&&(Qg=!0),ea=c,ya=f;wc=ya;if("unconverted"!=Z.tileSource){qb=!1;ea>Cg?(gb=ea-Ei,qb=!0):gb=ea>hg?$d:ea>ig?Be:Ae;tierBackfillScalePrior=cc=Oa(gb,Z.imageZ);var c=cb[gb],f=Wa[gb],k=Z.imageX*Z.imageZ,u=Z.imageY*Z.imageZ;qb?(c=Oh,jd=Ca*c,Nc=Da*c,Bc=-(Ca/c),oc=-(Da/c),jh=fc*c,kh=Pb*c,aa.width=jd,aa.height=Nc,ca.width=aa.width+"px",ca.height=aa.height+"px",ca.left=Bc+"px",ca.top=oc+"px",Z.useCanvas&&(ta&&(Vb=Oa(lc,Z.imageZ),$a.restore(),$a.save(),$a.scale(Vb,Vb),0!=Z.imageR&&
$a.rotate(Z.imageR*Math.PI/180)),Kc.restore(),Kc.translate(jh,kh),Kc.save(),Kc.scale(cc,cc))):(jd=c*cc,Nc=f*cc,Bc=fc-k,oc=Pb-u,aa.width=c,aa.height=f,Z.useCanvas&&(ca.width=jd+"px",ca.height=Nc+"px"),ca.left=Bc+"px",ca.top=oc+"px");Ye("backfill");w(aa,gb,Yb,"simple",!1,"2. Updating view: changing tier - backfill")}!b&&0<Lc&&(g=!0)}else m.traceDebugValues("updateView-noChange");"unconverted"!=Z.tileSource&&qb?W(!0):ta&&Z.Utils.clearDisplay(ta)}Z.imageSet&&a!=Z.viewportCurrentID?(m.setStatus("displayLoaded",
!0),m.setStatus("displayDrawn",!0)):("unconverted"!=Z.tileSource?(W(),Ye("frontfill"),w(ua,ea,null,"centerOut",g,"3. Updating view: prior to loading of any new tiles")):"undefined"!==typeof mc&&(b=-Z.imageX,g=-Z.imageY,Z.Utils.clearDisplay(ua),xb.drawImage(mc,b,g)),Z.maskingSelection&&setMask(),0<Ba.length?ja(Ba,Na,"centerOut","image-display"):Z.imageFiltersVisible&&be&&rd(null,null,!0),m.syncViewportRelated());h&&Z.Utils.validateCallback("viewPanned");d&&Z.Utils.validateCallback("viewZoomed");(h||
d)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){Mb&&we&&Zd&&(Mb.width=ua.width,Mb.height=ua.height,we.width=Ta.width,we.height=Ta.height,we.left=Ta.left,we.top=Ta.top,Zd.restore(),Zd.save(),Zd.translate(fc,Pb),Zd.scale(ya,ya))};this.loadUnconvertedImage=function(a){r(a)};this.getUnconvertedImage=function(){return mc};this.createUnconvertedImageThumbnail=function(){if(Z.useCanvas){if("undefined"!==typeof mc){var a=null,a=150/Z.imageW,b=Z.Utils.createContainerElement("canvas",
"tempCanvas","inline-block","absolute","visible",Z.imageW*a+"px",Z.imageH*a+"px","0px","0px","none","0px","transparent none","0px","0px","normal"),c=b.getContext("2d");try{c.scale(a,a),c.drawImage(mc,0,0)}catch(d){console.log("In function initializeViewportContinue scaling canvas:  "+d)}a=new Image;a.src=b.toDataURL("image/jpeg",Z.saveImageCompression);return a}window.setTimeout(function(){createUnconvertedImageThumbnail()},100)}};this.formatTilePath=function(a,b,c,d){var h;if("ZoomifyImageFile"==
Z.tileSource){var g="offsetLoading",f=h="loading",l;if(1==tierTileOffsetsCount[a])h=Yd[a];else{var k=new Lb(a,b,c),u=k.chunkID+","+a+","+b+","+c+","+d+",offset";l=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",k.chunkID);-1==l?(m.traceDebugValues("z532",k.chunkID+","+a+","+b+","+c+","+d),-1==Z.Utils.arrayIndexOf(Va,u)&&(Va[Va.length]=u),tierTileOffsetChunks[tierTileOffsetChunks.length]={chunkID:k.chunkID,chunk:"loading"},l=new Z.NetConnector,l.loadByteRange($b,k.chunkStart,k.chunkEnd,
"offset",null,k.chunkID)):"loading"==tierTileOffsetChunks[l].chunk?-1==Z.Utils.arrayIndexOf(Va,u)&&(Va[Va.length]=u):"loading"!=tierTileOffsetChunks[l].chunk&&(l=tierTileOffsetChunks[l].chunk,h=Z.Utils.longValue(l,k.offsetStartInChunk))}1==tierTileByteCountsCount[a]?f=pd[a]:(l=b+c*yb[a],2==tierTileByteCountsCount[a]?(a=pd[a],f=0==l?a.substring(0,a.indexOf(",")):a.substring(a.indexOf(",")+1,a.length)):(k=new t(a,b,c),a=k.chunkID+","+a+","+b+","+c+","+d+",byteCount",l=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,
"chunkID",k.chunkID),-1==l?(-1==Z.Utils.arrayIndexOf(Va,a)&&(Va[Va.length]=a),tierTileByteCountChunks[tierTileByteCountChunks.length]={chunkID:k.chunkID,chunk:"loading"},l=new Z.NetConnector,l.loadByteRange($b,k.chunkStart,k.chunkEnd,"byteCount",null,k.chunkID)):"loading"==tierTileByteCountChunks[l].chunk?-1==Z.Utils.arrayIndexOf(Va,a)&&(Va[Va.length]=a):"loading"!=tierTileByteCountChunks[l].chunk&&(l=tierTileByteCountChunks[l].chunk,f=Z.Utils.intValue(l,k.bcStartInChunk))));"loading"==h||isNaN(h)||
"loading"==f||isNaN(f)||(g=$b+"?"+h.toString()+","+f.toString());h=g}else if("ZoomifyImageFolder"==Z.tileSource){d=c*yb[a]+b;for(g=0;g<a;g++)d+=rb[g];a=$b+"/TileGroup"+Math.floor(d/256)+"/"+a+"-"+b+"-"+c+"."+Z.tileType;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==Lc)a=Z.Utils.cacheProofPath(a);h=a}else if("ZoomifyPFFFile"==Z.tileSource){f="offsetLoading";k=g=0;for(h=Bb-1;h>a;h--)g+=rb[h];g+=c*yb[a]+b;h=Math.floor(g/tb);k=-1==g-1?0:g-1;l=Math.floor(k/tb);void 0==Nb[h]||"offsetLoading"==Nb[h]||
void 0==Nb[l]||"offsetLoading"==Nb[l]?(g=h+","+a+","+b+","+c+","+d,-1==Z.Utils.arrayIndexOf(Va,g)&&(Va[Va.length]=g),m.traceDebugValues("z531",h+","+a+","+b+","+c+","+d),void 0==Nb[h]&&(Nb[h]="offsetLoading",a=Oc+tb*h*8,b=a+8*tb,wa(a,b,h)),void 0==Nb[l]&&(Nb[l]="offsetLoading",a=Oc+tb*l*8,b=a+8*tb,wa(a,b,h))):(d=Math.floor(Nb[h][0]),f=Math.floor(Nb[l][0]),l=Nb[l][1],h=Nb[h][1],k=k%tb*9,l=Math.floor(parseFloat(l.substring(k,k+9))),k=g%tb*9,h=Math.floor(parseFloat(h.substring(k,k+9))),g=0==g?Oc+8*yd:
f+l,d+=h,f=0<d-g?Z.tileHandlerPathFull+"?file="+$b+"&requestType=0&begin="+g.toString()+"&end="+d.toString()+"&vers="+Wd.toString()+"&head="+pe.toString():"z647:"+a+"-"+b+"-"+c);h=f}else"ImageServer"==Z.tileSource&&(a=-1!=Z.imagePath.toLowerCase().indexOf(".svs")?"svs":-1!=Z.imagePath.toLowerCase().indexOf(".ndpi")?"ndpi":null,b=100*Z.imageZ,40==Z.sourceMagnification?g=b<=2.5+kc?32:b<=5+kc?16:b<=10+kc?8:b<=25+kc?4:b<=50+kc?2:1:20==Z.sourceMagnification&&(g=b<=5+kc?16:b<=10+kc?8:b<=20+kc?4:b<=50+kc?
2:1),tilePath=Z.tileHandlerPathFull+"?FIF="+$b+"&focal="+Z.focal+"&QLT="+Z.quality+"&DSTL="+Z.imageX*Z.imageZ+","+Z.imageY*Z.imageZ+","+fb+","+Aa+","+g+",1&type="+a,Z.Utils.trace(tilePath),h=tilePath="Assets/Skins/Default/standard/toolbarLogo.png");return h};this.parseOffsetChunk=function(a){var b=parseInt(a.documentElement.getAttribute("BEGIN"),10),c=a.documentElement.getAttribute("REPLYDATA");a=Wf[b];b=Math.floor((b-Oc)/8/tb);Nb[b]=[];Nb[b]=c.split(",",2);b=0;for(c=Va.length;b<c;b++){var d=Va[b].split(",");
d[0]==a&&(void 0!==d[4]&&"image-display"==d[4]?ib[ib.length]=d[1]+"-"+d[2]+"-"+d[3]:"image-backfill"==d[4]&&(Eb[Eb.length]=d[1]+"-"+d[2]+"-"+d[3]),Va=Z.Utils.arraySplice(Va,b,1),b--,c--)}0<ib.length&&(ib.sort(),ib=Z.Utils.arrayUnique(ib),m.traceDebugValues("z636",ib),a=m.getStatus("imageSaving")?qd:Na,T(ib,a,"simple","image-display"));0<Eb.length&&(Eb.sort(),Eb=Z.Utils.arrayUnique(Eb),a=m.getStatus("imageSaving")?Fd:U,T(Eb,a,"simple","image-backfill"))};this.getClickCoordsAtZoom=function(a,b){var c=
this.getClickCoordsInImage(a,b);return new Z.Utils.Point(c.x*b,c.y*b)};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var d=null;if(a){var h=a.type;if("undefined"===typeof c||null===c)"touchstart"==h||"touchend"==h||"touchcancel"==h?(touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,c=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==
c&&(a=zb(c.x,c.y),d=Gb(a.x,a.y,b))}return d};this.getClickZoomCoords3D=function(a,b,c,d,h){var g=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=zb(b.x,b.y);b=Gb(b.x,b.y,Z.imageZ);var f=eb(c,d);a=a.altKey;h?a?f=Z.fitZ:(h=Oa(c,Z.fitZ),d-h<g?f=Z.fitZ:d>1+g?f=eb(c,1):0<c?f=eb(c-1,1):"unconverted"==Z.tileSource&&(f=Z.fitZ)):a?f=1:d<1-g?f=eb(c,1):c<Bb-1&&(f=eb(c+1,1));return new Z.Utils.Point3D(b.x,b.y,f)};this.calculateCurrentCenterCoordinates=function(a,b,c){if("undefined"===typeof a||null===
a)a=new Z.Utils.Point(parseFloat(R.left),parseFloat(R.top));if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);if("undefined"===typeof b||null===b)b=m.getZoom();var d=(a.x-Fb)/b;a=(a.y-Qb)/b;var h,g;switch(c){case 0:h=Z.imageX-d;g=Z.imageY-a;break;case 90:h=Z.imageX-a;g=Z.imageY+d;break;case 180:h=Z.imageX+d;g=Z.imageY+a;break;case 270:h=Z.imageX+a,g=Z.imageY-d}return new Z.Utils.Point(h,g)};this.z542=function(a,b){if("undefined"===typeof a||null===a)a=ea;if("undefined"===typeof b||null===
b)b=!1;return new la(m.z541(b),a)};this.z541=function(a){var b=parseFloat(R.left)-Fb,c=parseFloat(R.top)-Qb;if(Z.useCanvas)var d=parseFloat(R.width)/za.width,b=b/d,c=c/d;d=m.getZoom();0!=b&&(b/=d);0!=c&&(c/=d);var b=Z.imageX-b,c=Z.imageY-c,h,g,f;a?(a=-(qa/2),h=qa/2,g=-(na/2),f=na/2):(a=-(Ca/2),h=Ca/2,g=-(Da/2),f=Da/2);return new ub(b,c,a,h,g,f,d)};this.HotspotsAllBoundingBoxInPixels=function(){for(var a=new Ka,b=Z.imageCenterX,c=Z.imageCenterX,d=Z.imageCenterY,h=Z.imageCenterY,g=0,f=p.length;g<f;g++){var l=
p[g],m=new Xg(l,a,null,!0),k=l.x-m.w/2,u=l.x+m.w/2,r=l.y-m.h/2,l=l.y+m.h/2;k<b&&(b=k);u>c&&(c=u);r<d&&(d=r);l>h&&(h=l)}a=parseInt(Z.Utils.getResource("DEFAULT_SAVEIMAGELABELMARGIN"),10);b-=a;d-=a;c+=a;h+=a;this.l=b;this.r=c;this.t=d;this.b=h;this.x=b+(c-b)/2;this.y=d+(h-d)/2};this.z468=function(a){var b=Z.imageW/Z.imageH>qa/na?qa/Z.imageW:na/Z.imageH;if(90==a||270==a)b=Z.imageW/Z.imageH>qa/na?qa/Z.imageH:na/Z.imageW;return b};this.calculateZoomToFill=function(a){var b=Z.imageW/Z.imageH>qa/na?na/Z.imageH:
qa/Z.imageW;if(90==a||270==a)b=Z.imageW/Z.imageH>qa/na?na/Z.imageW:qa/Z.imageH;return b};this.calculateZoomForResize=function(a,b,c,d,h){var g=a,f=Z.imageW*a,l=Z.imageH*a;b=d/b;c=h/c;f<d&&l<h?g=a:f==d&&l<h?g=-1:f<d&&l==h?g=-1:f>d&&l<=h?g=a*b:f<=d&&l>h?g=a*c:f>d&&l>h&&(d=1,1<=b&&1<=c?d=b>c?b:c:1>=b&&1>=c&&(d=b<c?b:c),g=a*d);g<Z.minZ&&(g=Z.minZ);g>Z.maxZ&&(g=Z.maxZ);return g};this.z482=function(a,b){return eb(a,b)};this.syncViewportToNavigator=function(a){var b=Z.imageR;0>b&&(b+=360);var c=v(a.x,a.y,
Z.imageZ,b,"image");a=Z.imageY;var d=c.y,c=dX=Z.imageX-c.x;a=dY=a-d;0!=b&&(90==b?(c=-dY,a=dX):180==b?(c=-dX,a=-dY):270==b&&(c=dY,a=-dX));b=c*Z.imageZ;a*=Z.imageZ;d=a+Qb;R.left=b+Fb+"px";R.top=d+"px";ta&&qb&&(Z.mobileDevice||Math.abs(b)>qa/2||Math.abs(a)>na/2)&&w(ta,lc,Yb,"simple",!1,"Updating backfill oversize display")};this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(Dc,"state",a);return-1==a?!1:Dc[a].status};this.setStatus=function(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(Dc,
"state",a);-1==d?(c=b,Dc[Dc.length]={state:a,status:b}):(!Dc[d].status&&b&&(c=!0),Dc[d].status=b);c&&(Z.Utils.validateCallback(a+"Viewport"),Z.Viewer.validateViewerStatus(a))};this.traceDebugValues=function(a,b,c,d){c="undefined"!==typeof c&&null!==c?c:null;b=null!==b?b:"";switch(a){case "tilesToDisplay":cg=c;ef=sd=ff=dg=0;Ad=c;ce=0;tilesTimeStart=(new Date).getTime();eg=0;window.clearTimeout(De);De=null;De=window.setTimeout(y,Bh);break;case "tilesInCache":dg=c;break;case "z581-image-display":ff+=
1;break;case "onTileLoad":sd+=1;ce=((new Date).getTime()-c)/1E3;eg=sd/ce;break;case "z507":c=Z.Utils.arrayIndexOf(Fc,b);-1!=c&&(Fc.splice(c,1),ef+=1,--Ad);break;case "tilesBackfillToPrecache":Ah=c;break;case "onTileBackfillPrecache":Rg+=1;break;case "tilesBackfillToDisplay":Qh=Sg=c;break;case "z599":Tg+=1;break;case "displayBackfillTile":c=Z.Utils.arrayIndexOf(Zc,b),-1!=c&&(Zc.splice(c,1),Vg+=1,--Qh)}2!=Z.debug&&3!=Z.debug||Z.Utils.traceTileStatus(cg,dg,ff,sd,ef,Ad);if(2==Z.debug){var h="undefined"!==
typeof d&&null!==d&&0<d.length?d.join(", "):"none";c=!0;var g="";switch(a){case "updateView-noChange":g="Updating view: no change of tier.";break;case "tilesToDisplay":g="Tiles to display: "+h;break;case "tilesInCache":g="Tiles in cache: "+h;break;case "tilesToLoad":g="Tiles to load: "+h;break;case "tilesToLoad-backfill":g="Tiles to load-backfill: "+h;break;case "z622-viewportDisplay":a=[];h=0;for(g=d.length;h<g;h++)a[a.length]=d[h].name;g="Tiles from cache-"+b+": "+a.join(", ");break;case "z622-backfillDisplay":a=
[];h=0;for(g=d.length;h<g;h++)a[a.length]=d[h].name;g="Tiles from cache-"+b+": "+a.join(", ");break;case "z577-image-display":g="Tile requests for display: "+b+h;break;case "z577-image-backfill":g="Tile requests for backfill: "+b+h;break;case "imageRequestTimeout":g="Image request for "+b;break;case "z581-image-display":g="Tile request-display: "+b;c=!1;break;case "z581-image-backfill":g="Tile request-backfill: "+b;c=!1;break;case "z581DelayForOffset":g="Tile not yet being loaded - offset chunk loading in progress: "+
b;break;case "onTileLoad":g="Tiles received-display: "+b;c=!1;break;case "z599":g="Tiles received-backfill: "+b;0==Cb.length&&(g+="\n\nTile loading complete for backfill: all requested tiles received.");c=!1;break;case "z532":g="Tile request recorded for after load offset chunk: "+b;break;case "z637":g="Requesting tiles after offset chunk received: "+h;break;case "z531":g="Tile request recorded for after load offset chunk: "+b;c=!1;break;case "z636":g="Requesting tiles after offset chunk received: "+
h;c=!1;break;case "z577Retry":g=b;break;case "z507":g="Tile displaying: "+b;c=!1;break;case "blankLine":g=" "}""!=g&&Z.Utils.trace(g,!1,c)}};this.updateProgress=function(a,b){var c=Z,d;0==a&&0==b?(Z.Utils.validateCallback("loadingTilesComplete"),Z.Utils.validateCallback("loadingTilesCompleteGetLabelIDs"),d=void 0):(d=Math.round(100-b/a*100),d=Math.round(d/10));c.updateViewPercent=d;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(a,b)};this.showVirtualPointer=function(){if(md){var a=
md.width,b=md.height,c=Z.viewerW/2+100,d=Z.viewerH-200,h=md.cloneNode(!1);h.width=a;h.height=b;fa=Z.Utils.createContainerElement("div","piC","inline-block","absolute","hidden",a+"px",b+"px",c+"px",d+"px","none","0px","transparent none","0px","0px","normal");fa.appendChild(h);Z.ViewerDisplay.appendChild(fa);fa.setAttribute("title",Z.Utils.getResource("z398"));a=parseInt(Z.Utils.getResource("z230"),10);fa.style.zIndex=(a+13).toString();Z.Utils.addEventListener(fa,"mousedown",u);Z.Utils.addEventListener(fa,
"touchstart",gf);Z.Utils.addEventListener(fa,"touchmove",hf);Z.Utils.addEventListener(fa,"touchend",jf);Z.Utils.addEventListener(fa,"touchcancel",Ee);Z.Utils.addEventListener(h,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(h,"mousedown",Z.Utils.preventDefault)}else md=new Image,md.url=Wh,md.onload=m.showVirtualPointer,md.onerror=sc,md.src=Wh};this.hideVirtualPointer=function(){fa&&(fa.style.display="none")};this.saveAnnotationsToImageFile=function(a,b){if(m.getStatus("initialized")&&
ec)if(Z.Utils.stringValidate(Z.saveHandlerPath))if(-1!=Z.saveHandlerPath.indexOf(Z.Utils.getResource("z13")))Z.Utils.showMessage(Z.Utils.getResource("z14"),!1,2E3,"center");else{var c=a?Z.Utils.getResource("ALERT_IMAGESAVEPREPARING"):Z.Utils.getResource("ALERT_VIEWSAVEPREPARING");Z.Utils.showMessage(c,!1,"none","center");Z.interactivityOff=!0;m.setStatus("imageSaving",!0);Z.Utils.clearDisplay(ec);Z.setCallback("drawLabelsOnCanvasComplete",function(){Z.Utils.functionCallWithDelay(function(){Z.Viewport.saveCanvasDataToFile(a,
b)},750)});ii(a);a?ji(a):td(a)}else Z.Utils.showMessage(Z.Utils.getResource("z297"),!0,null,"center")};m.saveCanvasDataToFile=function(a,b){Z.saveImageMessage=a?Z.Utils.getResource("ALERT_IMAGESAVEINPROGRESS"):Z.Utils.getResource("ALERT_VIEWSAVEINPROGRESS");switch(Z.saveImageFormat){case "png":canvasData=ec.toDataURL("image/png");break;default:canvasData=ec.toDataURL("image/jpeg",Z.saveImageCompression)}var c=Z.saveImageFilename+","+canvasData;(new Z.NetConnector).postImage(Z.saveImageHandlerPath,
c);b&&(window.location=canvasData);m.setStatus("imageSaving",!1);Z.interactivityOff=!1};this.parseHotspotsXML=function(b){Z.Utils.arrayClear(pc);Z.Utils.arrayClear(Xb);rf=!1;m.setStatus("XMLParsed",!1);qh=Z.Utils.getResource("z226");fh=Z.Utils.getResource("z225");Zf=Z.Utils.getResource("z131");yg=Z.Utils.getResource("z132");hotspotListTitle=Z.tourPath?Z.Utils.getResource("z444"):Z.Utils.getResource("z424");zg=Z.Utils.getResource("z134");He=parseFloat(Z.Utils.getResource("DEFAULT_HOTSPOTSMINSCALE"));
Ie=parseFloat(Z.Utils.getResource("DEFAULT_HOTSPOTSMAXSCALE"));var c=b.getElementsByTagName("SETUP")[0];"undefined"!==typeof c&&Z.Utils.stringValidate(c)||(c=b.getElementsByTagName("HOTSPOTSETUP")[0],"undefined"!==typeof c&&Z.Utils.stringValidate(c)||(c=Z.Utils.xmlConvertTextToDoc("<HOTSPOTSETUP />").getElementsByTagName("HOTSPOTSETUP")[0]));if(c){var d=c.getAttribute("AUTOSTART");Z.Utils.stringValidate(d)&&(qh="0"!=d&&"false"!=d);d=c.getAttribute("AUTOLOOP");Z.Utils.stringValidate(d)&&(fh="0"!=d&&
"false"!=d);d=c.getAttribute("CHOICELIST");Z.Utils.stringValidate(d)&&(Zf=d);d=c.getAttribute("LISTSOURCE");Z.Utils.stringValidate(d)&&(yg=d);d=Z.Utils.xmlUnescapeMinimal(unescape(c.getAttribute("LISTTITLE")));Z.Utils.stringValidate(d)&&(hotspotListTitle=d);d=c.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(d)&&(zg="1"==d||"true"==d);d=parseFloat(c.getAttribute("MINSCALE"));isNaN(d)||(He=0!=d?d:1E-5);c=parseFloat(c.getAttribute("MAXSCALE"));isNaN(c)||(Ie=0!=c?c:1E4)}Jc.visibility=zg?"visible":
"hidden";Z.Utils.stringValidate(Z.hotspotListTitle)?hotspotListTitle=Z.hotspotListTitle:Z.Utils.stringValidate(hotspotListTitle)&&(Z.hotspotListTitle=hotspotListTitle);$g(Zf,hotspotListTitle,pc,a);b=b.getElementsByTagName("HOTSPOT");c=0;for(d=b.length;c<d;c++){var h=b[c],h=Md(h);m.createHotspotFromXML(h,!0)}2==Z.debug&&rf&&Z.Utils.trace(Z.Utils.getResource("z246"));m.setStatus("XMLParsed",!0);ac();Z.tour?(m.initializeAudioMuteButtons(),Z.Utils.validateCallback("tourLoaded"),qh&&!Z.tourStop&&Z.Utils.functionCallWithDelay(function(){m.tourStart()},
750)):(Z.Utils.validateCallback("hotspotsLoaded"),m.setStatus("hotspotsLoaded",!0))};this.createHotspotFromParameters=function(a,b,c,d,h,g,f,l,k,u,r,w,y,n,p,v,q,t,sc,I,L,D,B,C,F,E,jb,J,G,sa,O,U,Za,Bd,Na){c=Z.Utils.arrayToArrayOfStrings([a,b,c,d,h,g,f,l,k,u,r,w,y,n,p,v,q,t,sc,I,L,D,B,C,F,E,jb,J,G,sa,O,U,Za,Bd,Na]);a=Z.Utils.xmlConvertTextToDoc('<HOTSPOT ID="'+c[0]+'" NAME="'+c[1]+'" MEDIATYPE="'+c[2]+'" MEDIA="'+c[3]+'" AUDIO="'+c[4]+'" X="'+c[5]+'" Y="'+c[6]+'" ZOOM="'+c[7]+'" XSCALE="'+c[8]+'" YSCALE="'+
c[9]+'" CLICKURL="'+c[10]+'" URLTARGET="'+c[11]+'" ROLLOVER="'+c[12]+'" CAPTION="'+c[13]+'" TOOLTIP="'+c[14]+'" TEXTCOLOR="'+c[15]+'" BACKCOLOR="'+c[16]+'" LINECOLOR="'+c[17]+'" FILLCOLOR="'+c[18]+'" TEXTVISIBLE="'+c[19]+'" BACKVISIBLE="'+c[20]+'" LINEVISIBLE="'+c[21]+'" FILLVISIBLE="'+c[22]+'" CAPTIONPOSITION="'+c[23]+'" SAVED="'+c[24]+'" INTERNALID="'+c[25]+'" POIID="'+c[26]+'" SHOWFOR="'+c[31]+'" TRANSITION="'+c[32]+'" CHANGEFOR="'+c[33]+'" ROTATION="'+c[34]+'"></HOTSPOT>').getElementsByTagName("HOTSPOT")[0];
null===a.getAttribute("INTERNALID")&&a.setAttribute("INTERNALID",Hb("hotspot"));b=Z.Utils.xmlConvertTextToDoc("<TEMP></TEMP>");Z.Utils.stringValidate(c[27])&&(J=Z.Utils.xmlConvertTextToDoc(J).getElementsByTagName("CAPTION")[0].innerHTML,d=b.createElement("CAPTION"),d.innerHTML=J,a.appendChild(d));Z.Utils.stringValidate(c[28])&&(J=Z.Utils.xmlConvertTextToDoc(G).getElementsByTagName("TOOLTIP")[0].innerHTML,G=b.createElement("TOOLTIP"),G.innerHTML=J,a.appendChild(G));if(Z.Utils.stringValidate(c[30])){G=
b.createElement("POLYGON");G.setAttribute("CLOSED",c[29]);J=0;for(c=O.length;J<c;J++)d=b.createElement("POINT"),d.setAttribute("X",O[J].x),d.setAttribute("Y",O[J].y),G.appendChild(d);a.appendChild(G)}m.createHotspotFromXML(a,!0)};this.createHotspotFromXML=function(a,b){b&&(a=Nd(a,"hotspot"));var c=new oi(a);if(Z.Utils.stringValidate(c.media)||Z.Utils.stringValidate(c.caption)||null!==Z.tourPath||Z.annotations){p[p.length]=c;var d="NAME"==yg?c.name:"CAPTION"==yg?c.caption:c.tooltip;if(ga){var h=c.internalID;
if(null!=ga){var g=Z.Utils.arrayIndexOfObjectValue(pc,"value",h);-1!=g?(ga.options[g+("none"!=Z.hotspotListTitle&&"none"!=Z.tourListTitle?1:0)]=new Option(d,h.toString()),pc[g]={text:d,value:h}):(ga.options[ga.options.length]=new Option(d,h.toString()),pc[pc.length]={text:d,value:h})}}}d=new Ka;Z.Utils.stringValidate(c.media)&&"text"!=c.mediaType&&"polygon"!=c.media?Fh(c,!0):ud(c,d);Z.Viewer.getStatus("ready")&&(Z.Utils.validateCallback("labelCreated"),Z.Utils.validateCallback("labelCreatedGetInternalID"))};
this.modifyHotspot=function(a,b,c,d,h){var g=-1,g=h?Z.Utils.arrayIndexOfObjectValue(p,"internalID",a):Z.Utils.arrayIndexOfObjectValue(p,"id",a.toString());if(-1!=g){a=p[g];"polygon"!=a.media||"x"!=b&&"y"!=b||(h=new Z.Utils.Point("x"==b?c:a.x,"y"==b?c:a.y),Hh(a,h));if("polygon"!=a.media||"xScale"!=b&&"yScale"!=b)a[b]=c;else{h=c/100;for(var g=a.polygonPts.slice(0),f="xScale"==b?"x":"y",l=a[f]-a[f]*h,m=0,k=g.length;m<k;m++)g[m][f]=g[m][f]*h+l;a.polygonPts=g.slice(0)}"rollover"==b&&0==c&&(a.visibility=
!0);"media"==b&&"icon"==a.mediaType&&Fh(a,!1);"undefined"!==typeof d&&null!==d&&d||ac()}};this.deleteHotspot=function(a,b,c){var d=-1;c?d=Z.Utils.arrayIndexOfObjectValue(p,"internalID",a):(d=Z.Utils.arrayIndexOfObjectValue(p,"id",a.toString()),-1!=d&&(a=p[d].internalID));-1!=d&&(p=Z.Utils.arraySplice(p,d,1),Id(a),!b&&Z.hotspots&&null!=ga&&(a=Z.Utils.arrayIndexOfObjectValue(pc,"value",a),-1!=a&&(pc=Z.Utils.arraySplice(pc,a,1),Z.Utils.updateSelectElement(ga,pc),b=ga.length,0!=b&&(ga.selectedIndex=a>
b-1?b-1:a))))};this.deleteAllHotspots=function(){p=[];ba&&(ba.innerHTML="");ga.options.length=0};this.deleteAllMeasureHotspots=function(){var a=p.length;if(0<a&&ba&&0<ba.childNodes.length){for(var b=0;b<a;b++)"measure"==p[b].mediaType&&(p=Z.Utils.arraySplice(p,b,1));ac()}};this.z623=function(){ac()};this.getLabelsVisibility=function(){return m.getHotspotsVisibility()};this.setLabelsVisibility=function(a){m.setLabelsVisibility(a)};this.setLabelVisibility=function(a,b){m.setHotspotVisibility(a,b)};
this.setLabelsVisibilityByFilter=function(a,b,c){m.setHotspotsVisibilityByFilter(a,b,c)};this.setLabelVisibilityByID=function(a,b,c){m.setHotspotVisibilityByID(a,b,c)};this.setLabelFilterByDisplayList=function(a,b){m.setHotspotFilterByDisplayList(a,b)};this.setHotspotFilterByDisplayList=function(a,b){ba&&Z.Utils.clearDisplay(ba);hb&&Z.Utils.clearDisplay(hb);Pa&&Z.Utils.clearDisplay(Pa);"undefined"!==typeof a&&null!==a&&0<a.length&&(b?lf=a:kf=a);"inline-block"==Jc.display&&Gh()};this.clearLabelFilterByDisplayList=
function(){m.clearHotspotFilterByDisplayList()};this.clearHotspotFilterByDisplayList=function(){"undefined"!==typeof kf&&Z.Utils.arrayClear(kf);"undefined"!==typeof lf&&Z.Utils.arrayClear(lf);"inline-block"==Jc.display&&ac()};this.z538=function(a){return ed(a)};this.getLabelIDsInCurrentView=function(a,b,c){var d=[];b=new Ka(b);for(var h=m.getZoom(),g=b.box.l,f=b.box.r,l=b.box.t,k=b.box.b,u=0,r=p.length;u<r;u++){var w=p[u];c&&(g=new Xg(w,b,null,!1),f=g.w/2/h,k=g.h/2/h,g=b.box.l-f,f=b.box.r+f,l=b.box.t-
k,k=b.box.b+k);w.x>g&&w.x<f&&w.y>l&&w.y<k&&(d[d.length]=a?w.internalID:w.id)}return d};this.getHotspots=function(){return p};this.getHotspotsVisibility=function(){return"inline-block"==Jc.display};this.setHotspotsVisibility=function(a){Jc.display=a?"inline-block":"none";ac()};this.setHotspotVisibility=function(a,b){var c=a.firstChild;if(c&&c.style){c.style.visibility="visible";var d=b?"visible":"hidden";c.style.backgroundColor=b?"":"#FFFFFF";Z.Utils.setOpacity(c,b?1:.01);(c=a.firstChild.childNodes[1])&&
c.style&&(c.style.visibility=d);d=a.id.substring(3,a.id.length);d=Z.Utils.arrayIndexOfObjectValue(p,"internalID",d);-1!=d&&(d=p[d],d.visibility=b,"polygon"==d.media&&fd(!0))}};this.setHotspotsVisibilityByFilter=function(a,b,c){if(0<p.length)if(ba&&0<ba.childNodes.length)for(var d=0,h=p.length;d<h;d++){if(p[d][a]==b){var g=document.getElementById("hot"+p[d].internalID);null!==g&&m.setHotspotVisibility(g,c)}}else window.setTimeout(function(){setHotspotsVisibilityByFilter(a,b,c)},100);return c};this.setHotspotVisibilityByID=
function(a,b,c){c=c?"internalID":"id";0<p.length&&(ba&&0<ba.childNodes.length?(c=Z.Utils.arrayIndexOfObjectValue(p,c,a),-1!=c&&(c=document.getElementById("hot"+p[c].internalID),null!=c&&m.setHotspotVisibility(c,b))):window.setTimeout(function(){setHotspotVisibilityByID(a,b)},100))};this.createAnnotationsXMLFile=function(){var a=vd();null===Z.editMode||Z.noPost||(Z.Utils.stringValidate(Z.saveHandlerPath)?((new Z.NetConnector).postXML(Z.saveHandlerPath,a),m.parseAnnotationsXML(a)):Z.Utils.showMessage(Z.Utils.getResource("z297"),
!0,null,"center"))};this.parseAnnotationsXML=function(a,b){if("undefined"===typeof b||null===b)b=Ma;Z.imageSet&&Z.Utils.showMessage(Z.Utils.getResource("ALERT_LOADINGANNOTATIONS"),!1,2E3,"center");"undefined"!==typeof pa&&Z.Utils.arrayClear(pa);"undefined"!==typeof Xb&&Z.Utils.arrayClear(Xb);"undefined"!==typeof ka&&Z.Utils.arrayClear(ka);"undefined"!==typeof db&&Z.Utils.arrayClear(db);"undefined"!==typeof vf&&Z.Utils.arrayClear(vf);"undefined"!==typeof labelCaptionPositionListDP&&Z.Utils.arrayClear(labelCaptionPositionListDP);
"undefined"!==typeof labelTargetListDP&&Z.Utils.arrayClear(labelTargetListDP);"undefined"!==typeof Ga&&Z.Utils.arrayClear(Ga);"undefined"!==typeof pb&&Z.Utils.arrayClear(pb);rf=!1;m.setStatus("XMLParsed",!1);var c=vd(),d=lb(c,"root"),h=lb(c,"setup"),g=a.getElementsByTagName("SETUP");0==g.length&&(g=a.getElementsByTagName("LABELSETUP"));if(0<g.length){g=g[0];temp=g.getAttribute("PANELPOSITION");Z.Utils.stringValidate(temp)&&h.setAttribute("PANELPOSITION",temp);var f=g.getAttribute("INITIALVISIBILITY");
Z.Utils.stringValidate(f)&&(initVis=Z.Utils.getResource("z134")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",h.setAttribute("INITIALVISIBILITY",initVis));f=g.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(f)&&(initVis="1"==Z.Utils.getResource("z66")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",h.setAttribute("POIVISIBILITY",initVis));f=g.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(f)&&(initVis="1"==Z.Utils.getResource("z52")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=
f?"0":"1",h.setAttribute("LABELVISIBILITY",initVis));f=g.getAttribute("NOTEVISIBILITY");Z.Utils.stringValidate(f)&&(initVis="1"==Z.Utils.getResource("z60")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",h.setAttribute("NOTEVISIBILITY",initVis));var l=g.getAttribute("COMMENTVISIBILITY");Z.Utils.stringValidate(f)&&(initVis="1"==Z.Utils.getResource("DEFAULT_ANNOTATIONCOMMENTVISIBILITY")?"0"!=l&&"hide"!=l?"1":"0":"1"!=l&&"show"!=l?"0":"1",h.setAttribute("COMMENTVISIBILITY",initVis));temp=g.getAttribute("MINSCALE");
Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&0<=parseFloat(temp)&&h.setAttribute("MINSCALE",temp);temp=g.getAttribute("MAXSCALE");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&0<=parseFloat(temp)&&h.setAttribute("MAXSCALE",temp);temp=g.getAttribute("ZOOMIFYXMLVERSION");Z.Utils.stringValidate(temp)&&(isNaN(parseFloat(temp))||4!=parseFloat(temp)||h.setAttribute("ZOOMIFYXMLVERSION",temp));temp=g.getAttribute("TOOLTIPSOURCE");Z.Utils.stringValidate(temp)&&h.setAttribute("TOOLTIPSOURCE",
temp)}d.appendChild(h);Zh=parseFloat(h.getAttribute("ZOOMIFYXMLVERSION"));h=a.getElementsByTagName("POI");g=0;for(f=h.length;g<f;g++){var l=lb(c,"poi"),k=h[g];temp=k.getAttribute("ID");Z.Utils.stringValidate(temp)&&l.setAttribute("ID",temp);temp=Z.Utils.xmlUnescapeMinimal(unescape(k.getAttribute("NAME")));Z.Utils.stringValidate(temp)&&l.setAttribute("NAME",temp);temp=k.getAttribute("X");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&l.setAttribute("X","center"==temp?Z.imageCenterX.toString():
temp);temp=k.getAttribute("Y");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&l.setAttribute("Y","center"==temp?Z.imageCenterY.toString():temp);temp=k.getAttribute("ZOOM");Z.Utils.stringValidate(temp)&&!isNaN(parseFloat(temp))&&l.setAttribute("ZOOM",temp);temp=k.getAttribute("USER");Z.Utils.stringValidate(temp)&&l.setAttribute("USER",temp);temp=k.getAttribute("DATE");Z.Utils.stringValidate(temp)&&l.setAttribute("DATE",temp);d.appendChild(l);var u=h[g].getElementsByTagName("LABELS")[0];if("undefined"!==
typeof u&&null!==u){k=c.createElement("LABELS");l.appendChild(k);for(var u=u.getElementsByTagName("LABEL"),r=0,w=u.length;r<w;r++){var y=lb(c,"label"),n=c,p=u[r],v=void 0,q=void 0,v=p.getAttribute("ID");Z.Utils.stringValidate(v)&&y.setAttribute("ID",v);v=Z.Utils.xmlUnescapeMinimal(unescape(p.getAttribute("NAME")));Z.Utils.stringValidate(v)&&y.setAttribute("NAME",v);v=p.getAttribute("MEDIATYPE");Z.Utils.stringValidate(v)&&(y.setAttribute("MEDIATYPE",v),q=p.getAttribute("MEDIA"),Z.Utils.stringValidate(q)&&
y.setAttribute("MEDIA",q),"url"==v?y.setAttribute("MEDIATYPE","icon"):"symbol"==v&&Z.Utils.stringValidate(q)&&"polygon"==q?y.setAttribute("MEDIATYPE","polygon"):"symbol"==v&&Z.Utils.stringValidate(q)&&"caption"==q?(y.setAttribute("MEDIATYPE","text"),y.setAttribute("MEDIA","")):"symbol"==v&&Z.Utils.stringValidate(q)&&"polygon"!=q&&-1!=q.indexOf(".")?y.setAttribute("MEDIATYPE","icon"):"text"==v&&y.setAttribute("MEDIA",""));v=p.getAttribute("X");Z.Utils.stringValidate(v)&&!isNaN(parseFloat(v))&&y.setAttribute("X",
"center"==v?Z.imageCenterX.toString():v);v=p.getAttribute("Y");Z.Utils.stringValidate(v)&&!isNaN(parseFloat(v))&&y.setAttribute("Y","center"==v?Z.imageCenterY.toString():v);v=p.getAttribute("ZOOM");Z.Utils.stringValidate(v)&&!isNaN(parseFloat(v))&&y.setAttribute("ZOOM",v);v=p.getAttribute("XSCALE");Z.Utils.stringValidate(v)&&!isNaN(parseFloat(v))&&y.setAttribute("XSCALE",v);v=p.getAttribute("YSCALE");Z.Utils.stringValidate(v)&&!isNaN(parseFloat(v))&&y.setAttribute("YSCALE",v);v=p.getAttribute("CLICKURL");
Z.Utils.stringValidate(v)?y.setAttribute("CLICKURL",v):(v=p.getAttribute("URL"),Z.Utils.stringValidate(v)&&y.setAttribute("CLICKURL",v));v=p.getAttribute("URLTARGET");Z.Utils.stringValidate(v)&&y.setAttribute("URLTARGET",v);v=p.getAttribute("ROLLOVER");Z.Utils.stringValidate(v)&&y.setAttribute("ROLLOVER",v);v=Z.Utils.xmlUnescapeMinimal(unescape(p.getAttribute("CAPTION")));Z.Utils.stringValidate(v)&&y.setAttribute("CAPTION",v);v=Z.Utils.xmlUnescapeMinimal(unescape(p.getAttribute("COMMENT")));Z.Utils.stringValidate(v)&&
y.setAttribute("COMMENT",v);v=Z.Utils.xmlUnescapeMinimal(unescape(p.getAttribute("TOOLTIP")));Z.Utils.stringValidate(v)&&y.setAttribute("TOOLTIP",v);v=p.getAttribute("USER");Z.Utils.stringValidate(v)&&y.setAttribute("USER",v);v=p.getAttribute("DATE");Z.Utils.stringValidate(v)&&y.setAttribute("DATE",v);v=p.getAttribute("TEXTCOLOR");Z.Utils.stringValidate(v)&&y.setAttribute("TEXTCOLOR",Z.Utils.stringValidateColorValue(v));v=p.getAttribute("BACKCOLOR");Z.Utils.stringValidate(v)&&y.setAttribute("BACKCOLOR",
Z.Utils.stringValidateColorValue(v));v=p.getAttribute("LINECOLOR");Z.Utils.stringValidate(v)&&y.setAttribute("LINECOLOR",Z.Utils.stringValidateColorValue(v));v=p.getAttribute("FILLCOLOR");Z.Utils.stringValidate(v)&&y.setAttribute("FILLCOLOR",Z.Utils.stringValidateColorValue(v));v=p.getAttribute("TEXTVISIBLE");Z.Utils.stringValidate(v)&&y.setAttribute("TEXTVISIBLE",v);v=p.getAttribute("BACKVISIBLE");Z.Utils.stringValidate(v)&&y.setAttribute("BACKVISIBLE",v);v=p.getAttribute("LINEVISIBLE");Z.Utils.stringValidate(v)&&
y.setAttribute("LINEVISIBLE",v);v=p.getAttribute("FILLVISIBLE");Z.Utils.stringValidate(v)&&y.setAttribute("FILLVISIBLE",v);v=p.getAttribute("CAPTIONPOSITION");Z.Utils.stringValidate(v)&&y.setAttribute("CAPTIONPOSITION",v);v=p.getAttribute("CATEGORY");Z.Utils.stringValidate(v)&&y.setAttribute("CATEGORY",v);v=p.getElementsByTagName("CAPTION")[0];"undefined"!==typeof v&&null!==v&&(Z.browser==Z.browsers.IE&&11>Z.browserVersion?(v=Z.Utils.xmlConvertDocToText(v),y.setAttribute("CAPTION",v)):y.appendChild(v));
v=p.getElementsByTagName("TOOLTIP")[0];"undefined"!==typeof v&&null!==v&&(Z.browser==Z.browsers.IE&&11>Z.browserVersion?(v=Z.Utils.xmlConvertDocToText(v),y.setAttribute("TOOLTIP",v)):y.appendChild(v));if(q=p.getElementsByTagName("POLYGON")[0]){for(var t=lb(n,"polygon"),sc=0,I=q.getElementsByTagName("POINT").length;sc<I;sc++){var L=q.getElementsByTagName("POINT")[sc],D=lb(n,"point"),v=L.getAttribute("X");Z.Utils.stringValidate(v)&&D.setAttribute("X",v);v=L.getAttribute("Y");Z.Utils.stringValidate(v)&&
D.setAttribute("Y",v);t.appendChild(D)}v=p.getAttribute("CLOSED");Z.Utils.stringValidate(v)&&y.setAttribute("CLOSED",v);y.appendChild(t)}if(4==Zh&&"polygon"==y.getAttribute("MEDIA")&&100!=parseFloat(y.getAttribute("ZOOM"))){n=y;p=n.getAttribute("X");v=n.getAttribute("Y");y=100/n.getAttribute("ZOOM");p-=p*y;v-=v*y;if(0<n.getElementsByTagName("POLYGON").length)for(var B=n.getElementsByTagName("POLYGON")[0],q=B.getElementsByTagName("POINT"),C=[],t=0,sc=q.length;t<sc;t++)I=parseFloat(q[t].getAttribute("X")),
I=isNaN(I)?0:I,I=I*y+p,L=parseFloat(q[t].getAttribute("Y")),L=isNaN(L)?0:L,L=L*y+v,C[C.length]={x:I,y:L};n.removeChild(B);y=vd();lb(y,"label");if(null!=C&&0<C.length){p=y.createElement("POLYGON");v=0;for(q=C.length;v<q;v++)t=y.createElement("POINT"),t.setAttribute("X",C[v].x),t.setAttribute("Y",C[v].y),p.appendChild(t);n.appendChild(p)}y=n}k.appendChild(y)}}u=h[g].getElementsByTagName("NOTES")[0];if("undefined"!==typeof u&&null!==u)for(k=c.createElement("NOTES"),l.appendChild(k),l=u.getElementsByTagName("NOTE"),
u=0,r=l.length;u<r;u++)w=lb(c,"note"),n=l[u],temp=n.getAttribute("ID"),Z.Utils.stringValidate(temp)&&w.setAttribute("ID",temp),temp=Z.Utils.xmlUnescapeMinimal(unescape(n.getAttribute("NAME"))),Z.Utils.stringValidate(temp)&&w.setAttribute("NAME",temp),temp=Z.Utils.xmlUnescapeMinimal(unescape(n.getAttribute("TEXT"))),Z.Utils.stringValidate(temp)&&w.setAttribute("TEXT",temp),temp=n.getAttribute("USER"),Z.Utils.stringValidate(temp)&&w.setAttribute("USER",temp),temp=n.getAttribute("DATE"),Z.Utils.stringValidate(temp)&&
w.setAttribute("DATE",temp),k.appendChild(w)}0==h.length&&(l=lb(c,"poi"),d.appendChild(l));Kb=c;c=Kb.getElementsByTagName("SETUP")[0];$f=c.getAttribute("PANELPOSITION");d=Z.Utils.getResource("z134");B=c.getAttribute("INITIALVISIBILITY");zg=d?"0"!=B&&"hide"!=B:"1"!=B&&"show"!=B;d=parseFloat(c.getAttribute("MINSCALE"));isNaN(d)||(He=0!=d?d:1E-5);d=parseFloat(c.getAttribute("MAXSCALE"));isNaN(d)||(Ie=0!=d?d:1E4);Dd=$h="markup"!=Z.editMode&&"0"!=c.getAttribute("POIVISIBILITY");Zb=ai="0"!=c.getAttribute("LABELVISIBILITY");
Ed=bi="markup"!=Z.editMode&&"0"!=c.getAttribute("NOTEVISIBILITY");zd=ci="edit"!=Z.editMode&&"0"!=c.getAttribute("COMMENTVISIBILITY");Yg="COMMENT"==c.getAttribute("TOOLTIPSOURCE")?"COMMENT":"TOOLTIP";c=Kb.getElementsByTagName("POI");d=0;for(B=c.length;d<B;d++){C=Hb("poi");c[d].setAttribute("INTERNALID",C);sf(c[d]);if(h=c[d].getElementsByTagName("LABELS")[0])for(h=h.getElementsByTagName("LABEL"),g=0,f=h.length;g<f;g++)l=Hb("label"),h[g].setAttribute("INTERNALID",l),0<g&&"0"==h[g].getAttribute("ID")&&
"0"==h[g-1].getAttribute("ID")&&h[g].setAttribute("ID",l),h[g].setAttribute("POIID",C),Z.browser==Z.browsers.IE&&11>Z.browserVersion?h[g].parentNode.replaceChild(h[g],Md(h[g])):h[g]=Md(h[g]),m.z495(h[g]);if(h=c[d].getElementsByTagName("NOTES")[0])for(h=h.getElementsByTagName("NOTE"),g=0,f=h.length;g<f;g++)l=Hb("note"),h[g].setAttribute("INTERNALID",l),h[g].setAttribute("POIID",C),gd(h[g])}2==Z.debug&&rf&&Z.Utils.trace(Z.Utils.getResource("z246"));Kb=he(Kb);m.setStatus("XMLParsed",!0);"markup"==Z.editMode&&
(Dd=Zb=Ed=!1);m.createAnnotationPanel(b);Z.Utils.validateCallback("annotationsLoaded");m.setStatus("annotationsLoaded",!0)};this.createLabelFromParameters=function(a,b,c,d,h,g,f,l,k,u,v,r,y,w,p,n,q,t,sc,I,L,B,C,D,F,E,jb,J,G,O,sa,U,Za,Bd,Na,N){a=Z.Utils.arrayToArrayOfStrings([a,b,c,d,h,g,f,l,k,u,v,r,y,w,p,n,q,t,sc,I,L,B,C,D,F,E,jb,J,G,O,sa,U,Za,Bd,Na,N]);a=Z.Utils.xmlConvertTextToDoc('<LABEL ID="'+a[0]+'" NAME="'+a[1]+'" MEDIATYPE="'+a[2]+'" MEDIA="'+a[3]+'" AUDIO="'+a[4]+'" X="'+a[5]+'" Y="'+a[6]+
'" ZOOM="'+a[7]+'" XSCALE="'+a[8]+'" YSCALE="'+a[9]+'" CLICKURL="'+a[10]+'" URLTARGET="'+a[11]+'" ROLLOVER="'+a[12]+'" CAPTION="'+a[13]+'" COMMENT="'+a[14]+'" TOOLTIP="'+a[15]+'" TEXTCOLOR="'+a[16]+'" BACKCOLOR="'+a[17]+'" LINECOLOR="'+a[18]+'" FILLCOLOR="'+a[19]+'" TEXTVISIBLE="'+a[20]+'" BACKVISIBLE="'+a[21]+'" LINEVISIBLE="'+a[22]+'" FILLVISIBLE="'+a[23]+'" CAPTIONPOSITION="'+a[24]+'" SAVED="'+a[25]+'" INTERNALID="'+a[26]+'" POIID="'+a[27]+'" POLYGONCLOSED="'+a[28]+'" SHOWFOR="'+a[29]+'" TRANSITION="'+
a[30]+'" CHANGEFOR="'+a[31]+'" ROTATION="'+a[32]+'"></LABEL>');b=a.getElementsByTagName("LABEL")[0];Z.Utils.stringValidate(b.getAttribute("INTERNALID"))||b.setAttribute("INTERNALID",Hb("label"));Z.Utils.stringValidate(G)&&(G=Z.Utils.xmlConvertTextToDoc(G).getElementsByTagName("CAPTION")[0].innerHTML,c=a.createElement("CAPTION"),c.innerHTML=G,b.appendChild(c));G=O;Z.Utils.stringValidate(G)&&(G=Z.Utils.xmlConvertTextToDoc(G).getElementsByTagName("TOOLTIP")[0].innerHTML,O=a.createElement("TOOLTIP"),
O.innerHTML=G,b.appendChild(O));if(null!=U){O=a.createElement("POLYGON");G=0;for(c=U.length;G<c;G++)d=a.createElement("POINT"),d.setAttribute("X",U[G].x),d.setAttribute("Y",U[G].y),O.appendChild(d);b.appendChild(O)}m.z495(b,!0)};this.createLabelFromJSON=function(a,b){var c=Z.Utils.jsonConvertObjectToXMLText(a),c=Z.Utils.xmlConvertTextToDoc(c).getElementsByTagName("LABEL")[0];m.z495(c,!0)};this.z495=function(a,b){b&&(a=Nd(a,"label"));var c=a.getAttribute("INTERNALID"),d=a.getAttribute("NAME"),h=a.getAttribute("INTERNALID"),
g=a.getAttribute("POIID"),c=Z.Utils.arrayIndexOfObjectValue(ka,"value",c);-1==c&&(c=ka.length);ka[c]={text:d,value:h,poiID:g};m.createHotspotFromXML(a)};this.modifyLabel=function(a,b,c,d,h){m.modifyHotspot(a.toString(),b,c,d,h)};this.createAnnotationPanel=function(a){var b=a.toString();Z["AnnotationPanelDisplay"+b]=Z.Utils.createContainerElement("div","AnnotationPanelDisplay"+b,"inline-block","absolute","hidden","1px","1px","1px","1px","solid","1px","transparent none","0px","0px","normal","default");
se=oa=Z["AnnotationPanelDisplay"+b];ze=se.style;Z.ViewerDisplay.appendChild(oa);var c=parseInt(Z.Utils.getResource("z230"),10);ze.zIndex=(c+4).toString();c=Z.Utils.createContainerElement("div","annotationPanelBackground"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");oa.appendChild(c);var d=parseInt(Z.Utils.getResource("z63"),10),h=[{text:Z.Utils.getResource("z20"),value:"0"}];if("undefined"===typeof S||null===S){var g=Z.Utils.createContainerElement("div",
"labelPOITextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("z410"));g.appendChild(f);S=new Z.Utils.createSelectElement("poiList"+b,"",h,1,1,0,d,"hidden",ee,"mousedown");oa.appendChild(g);oa.appendChild(S)}else Z.Utils.arrayClear(pa);"undefined"===typeof ia||null===ia?("markup"!=Z.editMode&&(g=Z.Utils.createContainerElement("div","labelLabelTextBox"+b,"inline-block","absolute",
"hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("z408")),g.appendChild(f),oa.appendChild(g)),ia=new Z.Utils.createSelectElement("labelList"+b,"",h,1,1,0,d,"hidden",fe,"mousedown"),oa.appendChild(ia),zd&&(g="markup"!=Z.editMode,f=Z.Utils.getResource("CONTENT_ANNOTATIONPLACEHOLDERCOMMENTTEXT"),g=Z.Utils.createTextElement("commentTextElement"+b,f,"1px","1px","1px","1px","0px","solid","1px",g,"verdana","1px",
"none",null,1,"auto","auto",null),Z.Utils.addEventListener(g.firstChild,"focus",Sc),Z.Utils.addEventListener(g.firstChild,"blur",hc),oa.appendChild(g))):(Z.Utils.arrayClear(ka),Z.Utils.arrayClear(db));if("undefined"===typeof Ia||null===Ia){if(g=Z.Utils.createContainerElement("div","labelNoteTextBox"+b,"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("z409")),g.appendChild(f),Ia=new Z.Utils.createSelectElement("noteList"+
b,"",h,1,1,0,d,"hidden",Df,"change"),d=Z.Utils.getResource("z21"),d=Z.Utils.createTextElement("noteTextElement"+b,d,"1px","1px","1px","1px","0px","solid","1px",!0,"verdana","1px","none",null,1,"auto","auto",null),Z.Utils.addEventListener(d.firstChild,"focus",Sc),Z.Utils.addEventListener(d.firstChild,"blur",hc),oa.appendChild(g),oa.appendChild(Ia),oa.appendChild(d),b=document.getElementById("textBoxFor-noteTextElement"+b))b.style.visibility="hidden"}else Z.Utils.arrayClear(Ga),Z.Utils.arrayClear(pb);
null===Z.editMode?(Le(null,a),m.getStatus("XMLParsed")&&xf()):Od(a);Z.Utils.addEventListener(c,"mousedown",Z.Utils.preventDefault)};this.calculateAnnotationPanelDimensions=function(a,b,c,d){var h=parseInt(Z.Utils.getResource("z65"),10),g=parseInt(Z.Utils.getResource("z61"),10);"markup"==Z.editMode?(h-=20,g+=115,a||(g-=24),b||(g-=24),c||(g-=115),d||(g-=80)):null!==Z.editMode?(g+=244,a||(g-=50),b||(g-=215),c||(g-=140),d||(g-=80)):(a||(g-=24),b||(g-=24),c||(g-=115),d||(g-=80),a||c||d||(g-=9));this.w=
h;this.h=g};this.calculateAnnotationPanelCoords=function(a,b,c,d,h){if(0==Z.annotationPanelVisible)c=a=-1E3;else switch(a){case "0":c=a=-1E3;break;case "1":c=a=15;break;case "2":a=d-b-15;c=15;2==Z.imageSetListPosition&&(c+=20);break;case "3":a=d-b-15;c=null!=toolbar?h-c-15:h-15;break;case "4":a=15;c=null!=toolbar?h-c-15:h-15;break;default:a=d-b-15,c=15}return new Z.Utils.Point(a,c)};this.sizeAndPositionAnnotationPanel=function(a,b,c,d,h){"undefined"!==typeof b&&null!==b&&(a.width=b+"px");"undefined"!==
typeof c&&null!==c&&(a.height=c+"px");"undefined"!==typeof d&&null!==d&&(a.left=d+"px");"undefined"!==typeof h&&null!==h&&(a.top=h+"px")};this.clearAnnotationPanel=function(a){se&&(Ia=ia=S=null,Z.Utils.deleteDiv("AnnotationPanelDisplay"+a))};this.setLabelMaskByDisplayID=function(a,b){var c=[];c[0]=a;m.setHotspotMaskByDisplayList(c,b)};this.setLabelMaskByDisplayList=function(a,b){m.setHotspotMaskByDisplayList(a,b)};this.setHotspotMaskByDisplayList=function(a,b){if(Sa&&"undefined"!==typeof a&&null!==
a&&0<a.length)if(Z.maskingSelection){var c=function(){setMask(a,b);Z.Viewport.maskFadeTimeoutHandler("in");Z.clearCallback("maskClear",c)};Z.setCallback("maskClear",c);Z.Viewport.clearMask()}else setMask(a,b),Z.Viewport.maskFadeTimeoutHandler("in")};setMask=function(a,b){("undefined"===typeof a||null===a)&&"undefined"!==typeof Uc&&null!==Uc&&0<Uc.length&&(a=Uc);if("undefined"!==typeof a&&null!==a&&0<a.length){Uc=a.slice(0);if("undefined"===typeof b||null===b)b=!1;Sa&&(Sa.width=ua.width,Sa.height=
ua.height,Ob.width=Ta.width,Ob.height=Ta.height,Ob.left=Ta.left,Ob.top=Ta.top,Ja.restore(),Ja.save(),Ja.translate(fc,Pb));yf();for(var c=a,d=b,h=0,g=p.length;h<g;h++){var f=p[h],l=d?f.internalID:f.id,k=Z.Utils.arrayMap(c,String);if(-1!=Z.Utils.arrayIndexOf(k,l))if(Z.useCanvas){if(f.visibility||f.rollover||rollover){Ja.save();Ja.globalCompositeOperation="xor";Ja.translate((f.x-Z.imageX)*Z.imageZ,(f.y-Z.imageY)*Z.imageZ);Ja.lineWidth=1E-6;Ja.strokeStyle=f.lineColor;Ja.globalAlpha=1;var k=ya/wc,u=m.getZoom(),
l=f.xScale/100/k*u,k=f.yScale/100/k*u;1!=l&&1!=k&&Ja.scale(l,k);l=f.x;k=f.y;Ja.beginPath();if(f.polygonPts){var u=f.polygonPts.slice(0),v=u[0].x-l,r=u[0].y-k;Ja.moveTo(v,r);for(var y=1,w=u.length;y<w;y++)Ja.lineTo(u[y].x-l,u[y].y-k);"freehand"!=f.mediaType&&f.polyClosed&&(Ja.lineTo(v,r),Ja.closePath())}else u=100/f.z*f.iW,v=100/f.z*f.iH,l=0,k=-1==f.media.indexOf("triangle")?0:.23*f.iH,f=Math.max(u,v)/2*1.2,Ja.arc(l,k,f,0,2*Math.PI);Ja.fill();Ja.restore()}}else ng||(Z.Utils.showMessage(Z.Utils.getResource("z9")),
ng=!0)}}};this.clearMask=function(){Sa&&Z.Viewport.maskFadeTimeoutHandler("out")};this.maskFadeTimeoutHandler=function(a){if(Sa){Z.maskingSelection||null===a||(Z.maskingSelection=!0,Ob.display="inline-block");if("in"==a)Z.maskOpacity+=Yh,1<Z.maskOpacity&&(Z.maskOpacity=1,a=null,Z.Utils.validateCallback("maskSet"));else if("out"==a||"outIn"==a)Z.maskOpacity-=Yh,0>=Z.maskOpacity&&(Z.maskOpacity=0,"outIn"==a?a="In":(Z.maskingSelection=!1,Z.Utils.clearDisplay(Sa),Ob.display="none",a=null,Z.Utils.validateCallback("maskClear")));
Z.Utils.setOpacity(Sa,Z.maskOpacity);null!==a&&0<Z.maskOpacity&&1>Z.maskOpacity?Z.maskFadeTimeout=window.setTimeout(function(){Z.Viewport.maskFadeTimeoutHandler(a)},50):(window.clearTimeout(Z.maskFadeTimeout),Z.maskFadeTimeout=null)}else a=null,Z.maskingSelection=!1};this.goToLabelByID=function(a,b,c){"undefined"!==typeof b&&null!==b?J=b:"undefined"!==typeof a&&null!==a&&(a="undefined"!==typeof c&&null!==c&&c?Z.Utils.arrayIndexOfObjectValue(p,"internalID",a):Z.Utils.arrayIndexOfObjectValue(p,"id",
a),J=-1!=a?p[a]:null);J&&(c=J.x,a="center"==c?Z.imageCenterX:parseFloat(c),c=J.y,b="center"==c?Z.imageCenterY:parseFloat(c),c=J.z,c="-1"==c?Z.fitZ:parseFloat(c),m.zoomAndPanToView(a,b,c/100))};this.getCurrentLabel=function(){return J};this.setCurrentLabel=function(a,b){var c=b?Z.Utils.arrayIndexOfObjectValue(p,"internalID",a):Z.Utils.arrayIndexOfObjectValue(p,"id",a);-1!=c&&(J=p[c],D=J.internalID,ac())};this.getLabelXMLText=function(a){var b=null,b=null;a=Z.Utils.arrayIndexOfObjectValue(p,"internalID",
a);-1!=a&&(b=m.convertLabelToXML(p[a]),b=Z.Utils.xmlConvertDocToText(b));return b};this.getLabelJSONObject=function(a,b){var c=null,d=b?Z.Utils.arrayIndexOfObjectValue(p,"internalID",a):Z.Utils.arrayIndexOfObjectValue(p,"id",a);-1!=d&&(c=m.convertLabelToJSON(p[d]));return c};this.toggleEditMode=function(){var a=!1;null!==Z.editMode?(Dd=$h,Zb=ai,zd=ci,Ed=bi,Z.editMode=null,Z.measureVisible=!1,m.saveAnnotations(!0,!0,null),a=!0):("undefined"!==typeof Z.parameters.zEditMode&&"1"==Z.parameters.zEditMode?
(Z.editMode="edit",a=!0):"undefined"!==typeof Z.parameters.zMarkupMode&&"1"==Z.parameters.zMarkupMode&&(Dd=Zb=Ed=!1,Z.editMode="markup",a=!0),Z.measureVisible="undefined"!==typeof Z.parameters.zEditMode&&"0"==Z.parameters.zMeasureVisible);Z.Toolbar&&a&&Z.Toolbar.toggleAnnotationPanelMode(Z.editMode)};this.setEditModeLabel=function(a,b,c,d){var h=Ma.toString(),g=Z.labelMode;Z.labelMode=a;Z.Utils.removeEventListener(document,"mousemove",xa);Z.Utils.removeEventListener(document,"touchmove",xa);c=parseInt(Z.Utils.getResource("z6"),
10);"view"==a&&null===Z.editMode||Z.Utils.showMessage(Z.Utils.getResource("ALERT_HOWTOEDITMODE"+a.toUpperCase()),!1,c,"center",!0);Z.overlayMessage&&(Z.overlayMessage.parentNode.style.display="none");if("edit"==Z.editMode&&"editLabel"==Z.editing)if(m.modifyHotspot(D,"mediaType",a,!0,!0),"freehand"==a)"freehand"!=g&&m.modifyHotspot(D,"polygonPts",null,!0,!0),m.modifyHotspot(D,"image",null,!0,!0),m.modifyHotspot(D,"closed","false",!0,!0),m.modifyHotspot(D,"media","polygon",!1,!0);else if("text"==a)m.modifyLabel(D,
"image",null,!0,!0),m.modifyLabel(D,"captionPosition","5",!0,!0),m.modifyLabel(D,"media",null,!1,!0);else if("icon"==a){if(c=document.getElementById("labelIconList"+h))d&&"icon"!=g&&0<c.selectedIndex&&(d=!0),c=c[c.selectedIndex].value,c="External Graphics File"!=c?Ea+"/"+c:"placeholder",m.modifyHotspot(D,"media",c,!1,!0)}else if("rectangle"==a){if(J&&J.polygonPts&&4==J.polygonPts.length&&("polygon"==g||"measure"==g)?(c=Td(J.polygonPts,0),m.modifyHotspot(D,"polygonPts",c,!0,!0),c=Td(J.polygonPts,1),
m.modifyHotspot(D,"polygonPts",c,!0,!0),c=Td(J.polygonPts,2),m.modifyHotspot(D,"polygonPts",c,!0,!0),c=Td(J.polygonPts,3),m.modifyHotspot(D,"polygonPts",c,!0,!0)):m.modifyHotspot(D,"polygonPts",null,!0,!0),m.modifyHotspot(D,"image",null,!0,!0),m.modifyHotspot(D,"media","polygon",!1,!0),c=J&&J.polygonPts&&0<J.polygonPts.length)c=new Z.Utils.Point(J.polygonPts[0].x,J.polygonPts[0].y),hd(D,c)}else"polygon"==a?("view"!=g&&"rectangle"!=g&&"polygon"!=g&&"measure"!=g&&m.modifyHotspot(D,"polygonPts",null,
!0,!0),m.modifyHotspot(D,"image",null,!0,!0),m.modifyHotspot(D,"media","polygon",!1,!0)):"measure"==a&&((c=J&&J.polygonPts&&0<J.polygonPts.length)&&"rectangle"!=g&&"polygon"!=g&&"measure"!=g&&m.modifyHotspot(D,"polygonPts",null,!0,!0),m.modifyHotspot(D,"image",null,!0,!0),m.modifyHotspot(D,"media","polygon",!1,!0),c&&(c=new Z.Utils.Point(J.polygonPts[0].x,J.polygonPts[0].y),hd(D,c)));Z.Toolbar&&0!=Z.annotationPanelVisible&&(null!==Z.editMode?(c="view"==a?"buttonViewMode"+h:"buttonEditMode"+Z.Utils.stringUpperCaseFirstLetter(a)+
h,Z.Toolbar.positionButtonBorder(c)):Z.measureVisible&&(c=document.getElementById("buttonMeasure"+h),g=document.getElementById("buttonMeasureExit"+h),c&&g&&(c.style.display="measure"==Z.labelMode?"none":"inline-block",g.style.display="measure"==Z.labelMode?"inline-block":"none")),m.toggleLabelIconPicker("icon"==a&&!d),b&&"icon"==a&&"undefined"!==typeof iconMedia&&Z.Utils.stringValidate(iconMedia)&&(c=document.getElementById("labelIconList"+h)))&&(a=iconMedia.lastIndexOf("/")+1,b=iconMedia.lastIndexOf("."),
-1!=a&&-1!=b&&(a=iconMedia.substring(a,b).toLowerCase(),a=Z.Utils.arrayIndexOfObjectValueSubstring(c,"value",a,null,!0),-1!=a&&(c.selectedIndex=a)));Bf=Ha=null;Sd=!1;Ua=!0;N?fd():ac()};this.toggleLabelColorPicker=function(a){var b=document.getElementById("buttonContainerLabelColors"+(Z.annotationFileShared?"0":Ma.toString()));if(b){var c="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!c)?"inline-block":"none"}};this.setDrawingColor=function(a,b){var c=Z.annotationFileShared?
"0":Ma.toString();"markup"!=Z.editMode&&m.toggleLabelColorPicker(!1);var d;switch(a){case "buttonColor0"+c:d="#FFFFFF";break;case "buttonColor1"+c:d="#FFFF00";break;case "buttonColor2"+c:d="#00FFFF";break;case "buttonColor3"+c:d="#800080";break;case "buttonColor4"+c:d="#008000";break;case "buttonColor5"+c:d="#FF0000";break;case "buttonColor6"+c:d="#0000FF";break;case "buttonColor7"+c:d="#000000"}Mc=ah=lineStrokeColor=d;c="#FFFFFF"==d?"#000000":"#FFFFFF";b||null===D||1!=Z.editMode||"addLabel"!=Z.editing&&
"editLabel"!=Z.editing||(m.modifyHotspot(D,"textColor",d,!0,!0),m.modifyHotspot(D,"backColor",c,!0,!0),m.modifyHotspot(D,"lineColor",d,!1,!0))};this.toggleLabelIconPicker=function(a){var b=document.getElementById("buttonContainerLabelIcons"+Ma.toString());if(b){var c="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!c)?"inline-block":"none"}};this.addNewPOI=function(){Ne=0<S.options.length?S.options[S.selectedIndex].value:0;nb("save","pois");Ke();Tc(pa[pa.length-
1].value);mb("poi","addPOI")};this.editCurrentPOI=function(){Ne=S.options[S.selectedIndex].value;nb("save","pois");mb("poi","editPOI")};this.deleteCurrentPOI=function(){mb("poi",null);if("undefined"!==typeof S&&null!==S&&0<S.options.length){var a=-1!=S.selectedIndex?S.selectedIndex:0,b=S[S.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(pa,"value",b);-1!=b&&(pa=Z.Utils.arraySplice(pa,b,1));0<pa.length?(b=pa.length-1,b=pa[a<=b?a:b].value):b=null;Tc(b);Ne=0<S.options.length?S.options[S.selectedIndex].value:
0;nb("save","pois")}m.saveAnnotations(!0,!1,"poi")};this.cancelEditsPOI=function(){mb("poi",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,750,"center");nb("rollback","pois");Tc(Ne)};this.saveEditsPOI=function(a){var b=m.getStatus("XMLParsed")&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||mb("poi",null);b&&(Ne=S.options[S.selectedIndex].value,m.saveAnnotations(!0,!0,"poi"),nb("save","pois"),Z.Utils.validateCallback("poiSaved"))};this.addNewLabel=function(){Rd=0<ia.options.length?ia.options[ia.selectedIndex].value:
0;nb("save","labels");parseInt(Z.Utils.getResource("z6SHORT"),10);D=null;mb("labelPartial","addLabel")};this.editCurrentLabel=function(){Rd=D;nb("save","labels");mb("label","editLabel");"view"!=Z.labelMode&&null!==Z.editing&&m.setEditModeLabel(J.mediaType,!0,J.media,!0);null!==J&&"polygon"==J.media&&fd()};this.deleteCurrentLabel=function(){Z.Utils.removeEventListener(document,"mousemove",xa);Z.Utils.removeEventListener(document,"touchmove",xa);"markup"!=Z.editMode&&m.toggleLabelColorPicker(!1);m.toggleLabelIconPicker(!1);
"markup"!=Z.editMode&&mb("label",null);"undefined"!==typeof ia&&null!==ia&&0<ia.options.length&&m.deleteLabel(ia[ia.selectedIndex].value)};this.deleteLabel=function(a,b){if("undefined"!==typeof b&&null!==b&&!b)for(var c=0,d=p.length;c<d;c++)if(p[c].id==a){a=p[c].internalID;break}"undefined"!==typeof a&&null!==a&&"undefined"!==typeof ka&&null!==ka&&(c=a.toString(),d=Z.Utils.arrayIndexOfObjectValue(ka,"value",c),-1!=d&&(ka=Z.Utils.arraySplice(ka,d,1),d=Z.Utils.arrayIndexOfObjectValue(db,"value",c),
-1!=d&&(db=Z.Utils.arraySplice(db,d,1)),m.deleteHotspot(c,null,!0),0<db.length&&"undefined"!==typeof ia&&null!==ia&&0<ia.options.length?(c=-1!=ia.selectedIndex?ia.selectedIndex:0,d=db.length-1,a=db[c<=d?c:d].value):a=null,zc(S.options[S.selectedIndex].value,a),Rd=0<ia.options.length?ia.options[ia.selectedIndex].value:"0",nb("save","labels"),m.saveAnnotations(!0,!1,"label")))};this.cancelEditsLabel=function(){Z.Utils.removeEventListener(document,"mousemove",xa);Z.Utils.removeEventListener(document,
"touchmove",xa);"markup"!=Z.editMode&&m.toggleLabelColorPicker(!1);m.toggleLabelIconPicker(!1);mb("label",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,750,"center");nb("rollback","labels");Ua=!0;zc(S.options[S.selectedIndex].value,Rd);ac()};this.saveEditsLabel=function(a,b,c){"markup"!=Z.editMode&&m.toggleLabelColorPicker(!1);m.toggleLabelIconPicker(!1);var d=Z.saveImageHandlerProvided||m.getStatus("XMLParsed")&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||"markup"==Z.editMode||
(Z.Utils.removeEventListener(document,"mousemove",xa),Z.Utils.removeEventListener(document,"touchmove",xa),mb("label",null));b&&m.setEditModeLabel("view",!1);d&&(Rd=0<ia.options.length?ia.options[ia.selectedIndex].value:0,m.saveAnnotations(b,c,"label"),nb("save","labels"),Ua=!0,zc(S.options[S.selectedIndex].value,Rd),Z.Utils.validateCallback("labelSaved"),Z.Utils.validateCallback("labelSavedGetJSONObject"));ac()};this.addNewNote=function(){Uf=0<Ia.options.length?Ia.options[Ia.selectedIndex].value:
0;nb("save","notes");var a=Z.Utils.arrayToArrayOfStrings([void 0,void 0,void 0,void 0,void 0]),a=Z.Utils.xmlConvertTextToDoc('<NOTE ID="'+a[0]+'" NAME="'+a[1]+'" TEXT="'+a[2]+'" INTERNALID="'+a[3]+'" POIID="'+a[4]+'" ></NOTE>').getElementsByTagName("NOTE")[0];gd(a,!0);a=Ga[Ga.length-1];Pd(a.poiID,a.value);mb("note","addNote")};this.editCurrentNote=function(){Uf=Ia.options[Ia.selectedIndex].value;nb("save","notes");mb("note","editNote")};this.deleteCurrentNote=function(){mb("note",null);if("undefined"!==
typeof Ia&&null!==Ia&&0<Ia.options.length){var a=-1!=Ia.selectedIndex?Ia.selectedIndex:0,b=Ia[Ia.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(Ga,"value",b);-1!=b&&(Ga=Z.Utils.arraySplice(Ga,b,1));0<Ga.length?(b=Ga.length-1,b=Ga[a<=b?a:b].value):b=null;"markup"!=Z.editMode&&Pd(S.options[S.selectedIndex].value,b);Uf=0<Ia.options.length?Ia.options[Ia.selectedIndex].value:0;nb("save","notes")}m.saveAnnotations(!0,!1,"note")};this.cancelEditsNote=function(){mb("note",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),
!1,750,"center");nb("rollback","notes");Pd(S.options[S.selectedIndex].value,Uf)};this.saveEditsNote=function(a){var b=m.getStatus("XMLParsed")&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||mb("note",null);b&&(Uf=Ia.options[Ia.selectedIndex].value,m.saveAnnotations(!0,!1,"note"),nb("save","notes"),Z.Utils.validateCallback("noteSaved"))};this.deleteAllAnnotations=function(){var a=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),b=a.getElementsByTagName("ZAS")[0],c=lb(a,"setup");b.appendChild(c);var b=
Kb.getElementsByTagName("SETUP")[0],d=b.getAttribute("PANELPOSITION");Z.Utils.stringValidate(d)&&c.setAttribute("PANELPOSITION",d);var h,d=b.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(d)&&(h=Z.Utils.getResource("z134")?"0"!=d&&"hide"!=d?"1":"0":"1"!=d&&"show"!=d?"0":"1",c.setAttribute("INITIALVISIBILITY",h));d=b.getAttribute("POIVISIBILITY");Z.Utils.stringValidate(d)&&(h="1"==Z.Utils.getResource("z66")?"0"!=d&&"hide"!=d?"1":"0":"1"!=d&&"show"!=d?"0":"1",c.setAttribute("POIVISIBILITY",
h));d=b.getAttribute("LABELVISIBILITY");Z.Utils.stringValidate(d)&&(d="1"==Z.Utils.getResource("z52"),c.setAttribute("LABELVISIBILITY",d?"0"!=d&&"hide"!=d?"1":"0":"1"!=d&&"show"!=d?"0":"1"));d="1"==b.getAttribute("NOTEVISIBILITY");Z.Utils.stringValidate(d)&&(h=Z.Utils.getResource("z60")?"0"!=d&&"hide"!=d?"1":"0":"1"!=d&&"show"!=d?"0":"1",c.setAttribute("NOTEVISIBILITY",h));h=setupSource.getAttribute("COMMENTVISIBILITY");Z.Utils.stringValidate(d)&&(h="1"==Z.Utils.getResource("DEFAULT_ANNOTATIONCOMMENTVISIBILITY")?
"0"!=h&&"hide"!=h?"1":"0":"1"!=h&&"show"!=h?"0":"1",setupNew.setAttribute("COMMENTVISIBILITY",h));d=b.getAttribute("MINSCALE");Z.Utils.stringValidate(d)&&!isNaN(parseFloat(d))&&0<=parseFloat(d)&&c.setAttribute("MINSCALE",d);d=b.getAttribute("MAXSCALE");Z.Utils.stringValidate(d)&&!isNaN(parseFloat(d))&&0<=parseFloat(d)&&c.setAttribute("MAXSCALE",d);ba&&("undefined"!==typeof p&&Z.Utils.arrayClear(p),"undefined"!==typeof Xb&&Z.Utils.arrayClear(Xb),null!=ga?"undefined"!==typeof pc&&Z.Utils.arrayClear(pc):
("undefined"!==typeof pa&&Z.Utils.arrayClear(pa),"undefined"!==typeof ka&&Z.Utils.arrayClear(ka),"undefined"!==typeof db&&Z.Utils.arrayClear(db),"undefined"!==typeof Ga&&Z.Utils.arrayClear(Ga),"undefined"!==typeof pb&&Z.Utils.arrayClear(pb)));Z.Viewport.parseAnnotationsXML(a);ac()};this.saveLabel=function(a,b){if("undefined"!==typeof b&&null!==b&&!b)for(var c=0,d=p.length;c<d;c++)if(p[c].id==a){a=p[c].internalID;break}"undefined"!==typeof a&&null!==a&&(c=Z.Utils.arrayIndexOfObjectValue(p,"internalID",
a),c=-1!=c?p[c]:null)&&(d=Kb,Kb=m.convertLabelToXML(c),m.saveAnnotations(!0,!0,"label"),Kb=d)};this.convertLabelToXML=function(a){var b,c=vd(),d=lb(c,"label");d.setAttribute("ID",a.id);d.setAttribute("NAME",Z.Utils.xmlEscapeMinimal(a.name));d.setAttribute("MEDIATYPE",a.mediaType);d.setAttribute("MEDIA",a.media);d.setAttribute("X",a.x);d.setAttribute("Y",a.y);d.setAttribute("ZOOM",a.z);d.setAttribute("XSCALE",a.xScale);d.setAttribute("YSCALE",a.yScale);d.setAttribute("CLICKURL",a.clickURL);d.setAttribute("URLTARGET",
a.urlTarget);b=1==a.rollover?"1":"0";d.setAttribute("ROLLOVER",b);d.setAttribute("CAPTION",Z.Utils.xmlEscapeMinimal(a.caption));zd&&d.setAttribute("COMMENT",Z.Utils.xmlEscapeMinimal(a.comment));d.setAttribute("TOOLTIP",Z.Utils.xmlEscapeMinimal(a.tooltip));d.setAttribute("USER",a.user);d.setAttribute("DATE",a.date);d.setAttribute("TEXTCOLOR",a.textColor);d.setAttribute("BACKCOLOR",a.backColor);d.setAttribute("LINECOLOR",a.lineColor);d.setAttribute("FILLCOLOR",a.fillColor);b=0!=a.textVisible?"1":"0";
d.setAttribute("TEXTVISIBLE",b);b=0!=a.backVisible?"1":"0";d.setAttribute("BACKVISIBLE",b);b=0!=a.lineVisible?"1":"0";d.setAttribute("LINEVISIBLE",b);b=0!=a.fillVisible?"1":"0";d.setAttribute("FILLVISIBLE",b);d.setAttribute("CAPTIONPOSITION",a.captionPosition);d.setAttribute("INTERNALID",a.internalID.toString());d.setAttribute("POIID",a.poiID.toString());b=a.captionHTML;if(Z.Utils.stringValidate(b)&&(b=Z.Utils.xmlConvertTextToDoc(b).getElementsByTagName("CAPTION")[0])){b=b.innerHTML;var h=c.createElement("CAPTION");
h.innerHTML=b;d.appendChild(h)}b=a.tooltipHTML;Z.Utils.stringValidate(b)&&(b=Z.Utils.xmlConvertTextToDoc(b).getElementsByTagName("TOOLTIP")[0])&&(b=b.innerHTML,h=c.createElement("TOOLTIP"),h.innerHTML=b,d.appendChild(h));if(a=a.polygonPts){b=c.createElement("POLYGON");for(var h=0,g=a.length;h<g;h++){var f=c.createElement("POINT");f.setAttribute("X",a[h].x);f.setAttribute("Y",a[h].y);b.appendChild(f)}d.appendChild(b)}return d};this.convertLabelToJSON=function(a){var b=null;a=m.convertLabelToXML(a);
a=Z.Utils.jsonConvertXMLTextToJSONText(a);try{b=JSON.parse(a)}catch(c){Z.Utils.showMessage(c.name+Z.Utils.getResource("z277")+c.message)}return b};this.saveAnnotations=function(a,b,c){if(Z.annotationsAutoSave||a){Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,750,"center");Kb=he(Kb);if(Z.noPostDefaults){a=Z.Utils.xmlConvertDocToText(Kb);a=Z.Utils.xmlConvertTextToDoc(a);c=a.getElementsByTagName("SETUP")[0];"2"==c.getAttribute("PANELPOSITION")&&c.removeAttribute("PANELPOSITION");"1"==c.getAttribute("INITIALVISIBILITY")&&
c.removeAttribute("INITIALVISIBILITY");"1"==c.getAttribute("POIVISIBILITY")&&c.removeAttribute("POIVISIBILITY");"1"==c.getAttribute("LABELVISIBILITY")&&c.removeAttribute("LABELVISIBILITY");"1"==c.getAttribute("NOTEVISIBILITY")&&c.removeAttribute("NOTEVISIBILITY");"1"==c.getAttribute("COMMENTVISIBILITY")&&c.removeAttribute("COMMENTVISIBILITY");.2==parseFloat(c.getAttribute("MINSCALE"))&&c.removeAttribute("MINSCALE");2==parseFloat(c.getAttribute("MAXSCALE"))&&c.removeAttribute("MAXSCALE");c=a.getElementsByTagName("POI");
for(var d=0,h=c.length;d<h;d++){var g=c[d];g.getAttribute("NAME")==Z.Utils.getResource("z43")&&g.removeAttribute("NAME");"center"==g.getAttribute("X")&&g.removeAttribute("X");"center"==g.getAttribute("Y")&&g.removeAttribute("Y");"-1"==g.getAttribute("ZOOM")&&g.removeAttribute("ZOOM");g.getAttribute("USER")==Z.Utils.getResource("z44")&&g.removeAttribute("USER");g.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&g.removeAttribute("DATE");g.hasAttribute("INTERNALID")&&g.removeAttribute("INTERNALID");
if(g=c[d].getElementsByTagName("LABELS")[0])for(var g=g.getElementsByTagName("LABEL"),f=0,l=g.length;f<l;f++){var k=g[f];k.getAttribute("NAME")==Z.Utils.getResource("z37")&&k.removeAttribute("NAME");"center"==k.getAttribute("X")&&k.removeAttribute("X");"center"==k.getAttribute("Y")&&k.removeAttribute("Y");"100"==k.getAttribute("ZOOM")&&k.removeAttribute("ZOOM");"100"==k.getAttribute("XSCALE")&&k.removeAttribute("XSCALE");"100"==k.getAttribute("YSCALE")&&k.removeAttribute("YSCALE");""==k.getAttribute("CLICKURL")&&
k.removeAttribute("CLICKURL");"_blank"==k.getAttribute("URLTARGET")&&k.removeAttribute("URLTARGET");"0"==k.getAttribute("ROLLOVER")&&k.removeAttribute("ROLLOVER");""==k.getAttribute("CAPTION")&&k.removeAttribute("CAPTION");""==k.getAttribute("COMMENT")&&k.removeAttribute("COMMENT");""==k.getAttribute("TOOLTIP")&&k.removeAttribute("TOOLTIP");k.getAttribute("USER")==Z.Utils.getResource("z39")&&k.removeAttribute("USER");k.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&k.removeAttribute("DATE");
k.getAttribute("TEXTCOLOR")==Z.Utils.getResource("z25")&&k.removeAttribute("TEXTCOLOR");k.getAttribute("BACKCOLOR")==Z.Utils.getResource("z22")&&k.removeAttribute("BACKCOLOR");k.getAttribute("LINECOLOR")==Z.Utils.getResource("z48")&&k.removeAttribute("LINECOLOR");k.getAttribute("FILLCOLOR")==Z.Utils.getResource("z46")&&k.removeAttribute("FILLCOLOR");k.getAttribute("TEXTVISIBLE")==Z.Utils.getResource("z26")&&k.removeAttribute("TEXTVISIBLE");k.getAttribute("BACKVISIBLE")==Z.Utils.getResource("z23")&&
k.removeAttribute("BACKVISIBLE");k.getAttribute("LINEVISIBLE")==Z.Utils.getResource("z49")&&k.removeAttribute("LINEVISIBLE");k.getAttribute("FILLVISIBLE")==Z.Utils.getResource("z47")&&k.removeAttribute("FILLVISIBLE");k.getAttribute("CAPTIONPOSITION")==Z.Utils.getResource("z24")&&k.removeAttribute("CAPTIONPOSITION");k.hasAttribute("INTERNALID")&&k.removeAttribute("INTERNALID")}if(g=c[d].getElementsByTagName("NOTES")[0])for(g=g.getElementsByTagName("NOTE"),f=0,l=g.length;f<l;f++)k=g[f],k.getAttribute("NAME")==
Z.Utils.getResource("z40")&&k.removeAttribute("NAME"),k.getAttribute("TEXT")==Z.Utils.getResource("z41")&&k.removeAttribute("TEXT"),k.getAttribute("USER")==Z.Utils.getResource("z42")&&k.removeAttribute("USER"),k.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&k.removeAttribute("DATE"),k.hasAttribute("INTERNALID")&&k.removeAttribute("INTERNALID")}}else a=Kb;annotationsXMLOut=a;null===Z.editMode||Z.noPost||(Z.Utils.stringValidate(Z.saveHandlerPath)?-1!=Z.saveHandlerPath.indexOf(Z.Utils.getResource("z13"))?
Z.Utils.showMessage(Z.Utils.getResource("z14"),!1,2E3,"center"):(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,2E3,"center"),(new Z.NetConnector).postXML(Z.saveHandlerPath,annotationsXMLOut)):Z.Utils.showMessage(Z.Utils.getResource("z297"),!0,null,"center"),Z.saveImageHandlerProvided&&b&&m.saveAnnotationsToImageFile(Z.saveImageFull?!0:null))}};this.setAllHotspotsSaved=function(){for(var a=0,b=p.length;a<b;a++)p[a].saved=!0};this.verifyEditsUnsaved=function(a){a=he(Kb);return Z.Utils.xmlConvertDocToText(Kb)!=
Z.Utils.xmlConvertDocToText(a)};this.tourStart=function(){m.tourStop();if(!Z.tourStop){Z.tourPlaying=!0;var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="inline-block",b.style.display="none");Z.screensaver?Z.constrainPanStrict||(Z.constrainPanStrict=!0):Z.Utils.playAudio(zf,p[Ld].audio);var c=Z.screensaver?0:Ud(Ld,"next",p.length-1);null!==c&&Z.Utils.functionCallWithDelay(function(){m.goToDestination(c)},1500)}};this.tourStop=function(){Z.tourPlaying=
!1;var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorDestination=function(a){Z.tourPlaying&&a&&m.tourStop();Z.screensaver?m.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):destinationChange("prior")};this.nextDestination=function(a){Z.tourPlaying&&a&&m.tourStop();destinationChange("next")};destinationChange=function(a){var b;if(Z.screensaver)Z.Utils.functionCallWithDelay(function(){m.goToDestination(0)},
0<Z.screensaverSpeed?8E3/Z.screensaverSpeed:3E3);else if("undefined"!==typeof ga&&null!==ga&&0<ga.length){Z.Utils.playAudio(zf,p[Ld].audio);var c=Z.tourPlaying?p[Ld].showFor:0;Z.Utils.stringValidate(p[Ld].audio)&&(c+=500);b=Ud(Ld,a,p.length-1);null!==b?(Z.screensaver||Z.Utils.loadAudio(p[b].audio),Z.Utils.functionCallWithDelay(function(){m.goToDestination(b)},c)):m.tourStop()}};this.goToDestination=function(a){if(Z.tourStop)m.tourStop(),Z.tourStop=!1;else{var b,c,d,h=Z.tourPlaying?m.nextDestination:
null;if(Z.screensaver){a=Z.Utils.getRandomInt(1,Z.imageW);b=Z.Utils.getRandomInt(1,Z.imageH);c=Z.Utils.getRandomInt(100*Z.minZ,100*Z.maxZ)/100;500>Z.imageX-a&&(a+=500,a>Z.imageW&&(a-=1E3));500>Z.imageY-b&&(b+=500,b>Z.imageH&&(b-=1E3));.3>Z.imageZ-c&&(c+=.3,c>Z.maxZ&&(c-=.6));d=0;var g=0<Z.screensaverSpeed?8E3/Z.screensaverSpeed:null;null!==g?m.zoomAndPanToView(a,b,c,d,g,null,h):m.setView(a,b,c,d,h)}else{Ld=a;var f=p[a];a=f.x;b=f.y;c=f.z/100;d=f.rotation;g=f.changeFor;switch(p.transition){case "ZoomAndPanToView":m.zoomAndPanToView(a,
b,c,d,g,null,h);break;case "SetView":m.setView(a,b,c,d,h);break;default:m.zoomAndPanToView(a,b,c,d,g,null,h)}h=Z.Utils.arrayIndexOfObjectValue(ga.options,"value",f.internalID.toString());-1!=h&&(ga.selectedIndex=h)}}};this.parseSlidesXML=function(a){Z.Utils.arrayClear(Tb);Z.Utils.arrayClear(xg);Vf=Z.Utils.getResource("DEFAULT_SLIDESHOWAUTOSTART");gh=Z.Utils.getResource("DEFAULT_SLIDESHOWAUTOLOOP");sh=Z.Utils.getResource("z202");rh=Z.Utils.getResource("z203");Z.slideListTitle=Z.Utils.getResource("z443");
var b=a.getElementsByTagName("SETUP")[0];if(b){var c=b.getAttribute("AUTOSTART");Z.Utils.stringValidate(c)&&(Vf="0"!=c&&"false"!=c);c=b.getAttribute("AUTOLOOP");Z.Utils.stringValidate(c)&&(gh="0"!=c&&"false"!=c);c=b.getAttribute("CHOICELIST");Z.Utils.stringValidate(c)&&(sh=c);c=b.getAttribute("LISTSOURCE");Z.Utils.stringValidate(c)&&(rh=c);b=b.getAttribute("LISTTITLE");Z.Utils.stringValidate(b)&&(Z.slideListTitle=b)}a=a.getElementsByTagName("SLIDE");b=0;for(c=a.length;b<c;b++){var d=new Hf(a[b]);
Tb[Tb.length]=d;var h="NAME"==rh?d.name:d.media.substring(d.media.lastIndexOf("/")+1,d.media.length);xg[xg.length]={text:h,value:d.internalID}}h=sh;a=Z.slideListTitle;var b=xg,c="0"==h?"hidden":"visible",d=parseInt(Z.Utils.getResource("z204"),10),g;switch(h){case "0":g=h=0;break;case "1":g=h=25;break;case "2":h=qa-d-25;g=20;break;case "3":h=qa-d-25;g=null!=toolbar?na-50:na-37.5;break;case "4":h=25;g=null!=toolbar?na-50:na-37.5;break;default:h=qa-d,g=25}h=new Z.Utils.Point(h,g);"undefined"===typeof Wb||
null===Wb?(Wb=new Z.Utils.createSelectElement("slideList",a,b,d,h.x,h.y,null,c,qg,"change"),Z.ViewerDisplay.appendChild(Wb),wd=0,a=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,Wb.selectedIndex=a):Z.Utils.arrayClear(b);m.initializeAudioMuteButtons();null===Z.imagePath||"null"==Z.imagePath||-1!=Z.imagePath.indexOf("zSlidePath")?m.goToSlide(0,!0):Vf&&m.slideshowStart()};this.slideshowStart=function(a){m.slideshowStop();Z.slideshowPlaying=!0;var b=document.getElementById("buttonSlideshowStop"),
c=document.getElementById("buttonSlideshowStart");b&&c&&(b.style.display="inline-block",c.style.display="none");Z.Utils.playAudio(zf,Tb[wd].audio);var b=Z.slideshowPlaying?Tb[wd].showFor:0,d=a?0:Ud(wd,"next",Tb.length-1);null!==d&&(Z.Utils.loadAudio(Tb[d].audio),Z.Utils.functionCallWithDelay(function(){m.goToSlide(d,null,null,!0)},b))};this.slideshowStop=function(){Z.slideshowPlaying=!1;var a=document.getElementById("buttonSlideshowStop"),b=document.getElementById("buttonSlideshowStart");a&&b&&(a.style.display=
"none",b.style.display="inline-block")};this.priorSlide=function(a){Z.slideshowPlaying&&a&&m.slideshowStop();Se("prior")};this.nextSlide=function(a){Z.slideshowPlaying&&a&&m.slideshowStop();Se("next")};this.goToSlide=function(a,b,c,d){if(Z.slideshowPlaying||b||c||d){wd=a;a=Tb[a];c=Z.Utils.parametersToDelimitedString(Z.parameters,"&");temp=a.initialX;var h=Z.Utils.stringValidate(temp)?"center"==temp?"zInitialX="+(Z.imageW/2).toString():isNaN(parseFloat(temp))?null:"zInitialX="+temp:null;temp=a.initialY;
d=Z.Utils.stringValidate(temp)?"center"==temp?"zInitialY="+(Z.imageH/2).toString():isNaN(parseFloat(temp))?null:"zInitialY="+temp:null;temp=a.initialZoom;var g=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zInitialZoom="+temp:null;temp=a.minZoom;var f=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zMinZoom="+temp:null;temp=a.maxZoom;var l=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zMaxZoom="+temp:null,h=null!==h?h:null,h=null!==d?null!==h?h+"&"+d:d:null,h=
null!==g?null!==h?h+"&"+g:g:null,h=null!==f?null!==h?h+"&"+f:f:null;d=null!==l?null!==h?h+"&"+l:l:null;g=Z.Utils.stringValidate(d)?"&":"";c=c+g+d;switch(a.transition){case "Fade":Z.Viewer.setImageWithFade(a.media,c,b);break;case "None":Z.Viewer.setImage(a.media,c,b);break;default:Z.Viewer.setImageWithFade(a.media,c,b)}b=Z.Utils.arrayIndexOfObjectValue(Wb.options,"value",a.internalID.toString());-1!=b&&(Wb.selectedIndex=b)}};this.slideTransitionTimeoutHandler=function(a,b,c,d){d&&(Z.Viewer.setImage(b,
c,d),a="in");window.clearTimeout(Z.slideTransitionTimeout);Z.slideTransitionTimeout=null;"out"==a?0<=Z.slideOpacity?(Z.slideOpacity-=Xh,a="out"):(Z.slideOpacity=0,a="in",Z.setCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50)}),Z.Viewer.setImage(b,c,null)):(0==Z.slideOpacity&&(Z.Utils.playAudio(zf,Tb[wd].audio),Z.clearCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,
b,c)},50)})),1>=Z.slideOpacity?(Z.slideOpacity+=Xh,a="in"):(Z.slideOpacity=1,a=null));za&&Z.Utils.setOpacity(za,Z.slideOpacity);Z.NavigatorDisplay&&Z.Utils.setOpacity(Z.NavigatorDisplay,Z.slideOpacity);null!==a&&0!=Z.slideOpacity&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50))};this.initializeAudioMuteButtons=function(){if(Z.audioContent){var a=document.getElementById("buttonAudioOn");a&&(a.style.display="inline-block")}};this.audioMute=
function(a){Z.audioMuted=a;var b=document.getElementById("buttonAudioMuted"),c=document.getElementById("buttonAudioOn");b&&c&&(a?(b.style.display="inline-block",c.style.display="none"):(b.style.display="none",c.style.display="inline-block"))};this.setView=function(a,b,c,d,h,g){Xd(a,b,c,d,h,g)};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=jc&&(jc-=af);break;case "in":0>=jc&&(jc+=af);break;case "stop":jc=0}Z.zooming=0==jc?"stop":0<jc?"in":"out";if(0!=jc){if(!Vc){if(0>
jc&&Z.imageZ>Z.minZ||0<jc&&Z.imageZ<Z.maxZ)m.toggleWatermarks(!1),p&&39<p.length&&m.setHotspotsVisibility(!1);Z.useCanvas||Z.Utils.clearDisplay(ab);Vc=window.setTimeout(ke,ih)}}else Ve(),m.updateView(),m.toggleWatermarks(!0),p&&39<p.length&&m.setHotspotsVisibility(!0)}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=Z.panningY){switch(a){case "left":0>=nc&&(nc+=wg);break;case "up":0>=tc&&(tc+=wg);break;case "down":0<=tc&&(tc-=wg);break;case "right":0<=
nc&&(nc-=wg);break;case "horizontalStop":nc=0;break;case "verticalStop":tc=0;break;case "stop":tc=nc=0}Z.panningX=0==nc?"stop":0<nc?"left":"right";Z.panningY=0==tc?"stop":0<tc?"up":"down";eb(ea,1);eb(ea,1);0!=nc||0!=tc?Vc||(m.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(ab),p&&39<p.length&&m.setHotspotsVisibility(!1),Vc=window.setTimeout(ke,ih)):(Ve(),m.updateView(),m.toggleWatermarks(!0),p&&39<p.length&&m.setHotspotsVisibility(!0))}};this.zoomAndPanToView=function(a,b,c,d,h,g,f){m.zoomAndPanAllStop();
if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=!1;else{if("undefined"===typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;if("undefined"===typeof h||null===h)h=Hi;if("undefined"===typeof g||null===g)g=mh;if("center"==a||isNaN(parseFloat(a)))a=Z.imageCenterX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCenterY;if(-1==c||isNaN(parseFloat(c)))b=Z.fitZ;m.toggleWatermarks(!1);Z.useCanvas||
Z.Utils.clearDisplay(ab);p&&39<p.length&&m.setHotspotsVisibility(!1);if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===typeof d||null===d)d=Z.imageR;"undefined"===typeof c||null===c?c=Z.initialZ:1<c&&2>c&&0!=c%1?c=1:1<c?c/=100:.99<c&&1>c&&0!=100*c%1&&(c=1);b=v(a,b,c,d,"image");a=b.x;b=b.y;c=jb(c);if(Math.round(a)!=Math.round(Z.imageX)||Math.round(b)!=Math.round(Z.imageY)||Math.round(1E5*c)!=Math.round(1E5*Z.imageZ)||Math.round(d)!=Math.round(Z.imageR))Z.interactivityOff=
!0,Jf=0,If(a,b,c,d,h,g,f)}};this.zoomAndPanAllStop=function(a,b){Z.interactivityOff||(Vd&&Vd&&(window.clearTimeout(Vd),Vd=null),Z.tourPlaying&&b&&(m.tourStop(),a=!1),Z.slideshowPlaying&&b&&(m.slideshowStop(),a=!1),Z.smoothPan&&null!==ld&&(Z.mouseIsDown||kd(!0),a=!0),a||m.updateView())};this.syncViewportRelated=function(a,b,c,d,h,g){("undefined"==typeof a||a)&&ab&&(Z.Utils.clearDisplay(ab),Fe());("undefined"==typeof b||b)&&ac();if("undefined"==typeof c||c)Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&
(a=m.getZoom(),Z.Toolbar.syncSliderToViewportZoom(a)),Z.Utils.validateCallback("viewZoomingGetCurrentZoom");("undefined"==typeof d||d)&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Navigator.syncToViewport();("undefined"==typeof h||h)&&Z.Ruler&&Z.Ruler.getInitialized()&&Z.Ruler.syncToViewport(void 0);"undefined"!=typeof g&&g&&syncToolbarImageSetSliderToViewport(Z.viewportCurrentID)};this.z633=function(a,b){Ue(a,b)&&m.syncViewportRelated()};this.reset=function(a){Z.maskingSelection&&Z.maskClearOnUserAction&&
m.clearMask();a?m.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):m.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);ie(!0)};this.labelScale=function(a){switch(a){case "down":0<=uc&&(uc-=Ag);break;case "up":0>=uc&&(uc+=Ag);break;case "stop":uc=0}0!=uc?le||(le=window.setTimeout(We,Ph)):(le&&(window.clearTimeout(le),le=null),uc=0)};this.toggleWatermarks=function(a){if(xe){var b="inline-block"==xe.display;xe.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none"}};this.toggleConstrainPan=
function(a){Z.constrainPan="undefined"!==typeof a&&null!==a?a:!Z.constrainPan;if(Z.constrainPan){a=parseFloat(Ta.left);var b=parseFloat(Ta.top);a=v(a,b,Z.imageZ,Z.imageR,"container");R.left=a.x+"px";R.top=a.y+"px";m.updateView()}};this.toggleSmoothPan=function(){kd();Z.smoothPan=!Z.smoothPan};this.toggleBackfill=function(){var a=document.getElementById("viewportBackfillDisplay"+Ma.toString());a&&(a=a.style,a.display="none"==a.display?"inline-block":"none")};this.toggleDisplay=function(){var a=document.getElementById("viewportDisplay"+
Ma.toString());a&&(Ta=a.style,Ta.display="none"==Ta.display?"inline-block":"none")};this.toggleFullViewModeExternal=function(){ph=!0;m.toggleFullViewMode()};this.toggleFullViewMode=function(a,b){Z.maskingSelection&&Z.maskClearOnUserAction&&m.clearMask();Z.ToolbarDisplay&&Z.Toolbar.show(!1);var c=null,d=null;Z.fullViewPrior=Z.fullView;Z.fullView="undefined"!==typeof a&&null!==a?a:!Z.fullView;var h=document.body.style,g=document.documentElement.style,f=Z.ViewerDisplay.style,d=Z.Utils.getElementStyle(Z.pageContainer);
Z.fullView?(Rh=h.width,Sh=h.height,Th=h.overflow,Uh=g.overflow,oh=Z.Utils.stringValidate(d.backgroundColor)&&"transparent"!=d.backgroundColor?d.backgroundColor:Z.Utils.stringValidate(h.backgroundColor)&&"transparent"!=h.backgroundColor?h.backgroundColor:Z.Utils.getResource("z120"),Vh=f.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?(nh=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0),d=Z.Utils.getScreenSize()):(d=Z.Utils.getWindowSize(),Z.mobileDevice?(h.width=d.x,h.height=d.y):(h.width="100%",h.height=
"100%")),c=d.x,d=d.y,h.overflow="hidden",g.overflow="hidden",f.backgroundColor=oh,f.position="fixed",f.zIndex="99999999"):(h.overflow=Th,g.overflow=Uh,f.backgroundColor=oh,f.position="relative",f.zIndex=Vh,Z.fullScreenSupported&&!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,!1,b),h.width=Rh,h.height=Sh,c=parseFloat(d.width),d=parseFloat(d.height),isNaN(c)&&(c=Z.ViewerDisplay.clientWidth),isNaN(d)&&(d=Z.ViewerDisplay.clientHeight),ph=!1);Z.autoResize||(Z.initialFullPage&&m.setSizeAndPosition(c,
d),h=Z.viewportCurrent.calculateZoomForResize(Z.viewportCurrent.getZoom(),Z.viewerW,Z.viewerH,c,d),Z.Viewer.resizeViewer(c,d,h));c=Z.fullView;h=document.getElementById("buttonFullView");g=document.getElementById("buttonFullViewExit");h&&g&&(h.style.display=c?"none":"inline-block",g.style.display=c?"inline-block":"none");ph?(bf||(c=Z.Utils.getResource("z420"),h=parseFloat(Z.viewerW)-54,g=parseFloat(Z.viewerH)-54,f=Z.Utils.getResource("DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR"),bf=new Z.Utils.Button("buttonFullViewExitExternal",
c,null,null,null,null,"34px","34px",h+"px",g+"px","mousedown",rg,"z391EXITEXTERNAL","solid","1px",f,"0px","0px"),Z.ViewerDisplay.appendChild(bf.elmt)),bf.elmt.style.display="inline-block"):bf&&(bf.elmt.style.display="none");Z.fullViewPrior=!1};this.rotateClockwise=function(){m.rotate(90,!0)};this.rotateCounterwise=function(){m.rotate(-90,!0)};this.rotate=function(a,b){if(!Z.interactivityOff)if(Z.rotationSupported){ie();var c=Z.imageR+a,d=Za(c);Z.interactivityOff=!0;b?m.zoomAndPanToView(Z.imageX,Z.imageY,
Z.imageZ,c,600,12,function(){Z.imageR=d}):(Z.Utils.rotateElement(R,c),0!=Z.imageR&&$a.rotate((c-Z.imageR)*Math.PI/180),Z.imageR=d,m.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ))}else Z.Utils.showMessage(Z.Utils.getResource("z12"))};this.toggleEditModeMeasure=function(a){m.zoomAndPanAllStop();Z.maskingSelection&&Z.maskClearOnUserAction&&m.clearMask();"undefined"!==typeof a&&!a||"measure"==Z.labelMode?(null===Z.editMode&&"measure"==Z.labelMode&&0<p.length&&(m.deleteAllMeasureHotspots(),D=null),m.setEditModeLabel("view")):
m.setEditModeLabel("measure")};this.increaseImageFilter=function(a){if(Z.Utils.stringValidate(a)){var b;switch(a){case "brightness":b=40;break;case "contrast":b=10;break;case "sharpness":b=1;break;case "blurriness":b=3}m.setImageFilter(a,b)}};this.decreaseImageFilter=function(a){if(Z.Utils.stringValidate(a)){var b;switch(a){case "brightness":b=-40;break;case "contrast":b=-10;break;case "sharpness":b=-1;break;case "blurriness":b=-3}m.setImageFilter(a,b)}};this.setImageFilter=function(a,b){"undefined"!==
typeof a&&null!==a&&"null"!==a&&(-1==Z.Utils.arrayIndexOfObjectValue(gc,"filter",a)||"edges"!=a&&"inversion"!=a&&"grayscale"!=a&&"threshold"!=a)&&(Z.Toolbar.addCounterToImageFilterList(a,gc.length),gc[gc.length]={filter:a,value:b},validateImageFiltersConvolve(),rd(a,b))};validateImageFiltersConvolve=function(){var a=-1!=Z.Utils.arrayIndexOfObjectValue(gc,"filter","sharpness"),b=-1!=Z.Utils.arrayIndexOfObjectValue(gc,"filter","blurriness"),c=-1!=Z.Utils.arrayIndexOfObjectValue(gc,"filter","edges");
be=a||b||c};this.clearImageFilterLast=function(){0<gc.length&&(Z.Toolbar.removeLastCounterFromImageFilterList(gc.length),gc.pop(),validateImageFiltersConvolve(),m.updateView(!0))};this.clearImageFiltersAll=function(){0<gc.length&&(Z.Toolbar.removeAllCountersFromImageFilterList(),Z.Utils.arrayClear(gc),validateImageFiltersConvolve(),m.updateView(!0))};this.fullScreenEscapeHandler=function(a){nh?nh=!1:m.toggleFullViewMode(!1,!0)};this.mouseWheelHandler=function(a){Z.mouseWheelIsDown=!0;Z.mouseWheelCompleteTimer&&
window.clearTimeout(Z.mouseWheelCompleteTimer);Z.mouseWheelCompleteTimer=window.setTimeout(Z.Viewer.z586,Z.mouseWheelCompleteDuration);if("zoom"==Z.sliderFocus){var b=m.z482(ea,ya*(1+(0<a?af:-af)));constrainedZ=jb(b);constrainedZ!=Z.imageZ&&(Z.zooming=0<a?"in":0>a?"out":"stop",m.z633(constrainedZ))}else"imageSet"==Z.sliderFocus&&(0<a?Z.Viewer.viewportNext():0>a&&Z.Viewer.viewportPrior())}};
Z.ZoomifyToolbar=function(a){function b(){window.clearInterval(U);U=null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function c(a){4>Z.toolbarVisible&&!Z.mobileDevice||8==Z.toolbarVisible?d(a):f(!a)}function d(a){Y&&(Y.display=a?"inline-block":"none")}function f(a){Z.ToolbarMinimized=a;if(Y){var b=document.getElementById("buttonContainer"),c=document.getElementById("toolbarBackground"),d=document.getElementById("buttonMinimize"),f=document.getElementById("buttonExpand"),
l=document.getElementById("logoDivider"),k=0;f&&!X&&(k=parseFloat(f.style.left)+parseFloat(f.style.width)+4);if(Z.imageFiltersVisible)var v=document.getElementById("imageFilterPanelBackground"),r=document.getElementById("buttonContainerImageFilter");var w=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),d&&f&&!X&&(l&&(l.style.display="none"),d.style.display="none",f.style.display="inline-block"),Y.width=k+"px",c&&(c.style.width=k+"px"),v&&r&&(v.style.width="0px",r.style.display="none")):(b&&(b.style.display=
"inline-block"),d&&f&&!X&&(l&&(l.style.display="inline-block"),d.style.display="inline-block",f.style.display="none"),Y.width=w+"px",c&&(c.style.width=w+"px"),v&&r&&jb&&(v.style.width=Oa+"px",r.style.display="inline-block"))}}function l(a){if("undefined"!==typeof trszS&&"undefined"!==typeof btszS){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(trszS.left),c=parseFloat(trszS.left)+parseFloat(trszS.width)-parseFloat(btszS.width)-b;btszS.left=a*c+b+"px"}}function k(a){"undefined"!==typeof btsZ&&(T=!0,
a=Z.Utils.getMousePosition(a),btsZ.mouseXPrior=a.x,btsZ.mouseYPrior=a.y)}function n(){if("undefined"!==typeof trszS&&"undefined"!==typeof btsZ&&"undefined"!==typeof btszS){var b=parseFloat(trszS.left),c=parseFloat(trszS.left)+parseFloat(trszS.width)-parseFloat(btszS.width),d=parseFloat(btszS.left)+(Na.x-btsZ.mouseXPrior);d<b?d=b:d>c?d=c:btsZ.mouseXPrior=Na.x;btszS.left=d+"px";b=Z.minZ+(d-b)/(c-b)*(Z.maxZ-Z.minZ);c=b-a.getZoom();Z.zooming=0<c?"in":0>c?"out":"stop";a.z633(b)}}function C(a){if(trsisS&&
btsisS){a=Z.viewportCurrentID/(Z.imageSetLength-1);var b=parseFloat(trsisS.left),c=parseFloat(trsisS.left)+parseFloat(trsisS.width)-parseFloat(btsisS.width)-b;btsisS.left=a*c+b+"px"}}function E(a){if(trsiS&&trsisS){var b=Z.Utils.getElementPosition(trsiS);a=Z.Utils.getMousePosition(a).x-b.x;b=parseFloat(trsisS.width);a=Math.round((a-0)/(b-0)*(Z.imageSetLength-1));0>a&&(a=0);a>Z.imageSetLength-1&&(a=Z.imageSetLength-1);a!=Z.viewportCurrentID&&Z.Viewer.viewportSelect(a,!0);C(a)}}function B(a){btsiS&&
(Ya=!0,a=Z.Utils.getMousePosition(a),btsiS.mouseXPrior=a.x,btsiS.mouseYPrior=a.y)}function Q(){if(trsiS&&btsiS&&btsiS){var a=parseFloat(trsisS.left),b=parseFloat(trsisS.left)+parseFloat(trsisS.width)-parseFloat(btsisS.width),c=parseFloat(btsisS.left)+(yc.x-btsiS.mouseXPrior);c<a?c=a:c>b?c=b:btsiS.mouseXPrior=yc.x;btsisS.left=c+"px";a=Math.round((c-a)/(b-a)*(Z.imageSetLength-1));a!=Z.viewportCurrentID&&Z.Viewer.viewportSelect(a,!0)}}function G(a){yc=new Z.Utils.Point(a.clientX,a.clientY)}function M(a){(a=
Z.Utils.getFirstTouch(a))&&(yc=new Z.Utils.Point(a.pageX,a.pageY))}function q(b){if(b=Z.Utils.event(b)){var c=b.type,d=Z.Utils.target(b);if(d){var f=d.parentNode;if(f){var l=f;tbID=f.id}}d=Z.Utils.relatedTarget(b)}"mousedown"==c&&a&&"buttonAudioOn"!=tbID&&"buttonAudioMuted"!=tbID&&(a.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&a.clearMask());if((!Z.interactivityOff||"mousedown"!=c&&"mouseup"!=c||"buttonRotateClockwise"==tbID||"buttonRotateCounterwise"==tbID)&&(!d||"[object HTMLSelectElement]"!=
d&&"[object HTMLOptionElement]"!=d)&&!Z.Utils.isRightMouseButton(b)){Z.touchSupport&&b.preventDefault();if(tbID&&-1!=tbID.indexOf("viewportContainer")||T||Ya)T?f=document.getElementById("buttonSliderZoom"):Ya&&(f=document.getElementById("buttonSliderImageSet")),f&&(tbID=f.id);var d=f,v=c;if(-1!=d.id.indexOf("button")&&-1==d.id.indexOf("buttonContainer")){var r=d.firstChild,t=d.childNodes[1],L=d.childNodes[2];if(r&&t&&L)if(r=r.style,t=t.style,L=L.style,r.visibility=t.visibility=L.visibility="hidden",
"mouseover"==v&&"buttonSliderZoom"==d.id&&T)L.visibility="visible";else if("mouseover"==v&&"buttonSliderImageSet"==d.id&&Ya)L.visibility="visible";else if("mouseover"==v||"mouseup"==v)t.visibility="visible";else if("mousedown"==v||"mousemove"==v||"touchstart"==v||"MSPointerDown"==v)L.visibility="visible";else if("mouseout"==v||"touchend"==v||"touchcancel"==v||"MSPointerUp"==v)r.visibility="visible"}if(tbID&&"buttonBackground"!=tbID&&c)switch(c){case "mouseover":if("trackSliderZoom"!=tbID&&"trackSliderImageSet"!=
tbID)if(Z.Utils.removeEventListener(f.childNodes[0],"mouseover",q),Z.Utils.addEventListener(f.childNodes[1],"mousedown",q),Z.Utils.addEventListener(f.childNodes[1],"mouseout",q),T&&l&&Z.Utils.addEventListener(l.childNodes[0],"mouseup",q),Ya&&l&&Z.Utils.addEventListener(l.childNodes[0],"mouseup",q),"buttonZoomIn"==tbID||"buttonSliderZoom"==tbID||"buttonZoomOut"==tbID)Z.sliderFocus="zoom";else{if("buttonImageSetPrior"==tbID||"buttonSliderImageSet"==tbID||"buttonImageSetNext"==tbID)Z.sliderFocus="imageSet"}else Z.Utils.addEventListener(f.childNodes[0],
"mouseout",q),Z.sliderFocus="trackSliderImageSet"==tbID?"imageSet":"zoom";break;case "mousedown":Z.buttonIsDown=!0;!Z.fullView&&document.activeElement&&document.activeElement.blur();"trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID?(Z.Utils.removeEventListener(f.childNodes[1],"mousedown",q),Z.Utils.removeEventListener(f.childNodes[1],"mouseout",q),Z.Utils.addEventListener(f.childNodes[2],"mouseup",q),Z.Utils.addEventListener(f.childNodes[2],"mouseout",q),"buttonSliderZoom"==tbID&&(k(b),w(b),Z.Utils.addEventListener(document,
"mousemove",w),ra||(ra=window.setInterval(n,da)),Z.Utils.addEventListener(document,"mouseup",q)),"buttonSliderImageSet"==tbID&&(B(b),G(b),Z.Utils.addEventListener(document,"mousemove",G),Gb||(Gb=window.setInterval(Q,zb)),Z.Utils.addEventListener(document,"mouseup",q))):Z.slidestack&&"trackSliderImageSet"==tbID&&Z.Utils.addEventListener(f,"mouseup",q);a&&P(b,tbID);break;case "mouseup":Z.buttonIsDown=!1;Z.Utils.removeEventListener(f.childNodes[2],"mouseup",q);Z.Utils.removeEventListener(f.childNodes[2],
"mouseout",q);Z.Utils.addEventListener(f.childNodes[1],"mousedown",q);Z.Utils.addEventListener(f.childNodes[1],"mouseout",q);T&&l&&Z.Utils.removeEventListener(l.childNodes[0],"mouseup",q);Ya&&l&&Z.Utils.removeEventListener(l.childNodes[0],"mouseup",q);a&&P(b,tbID);break;case "mouseout":if("trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID){if(Z.Utils.removeEventListener(f.childNodes[1],"mousedown",q),Z.Utils.removeEventListener(f.childNodes[1],"mouseout",q),Z.Utils.addEventListener(f.childNodes[0],
"mouseover",q),a&&P(b,tbID),"buttonImageSetPrior"==tbID||"buttonSliderImageSet"==tbID||"trackSliderImageSet"==tbID||"buttonImageSetNext"==tbID||"buttonZoomIn"==tbID||"buttonSliderZoom"==tbID||"buttonZoomOut"==tbID)Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom"}else Z.Utils.removeEventListener(f.childNodes[0],"mouseout",q),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom";break;case "touchstart":"buttonSliderZoom"==tbID&&(k(b),I(b),Z.Utils.addEventListener(document,"touchmove",I),ra||(ra=window.setInterval(n,
da)));"buttonSliderImageSet"==tbID&&(B(b),M(b),Z.Utils.addEventListener(document,"touchmove",M),Gb||(Gb=window.setInterval(Q,zb)));Z.Utils.addEventListener(f,"touchend",q);Z.Utils.addEventListener(f,"touchcancel",q);a&&P(b,tbID);break;case "touchend":Z.Utils.addEventListener(f,"touchstart",q);a&&P(b,tbID);break;case "touchcancel":Z.Utils.addEventListener(f,"touchstart",q);a&&P(b,tbID);break;case "MSPointerDown":"buttonSliderZoom"==tbID&&(k(b),I(b),Z.Utils.addEventListener(document,"MSPointerMove",
I),ra||(ra=window.setInterval(n,da)));"buttonSliderImageSet"==tbID&&(B(b),M(b),Z.Utils.addEventListener(document,"MSPointerMove",M),Gb||(Gb=window.setInterval(Q,zb)));Z.Utils.addEventListener(f,"MSPointerUp",q);a&&P(b,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(f,"MSPointerDown",q),a&&P(b,tbID)}}}function P(b,c){var d=b.type,f=Z.annotationFileShared?"0":ja,l=b.altKey;if("mousedown"==d||"touchstart"==d)switch(d=document.activeElement.id,!Z.Utils.stringValidate(d)||d!="poiNameTextElement"+
ja&&d!="labelNameTextElement"+ja&&"captionTextElement"!=d&&"commentTextElement"!=d&&"tooltipTextElement"!=d&&"clickURLTextElement"!=d&&d!="noteNameTextElement"+ja&&d!="noteTextElement"+ja||document.getElementById(d).blur(),L.positionButtonBorder(c),c){case "buttonMinimize":l?a.setHotspotsVisibility(!a.getHotspotsVisibility()):(L.minimize(!0),Z.Navigator&&Z.Navigator.setVisibility(!1));break;case "buttonExpand":l?a.setHotspotsVisibility(!a.getHotspotsVisibility()):(L.minimize(!1),Z.Navigator&&Z.Navigator.setVisibility(!0));
break;case "buttonZoomOut":l||a.zoom("out");break;case "buttonSliderZoom":break;case "trackSliderZoom":"undefined"!==typeof trsZ&&"undefined"!==typeof trszS&&(f=Z.Utils.getElementPosition(trsZ),f=Z.Utils.getMousePosition(b).x-f.x,l=parseFloat(trszS.width),f=Z.minZ+(f-0)/(l-0)*(Z.maxZ-Z.minZ),f<Z.minZ+.1&&(f=Z.minZ),f>Z.maxZ-.1&&(f=Z.maxZ),l=f-a.getZoom(),Z.zooming=0<l?"in":0>l?"out":"stop",a.z633(f),Z.zooming="stop",a.updateView());break;case "buttonZoomIn":l||a.zoom("in");break;case "buttonPanLeft":a.pan("left");
break;case "buttonPanUp":a.pan("up");break;case "buttonPanDown":a.pan("down");break;case "buttonPanRight":a.pan("right");break;case "buttonReset":a.reset(l);break;case "buttonFullView":break;case "buttonFullViewExit":break;case "buttonMeasure":a.toggleEditModeMeasure(!0);break;case "buttonMeasureExit":a.toggleEditModeMeasure(!1);break;case "buttonHelp":Z.annotations&&null===Z.editMode?Z.Utils.showHelp(Z.Utils.getResource("z32")+Z.Utils.getResource("z30")+Z.Utils.getResource("z29")):Z.Utils.showHelp(Z.Utils.getResource("z32"));
break;case "buttonHelpMarkup"+f:Z.Utils.showHelp(Z.Utils.getResource("z31"));break;case "buttonHelpAnnotation"+f:Z.Utils.showHelp(Z.Utils.getResource("z28"));break;case "buttonRotateClockwise":a.rotateClockwise();break;case "buttonRotateCounterwise":a.rotateCounterwise();break;case "buttonTourPrior":a.priorDestination(!0);break;case "buttonTourNext":a.nextDestination(!0);break;case "buttonTourStart":a.tourStart();break;case "buttonTourStop":a.tourStop();break;case "buttonSlideshowPrior":a.priorSlide(!0);
break;case "buttonSlideshowNext":a.nextSlide(!0);break;case "buttonSlideshowStart":a.slideshowStart();break;case "buttonSlideshowStop":a.slideshowStop();break;case "buttonAudioOn":a.audioMute(!0);break;case "buttonAudioMuted":a.audioMute(!1);break;case "buttonImageFilterPanelShow":L.imageFilterPanelShow();break;case "buttonImageFilterPanelHide":L.imageFilterPanelHide();break;case "buttonImageFilterPlus":a.increaseImageFilter(Za);break;case "buttonImageFilterMinus":a.decreaseImageFilter(Za);break;
case "buttonImageFilterApply":a.setImageFilter(Za);break;case "buttonImageSetPrior":Z.animation&&Z.Viewer.viewportChange("backward");break;case "buttonSliderImageSet":break;case "trackSliderImageSet":Z.animation&&E(b);break;case "buttonImageSetNext":Z.animation&&Z.Viewer.viewportChange("forward");break;case "buttonPOIAdd"+f:a.addNewPOI();break;case "buttonPOIEdit"+f:a.editCurrentPOI();break;case "buttonPOIDelete"+f:a.deleteCurrentPOI();break;case "buttonPOICancel"+f:a.cancelEditsPOI();break;case "buttonPOISave"+
f:a.saveEditsPOI();break;case "buttonLabelAdd"+f:a.addNewLabel();break;case "buttonLabelEdit"+f:a.editCurrentLabel();break;case "buttonLabelDelete"+f:a.deleteCurrentLabel();break;case "buttonLabelCancel"+f:a.cancelEditsLabel();break;case "buttonLabelSave"+f:a.saveEditsLabel(!1,!0,!0);break;case "buttonNoteAdd"+f:a.addNewNote();break;case "buttonNoteEdit"+f:a.editCurrentNote();break;case "buttonNoteDelete"+f:a.deleteCurrentNote();break;case "buttonNoteCancel"+f:a.cancelEditsNote();break;case "buttonNoteSave"+
f:a.saveEditsNote();break;case "buttonClearAll"+f:a.deleteAllAnnotations();break;case "buttonViewMode"+f:a.setEditModeLabel("view");break;case "buttonEditColorPicker"+f:a.toggleLabelColorPicker();break;case "buttonEditModeFreehand"+f:a.setEditModeLabel("freehand");break;case "buttonEditModeText"+f:a.setEditModeLabel("text");break;case "buttonEditModeIcon"+f:a.setEditModeLabel("icon");break;case "buttonEditModeRectangle"+f:a.setEditModeLabel("rectangle");break;case "buttonEditModePolygon"+f:a.setEditModeLabel("polygon");
break;case "buttonEditModeMeasure"+f:a.setEditModeLabel("measure");break;case "buttonLabelScaleDown"+f:a.labelScale("down");break;case "buttonLabelScaleUp"+f:a.labelScale("up");break;default:"buttonColor"==c.substr(0,11)&&a.setDrawingColor(c)}else if("mouseup"==d||"touchend"==d||"touchcancel"==d)if("buttonSliderZoom"==c||T)ra&&(window.clearInterval(ra),ra=null),W(),T=!1,Z.zooming="stop",a.updateView();else if("buttonSliderImageSet"==c||Ya)Gb&&(window.clearInterval(Gb),Gb=null),W(),Ya=!1,Z.Viewer.viewportSelect(Z.viewportCurrentID,
!0);else if("buttonZoomOut"==c||"buttonZoomIn"==c)a.zoom("stop"),0==Z.debug&&"buttonZoomOut"==c&&l&&Z.Utils.showGlobals(),"buttonZoomIn"==c&&l&&a.toggleEditMode();else if("buttonPanLeft"==c||"buttonPanRight"==c)a.pan("horizontalStop"),"buttonPanLeft"==c&&l&&a.toggleSmoothPan();else if("buttonPanUp"==c||"buttonPanDown"==c)a.pan("verticalStop");else if(c=="buttonLabelScaleDown"+f||c=="buttonLabelScaleUp"+f)a.labelScale("stop");else if("buttonFullView"==c)a.toggleFullViewMode(!0);else if("buttonFullViewExit"==
c)a.toggleFullViewMode(!1);else if("buttonImageFilterClear"==c)a.clearImageFilterLast();else if("buttonImageFiltersClearAll"==c)a.clearImageFiltersAll();else if("trackSliderImageSet"==c)Z.slidestack&&E(b);else{if("buttonImageSetPrior"==c||"buttonImageSetNext"==c)Z.animation?Z.Viewer.viewportChange("stop"):Z.slidestack&&("buttonImageSetPrior"==c?Z.Viewer.viewportChange("backward"):"buttonImageSetNext"==c&&Z.Viewer.viewportChange("forward"))}else"mouseout"==d&&("buttonZoomOut"==c||"buttonZoomIn"==c?
a.zoom("stop"):"buttonPanLeft"==c||"buttonPanRight"==c?a.pan("horizontalStop"):"buttonPanUp"==c||"buttonPanDown"==c?a.pan("verticalStop"):c=="buttonLabelScaleDown"+f||c=="buttonLabelScaleUp"+f?a.labelScale("stop"):"buttonImageSetPrior"!=c&&"buttonImageSetNext"!=c||Z.Viewer.viewportChange("stop"))}function W(){T&&(Z.Utils.removeEventListener(document,"mousemove",w),Z.Utils.removeEventListener(document,"mouseup",q),Z.Utils.removeEventListener(document,"touchmove",I));Ya&&(Z.Utils.removeEventListener(document,
"mousemove",G),Z.Utils.removeEventListener(document,"mouseup",q),Z.Utils.removeEventListener(document,"touchmove",M));for(var a=Z.ToolbarDisplay.childNodes,b=0,c=a.length;b<c;b++){var d=a[b],f=d.id;if(f&&-1!=f.indexOf("button"))if("buttonContainer"!=f&&"buttonContainerImageFilter"!=f)Z.Utils.setButtonDefaults(d);else for(var d=d.childNodes,f=0,l=d.length;f<l;f++){var k=d[f],v=k.id;v&&-1!=v.indexOf("button")&&Z.Utils.setButtonDefaults(k)}}}function w(a){Na=new Z.Utils.Point(a.clientX,a.clientY)}function I(a){(a=
Z.Utils.getFirstTouch(a))&&(Na=new Z.Utils.Point(a.pageX,a.pageY))}function r(a){if(a=Z.Utils.event(a))if(a=Z.Utils.target(a),Za=a.options[a.selectedIndex].value,"null"!==Za){a=document.getElementById("buttonImageFilterPlus");var b=document.getElementById("buttonImageFilterMinus"),c=document.getElementById("buttonImageFilterApply");"brightness"==Za||"contrast"==Za||"sharpness"==Za||"blurriness"==Za?(a.style.display="inline-block",b.style.display="inline-block",c.style.display="none"):"edges"==Za||
"inversion"==Za||"grayscale"==Za||"threshold"==Za?(a.style.display="none",b.style.display="none",c.style.display="inline-block"):Z.Utils.showMessage(Z.Utils.getResource("z282"))}else a.selectedIndex=0}var L=this,ma=!1,ja=a.getViewportID().toString();Z.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("z200"));var La,Y,Lb=[],t=[],wa=[],da=parseInt(Z.Utils.getResource("z205ZOOM"),10),T=!1,ra=null,Na=null,U=null,K=null,O,
Fa,X,la,ub,zb=parseInt(Z.Utils.getResource("z205IMAGESET"),10),Ya=!1,Gb=null,yc=null,eb;if(Z.imageFiltersVisible)var Oa,v=[],jb=Z.initialImageFilters,Za="";this.getInitialized=function(){return ma};this.getSkinArray=function(){return Lb};this.getSkinSizes=function(){return wa};this.show=function(a){c(a)};this.setVisibility=function(a){d(a)};this.minimize=function(a){f(a)};this.setVisibilityAnnotationPanel=function(b,c){var d=c;if("undefined"===typeof d||null===d)d=Z.annotationFileShared?"0":a.getViewportID().toString();
if(d=document.getElementById("AnnotationPanelDisplay"+d))!b||Z.measureVisible&&null===Z.editMode?(d.style.display="none",Z.annotationPanelVisibleState=!1):(d.style.display="inline-block",Z.annotationPanelVisibleState=!0)};this.toggleAnnotationPanelMode=function(b){a.clearAnnotationPanel(ja);a.setStatus("annotationPanelInitialized",!1);a.createAnnotationPanel(ja)};this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};this.hideProgress=
function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};this.updateProgress=function(a,c){if(Z.progressVisible){U&&window.clearInterval(U);var d,f=document.getElementById("progressTextBoxCenteredDiv");f&&(f=f.firstChild)&&(0==a||0==c?(f.nodeValue="llllllllll",U=window.setInterval(b,parseInt(Z.Utils.getResource("z182")),10)):(d=Math.round(100-c/a*100),d=Math.round(d/10),f.nodeValue=Z.Utils.stringMultiply("l",d)))}};this.setViewport=function(b){a=b;ja=a.getViewportID().toString()};
this.parseSkinXML=function(b){Z.skinMode=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;var d,f;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,f="SIZESSTANDARD"):(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,f="SIZESLARGE");var k=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof k&&null!==
k&&(K=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);k=[];k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("TOOLBARW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("TOOLBARH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("LOGOW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("LOGOH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("DIVIDERW").nodeValue);
k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("DIVIDERH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);k[k.length]=
parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSW").nodeValue);k[k.length]=
parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var w,n,I;f="edit"==Z.editMode?161:"markup"==Z.editMode?152:Z.imageFiltersVisible?100:Z.screensaver||Z.tourPath||Z.slidePath||Z.imageSetPath?77:Z.rotationVisible?58:Z.measureVisible?51:0<Z.helpVisible?45:Z.fullScreenVisible||Z.fullPageVisible?45:Z.resetVisible?35:Z.panButtonsVisible?32:Z.sliderZoomVisible?
19:Z.minimizeVisible?14:Z.logoVisible?8:6;w=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");null!==w&&(n=w.nodeValue);w=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+f.toString());null!==w&&(I=w.nodeValue);if("undefined"!==typeof n&&Z.Utils.stringValidate(n)&&"undefined"!==typeof I&&Z.Utils.stringValidate(I)){n=!1;I=0;for(f+=1;I<f;I++)w=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+I).nodeValue,Z.Utils.stringValidate(w)?t[I]=d+"/"+w:(t[I]=
"null",n=!0);n&&Z.Utils.showMessage(Z.Utils.getResource("z279"));Lb=t;Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay","inline-block","absolute","visible","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal");Y=Z.ToolbarDisplay.style;b=parseInt(Z.Utils.getResource("z230"),10);Y.zIndex=(b+1).toString();b=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,t[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));Z.Utils.getResource("z83NOALPHA");
Z.ToolbarDisplay.appendChild(b.elmt);wa=k;Z.logoVisible&&(Z.Utils.stringValidate(Z.logoCustomPath)?(k=Z.Utils.cacheProofPath(Z.logoCustomPath),k=new Z.Utils.Graphic("toolbarLogo",k,null,"1px","1px","1px","1px")):k=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,t[7],"1px","1px","1px","1px"),Z.Utils.stringValidate(Z.logoLinkURL)?(b=document.createElement("a"),b.setAttribute("href",Z.logoLinkURL),b.setAttribute("target",Z.Utils.getResource("z427TARGET")),b.setAttribute("title",Z.Utils.getResource("z360")),
b.setAttribute("outline","none"),b.appendChild(k.elmt),Z.ToolbarDisplay.appendChild(b)):(k.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),Z.ToolbarDisplay.appendChild(k.elmt)),0==Z.toolbarVisible||1==Z.toolbarVisible)&&(k=new Z.Utils.Graphic("logoDivider",Z.skinPath,t[8],"1px","1px","1px","1px"),Z.ToolbarDisplay.appendChild(k.elmt));k=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px",
"0px","normal","default");Z.ToolbarDisplay.appendChild(k);Z.Utils.addEventListener(k,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(k,"mouseover",L.backgroundEventsHandler);Z.Utils.addEventListener(k,"touchstart",Z.Utils.preventDefault);b=new Z.Utils.Graphic("buttonBackground",Z.skinPath,t[0],"1px","1px","0px","0px");k.appendChild(b.elmt);Z.Utils.setOpacity(b.elmt,"0","#FBFAFA");(0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible&&(b=new Z.Utils.Button("buttonMinimize",
null,Z.skinPath,t[9],t[10],t[11],"1px","1px","1px","1px","mouseover",q,"z363"),Z.ToolbarDisplay.appendChild(b.elmt),b=new Z.Utils.Button("buttonExpand",null,Z.skinPath,t[12],t[13],t[14],"1px","1px","1px","1px","mouseover",q,"z341"),Z.ToolbarDisplay.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,t[1],t[2],t[3],"1px","1px","1px","1px","mouseover",q,"z400");k.appendChild(b.elmt);Z.sliderZoomVisible&&(b=new Z.Utils.Graphic("trackSliderZoom",Z.skinPath,t[15],"1px","1px","0px",
"0px","z385"),k.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",q),Z.Utils.addEventListener(b.elmt,"touchstart",q),Z.Utils.addEventListener(b.elmt,"mouseover",q),b=new Z.Utils.Button("buttonSliderZoom",null,Z.skinPath,t[17],t[18],t[19],"1px","1px","1px","1px","mouseover",q,"z385"),k.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,t[4],t[5],t[6],"1px","1px","1px","1px","mouseover",q,"z399");k.appendChild(b.elmt);Z.panButtonsVisible&&(b=new Z.Utils.Graphic("panDivider",
Z.skinPath,t[20],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,t[21],t[22],t[23],"1px","1px","1px","1px","mouseover",q,"z370"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanUp",null,Z.skinPath,t[24],t[25],t[26],"1px","1px","1px","1px","mouseover",q,"z372"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,t[27],t[28],t[29],"1px","1px","1px","1px","mouseover",q,"z369"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanRight",
null,Z.skinPath,t[30],t[31],t[32],"1px","1px","1px","1px","mouseover",q,"z371"),k.appendChild(b.elmt));Z.resetVisible&&(b=new Z.Utils.Button("buttonReset",null,Z.skinPath,t[33],t[34],t[35],"1px","1px","1px","1px","mouseover",q,"z378"),k.appendChild(b.elmt));if(Z.fullScreenVisible||Z.fullPageVisible)null===Z.editMode&&(b=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,t[36],"1px","1px","1px","1px"),k.appendChild(b.elmt)),b=new Z.Utils.Button("buttonFullViewExit",null,Z.skinPath,t[40],t[41],t[42],
"1px","1px","1px","1px","mouseover",q,"z391EXIT"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonFullView",null,Z.skinPath,t[37],t[38],t[39],"1px","1px","1px","1px","mouseover",q,"z391"),k.appendChild(b.elmt);Z.measureVisible&&null===Z.editMode&&(Z.fullScreenVisible||Z.fullPageVisible||(b=new Z.Utils.Graphic("measureDivider",Z.skinPath,t[36],"1px","1px","1px","1px"),k.appendChild(b.elmt)),null===Z.editMode&&(b=new Z.Utils.Button("buttonMeasureExit",null,Z.skinPath,t[49],t[50],t[51],"1px","1px",
"1px","1px","mouseover",q,"z392EXIT"),k.appendChild(b.elmt)),b=new Z.Utils.Button("buttonMeasure",null,Z.skinPath,t[46],t[47],t[48],"1px","1px","1px","1px","mouseover",q,"z392"),k.appendChild(b.elmt));Z.rotationVisible&&(b=new Z.Utils.Graphic("rotateDivider",Z.skinPath,t[52],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateCounterwise",null,Z.skinPath,t[53],t[54],t[55],"1px","1px","1px","1px","mouseover",q,"z381"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateClockwise",
null,Z.skinPath,t[56],t[57],t[58],"1px","1px","1px","1px","mouseover",q,"z380"),k.appendChild(b.elmt));Z.tour&&(b=new Z.Utils.Graphic("tourDivider",Z.skinPath,t[59],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourPrior",null,Z.skinPath,t[60],t[61],t[62],"1px","1px","1px","1px","mouseover",q,"z394"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourNext",null,Z.skinPath,t[63],t[64],t[65],"1px","1px","1px","1px","mouseover",q,"z393"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStart",
null,Z.skinPath,t[66],t[67],t[68],"1px","1px","1px","1px","mouseover",q,"z395"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStop",null,Z.skinPath,t[69],t[70],t[71],"1px","1px","1px","1px","mouseover",q,"z396"),k.appendChild(b.elmt));Z.slideshow&&(b=new Z.Utils.Graphic("slideshowDivider",Z.skinPath,t[59],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowPrior",null,Z.skinPath,t[60],t[61],t[62],"1px","1px","1px","1px","mouseover",q,"z384"),k.appendChild(b.elmt),
b=new Z.Utils.Button("buttonSlideshowNext",null,Z.skinPath,t[63],t[64],t[65],"1px","1px","1px","1px","mouseover",q,"z383"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStart",null,Z.skinPath,t[66],t[67],t[68],"1px","1px","1px","1px","mouseover",q,"z386"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStop",null,Z.skinPath,t[69],t[70],t[71],"1px","1px","1px","1px","mouseover",q,"z387"),k.appendChild(b.elmt));if(Z.tour||Z.slideshow)b=new Z.Utils.Button("buttonAudioOn",null,
Z.skinPath,t[72],t[73],t[74],"1px","1px","1px","1px","mouseover",q,"z321"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonAudioMuted",null,Z.skinPath,t[75],t[76],t[77],"1px","1px","1px","1px","mouseover",q,"z322"),k.appendChild(b.elmt);if(Z.imageFiltersVisible){b=new Z.Utils.Graphic("imageFilterDivider",Z.skinPath,t[78],"1px","1px","1px","1px");k.appendChild(b.elmt);b=new Z.Utils.Button("buttonImageFilterPanelHide",null,Z.skinPath,t[79],t[80],t[81],"1px","1px","1px","1px","mouseover",q,"z350");
k.appendChild(b.elmt);b=new Z.Utils.Button("buttonImageFilterPanelShow",null,Z.skinPath,t[82],t[83],t[84],"1px","1px","1px","1px","mouseover",q,"z351");k.appendChild(b.elmt);b=Z.Utils.createContainerElement("div","buttonContainerImageFilter","none","absolute","visible","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(b);Z.Utils.addEventListener(b,"mouseover",L.backgroundEventsHandler);d=parseFloat(Z.Utils.getResource("z82"));n=Z.Utils.getResource("z83");
f=Z.Utils.getResource("z83NOALPHA");n=Z.Utils.createContainerElement("div","imageFilterPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",n,"0px","0px","normal",null,!0);Z.Utils.setOpacity(n,d,f);b.appendChild(n);d=Z.Utils.getResource("z425").split(",");f=Z.Utils.getResource("z426").split(",");n=0;for(I=d.length;n<I;n++)v[v.length]={text:d[n],value:f[n]};d=new Z.Utils.createSelectElement("imageFilterList","",v,1,1,1,null,!0,r,"change");b.appendChild(d);d=new Z.Utils.Button("buttonImageFilterMinus",
null,Z.skinPath,t[85],t[86],t[87],"1px","1px","1px","1px","mouseover",q,"z349");b.appendChild(d.elmt);d=new Z.Utils.Button("buttonImageFilterPlus",null,Z.skinPath,t[88],t[89],t[90],"1px","1px","1px","1px","mouseover",q,"z352");b.appendChild(d.elmt);d=new Z.Utils.Button("buttonImageFilterApply",null,Z.skinPath,t[91],t[92],t[93],"1px","1px","1px","1px","mouseover",q,"z346");b.appendChild(d.elmt);d=new Z.Utils.Graphic("imageFilterStateDivider",Z.skinPath,t[94],"1px","1px","1px","1px");b.appendChild(d.elmt);
d=new Z.Utils.Button("buttonImageFilterClear",null,Z.skinPath,t[95],t[96],t[97],"1px","1px","1px","1px","mouseover",q,"z347");b.appendChild(d.elmt);d=new Z.Utils.Button("buttonImageFiltersClearAll",null,Z.skinPath,t[98],t[99],t[100],"1px","1px","1px","1px","mouseover",q,"z347ALL");b.appendChild(d.elmt)}Z.imageSet&&(b=new Z.Utils.Graphic("imageSetDivider",Z.skinPath,t[59],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonImageSetPrior",null,Z.skinPath,t[60],t[61],t[62],"1px",
"1px","1px","1px","mouseover",q,"TIP_IMAGESETPRIOR"),k.appendChild(b.elmt),Z.sliderImageSetVisible&&(b=new Z.Utils.Graphic("trackSliderImageSet",Z.skinPath,t[15],"1px","1px","0px","0px","z385"),k.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",q),Z.Utils.addEventListener(b.elmt,"touchstart",q),Z.Utils.addEventListener(b.elmt,"mouseover",q),b=new Z.Utils.Button("buttonSliderImageSet",null,Z.skinPath,t[17],t[18],t[19],"1px","1px","1px","1px","mouseover",q,"TIP_IMAGESETSLIDER"),k.appendChild(b.elmt)),
b=new Z.Utils.Button("buttonImageSetNext",null,Z.skinPath,t[63],t[64],t[65],"1px","1px","1px","1px","mouseover",q,"TIP_IMAGESETNEXT"),k.appendChild(b.elmt));if(1==Z.helpVisible||3==Z.helpVisible)b=new Z.Utils.Button("buttonHelp",null,Z.skinPath,t[43],t[44],t[45],"1px","1px","1px","1px","mouseover",q,"z342"),k.appendChild(b.elmt);Z.progressVisible&&(b=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px",
"0px","normal",null,!0),d=wa[16],k.appendChild(b),k=document.createTextNode(Z.Utils.getResource("z183")),b.appendChild(Z.Utils.createCenteredElement(k,"progressTextBoxCenteredDiv")),null===K&&(K=Z.Utils.getResource("z183COLOR")),Z.Utils.setTextNodeStyle(k,K,"verdana",d+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(k));Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.toolbarW=wa[0];Z.toolbarCurrentW=-1==Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=
La=wa[1];L.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-La:0);a&&a.getStatus("initialized")&&(1==Z.toolbarVisible&&(a.setSizeAndPosition(Z.viewerW,Z.viewerH-Z.toolbarH,0,0),a.validateXYZDefaults(!0),a.setView(Z.initialX,Z.initialY,Z.initialZ)),k=a.getZoom(),l(k),a.setDrawingColor("buttonColor0"+ja,!0));c(1==Z.toolbarVisible||2==Z.toolbarVisible||4==Z.toolbarVisible||7==Z.toolbarVisible);Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);
ma||(ma=!0,Z.Utils.validateCallback("toolbarInitialized"),Z.Viewer.validateViewerReady("toolbarInitialized"))}else Z.Utils.showMessage(Z.Utils.getResource("z278"))};this.setSizeAndPosition=function(b,c,d,f){"undefined"===typeof b||null===b?b=0<Z.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=b;if("undefined"===typeof c||null===c)c=0<Z.toolbarVisible?La:0;if("undefined"===typeof d||null===d)d=0;if("undefined"===typeof f||null===f)f=1==Z.toolbarPosition?Z.viewerH-La:0;Y=Z.ToolbarDisplay.style;
Y.width=b+"px";Y.height=c+"px";Y.left=d+"px";Y.top=f+"px";var k=b,l=c,v=wa[2],r=wa[3],w=wa[4],n=wa[5],q=wa[6],t=wa[7],I=wa[8],L=wa[9],B=wa[10],C=wa[11],G=wa[12],E=wa[13],U=wa[14],Za=wa[15],F=0,Na=(l-r)/2+1,M=(l-n)/2,K=(l-t)/2,ma=1.3*K,P=K+4,Q=K+2,ja=1==Z.logoVisible?0:I/2,W=1==Z.logoVisible?0:I/2,da=I-(q-w),T=2,Ka=0;Z.panButtonsVisible&&(T+=4,Ka+=1);Z.resetVisible&&(T+=1);if(Z.fullScreenVisible||Z.fullPageVisible)T+=1,Ka+=1;Z.helpVisible&&(T+=1,Z.fullScreenVisible||Z.fullPageVisible||(Ka+=1));Z.measureVisible&&
(Z.fullScreenVisible||Z.fullPageVisible||(Ka+=1),T+=1);Z.rotationVisible&&(T+=2,Ka+=1);if(Z.tour||Z.slideshow)T+=3,Ka+=1,Z.audioContent&&(T+=1);Z.imageFiltersVisible&&(T+=1,Ka+=1);var ra=T*I+Ka*da;Z.sliderZoomVisible&&(ra+=E);if(Z.imageSet&&Z.sliderImageSetVisible){var Ya=E,Lb=C,Gb=G,ra=ra+Ya;eb=!1}O=Fa=X=la=!1;var zb=(1==Z.logoVisible?v+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&0!=Z.minimizeVisible?I:0),yc=1==Z.panButtonsVisible?4*I+da:0,de=1==Z.resetVisible?I:0,Jd=zb+20+ra+20+U;Jd>k&&(O=!0,
Jd-E>k&&(Fa=!0,Jd-E-U>k&&(X=!0,Jd-E-U-zb>k&&(ub=!0,Jd-E-U-zb-de>k&&(la=!0,ra-=yc),ra-=de),zb=0),U=0),ra-=E);var $g=(k-ra)/2-20+3,Id=document.getElementById("toolbarBackground");Id&&(Id.style.width=k+"px",Id.style.height=l+"px",Id.firstChild.style.width=k+"px",Id.firstChild.style.height=l+"px");var cd=document.getElementById("buttonContainer");cd&&(cd.style.width=ra+40+"px",cd.style.height=l+"px",cd.style.left=$g+"px");var Md=document.getElementById("buttonBackground");Md&&(Md.style.width=k+"px",Z.Utils.graphicSize(Md,
parseFloat(cd.style.width),parseFloat(cd.style.height)),Md.style.left="0px");var vd=document.getElementById("toolbarLogo");if(vd){var lb=vd.style;if(lb)if(X)lb.display="none";else{lb.display="inline-block";Z.Utils.graphicSize(vd,v,r);lb.left=F+"px";lb.top=Na+"px";var F=F+(v+2),Ke=document.getElementById("logoDivider");if(Ke){Z.Utils.graphicSize(Ke,w,n);var sf=Ke.style;sf.left=F+"px";sf.top=M+"px"}}}if(0!=Z.toolbarVisible&&1!=Z.toolbarVisible){var gd=document.getElementById("buttonMinimize"),Nd=document.getElementById("buttonExpand");
if(gd&&Nd){var Sb=gd.style,Od=Nd.style;Sb&&Od&&(X?(Sb.display="none",Od.display="none"):(Sb.display="inline-block",Od.display="inline-block",Z.Utils.buttonSize(gd,q,t),Z.Utils.buttonSize(Nd,q,t),Sb.left=F+ja+"px",Sb.top=ma+"px",Od.left=F+W+"px",Od.top=ma+"px"))}}var F=20,Le=document.getElementById("buttonZoomOut");if(Le){Z.Utils.buttonSize(Le,q,t);var xf=Le.style;xf.left=F+"px";xf.top=K+"px";F+=I}trsZ=document.getElementById("trackSliderZoom");btsZ=document.getElementById("buttonSliderZoom");trsZ&&
btsZ&&(trszS=trsZ.style,btszS=btsZ.style,trszS&&btszS&&(O?(trszS.display="none",btszS.display="none"):(trszS.display="inline-block",btszS.display="inline-block",Z.Utils.graphicSize(trsZ,C,G),trszS.left=F-2+"px",trszS.top=P+"px",Z.Utils.buttonSize(btsZ,L,B),btszS.left=parseFloat(trszS.left)+"px",btszS.top=Q+"px",F+=E)));var Hb=document.getElementById("buttonZoomIn");if(Hb){Z.Utils.buttonSize(Hb,q,t);var yf=Hb.style;yf.left=F+"px";yf.top=K+"px";F+=I+1}if(!la){var of=document.getElementById("panDivider");
if(of){Z.Utils.graphicSize(of,w,n);var kg=of.style;kg.left=F+"px";kg.top=M+"px";var F=F+da,pf=document.getElementById("buttonPanLeft");if(pf){Z.Utils.buttonSize(pf,q,t);var lg=pf.style;lg.left=F+"px";lg.top=K+"px";F+=I}var nf=document.getElementById("buttonPanUp");if(nf){Z.Utils.buttonSize(nf,q,t);var jg=nf.style;jg.left=F+"px";jg.top=K+"px";F+=I}var Ge=document.getElementById("buttonPanDown");if(Ge){Z.Utils.buttonSize(Ge,q,t);var Je=Ge.style;Je.left=F+"px";Je.top=K+"px";F+=I}var Me=document.getElementById("buttonPanRight");
if(Me){Z.Utils.buttonSize(Me,q,t);var Tc=Me.style;Tc.left=F+"px";Tc.top=K+"px";F+=I}}}if(!ub){var zc=document.getElementById("buttonReset");if(zc){Z.Utils.buttonSize(zc,q,t);var Af=zc.style;Af.left=F+"px";Af.top=K+"px";F+=I+1}}var Pd=document.getElementById("fullViewDivider");if(Pd){Z.Utils.graphicSize(Pd,w,n);var Cf=Pd.style;Cf.left=F+"px";Cf.top=M+"px";F+=da}var ee=document.getElementById("buttonFullViewExit");if(ee){Z.Utils.buttonSize(ee,q,t);var Oe=ee.style;Oe.left=F+"px";Oe.top=K+"px";Oe.display=
Z.fullView?"inline-block":"none"}var fe=document.getElementById("buttonFullView");if(fe){Z.Utils.buttonSize(fe,q,t);var Pe=fe.style;Pe.left=F+"px";Pe.top=K+"px";F+=I+1;Pe.display=Z.fullView?"none":"inline-block"}var wf=document.getElementById("measureDivider");if(wf){Z.Utils.graphicSize(wf,w,n);var mg=wf.style;mg.left=F+"px";mg.top=M+"px";F+=da}if(null===Z.editMode){var tf=document.getElementById("buttonMeasureExit");if(tf){Z.Utils.buttonSize(tf,q,t);var uf=tf.style;uf.left=F+"px";uf.top=K+"px";uf.display=
"measure"==Z.labelMode?"inline-block":"none"}}if(gd=document.getElementById("buttonMeasure"))Z.Utils.buttonSize(gd,q,t),Sb=gd.style,Sb.left=F+"px",Sb.top=K+"px",F+=I+1,Sb.display="measure"==Z.labelMode?"none":"inline-block";var Df=document.getElementById("rotateDivider");if(Df){Z.Utils.graphicSize(Df,w,n);var Sc=Df.style;Sc.left=F+"px";Sc.top=M+"px";var F=F+da,hc=document.getElementById("buttonRotateCounterwise");if(hc){Z.Utils.buttonSize(hc,q,t);var Ef=hc.style;Ef.left=F+"px";Ef.top=K+"px";F+=I}var Qd=
document.getElementById("buttonRotateClockwise");if(Qd){Z.Utils.buttonSize(Qd,q,t);var Rc=Qd.style;Rc.left=F+"px";Rc.top=K+"px";F+=I+1}}if(Z.tour){var Qe=document.getElementById("tourDivider");if(Qe){Z.Utils.graphicSize(Qe,w,n);var Ff=Qe.style;Ff.left=F+"px";Ff.top=M+"px";var F=F+da,fd=document.getElementById("buttonTourPrior");if(fd){Z.Utils.buttonSize(fd,q,t);var Gf=fd.style;Gf.left=F+"px";Gf.top=K+"px";F+=I+1}var Re=document.getElementById("buttonTourNext");if(Re){Z.Utils.buttonSize(Re,q,t);var Td=
Re.style;Td.left=F+"px";Td.top=K+"px";F+=I+1}var ic=document.getElementById("buttonTourStop");if(ic){Z.Utils.buttonSize(ic,q,t);var Ab=ic.style;Ab.left=F+"px";Ab.top=K+"px";Ab.display=Z.tourPlaying?"inline-block":"none"}var ge=document.getElementById("buttonTourStart");if(ge){Z.Utils.buttonSize(ge,q,t);var Ac=ge.style;Ac.left=F+"px";Ac.top=K+"px";F+=I+1;Ac.display=Z.tourPlaying?"none":"inline-block"}}}else if(Z.slideshow){var hd=document.getElementById("slideshowDivider");if(hd){Z.Utils.graphicSize(hd,
w,n);var mb=hd.style;mb.left=F+"px";mb.top=M+"px";var F=F+da,nb=document.getElementById("buttonSlideshowPrior");if(nb){Z.Utils.buttonSize(nb,q,t);var he=nb.style;he.left=F+"px";he.top=K+"px";F+=I+1}var Hf=document.getElementById("buttonSlideshowNext");if(Hf){Z.Utils.buttonSize(Hf,q,t);var qg=Hf.style;qg.left=F+"px";qg.top=K+"px";F+=I+1}var Se=document.getElementById("buttonSlideshowStop");if(Se){Z.Utils.buttonSize(Se,q,t);var Ud=Se.style;Ud.left=F+"px";Ud.top=K+"px";Ud.display=Z.slideshowPlaying?
"inline-block":"none"}var ie=document.getElementById("buttonSlideshowStart");if(ie){Z.Utils.buttonSize(ie,q,t);var Xd=ie.style;Xd.left=F+"px";Xd.top=K+"px";F+=I+1;Xd.display=Z.slideshowPlaying?"none":"inline-block"}}}else if(null!==Z.imageSetPath){var ke=document.getElementById("imageSetDivider");if(ke){Z.Utils.graphicSize(ke,w,n);var If=ke.style;If.left=F+"px";If.top=M+"px";var F=F+da,Ve=document.getElementById("buttonImageSetPrior");if(Ve){Z.Utils.buttonSize(Ve,q,t);var Ue=Ve.style;Ue.left=F+"px";
Ue.top=K+"px";F+=I+1}trsiS=document.getElementById("trackSliderImageSet");btsiS=document.getElementById("buttonSliderImageSet");trsiS&&btsiS&&(trsisS=trsiS.style,btsisS=btsiS.style,trsisS&&btsisS&&(eb?(trsisS.display="none",btsisS.display="none"):(trsisS.display="inline-block",btsisS.display="inline-block",Z.Utils.graphicSize(trsiS,Lb,Gb),trsisS.left=F-2+"px",trsisS.top=P+"px",Z.Utils.buttonSize(btsiS,L,B),btsisS.left=parseFloat(trsisS.left)+"px",btsisS.top=Q+"px",F+=Ya)));var We=document.getElementById("buttonImageSetNext");
if(We){Z.Utils.buttonSize(We,q,t);var rg=We.style;rg.left=F+"px";rg.top=K+"px";F+=I+1}}}if(Z.tour||Z.slideshow){var rd=document.getElementById("buttonAudioMuted");if(rd){Z.Utils.buttonSize(rd,q,t);var Xe=rd.style;Xe.left=F+"px";Xe.top=K+"px";Xe.display="none"}var Ce=document.getElementById("buttonAudioOn");if(Ce){Z.Utils.buttonSize(Ce,q,t);var Ye=Ce.style;Ye.left=F+"px";Ye.top=K+"px";F+=I+1;Ye.display="none"}a.initializeAudioMuteButtons()}if(Z.imageFiltersVisible){var xa=document.getElementById("imageFilterDivider");
if(xa){Z.Utils.graphicSize(xa,w,n);var ug=xa.style;ug.left=F+"px";ug.top=M+"px";var F=F+da,kd=document.getElementById("buttonImageFilterPanelHide");if(kd){Z.Utils.buttonSize(kd,q,t);var Mf=kd.style;Mf.left=F+"px";Mf.top=K+"px";Mf.display=jb?"inline-block":"none"}var Of=document.getElementById("buttonImageFilterPanelShow");if(Of){Z.Utils.buttonSize(Of,q,t);var Pf=Of.style;Pf.left=F+"px";Pf.top=K+"px";F+=I+1;Pf.display=jb?"none":"inline-block"}var ob=15,Rb=wa[6],Jb=wa[7],bb=wa[8],Ea=wa[4],Te=wa[5],
je=bb-(Rb-Ea),Ma=(Jb-Te)/2,$b=parseInt(Z.Utils.getResource("z137"),10),m=Oa=Math.round($b+4*bb+2*je+30-4),Dc=Math.round(Jb+24),Wd=document.getElementById("buttonImageFilterPanelShow"),pe=document.getElementById("buttonContainerImageFilter"),Oc=document.getElementById("imageFilterList");if(pe&&Wd&&Oc){var tb=parseFloat(Wd.style.left),ag=parseFloat(Wd.parentNode.style.left),ae=pe.style;ae.width=m+"px";ae.height=Dc+"px";ae.left=tb+ag+bb-m+"px";ae.top=-(Dc+5)+"px";var yd=document.getElementById("imageFilterPanelBackground");
if(yd){var fb=yd.style;fb.width=m+"px";fb.height=Dc+"px"}var Aa=Oc.style;Aa.width=$b+"px";Aa.left="15px";Aa.top="10px";var ob=ob+($b+je+2),kc=document.getElementById("buttonImageFilterMinus");if(kc){Z.Utils.buttonSize(kc,Rb,Jb);var vg=kc.style;vg.left=ob+"px";vg.top="12px";ob+=bb}var Lc=document.getElementById("buttonImageFilterPlus");if(Lc){Z.Utils.buttonSize(Lc,Rb,Jb);var ne=Lc.style;ne.left=ob+"px";ne.top="12px";ob+=bb}var xc=document.getElementById("buttonImageFilterApply");if(xc){Z.Utils.buttonSize(xc,
Rb,Jb);var ta=xc.style;ne?ta.left=parseFloat(ne.left)+"px":(ta.left=ob+"px",ob+=bb);ta.top="12px";xc.style.display="none"}var bc=document.getElementById("imageFilterStateDivider");if(bc){Z.Utils.graphicSize(bc,Ea,Te);var $a=bc.style;$a.left=ob+"px";$a.top=12+Ma+"px";ob+=je}var sb=document.getElementById("buttonImageFilterClear");if(sb){Z.Utils.buttonSize(sb,Rb,Jb);var za=sb.style;za.left=ob+"px";za.top="12px";ob+=bb+1}var R=document.getElementById("buttonImageFiltersClearAll");if(R){Z.Utils.buttonSize(R,
Rb,Jb);var ve=R.style;ve.left=ob+"px";ve.top="12px"}}}}if(1==Z.helpVisible||3==Z.helpVisible){var aa=document.getElementById("buttonHelp");if(aa){Z.Utils.buttonSize(aa,q,t);var ca=aa.style;ca.left=F+"px";ca.top=K+"px"}}var Kc=document.getElementById("progressTextBox");if(Kc){var dc=Kc.style;dc&&(Fa?dc.display="none":(dc.display="inline-block",dc.width=U+"px",dc.height=Za+"px",dc.left=k-parseFloat(cd.style.left)-parseFloat(dc.width)+"px",dc.top=(l-parseFloat(dc.height))/2+"px"))}};this.syncSliderToViewportZoom=
function(a){l(a)};this.syncSliderToViewportImageSet=function(a){C(a)};this.z457=function(a){q(a)};this.backgroundEventsHandler=function(a){a=Z.Utils.event(a);if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(T||Ya||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}};this.positionButtonBorder=function(a){var b=Z.annotationFileShared?"0":ja;if("buttonColor"==a.substr(0,11))var c=document.getElementById("buttonBorderSm"+b);else if(a=="buttonViewMode"+
b||a=="buttonEditModeFreehand"+b||a=="buttonEditModeText"+b||a=="buttonEditModeIcon"+b||a=="buttonEditModeRectangle"+b||a=="buttonEditModePolygon"+b||a=="buttonEditModeMeasure"+b)c=document.getElementById("buttonBorderLg"+b);var d=document.getElementById(a);c&&d&&(a=="buttonClearAll"+b&&(d=document.getElementById("buttonViewMode"+tbViewportID)),a=c.style,d=d.style,a.left=parseFloat(d.left)-2+"px",a.top=parseFloat(d.top)-2+"px")};this.imageFilterPanelShow=function(){var a=document.getElementById("imageFilterPanelBackground"),
b=document.getElementById("buttonContainerImageFilter"),c=document.getElementById("buttonImageFilterPanelShow"),d=document.getElementById("buttonImageFilterPanelHide");a&&b&&(a.style.width=Oa+"px",b.style.display="inline-block",c.style.display="none",d.style.display="inline-block");jb=!0};this.imageFilterPanelHide=function(){var a=document.getElementById("imageFilterPanelBackground"),b=document.getElementById("buttonContainerImageFilter"),c=document.getElementById("buttonImageFilterPanelShow"),d=
document.getElementById("buttonImageFilterPanelHide");a&&b&&(a.style.width="0px",b.style.display="none",c.style.display="inline-block",d.style.display="none");jb=!1};this.addCounterToImageFilterList=function(a,b){var c=document.getElementById("imageFilterList"),d=Z.Utils.arrayIndexOfObjectValue(v,"value",a);if(-1!=d){var f=c.options[d].text,f=isNaN(f.substring(f.length-1,f.length))?":  ":",";c.options[d].text+=f+(b+1).toString()}};this.removeLastCounterFromImageFilterList=function(a){for(var b=document.getElementById("imageFilterList"),
c,d=a.toString(),f=0,k=b.options.length;f<k;f++)a=b.options[f].text.length,b.options[f].text.substring(a-1)==d&&(c=b.options[f].text.substring(a-2,a-1),c=","==c?2:3,b.options[f].text=b.options[f].text.substring(0,a-c))};this.removeAllCountersFromImageFilterList=function(){for(var a=document.getElementById("imageFilterList"),b=a.options.length=0,c=v.length;b<c;b++)a.options[a.options.length]=new Option(v[b].text,v[b].value)}};
Z.ZoomifyNavigator=function(a){function b(c,d){var f="undefined"!==typeof d&&null!==d?!1:!0,h=f?a:d;"unconverted"!=Z.tileSource?("ZoomifyImageFile"==Z.tileSource?Oa=h.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource?Oa=Z.Utils.cacheProofPath(h.getImagePath()+"/TileGroup0/0-0-0."+Z.tileType):"ZoomifyPFFFile"==Z.tileSource?Oa=h.formatTilePath(0,0,0):"ImageServer"==Z.tileSource&&(Oa=h.formatTilePath(0,0,0)),la=null,la=new Image,la.onload=c,la.onerror=W,"offsetLoading"!=Oa?(f||(ub[ub.length]=
{id:d.getViewportID().toString(),image:la}),"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(Oa,Z.Utils.createCallback(null,c),"navigator",null):la.src=Oa):window.setTimeout(function(){b(c)},100)):"undefined"!==typeof unconvertedImage&&null!==unconvertedImage?(la=h.createUnconvertedImageThumbnail(unconvertedImage),f&&"function"===typeof c?c():ub[ub.length]="undefined"!==typeof d?{id:d.getViewportID().toString(),image:la}:{id:null,image:null}):window.setTimeout(function(){b(c,d)},100)}
function c(a){for(var c=0,d=Z.imageSetLength;c<d;c++)b(null,Z["Viewport"+c.toString()]);a()}function d(a,b){"ZoomifyImageFile"==Z.tileSource&&(la=b);var c=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",zb+"px",Ya+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);c.appendChild(la);c.removeChild(la);c=null;c=la.height;if(0!=la.width&&0!=c){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block",
"absolute","hidden",zb+"px",Ya+"px",Gb+"px",yc+"px","solid","1px","transparent none","0px","0px","normal",null,!0);da=Z.NavigatorDisplay;T=da.style;Z.slideshow&&Z.Utils.setOpacity(da,0);c=parseInt(Z.Utils.getResource("z230"),10);T.zIndex=(c+2).toString();var c=parseFloat(Z.Utils.getResource("z82")),f=Z.Utils.getResource("z83"),k=Z.Utils.getResource("z83NOALPHA"),f=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",zb+"px",Ya+"px","0px","0px","none","0px",
f,"0px","0px","normal",null,!0);Z.Utils.setOpacity(f,c,k);Z.NavigatorDisplay.appendChild(f);ra=f;Na=ra.style;c=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",zb+"px",Ya+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);c.appendChild(la);la.alt=Z.Utils.getResource("z439");Z.NavigatorDisplay.appendChild(c);U=c;K=U.style;O=la;c=O.width;k=O.height;f=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block",
"absolute","hidden",zb+1+"px",Ya+1+"px",Gb+"px",yc+"px","solid","1px","transparent none","0px","0px","normal",null,!0);f.style.borderColor=Z.Utils.stringValidateColorValue(Z.navigatorRectangleColor);Z.NavigatorDisplay.appendChild(f);Fa=f;X=Fa.style;Z.ViewerDisplay.appendChild(Z.NavigatorDisplay);n(zb,Ya,Gb,yc,eb,c,k);B(1==Z.navigatorVisible||2==Z.navigatorVisible);Z.Utils.addEventListener(da,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(da,"mousedown",w);Z.Utils.addEventListener(da,
"touchstart",L);Z.Utils.addEventListener(da,"touchmove",ma);Z.Utils.addEventListener(da,"touchend",ja);Z.Utils.addEventListener(da,"touchcancel",La);Lb||(Lb=!0,Z.Utils.validateCallback("navigatorInitialized"),Z.Viewer.validateViewerReady("navigatorInitialized"));Q()}else window.setTimeout(function(){d(a,b)},100)}function f(){if(ub&&0<ub.length&&null!==ub[0]&&0<ub[0].image.width){var a=Z.Utils.arrayIndexOfObjectValue(ub,"id","0");if(-1!=a){a=ub[a].image;la=a.cloneNode(!1);a=null;if("undefined"===typeof b)var b=
null;d(b,la)}else window.setTimeout(function(){f()},100)}else window.setTimeout(function(){f()},100)}function l(a){if(Z.NavigatorDisplay)if(Z.slideshow&&Z.Utils.setOpacity(Z.NavigatorDisplay,0),"ZoomifyImageFile"==Z.tileSource&&(la=a),U&&la&&0<la.width&&0<la.height){a=la.width;var b=la.height;U.appendChild(la);O=Z.NavigatorDisplay.childNodes[1].firstChild;n(zb,Ya,Gb,yc,eb,a,b);a=Z.ToolbarDisplay&&"inline-block"==Z.ToolbarDisplay.style.display&&!Z.ToolbarMinimized||"undefined"!==typeof slideList&&
null!==slideList&&"visible"==slideList.style.visibility;B((1==Z.navigatorVisible||2==Z.navigatorVisible)&&a);a=parseInt(Z.Utils.getResource("z230"),10);Z.NavigatorDisplay.style.zIndex=(a+2).toString();Q()}else window.setTimeout(function(){l()},100)}function k(){Lb&&(wa&&(window.clearInterval(wa),wa=null),da&&T&&ra&&Na&&U&&K&&O&&Fa&&X||(da=Z.NavigatorDisplay,T=da.style,ra=Z.NavigatorDisplay.firstChild,Na=ra.style,U=Z.NavigatorDisplay.childNodes[1],K=U.style,O=Z.NavigatorDisplay.childNodes[1].firstChild,
Fa=Z.NavigatorDisplay.childNodes[2],X=Fa.style))}function n(a,b,c,d,f,k,l){f||(f=eb);if("undefined"===typeof a||null===a)a=Z.navigatorW;if("undefined"===typeof b||null===b)b=Z.navigatorH;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof d||null===d)d=0;da||(da=Z.NavigatorDisplay);T||(T=da.style);O=da.childNodes[1].firstChild;0==O.width&&"undefined"!==k&&null!==k&&(O.width=k);0==O.height&&"undefined"!==l&&null!==l&&(O.height=l);da&&T&&O&&(f&&(a=1,a=0==f?Z.viewerW/Z.viewerH:O.width/O.height,
a*=b),T.width=a+"px",T.height=b+"px",T.left=c+"px",T.top=d+"px",C(a,b))}function C(a,b){O||(O=Z.NavigatorDisplay.childNodes[1].firstChild);O&&0!=O.width&&0!=O.height?(Na||(Na=Z.NavigatorDisplay.firstChild.style),K||(K=Z.NavigatorDisplay.childNodes[1].style),Na&&K&&(Na.width=a+"px",Na.height=b+"px",E(a,b),K.width=O.width+"px",K.height=O.height+"px",K.left=(a-O.width)/2+"px",K.top=(b-O.height)/2+"px",Q())):window.setTimeout(function(){C(a,b)},100)}function E(a,b){O||(O=Z.NavigatorDisplay.childNodes[1].firstChild);
if(O){var c=O.width,d=O.height,f=c/d,k=a/c,l=b/d;k<=l?(c=a,d=a/f,navImageT=(b-a/c*d)/2):l<k&&(d=b,c=b*f,navImageL=(a-b/d*c)/2);O.width=c;O.height=d}}function B(a){T||(T=Z.NavigatorDisplay.style);T&&(T.display=a?"inline-block":"none")}function Q(){if(a&&a.getStatus("initialized")){M();G();var b=a.calculateCurrentCenterCoordinates();q(b)}}function G(){if(O&&X){var b=O.width/Z.imageW,c=O.height/Z.imageH,d=a.getZoom(),c=Z.viewerH*c/d;X.width=Z.viewerW*b/d+"px";X.height=c+"px"}}function M(){K||(K=Z.NavigatorDisplay.childNodes[1].style);
if(K){var b=a.getRotation();Z.Utils.rotateElement(K,b,!0)}}function q(a){if(O&&X&&K){if("undefined"===typeof a||null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(O.width),d=parseFloat(O.height),b=Z.Utils.rotatePoint(c/Z.imageW*a.x-c/2,d/Z.imageH*a.y-d/2,-b);a=b.x-parseFloat(X.width)/2;c=b.y-parseFloat(X.height)/2;b=parseFloat(T.width)/2;c=parseFloat(T.height)/2+c-1;X.left=b+a+"px";X.top=c+"px"}}
function P(){if(O&&X&&K){if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(X.left),d=parseFloat(X.top),f=parseFloat(T.width)/2,k=parseFloat(T.height)/2,d=d-k,c=c-f+parseFloat(X.width)/2,f=d+parseFloat(X.height)/2,b=Z.Utils.rotatePoint(c,f,b),c=parseFloat(O.width),f=parseFloat(O.height),d=c/Z.imageW,b=new Z.Utils.Point((b.x+c/2)/d,(b.y+f/2)/d);a.syncViewportToNavigator(b)}}function W(){Z.Utils.showMessage(Z.Utils.getResource("z271"))}function w(b){Z.interactivityOff||
(a.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&a.clearMask(),da&&Fa&&X&&(b=Z.Utils.event(b),Fa.mouseXPrior=b.clientX,Fa.mouseYPrior=b.clientY,dragPtStart=new Z.Utils.Point(b.clientX,b.clientY),Z.Utils.addEventListener(da,"mousemove",I),Z.Utils.addEventListener(da,"mouseup",r),Z.Utils.addEventListener(document,"mouseup",r)))}function I(a){if(!Z.interactivityOff&&Fa&&X){var b=parseFloat(X.left),c=parseFloat(X.top);X.left=b+(a.clientX-Fa.mouseXPrior)+"px";X.top=c+(a.clientY-
Fa.mouseYPrior)+"px";Fa.mouseXPrior=a.clientX;Fa.mouseYPrior=a.clientY;P();return!1}}function r(b){if(!Z.interactivityOff&&da&&Fa&&X){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(da,"mousemove",I);Z.Utils.removeEventListener(da,"mouseup",r);Z.Utils.removeEventListener(document,"mouseup",r);b=Z.Utils.event(b);var c=new Z.Utils.Point(b.clientX,b.clientY);4>Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),
X.left=b.clientX-c.x-parseFloat(X.width)/2+"px",X.top=b.clientY-c.y-parseFloat(X.height)/2+"px");P();a.updateView()}}function L(a){!Z.interactivityOff&&(a.preventDefault(),da&&Fa&&X&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,a.y),Fa.mouseXPrior=a.x,Fa.mouseYPrior=a.y)}function ma(a){if(!Z.interactivityOff&&(a.preventDefault(),Z.mousePan)){if(Fa&&X&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(X.left),
c=parseFloat(X.top);X.left=b+(a.x-Fa.mouseXPrior)+"px";X.top=c+(a.y-Fa.mouseYPrior)+"px";Fa.mouseXPrior=a.x;Fa.mouseYPrior=a.y;P()}return!1}}function ja(b){if(!Z.interactivityOff&&da&&Fa&&X){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),X.left=b.x-c.x-parseFloat(X.width)/2+"px",X.top=b.y-c.y-parseFloat(X.height)/
2+"px")}P();a.updateView()}}function La(b){if(!Z.interactivityOff&&da&&Fa&&X){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),X.left=b.x-c.x-parseFloat(X.width)/2+"px",X.top=b.y-c.y-parseFloat(X.height)/2+"px")}P();a.updateView()}}var Y=this,Lb=!1,t=a.getViewportID().toString(),wa,da,T,ra,Na,U,K,O,Fa,X,la,
ub=[],zb=Z.navigatorW,Ya=Z.navigatorH,Gb=Z.navigatorL,yc=Z.navigatorT,eb=Z.navigatorFit,Oa;"multiple"!=Z.imagePath?b(d):c(f);this.z556=function(a,b){d(a,b)};this.setImage=function(a){U&&la&&0<U.childNodes.length&&(U.innerHTML="");"undefined"===typeof ub||null===ub||0==ub.length?b(l):(a=Z.Utils.arrayIndexOfObjectValue(ub,"id",t),-1!=a&&(la=ub[a].image,l(la)))};this.getInitialized=function(){return Lb};this.setVisibility=function(a){B(a)};this.syncToViewport=function(){Q()};this.z657=function(){G()};
this.z659=function(){M()};this.z658=function(a){q(a)};this.setViewport=function(b){a=b;t=a.getViewportID().toString();Y.setImage(a.getImagePath())};this.z682=function(){Lb?k():wa=window.setInterval(k,300)};this.setSizeAndPosition=function(a,b,c,d,f,k,l){n(a,b,c,d,f,k,l)}};
Z.ZoomifyRuler=function(a){function b(a,b,c,d){if("undefined"===typeof a||null===a)a=Z.rulerW;if("undefined"===typeof b||null!==b)b=Z.rulerH;if("undefined"===typeof c||null!==c)c=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;if("undefined"===typeof d||null!==d)d=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;n.width=a+"px";n.height=b+"px";n.left=c+"px";n.top=d+"px"}function c(a){n||(n=Z.RulerDisplay.style);n&&(n.display=a?"inline-block":"none")}function d(b){if(a&&a.getStatus("initialized")){var c=
a.getZoom(),d="pixels"==Z.units?0:4;if(r){r.visibility="visible";var f;f=0!=ja?ja*c:100*c;1>f?Math.round(100*f):Math.round(f)}f=0;for(var k=da.length;f<k;f++)da[f].symbol==Z.units&&(T=f);wa=null!==t&&0!=t?t:null!==Lb&&0!=Lb?Z.imageW/Lb:1;c=Z.Utils.roundToFixed(ra/wa/c,d);q.firstChild.nodeValue=c.toString();w.visibility="visible";W.firstChild.nodeValue="um"!=da[T].symbol?da[T].symbol:"\u03bcm";if(r)if(c=Math.round(100*a.getZoom()),c=Math.round(c),f="%",d=Math.round(100*a.getZoom())==Math.round(1E3*
a.getZoom())/1E3*100?"":"~",1==Z.rulerListType&&0!=ja&&(c=100*a.getZoom()*ja/100,c=Math.round(c),f="x"),d=c.toString()+f+d,b){for(b=insertIndex=0;c>Y[b].value;)b++,insertIndex=b;if(c==Y[insertIndex].value)Z.Utils.updateSelectElement(I,Y);else{var l=Z.Utils.arrayClone("magnifications",Y,l),l=Z.Utils.arraySplice(l,insertIndex,0,{text:d,value:c.toString()});Z.Utils.updateSelectElement(I,l)}I.selectedIndex=insertIndex}else I.options[0]=new Option(d,c.toString()),I.selectedIndex=0}}function f(b){var c=
0;if(b=Z.Utils.event(b))b=Z.Utils.target(b),c=parseInt(b.options[b.selectedIndex].value,10),isNaN(c)||a.zoomAndPanToView(a.viewX,a.viewY,(1==Z.rulerListType?100*c/ja:c)/100)}var l=!1,k,n,C,E,B,Q,G,M,q,P,W,w,I,r;Z.Utils.getResource("z442");var L=Z.Utils.getResource("z441"),ma=Z.Utils.getResource("z440"),ja=Z.sourceMagnification,La,Y,Lb=Z.unitsPerImage,t=Z.pixelsPerUnit,wa=1,da=[],T=-1,ra=1;(function(){Z.RulerDisplay=Z.Utils.createContainerElement("div","RulerDisplay","inline-block","absolute","hidden",
"1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal");k=Z.RulerDisplay;n=k.style;var t=parseFloat(Z.Utils.getResource("z82")),U=Z.Utils.getResource("z83"),K=Z.Utils.getResource("z83NOALPHA"),U=Z.Utils.createContainerElement("div","rulerBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",U,"0px","0px","normal",null,!0);Z.Utils.setOpacity(U,t,K);Z.RulerDisplay.appendChild(U);C=U;E=C.style;t=Z.Utils.getResource("z198");K=Z.Utils.createContainerElement("div",
"rulerScaleBar","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",t,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(K);B=K;Q=B.style;K=parseInt(Z.Utils.getResource("z230"),10);Q.zIndex=(K+3).toString();K=Z.Utils.createContainerElement("div","rulerScaleBarNotchL","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",t,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(K);rSBNL=K;rsbnlS=rSBNL.style;t=Z.Utils.createContainerElement("div","rulerScaleBarNotchR",
"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",t,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(t);rSBNR=t;rsbnrS=rSBNR.style;t=parseInt(Z.Utils.getResource("z194"),10);K=Z.Utils.createContainerElement("div","errorTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);U=document.createTextNode("");K.appendChild(U);Z.Utils.setTextNodeStyle(U,"black","verdana",t+"px","none","normal","normal",
"normal","normal","1em","center","none");Z.RulerDisplay.appendChild(K);G=K;M=G.style;K=Z.Utils.createContainerElement("div","scaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);U=document.createTextNode("");K.appendChild(U);Z.Utils.setTextNodeStyle(U,"black","verdana",t+"px","none","normal","normal","normal","normal","1em","right","none");Z.RulerDisplay.appendChild(K);q=K;P=q.style;K=Z.Utils.createContainerElement("div",
"unitTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);U=document.createTextNode("");K.appendChild(U);Z.Utils.setTextNodeStyle(U,"black","verdana",t+"px","none","normal","normal","normal","normal","1em","left","none");Z.RulerDisplay.appendChild(K);W=K;w=W.style;if(0!=Z.rulerListType){Y=1==Z.rulerListType&&0!=ja?[{text:"2.5x",value:2.5},{text:"5x",value:5},{text:"10x",value:10},{text:"20x",value:20},{text:"40x",value:40},
{text:"60x",value:60},{text:"100x",value:100}]:[{text:"10%",value:10},{text:"20%",value:20},{text:"30%",value:30},{text:"40%",value:40},{text:"50%",value:50},{text:"60%",value:60},{text:"70%",value:70},{text:"80%",value:80},{text:"90%",value:90},{text:"100%",value:100}];La=new Z.Utils.createSelectElement("magnificationList","",Y,1,1,1,null,!0,f,"change");Z.RulerDisplay.appendChild(La);I=La;r=I.style;var t=100*Z.minZ,K=100*Z.maxZ,U=Math.round(t),O=Math.round(K),T="%";-1==t&&(t=Math.round(100*a.calcZoomDecimalToFitDisplay()));
1==Z.rulerListType&&0!=ja&&(t=t*ja/100,U=Math.round(t),T="x");for(;Y[0].value<=U;)Y=Z.Utils.arraySplice(Y,0,1);-1==K&&(K=Math.round(100*a.calcZoomDecimalToFitDisplay()));1==Z.rulerListType&&0!=ja&&(K=K*ja/100,O=Math.round(K),T="x");for(;Y[Y.length-1].value>=O;)Y=Z.Utils.arraySplice(Y,Y.length-1,1);Y=Z.Utils.arraySplice(Y,0,0,{text:U.toString()+T+(U==t?"":"~")+L,value:U});Y[Y.length]={text:O.toString()+T+(O==K?"":"~")+ma,value:K};Z.Utils.updateSelectElement(I,Y);I.selectedIndex=0}da=[{magnitude:Math.pow(10,
24),symbol:"Ym"},{magnitude:Math.pow(10,21),symbol:"Zm"},{magnitude:Math.pow(10,18),symbol:"Em"},{magnitude:Math.pow(10,15),symbol:"Pm"},{magnitude:Math.pow(10,12),symbol:"Tm"},{magnitude:Math.pow(10,9),symbol:"Gm"},{magnitude:Math.pow(10,6),symbol:"Mm"},{magnitude:Math.pow(10,3),symbol:"km"},{magnitude:Math.pow(10,2),symbol:"hm"},{magnitude:Math.pow(10,1),symbol:"dam"},{magnitude:Math.pow(10,0),symbol:"m"},{magnitude:Math.pow(10,-1),symbol:"dm"},{magnitude:Math.pow(10,-2),symbol:"cm"},{magnitude:Math.pow(10,
-3),symbol:"mm"},{magnitude:Math.pow(10,-6),symbol:"um"},{magnitude:Math.pow(10,-9),symbol:"nm"},{magnitude:Math.pow(10,-12),symbol:"pm"},{magnitude:Math.pow(10,-15),symbol:"fm"},{magnitude:Math.pow(10,-18),symbol:"am"},{magnitude:Math.pow(10,-21),symbol:"zm"},{magnitude:Math.pow(10,-24),symbol:"ym"},{magnitude:Math.pow(10,-24),symbol:"pixels"}];t=Z.rulerW;K=Z.rulerH;U=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;O=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;ra=0!=Z.rulerListType?
t-53-16:t-10;var T=(K-1+5)/2,X=ra/2-5,la=T-10,wa="pixels"==Z.units?7:0;E&&Q&&rsbnlS&&rsbnrS&&G&&M&&q&&P&&W&&w&&(b(t,K,U,O),E.width=t+"px",E.height=K+"px",E.left="0px",E.top="0px",r&&(r.width="53px",r.left=t-53-3+"px",r.top=(K-20)/2+"px",r.visibility="visible"),Q.width=ra+"px",Q.height="1px",Q.left="5px",Q.top=T+3+"px",rsbnlS.width="1px",rsbnlS.height="6px",rsbnlS.left="5px",rsbnlS.top=T+"px",rsbnrS.width="1px",rsbnrS.height="6px",rsbnrS.left=5+ra+"px",rsbnrS.top=T+"px",M.width=ra+"px",M.height="15px",
M.left="12px",M.top=la+"px",P.width=X+"px",P.height="15px",P.left=15-wa+"px",P.top=la+"px",w.width=X+"px",w.height="15px",w.left=ra/2+15-wa+"px",w.top=la+"px");Z.ViewerDisplay.appendChild(Z.RulerDisplay);c(Z.rulerVisible);Z.Utils.addEventListener(k,"mouseover",Z.Utils.stopPropagation);l||(l=!0,Z.Utils.validateCallback("rulerInitialized"),Z.Viewer.validateViewerReady("rulerInitialized"));d(!0)})();this.getInitialized=function(){return l};this.setVisibility=function(a){c(a)};this.setSizeAndPosition=
function(a,c,d,f,k){b(a,c,d,f,k)};this.syncToViewport=function(a){d(a)}};
Z.NetConnector=function(){function a(a,c,d){var k=a.substring(0,a.indexOf("?")),l=parseFloat(a.substring(a.indexOf("?")+1,a.indexOf(",")));a=parseFloat(a.substring(a.indexOf(",")+1,a.length));l=new Z.Utils.Range(l,l+a);b(k,f,l,c,d)}function b(a,b,f,k,l,n){var q=c();if(q){var B="function"===typeof b;if(B){var C=b;b=function(){window.setTimeout(Z.Utils.createCallback(null,C,q),1)};q.onreadystatechange=function(){4==q.readyState&&(q.onreadystatechange=new Function,b())}}try{if("undefined"===typeof f||
null===f)q.open("GET",a,B),q.send(null);else if("undefined"!==typeof k&&null!==k)if("postXML"==k){l="";".json"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length)&&".xml"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(l="/"+Z.Utils.getResource("z69"));var t=Z.annotationPath+l;Z.postingXML=!0;q.open("POST",a+"?file="+t,!0);Z.Utils.defineObjectProperty(q,"file",{value:t,writable:!1,enumerable:!1,configurable:!1});
q.setRequestHeader("Content-Type","application/xml");q.send(f)}else if("postImage"==k){Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVEUPLOADING"),!1,"none","center");Z.postingImage=!0;var E=new FormData;E.append("fileToUpload",f);Z.Utils.addEventListener(q.upload,"progress",Z.Utils.uploadProgress);q.open("POST",a,!0);Z.Utils.defineObjectProperty(q,"zType",{value:"postingImage",writable:!1,enumerable:!1,configurable:!1});q.setRequestHeader("Content-Type","application/upload");q.send(E)}else"ZoomifyImageFile"==
Z.tileSource&&("tile"!=k&&(a=Z.Utils.cacheProofPath(a)),q.open("GET",a,!0),q.responseType="arraybuffer",Z.Utils.defineObjectProperty(q,"zType",{value:k,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(q,"zTile",{value:l,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(q,"zChunkNumber",{value:n,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&q.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),q.setRequestHeader("Range",
"bytes="+f.start.toString()+"-"+f.end.toString()),q.send(null))}catch(G){d(G,a,k),q=null,console.log(G)}}else Z.Utils.showMessage(Z.Utils.getResource("z295"))}function c(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function d(a,b,
c){1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!0):1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z290"),!0):1==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z289"),!0):-1!=b.toLowerCase().indexOf(".zif")?Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+
c+".",!1,B,"center"):-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!0,null,"left"):-1!=b.toLowerCase().indexOf(".pff")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEHEADER"),!1,B,"center"):-1!=b.toLowerCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,B,"center"):-1!=b.indexOf(Z.Utils.getResource("z200"))?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):-1!=b.indexOf(Z.Utils.getResource("z209"))?
Z.Utils.showMessage(Z.Utils.getResource("z256-SLIDESXML"),!1,E,"center"):-1!=b.indexOf(Z.Utils.getResource("z135"))?Z.Utils.showMessage(Z.Utils.getResource("z256-HOTSPOTSXML"),!1,E,"center"):-1!=b.indexOf(Z.Utils.getResource("z69"))?(Z.Utils.showMessage(Z.Utils.getResource("z256-CREATINGANNOTATIONSXMLFILE"),!1,E,"center"),Z.Viewport.createAnnotationsXMLFile()):-1!=b.indexOf(Z.Utils.getResource("z68"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSJSON"),!1,E,"center"):-1!=b.toLowerCase().indexOf(Z.Utils.getResource("z70"))||
-1!=b.toLowerCase().indexOf(Z.Utils.getResource("z70"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSSAVEHANDLER"),!1,E,"center"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,E,"center")}function f(a,b){if(a)if(200!==a.status&&0!==a.status&&206!==a.status){var c=a.status,d=404==c?"Not Found":a.statusText;Z.Toolbar&&!Z.Toolbar.getInitialized()?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):Z.Viewport&&null!==Z.annotationPath&&Z.Viewport.getStatus("initialized")&&
!Z.Viewport.getStatus("XMLParsed")?(Z.Utils.showMessage(Z.Utils.getResource("z256-CREATINGANNOTATIONSXMLFILE"),!1,E,"center"),Z.Viewport.createAnnotationsXMLFile()):"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+c+" - "+d,!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z273")+c+" - "+d,!1,E,"center")}else{var c=null,f=null!==Z.annotationPath&&".json"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length);
if(Z.postingImage&&a.zType&&"postingImage"==a.zType)Z.postingImage=!1,Z.Utils.showMessage(Z.Utils.getResource("ALERT_IMAGESAVESUCCESSFUL"),!1,B,"center");else if(a.response&&a.zType&&"ZoomifyImageFile"==Z.tileSource){if(Z.Viewport)if(c=new Z.Utils.createUint8Array(a.response,0),"header"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFHeader(c);else for(var d=0,k=Z.imageSetLength;d<k;d++)b==d&&Z["Viewport"+d.toString()].parseZIFHeader(c);else if("offset"==a.zType)if("undefined"===typeof b||
null===b)Z.Viewport.parseZIFOffsetChunk(c,a.zChunkNumber);else for(d=0,k=Z.imageSetLength;d<k;d++)b==d&&Z["Viewport"+d.toString()].parseZIFOffsetChunk(c,a.zChunkNumber);else if("byteCount"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFByteCountChunk(c,a.zChunkNumber);else for(d=0,k=Z.imageSetLength;d<k;d++)b==d&&Z["Viewport"+d.toString()].parseZIFByteCountChunk(c,a.zChunkNumber);else if("image"==a.zType.substring(0,5))Q--,Z.Viewport.parseZIFImage(c,a.zTile,a.zType);else if("navigator"==
a.zType)if("undefined"===typeof b||null===b)Z.viewportCurrent.parseZIFImage(c,a.zTile,a.zType);else for(d=0,k=Z.imageSetLength;d<k;d++)b==d&&Z["Viewport"+d.toString()].parseZIFImage(c,a.zTile,a.zType);else Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),!1,B,"center")}else if(a.responseXML&&a.responseXML.documentElement&&!f)c=a.responseXML,l(c,b);else if(a.responseText)if(c=a.responseText,-1!=c.indexOf("ZAS")&&f)try{Z.annotationJSONObject=JSON.parse(c);var n=Z.Utils.jsonConvertObjectToXMLText(Z.annotationJSONObject),
d=Z.Utils.xmlConvertTextToDoc(n);if("undefined"===typeof b||null===b)Z.Viewport&&Z.Viewport.parseAnnotationsXML(d);else for(c=0,k=Z.imageSetLength;c<k;c++)b==c&&Z["Viewport"+c.toString()].parseAnnotationsXML(d)}catch(q){Z.Utils.showMessage(q.name+Z.Utils.getResource("z276")+q.message)}else Z.postingXML?(Z.postingXML=!1,Z.Utils.showMessage(Z.Utils.getResource("z1"),!1,B,"center"),Z.Viewport&&Z.Viewport.setAllHotspotsSaved()):"ZoomifyImageFolder"==Z.tileSource?(c=Z.Utils.xmlConvertTextToDoc(c),l(c,
b)):"ZoomifyImageFile"==Z.tileSource?(c=Z.Utils.xmlConvertTextToDoc(c),l(c,b)):"ZoomifyPFFFile"==Z.tileSource&&(-1!=c.toUpperCase().indexOf("PFFHEADER")?(d=c.indexOf("reply_data=")+11,c=c.substring(d,c.length)):(d=c.indexOf("begin=")+6,k=c.indexOf("&",d),beginValue=c.substring(d,k),d=c.indexOf("reply_data=")+11,replyDataValue=c.substring(d,c.length),c="<PFFOFFSET BEGIN='"+beginValue+"' REPLYDATA='"+replyDataValue+"' />"),c=Z.Utils.xmlConvertTextToDoc(c),l(c,b))}else Z.Utils.showMessage(Z.Utils.getResource("z272"),
!1,E,"center")}function l(a,b){if(a&&a.documentElement){var c=a.documentElement.tagName;if("COPYRIGHT"==c){var c=a.documentElement.getAttribute("STATEMENTTEXT"),d=a.documentElement.getAttribute("DECLINEDTEXT");Z.Utils.stringValidate(c)?Z.Utils.showCopyright(c,d):Z.Utils.showMessage(Z.Utils.getResource("z255"),!0)}else if("IMAGE_PROPERTIES"==c||"ZIFHEADER"==c||"PFFHEADER"==c){if("ZoomifyImageFile"==Z.tileSource||"ZoomifyImageFolder"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource||"ImageServer"==Z.tileSource)if("multiple"!=
Z.imagePath)Z.Viewport&&Z.Viewport.z602(a);else for(c=0,d=Z.imageSetLength;c<d;c++)b==c&&Z["Viewport"+c.toString()].z602(a)}else if("PFFOFFSET"==c)if("undefined"===typeof b||null===b)Z.Viewport&&Z.Viewport.parseOffsetChunk(a);else for(c=0,d=Z.imageSetLength;c<d;c++)b==c&&Z["Viewport"+c.toString()].parseOffsetChunk(a);else if("SKINDATA"==c)Z.Toolbar&&Z.Toolbar.parseSkinXML(a);else if("SLIDEDATA"==c)Z.Viewport&&Z.Viewport.parseSlidesXML(a);else if("HOTSPOTDATA"==c)if("undefined"===typeof b||null===
b)Z.Viewport&&Z.Viewport.parseHotspotsXML(a);else for(c=0,d=Z.imageSetLength;c<d;c++)b==c&&Z["Viewport"+c.toString()].parseHotspotsXML(a);else if("ZAS"==c)if("undefined"===typeof b||null===b)Z.Viewport&&Z.Viewport.parseAnnotationsXML(a);else for(c=0,d=Z.imageSetLength;c<d;c++)b==c&&Z["Viewport"+c.toString()].parseAnnotationsXML(a,b);else"ANIMATIONDATA"==c?Z.Viewer&&Z.Viewer.parseImageSetXML(a,"animation"):"SLIDESTACKDATA"==c?Z.Viewer&&Z.Viewer.parseImageSetXML(a,"slidestack"):Z.postingImage?Z.Utils.showMessage(Z.Utils.getResource("ERROR_SAVEIMAGEHANDLERPATHINVALID"),
!0):Z.Utils.showMessage(Z.Utils.getResource("z296"),!0)}else Z.Utils.showMessage(Z.Utils.getResource("z293"),!0)}function k(b,c,d,f){if(Q<G)return Q++,"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof f&&null!==f||"navigator"==d)?a(b,d,f):(c=Z.Utils.createCallback(null,n,c),(new C(b,c,d)).start()),!0;-1==Z.Utils.arrayIndexOfObjectValue(W,"sc",b)&&(W[W.length]={sc:b,cb:c,ct:d,t:f},P||(P=window.setInterval(function(){var a=W[0];k(a.sc,a.cb,a.ct,a.t)&&(W=Z.Utils.arraySplice(W,0,1));0==W.length&&
P&&(window.clearInterval(P),P=null)},q)));return!1}function n(a,b,c){Q--;if("function"===typeof a)try{a(c)}catch(d){Z.Utils.showMessage(d.name+Z.Utils.getResource("z245")+b+" "+d.message,!0)}}function C(a,b,c){function d(c){f.onload=null;f.onabort=null;f.onerror=null;k&&window.clearTimeout(k);window.setTimeout(function(){b(a,c?f:null)},1)}var f=null,k=null;this.start=function(){f=new Image;var b=function(){d(!1)};f.onload=function(){d(!0)};f.onabort=b;f.onerror=b;k=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));
d(!1);Z.Viewport.traceDebugValues("imageRequestTimeout",c+" timeout: "+a)},M);f.src=a}}var E=parseInt(Z.Utils.getResource("z268"),10),B=parseInt(Z.Utils.getResource("z268MEDIUM"),10),Q=0,G=parseInt(Z.Utils.getResource("z140"),10),M=parseFloat(Z.Utils.getResource("z139")),q=Z.Utils.getResource("DEFAULT_IMAGELOADQUEUEDELAY"),P,W=[];this.loadXML=function(a,c){"undefined"===typeof c||null===c?b(a,f,null):b(a,function(a){f(a,c)},null)};this.loadJSON=function(a){b(a,f,null)};this.loadByteRange=function(a,
c,d,k,l,n){c=new Z.Utils.Range(c,d);b(a,f,c,k,l,n)};this.postXML=function(a,c){b(a,f,c,"postXML")};this.postImage=function(a,c){b(a,f,c,"postImage")};this.loadImage=function(a,b,c,d){k(a,b,c,d)}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=
b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,c){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):c&&
(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){a&&("mousewheel"==b&&a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1))},this.removeEventListener=function(a,b,c){a&&("mousewheel"==b&&a.removeEventListener("DOMMouseScroll",c,!1),a.removeEventListener(b,c,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=
function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(-1==this._findListener(a,b,c)){var d=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,d);b={target:a,eventName:b,handler:c,handler2:d};var d=(a.document||a).parentWindow,
f="l"+this._listenerCounter++;d._allListeners||(d._allListeners={});d._allListeners[f]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=f;d._unloadListenerAdded||(d._unloadListenerAdded=!0,d.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,c){if(a&&(c=this._findListener(a,b,c),-1!=c)){var d=(a.document||a).parentWindow,f=a._listeners[c];a.detachEvent("on"+b,d._allListeners[f].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,c,1);delete d._allListeners[f]}},
this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var d=a._listeners;if(!d)return-1;a=(a.document||a).parentWindow;for(var f=
d.length-1;0<=f;f--){var l=a._allListeners[d[f]];if(l&&l.eventName==b&&l.handler==c)return f}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.skinPath=null;Z.skinMode=null;Z.parameters=null;Z.cacheProofCounter=0;Z.timerCounter=0;Z.browsers=null;Z.browser=null;Z.browserVersion=
null;Z.scaleThreshold=null;Z.canvasSupported=null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arrayMapSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=null;Z.responseArrayPrototyped=!1;Z.touchSupport=null;Z.mobileDevice=null;Z.localUse=
null;Z.zifSupported=null;Z.onReady=null;Z.onAnnotationReady=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.smoothPan=null;Z.smoothPanEasing=null;Z.smoothPanGlide=null;Z.autoResize=null;Z.fadeInSpeed=null;Z.toolbarVisible=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorWidth=null;Z.navigatorH=null;
Z.navigatorHeight=null;Z.navigatorL=null;Z.navigatorLeft=null;Z.navigatorT=null;Z.navigatorTop=null;Z.navigatorFit=null;Z.navigatorRectangleColor=null;Z.clickZoom=null;Z.doubleClickZoom=null;Z.doubleClickDelay=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=null;Z.keys=null;Z.constrainPan=null;Z.panBuffer=null;Z.constrainPanStrict=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.watermarkPath=null;Z.copyrightPath=null;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=null;Z.hotspotListTitle=
null;Z.hotspotsDrawOnlyInView=!0;Z.captionBoxes=!1;Z.captionsColorsDefault=!0;Z.screensaver=!1;Z.screensaverSpeed=null;Z.tour=!1;Z.tourPath=null;Z.tourListTitle=null;Z.tourPlaying=null;Z.tourStop=!1;Z.slideshow=!1;Z.slidePath=null;Z.slideListTitle=null;Z.slideshowPlaying=null;Z.slideTransitionTimeout=null;Z.slideTransitionSpeed=null;Z.slideOpacity=0;Z.audioContent=!1;Z.audioMuted=!1;Z.annotations=!1;Z.annotationPath=null;Z.annotationPanelVisible=null;Z.annotationPanelVisibleState=!1;Z.annotationFolder=
null;Z.annotationXMLText=null;Z.annotationJSONObject=null;Z.annotationsAddMultiple=null;Z.annotationsAutoSave=null;Z.saveButtonVisible=null;Z.labelClickSelect=null;Z.simplePath=!1;Z.noPost=!1;Z.noPostDefaults=!1;Z.unsavedEditsTest=!0;Z.maskVisible=null;Z.maskingSelection=!1;Z.maskFadeTimeout=null;Z.maskFadeSpeed=null;Z.maskOpacity=0;Z.maskClearOnUserAction=null;Z.externalEditPermissionFunction=null;Z.annotationSort="none";Z.saveHandlerPath=null;Z.saveImageHandlerPath=null;Z.saveImageFull=null;Z.postingXML=
!1;Z.postingImage=!1;Z.minimizeVisible=null;Z.sliderZoomVisible=null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.resetVisible=null;Z.fullViewVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.fullPageInitial=null;Z.measureVisible=!1;Z.captionTextColor=null;Z.captionBackColor=null;Z.polygonLineColor=null;Z.polygonFillColor=null;Z.captionTextVisible=!0;Z.captionBackVisible=!0;Z.polygonFillVisible=!0;Z.polygonLineVisible=!0;Z.rotationVisible=null;Z.initialR=null;
Z.initialRotation=null;Z.virtualPointerVisible=null;Z.crosshairsVisible=null;Z.rulerVisible=null;Z.units=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.magnification=null;Z.rulerListType=null;Z.rulerW=null;Z.rulerWidth=null;Z.rulerH=null;Z.rulerHeight=null;Z.rulerL=null;Z.rulerLeft=null;Z.rulerT=null;Z.rulerTop=null;Z.coordinatesVisible=null;Z.saveImageFull=null;Z.saveImageFilename=null;Z.saveImageFormat=null;Z.saveImageCompression=null;Z.saveImageBackColor=null;Z.imageFiltersVisible=
null;Z.initialImageFilters=null;Z.progressVisible=null;Z.messagesVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.canvas=null;Z.debug=null;Z.imageProperties=null;Z.serverIP=null;Z.serverPort=null;Z.tileHandlerPath=null;Z.tileHandlerPathFull=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.tilesPNG=null;Z.freehandVisible=null;Z.textVisible=null;Z.iconVisible=null;Z.rectangleVisible=null;Z.polygonVisible=null;Z.annotationPathProvided=!1;Z.saveHandlerProvided=
!1;Z.imageSetPathProvided=!1;Z.saveImageHandlerProvided=!1;Z.tileSource=null;Z.tileSourceMultiple=null;Z.focal=null;Z.quality=null;Z.markupMode=null;Z.editMode=null;Z.editing=null;Z.labelMode="view";Z.editModePrior=Z.editMode;Z.sliderFocus="zoom";Z.animation=!1;Z.animationPath=null;Z.animationCount=0;Z.animationAxis=null;Z.animator=null;Z.slidestack=!1;Z.slidestackPath=null;Z.imageSet=!1;Z.imageSetPath=null;Z.imageSetLength=null;Z.imageSetListPosition=null;Z.imageSetListTitle=null;Z.imageSetStart=
null;Z.imageSetLoop=null;Z.sliderImageSetVisible=null;Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.imageSetHotspotPath=null;Z.hotspotFileShared=!1;Z.imageSetAnnotationPath=null;Z.annotationFileShared=!1;Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.ToolbarMinimized=!1;Z.TooltipDisplay=null;Z.Navigator=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=[];Z.overlayMessage=null;Z.CoordinatesDisplay=null;Z.coordinates=
null;Z.coordinatesSave=null;Z.CopyrightDisplay=null;Z.AnnotationPanelDisplay=null;Z.imageW=null;Z.imageH=null;Z.imageCenterX=null;Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.fullViewPrior=!1;Z.interactivityOff=!1;Z.useCanvas=!0;Z.specialStorageEnabled=null;Z.callbacks=[];Z.updateViewPercent=0;Z.TraceDisplay=null;Z.traces=
null;Z.mouseIsDown=!1;Z.buttonIsDown=!1;Z.keyIsDown=!1;Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteDuration=null;Z.mouseWheelCompleteTimer=null;Z.mouseOutDownPoint=null;Z.viewportCurrentID=0;Z.viewportCurrent=null;Z.viewportChangeTimeout=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,b=0,c=1E4,d=navigator.appName,f=navigator.appVersion,l=!1,k=!1,n=navigator.userAgent.toLowerCase();if("Microsoft Internet Explorer"==d&&window.attachEvent&&
window.ActiveXObject)b=n.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(n.substring(b+5,n.indexOf(";",b))),l="undefined"!==typeof document.documentMode;else if("Netscape"==d&&-1!=n.indexOf("trident"))a=Z.browsers.IE,b=11;else if("Netscape"==d&&window.addEventListener){var C=n.indexOf("firefox"),d=n.indexOf("safari"),f=n.indexOf("chrome");0<=C?(a=Z.browsers.FIREFOX,b=parseFloat(n.substring(C+8)),c=1E4):0<=d&&(c=n.substring(0,d).lastIndexOf("/"),a=0<=f?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(n.substring(c+
1,d)),c=1E4);d=new Image;d.style.getPropertyValue&&(k=d.style.getPropertyValue("image-rendering"))}else"Opera"==d&&window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,b=parseFloat(f));var E;if(window.XMLHttpRequest)netReq=new XMLHttpRequest,E="XMLHttpRequest";else if(window.ActiveXObject)for(d=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],f=0,C=d.length;f<C;f++)try{netReq=new ActiveXObject(d[f]);E=d[f];break}catch(B){}var d="response"in
XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype,f=document.createElement("canvas"),f=!(!f.getContext||!f.getContext("2d")),C=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),f=f&&C,C=!(a==Z.browsers.CHROME&&2>b),k=l||k?"high":null,Q=(document.documentElement||{}).style||{},l=!1,G=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],M,q;for(;M=G.shift();)if("undefined"!==
typeof Q[M]){l=!0;q=/webkit/i.test(M);break}Q=l;G=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)G=!0;var P=Array.prototype.map,W=Array.prototype.splice,w=!1;try{new Float32Array(1),w=!0}catch(I){}var r=!1;try{new Uint8Array(1),r=!0}catch(L){}var ma=
!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),ma=!0}catch(ja){}var La="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,n=-1<n.indexOf("android")||-1<n.indexOf("iphone")||-1<n.indexOf("ipad")||-1<n.indexOf("ipod"),Y;switch(window.location.protocol){case "http:":Y=!1;break;case "https:":Y=!1;break;case "file:":Y=!0;break;default:Y=null}var Lb=!(Z.browser==Z.browsers.IE&&9>
Z.browserVersion||Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=a;Z.browserVersion=b;Z.scaleThreshold=c;Z.xmlHttpRequestSupport=E;Z.responseArraySupported=d;Z.canvasSupported=f;Z.useCanvas=Z.canvasSupported;Z.imageFiltersVisible=!Z.useCanvas&&Z.imageFiltersVisible?!1:Z.imageFiltersVisible;Z.cssTransformsSupported=l;Z.cssTransformProperty=
M;Z.cssTransformNoUnits=q;Z.alphaSupported=C;Z.renderQuality=k;Z.rotationSupported=Q;Z.fullScreenSupported=G;Z.arrayMapSupported=P;Z.arraySpliceSupported=W;Z.float32ArraySupported=w;Z.uInt8ArraySupported=r;Z.definePropertySupported=ma;Z.touchSupport=La;Z.mobileDevice=n;Z.localUse=Y;Z.zifSupported=Lb},enforceCopyright:function(){this.readCookie("imageCopyright")?Z.Viewer.configureViewer():this.loadCopyrightText()},readCookie:function(a){a+="=";for(var b=document.cookie.split(";"),c=0,d=b.length;c<
d;c++){for(var f=b[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return f.substring(a.length,f.length)}return null},loadCopyrightText:function(){(new Z.NetConnector).loadXML(Z.copyrightPath)},showCopyright:function(a,b){var c=this.getResource("z102"),d=this.getResource("z101");Z.CopyrightDisplay=this.createContainerElement("div","CopyrightDisplay","inline-block","absolute","hidden",Z.viewerW-2+"px",Z.viewerH-2+"px","0px","0px","solid","1px",c,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.CopyrightDisplay);
c=parseInt(Z.Utils.getResource("z230"),10);Z.CopyrightDisplay.style.zIndex=(c+11).toString();var f=parseFloat(Z.CopyrightDisplay.style.width)/2-220,c=parseFloat(Z.CopyrightDisplay.style.height)/2-100,l=this.createContainerElement("div","textBox","inline-block","absolute","hidden","440px","200px",f+"px",c+"px","none","0px","transparent none","0px","0px","normal",null,!0);l.id="textBox";Z.CopyrightDisplay.appendChild(l);var k=document.createTextNode(a);l.appendChild(this.createCenteredElement(k,"copyrightTextNode"));
this.setTextNodeStyle(k,"black","verdana","16px","none","normal","normal","normal","normal","1em","justify","none");var k=this.createContainerElement("div","declinedTextContainer","hidden","absolute","hidden","0px","0px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0),n=document.createTextNode(b);k.appendChild(n);l.appendChild(k);f=f+220-95;c=c+200+20;l=this.getResource("z418");l=new Z.Utils.Button("buttonAgree",l,null,null,null,null,"80px","20px",f+"px",c+"px","mousedown",
this.copyrightAgreeButtonHandler,"z332","solid","1px",d,"0px","0px");Z.CopyrightDisplay.appendChild(l.elmt);f+=110;l=this.getResource("z419");d=new Z.Utils.Button("buttonExit",l,null,null,null,null,"80px","20px",f+"px",c+"px","mousedown",this.copyrightExitButtonHandler,"z333","solid","1px",d,"0px","0px");Z.CopyrightDisplay.appendChild(d.elmt)},hideCopyright:function(){var a=document.getElementById("copyrightTextNode").firstChild,b=document.getElementById("declinedTextContainer").firstChild.nodeValue;
a.nodeValue=b;a=document.getElementById("buttonAgree");Z.Utils.removeEventListener(a,"mousedown",this.copyrightAgreeButtonHandler);Z.CopyrightDisplay.removeChild(a);a=document.getElementById("buttonExit");Z.Utils.removeEventListener(a,"mousedown",this.copyrightExitButtonHandler);Z.CopyrightDisplay.removeChild(a)},copyrightAgreeButtonHandler:function(a){Z.ViewerDisplay.removeChild(Z.CopyrightDisplay);document.cookie="imageCopyright=confirmed";Z.Viewer.configureViewer()},copyrightExitButtonHandler:function(a){Z.Utils.hideCopyright()},
parseParameters:function(a){var b=[];if("object"===typeof a)b=a;else if("string"===typeof a){a=a.split("&");for(var c=0,d=a.length;c<d;c++){var f=a[c],l=f.indexOf("=");if(0<l){var k=f.substring(0,l),f=f.substring(l+1);b[k]=f}}}return b},parametersToDelimitedString:function(a,b){var c="",d;for(d in a)c+=d+"="+a[d].toString()+b;return c=c.slice(0,-1)},setParameters:function(a){var b=this.getResource("z287"),c=this.getResource("z110"),d=this.getResource("z109"),f=this.getResource("z108"),c=c!=d?!0:!1;
c||(Z.logoLinkURL=Z.Utils.getResource("z427"));var l=this.getResource("z187"),k=this.getResource("z186"),d=this.getResource("z185"),l=l!=k?!0:!1,n=this.getResource("z215"),k=this.getResource("z214"),C=this.getResource("z213");Z.specialStorageEnabled=n!=k?!0:!1;var E=this.getResource("z107"),B=this.getResource("z106"),n=this.getResource("z105"),E=E!=B?!0:!1;Z.skinPath=this.getResource("z201");Z.skinMode=this.getResource("z199");isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));
isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));isNaN(parseFloat(this.getResource("z241")))||(Z.zoomSpeed=parseFloat(this.getResource("z241")));isNaN(parseFloat(this.getResource("z175")))||
(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));Z.navigatorVisible=parseInt(this.getResource("z171"),10);Z.navigatorW=parseInt(this.getResource("z172"),10);Z.navigatorH=parseInt(this.getResource("z167"),10);Z.navigatorL=parseInt(this.getResource("z168"),10);Z.navigatorT=parseInt(this.getResource("z170"),10);Z.navigatorFit=this.getResource("z166");Z.navigatorRectangleColor=this.getResource("z169");Z.clickZoom=
"0"!=this.getResource("z93");Z.doubleClickZoom="0"!=this.getResource("DEFAULT_DOUBLECLICKZOOM");Z.doubleClickDelay=parseFloat(this.getResource("DEFAULT_DOUBLECLICKDELAY"));Z.clickPan="0"!=this.getResource("z92");Z.mousePan="0"!=this.getResource("z164");Z.constrainPan="0"!=this.getResource("z95");Z.panBuffer=parseFloat(this.getResource("z173"));Z.constrainPanStrict="0"!=this.getResource("z95STRICT");Z.smoothPan=Z.useCanvas&&"0"!=this.getResource("DEFAULT_SMOOTHPAN");Z.smoothPanEasing=parseInt(this.getResource("DEFAULT_SMOOTHPANEASING"),
10);Z.smoothPanGlide=parseInt(this.getResource("DEFAULT_SMOOTHPANGLIDE"),10);Z.keys="0"!=this.getResource("z146");Z.canvas="0"!=this.getResource("z88");Z.debug=parseInt(this.getResource("z104"),10);Z.toolbarVisible=parseInt(this.getResource("z223"),10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;Z.toolbarPosition=parseFloat(this.getResource("z222"));Z.logoVisible="0"!=this.getResource("z150");Z.logoCustomPath=this.getResource("z149");
Z.minimizeVisible="0"!=this.getResource("z162");Z.sliderZoomVisible="0"!=this.getResource("DEFAULT_SLIDERZOOMVISIBLE");Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEEL"),10);Z.panButtonsVisible="0"!=this.getResource("z174");Z.resetVisible="0"!=this.getResource("DEFAULT_RESETVISIBLE");Z.tooltipsVisible="0"!=this.getResource("z224");Z.helpVisible=parseInt(this.getResource("z128"),10);Z.progressVisible="0"!=this.getResource("z184");Z.messagesVisible="0"!=this.getResource("DEFAULT_MESSAGESVISIBLE");
Z.fullViewVisible="0"!=this.getResource("z121");Z.fullScreenVisible="0"!=this.getResource("z119");Z.fullPageVisible="0"!=this.getResource("z118");Z.initialFullPage="0"!=this.getResource("z141");Z.measureVisible="0"!=this.getResource("z157");Z.rotationVisible="0"!=this.getResource("z190");Z.initialR=this.getResource("DEFAULT_INITIALR");isNaN(parseFloat(this.getResource("DEFAULT_SCREENSAVERSPEED")))||(Z.screensaverSpeed=parseFloat(this.getResource("DEFAULT_SCREENSAVERSPEED")));isNaN(parseFloat(this.getResource("DEFAULT_MASKFADESPEED")))||
(Z.maskFadeSpeed=parseFloat(this.getResource("DEFAULT_MASKFADESPEED")));Z.maskClearOnUserAction="0"!=this.getResource("DEFAULT_MASKCLEARONUSERACTION");Z.units=this.getResource("z231");Z.sourceMagnification=parseInt(this.getResource("z212"),10);Z.virtualPointerVisible="0"!=this.getResource("z233");Z.crosshairsVisible="0"!=this.getResource("z103");Z.rulerVisible=parseInt(this.getResource("z196"),10);Z.rulerListType=this.getResource("z193");Z.rulerW=parseInt(this.getResource("z197"),10);Z.rulerH=parseInt(this.getResource("z191"),
10);Z.rulerL=parseInt(this.getResource("z192"),10);Z.rulerT=parseInt(this.getResource("z195"),10);isNaN(parseFloat(this.getResource("z210")))||(Z.slideTransitionSpeed=parseFloat(this.getResource("z210")));Z.coordinatesVisible="0"!=this.getResource("z100");Z.saveImageFull="0"!=this.getResource("DEFAULT_SAVEIMAGEFULL");Z.saveImageFilename=this.getResource("DEFAULT_SAVEIMAGEFILENAME");Z.saveImageFormat=this.getResource("DEFAULT_SAVEIMAGEFORMAT");Z.saveImageCompression=parseFloat(this.getResource("DEFAULT_SAVEIMAGECOMPRESSION"));
var B=document.body.style,Q=document.getElementById(Z.pageContainerID),Q=Z.Utils.getElementStyle(Q);Z.saveImageBackColor=Z.Utils.stringValidate(Q.backgroundColor)&&"transparent"!=Q.backgroundColor?Q.backgroundColor:Z.Utils.stringValidate(B.backgroundColor)&&"transparent"!=B.backgroundColor?B.backgroundColor:Z.Utils.getResource("DEFAULT_SAVEIMAGEBACKCOLOR");Z.imageFiltersVisible="0"!=this.getResource("z138");Z.initialImageFilters="0"!=this.getResource("z142");Z.freehandVisible="0"!=this.getResource("z116");
Z.textVisible="0"!=this.getResource("z217");Z.iconVisible="0"!=this.getResource("z136");Z.rectangleVisible="0"!=this.getResource("z189");Z.polygonVisible="0"!=this.getResource("z181");Z.annotationPanelVisible=parseInt(this.getResource("DEFAULT_ANNOTATIONPANELVISIBLE"),10);Z.annotationsAddMultiple="0"!=this.getResource("DEFAULT_ANNOTATIONSADDMULTIPLE");Z.annotationsAutoSave="0"!=this.getResource("DEFAULT_ANNOTATIONSAUTOSAVE");Z.saveButtonVisible="0"!=this.getResource("DEFAULT_ANNOTATIONSAVEBUTTONVISIBLE");
Z.labelClickSelect="0"!=this.getResource("DEFAULT_LABELCLICKSELECT");Z.focal=parseInt(this.getResource("z114"),10);Z.quality=parseInt(this.getResource("z188"),10);Z.sliderImageSetVisible="0"!=this.getResource("DEFAULT_IMAGESETSLIDERVISIBLE");if("object"===typeof a&&null!==a){Z.annotationPathProvided=void 0!==a.zHotspotPath||void 0!==a.zAnnotationPath||void 0!==a.zAnnotationXMLText||void 0!==a.zAnnotationJSONObject;Z.saveHandlerProvided=void 0!==a.zSaveHandlerPath||void 0!==a.zNoPost&&"1"==a.zNoPost;
Z.imageSetPathProvided=void 0!==a.zAnimationPath||void 0!==a.zSlidestackPath;Z.saveImageHandlerProvided=void 0!==a.zSaveImageHandlerPath;Z.mouseWheelParmeterProvided=void 0!==a.zMouseWheel;for(var G in a)if("function"!==typeof a[G]||"zOnAnnotationReady"===G||"zOnReady"===G)if("undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(G.substr(1))])alert(b+" "+G);else if(pValue=a[G],c||"zNavigatorVisible"==G)switch(G){case "zOnAnnotationReady":"function"===typeof pValue&&Z.setCallback("annotationPanelInitialized",
pValue);break;case "zOnReady":"function"===typeof pValue&&Z.setCallback("readyViewer",pValue);break;case "zInitialX":isNaN(parseFloat(pValue))||(Z.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||(Z.initialY=parseFloat(pValue));break;case "zInitialZoom":"fit"==pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(Z.initialZ=parseFloat(pValue),Z.initialZ&&0<Z.initialZ&&100>=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":"fit"==pValue&&(pValue=
"-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(Z.minZ=parseFloat(pValue),Z.minZ&&0<Z.minZ&&100>=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(pValue))||(Z.maxZ=parseFloat(pValue),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=parseInt(pValue,10);break;case "zToolbarVisible":Z.toolbarVisible=parseInt(pValue,10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;
break;case "zLogoVisible":"0"==pValue&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==pValue&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==pValue&&(Z.sliderZoomVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(Z.panButtonsVisible=!1);break;case "zResetVisible":"0"==pValue&&(Z.resetVisible=!1);break;case "zFullViewVisible":"1"==pValue?(Z.fullScreenVisible=!0,Z.fullPageVisible=!1):"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==
pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==pValue&&(Z.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+" zFullPageInitial is now zInitialFullPage");break;case "zSkinPath":Z.skinPath=pValue;break;case "zTooltipsVisible":"0"==pValue&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(pValue,10);break;case "zProgressVisible":"0"==
pValue&&(Z.progressVisible=!1);break;case "zMessagesVisible":Z.messagesVisible=parseInt(pValue,10);break;default:if(l)switch(G){case "zZoomSpeed":Z.zoomSpeed=parseInt(pValue,10);break;case "zPanSpeed":Z.panSpeed=parseInt(pValue,10);break;case "zFadeInSpeed":Z.fadeInSpeed=parseInt(pValue,10);break;case "zClickZoom":"0"==pValue&&(Z.clickZoom=!1);break;case "zDoubleClickZoom":"0"==pValue&&(Z.doubleClickZoom=!1);break;case "zDoubleClickDelay":Z.doubleClickDelay=parseInt(pValue,10);break;case "zClickPan":"0"==
pValue&&(Z.clickPan=!1);break;case "zMousePan":"0"==pValue&&(Z.mousePan=!1);break;case "zKeys":"0"==pValue&&(Z.keys=!1);break;case "zConstrainPan":Z.constrainPan="0"==pValue?!1:!0;Z.constrainPanStrict="2"==pValue?!0:!1;break;case "zPanBuffer":B=parseFloat(pValue);isNaN(B)||(Z.panBuffer=B);break;case "zSmoothPan":"0"==pValue&&(Z.smoothPan=!1);break;case "zSmoothPanEasing":B=parseInt(pValue,10);1<=B&&5>=B&&(Z.smoothPanEasing=B);break;case "zSmoothPanGlide":B=parseInt(pValue,10);1<=B&&5>=B&&(Z.smoothPanGlide=
B);break;case "zAutoResize":"0"==pValue&&(Z.autoResize=!1);break;case "zCanvas":"0"==pValue&&(Z.canvas=!1);Z.canvasSupported&&Z.canvas||(Z.useCanvas=!1);break;case "zDebug":Z.debug=parseInt(pValue,10);break;case "zImageProperties":Z.imageProperties=pValue;break;case "zNavigatorWidth":isNaN(parseInt(pValue,10))||(Z.navigatorW=parseInt(pValue,10));break;case "zNavigatorHeight":isNaN(parseInt(pValue,10))||(Z.navigatorH=parseInt(pValue,10));break;case "zNavigatorLeft":isNaN(parseInt(pValue,10))||(Z.navigatorL=
parseInt(pValue,10));break;case "zNavigatorTop":isNaN(parseInt(pValue,10))||(Z.navigatorT=parseInt(pValue,10));break;case "zNavigatorFit":isNaN(parseFloat(pValue))||(Z.navigatorFit=parseInt(pValue,10));break;case "zNavigatorRectangleColor":Z.navigatorRectangleColor=pValue;break;case "zToolbarPosition":Z.toolbarPosition=parseInt(pValue,10);break;case "zLogoCustomPath":Z.logoCustomPath=pValue;break;case "zRotationVisible":"1"==pValue&&(Z.rotationVisible=!0);break;case "zInitialRotation":isNaN(parseFloat(pValue))||
(Z.initialR=parseInt(pValue,10));break;case "zVirtualPointerVisible":"1"==pValue&&(Z.virtualPointerVisible=!0);break;case "zCrosshairsVisible":"1"==pValue&&(Z.crosshairsVisible=!0);break;case "zMeasureVisible":Z.measureVisible="1"==pValue?!0:!1;break;case "zCaptionTextColor":Z.captionTextColor=Z.Utils.stringValidateColorValue(pValue);Z.captionsColorsDefault=!1;break;case "zCaptionBackColor":Z.captionBackColor=Z.Utils.stringValidateColorValue(pValue);Z.captionsColorsDefault=!1;break;case "zPolygonLineColor":Z.polygonLineColor=
Z.Utils.stringValidateColorValue(pValue);break;case "zPolygonFillColor":Z.polygonFillColor=Z.Utils.stringValidateColorValue(pValue);break;case "zCaptionTextVisible":"0"==pValue&&(Z.captionTextVisible=!1);break;case "zCaptionBackVisible":"0"==pValue&&(Z.captionBackVisible=!1);break;case "zPolygonLineVisible":"0"==pValue&&(Z.polygonLineVisible=!1);break;case "zPolygonFillVisible":"0"==pValue&&(Z.polygonFillVisible=!1);break;case "zRulerVisible":Z.rulerVisible=parseInt(pValue,10);break;case "zRulerListType":this.stringValidate(pValue)&&
(Z.rulerListType=pValue);break;case "zRulerWidth":isNaN(parseInt(pValue,10))||(Z.rulerW=parseInt(pValue,10));break;case "zRulerHeight":isNaN(parseInt(pValue,10))||(Z.rulerH=parseInt(pValue,10));break;case "zRulerLeft":isNaN(parseInt(pValue,10))||(Z.rulerL=parseInt(pValue,10));break;case "zRulerTop":isNaN(parseInt(pValue,10))||(Z.rulerT=parseInt(pValue,10));break;case "zUnits":this.stringValidate(pValue)&&(Z.units=pValue);break;case "zUnitsPerImage":isNaN(parseFloat(pValue))||(Z.unitsPerImage=parseFloat(pValue));
break;case "zPixelsPerUnit":isNaN(parseFloat(pValue))||(Z.pixelsPerUnit=parseFloat(pValue));break;case "zSourceMagnification":isNaN(parseInt(pValue,10))||(Z.sourceMagnification=parseInt(pValue,10));break;case "zMagnification":alert(Z.Utils.getResource("z275")+" zMagnification is now zSourceMagnification");break;case "zWatermarkPath":Z.watermarkPath=pValue;break;case "zCopyrightPath":Z.copyrightPath=pValue;break;case "zCoordinatesVisible":"1"==pValue&&(Z.coordinatesVisible=!0);break;case "zHotspotPath":Z.hotspotPath=
Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));Z.hotspots=!0;break;case "zHotspotListTitle":Z.hotspotListTitle=pValue;break;case "zHotspotsDrawOnlyInView":"0"==pValue&&(Z.hotspotsDrawOnlyInView=!1);break;case "zCaptionBoxes":"1"==pValue&&(Z.captionBoxes=!0);break;case "zScreensaver":"1"==pValue&&
(Z.screensaver=!0,Z.tour=!0);break;case "zScreensaverSpeed":Z.screensaverSpeed=parseInt(pValue,10);break;case "zTourPath":Z.tourPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotPath=Z.tourPath;Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));Z.tour=!0;break;case "zTourListTitle":Z.tourListTitle=pValue;break;case "zSlidePath":Z.slidePath=
Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.slideshow=!0;break;case "zSlideListTitle":Z.slideListTitle=pValue;break;case "zAnimationPath":Z.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.imageSet=!0;Z.animation=!0;Z.mouseWheelParmeterProvided||(Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEELANIMATION"),10),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom");break;case "zImageSetSliderVisible":"0"==pValue&&(Z.sliderImageSetVisible=!1);break;case "zMouseWheel":Z.mouseWheel=
parseInt(pValue,10);Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom";break;case "zTilesPNG":"1"==pValue&&(Z.tileType="png");break;case "zTileW":Z.tileW=parseInt(pValue,10);break;case "zTileH":Z.tileH=parseInt(pValue,10);break;default:if(E)switch(G){case "zImageFiltersVisible":"1"==pValue&&(Z.imageFiltersVisible=!0);break;case "zInitialImageFilters":"0"==pValue&&(Z.initialImageFilters=!1);break;case "zAnnotationPath":Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.annotationFolder=
Z.annotationPath;".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/")));Z.annotations=!0;break;case "zAnnotationPanelVisible":Z.annotationPanelVisible=parseInt(pValue,10);break;case "zAnnotationXMLText":Z.annotationXMLText=pValue;Z.annotations=!0;break;case "zAnnotationJSONObject":Z.annotationJSONObject=pValue;Z.annotations=!0;break;case "zAnnotationsAddMultiple":"0"==
pValue&&(Z.annotationsAddMultiple=!1);break;case "zAnnotationsAutoSave":"0"==pValue&&(Z.annotationsAutoSave=!1);break;case "zSaveButtonVisible":"0"==pValue&&(Z.saveButtonVisible=!1);break;case "zLabelClickSelect":"1"==pValue&&(Z.labelClickSelect=!0);break;case "zSimplePath":"1"==pValue&&(Z.simplePath=!0);break;case "zNoPost":"1"==pValue&&(Z.noPost=!0);break;case "zNoPostDefaults":"1"==pValue&&(Z.noPostDefaults=!0);break;case "zUnsavedEditsTest":"0"==pValue&&(Z.unsavedEditsTest=!1);break;case "zAnnotationSort":Z.annotationSort=
pValue;break;case "zMaskVisible":"1"==pValue&&(Z.maskVisible=!0);break;case "zMaskFadeSpeed":Z.maskFadeSpeed=parseInt(pValue,10);break;case "zMaskClearOnUserAction":"0"==pValue&&(Z.maskClearOnUserAction=!1);break;case "zFreehandVisible":"0"==pValue&&(Z.freehandVisible=!1);break;case "zTextVisible":"0"==pValue&&(Z.textVisible=!1);break;case "zIconVisible":"0"==pValue&&(Z.iconVisible=!1);break;case "zRectangleVisible":"0"==pValue&&(Z.rectangleVisible=!1);break;case "zPolygonVisible":"0"==pValue&&(Z.polygonVisible=
!1);break;case "zMarkupMode":"1"==pValue&&(Z.annotationPathProvided||Z.imageSetPathProvided?(Z.editMode="markup",Z.editing="addLabel"):alert(this.getResource("z247")));break;case "zEditMode":"1"==pValue&&(Z.annotationPathProvided||Z.imageSetPathProvided?Z.editMode="edit":alert(this.getResource("z247")));break;case "zSlidestackPath":Z.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.imageSet=!0;Z.slidestack=!0;Z.mouseWheelParmeterProvided||(Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEELSLIDESTACK"),
10),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom");break;case "zSaveHandlerPath":Z.saveHandlerPath=pValue;break;case "zSaveImageHandlerPath":Z.saveImageHandlerPath=pValue;break;case "zSaveImageFull":"1"==pValue&&(Z.saveImageFull=!0);break;case "zSaveImageFilename":Z.Utils.stringValidate(pValue)&&(Z.saveImageFilename=pValue);break;case "zSaveImageFormat":switch(pValue.toLowerCase()){case "png":Z.saveImageFormat="png";break;default:Z.saveImageFormat="jpg"}break;case "zSaveImageCompression":B=parseFloat(pValue);
!isNaN(B)&&.1<=B&&1>=B&&(Z.saveImageCompression=B);break;case "zSaveImageBackColor":Z.saveImageBackColor=Z.Utils.stringValidateColorValue(pValue);break;default:if(Z.specialStorageEnabled==k)alert(C+" "+G);else switch(G){case "zServerIP":Z.serverIP=pValue;break;case "zServerPort":Z.serverPort=pValue;break;case "zTileHandlerPath":Z.tileHandlerPath=pValue;break;case "zImageW":Z.imageW=parseInt(pValue,10);Z.imageCenterX=Z.imageW/2;break;case "zImageH":Z.imageH=parseInt(pValue,10);Z.imageCenterY=Z.imageH/
2;break;case "zFocal":Z.focal=parseInt(pValue,10);break;case "zQuality":Z.quality=parseInt(pValue,10)}}else alert(n+" "+G)}else alert(d+" "+G)}else alert(f+" "+G)}if(Z.Utils.stringValidate(Z.annotationPath)||Z.Utils.stringValidate(Z.saveHandlerPath)||Z.Utils.stringValidate(Z.saveImageHandlerPath))E?Z.Utils.stringValidate(Z.saveHandlerPath)&&(a=Z.saveImageHandlerPath,Z.saveHandlerPath=Z.saveHandlerPath,Z.saveImageHandlerPath=a):(Z.annotationPath="",alert(n));Z.Utils.validateImagePath()},resetParametersXYZ:function(a){isNaN(parseFloat(this.getResource("z143")))||
(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));if(this.stringValidate(a))for(var b=0,c=a.length;b<c;b++){var d=a[b],f=d.indexOf("=");
if(0<f){var l=d.substring(0,f),d=d.substring(f+1);if(this.stringValidate(d))switch(l){case "zInitialX":isNaN(parseFloat(d))||(Z.initialX=parseFloat(d));break;case "zInitialY":isNaN(parseFloat(d))||(Z.initialY=parseFloat(d));break;case "zInitialZoom":"fit"==d&&(d="-1");"fill"==d&&(d="0");isNaN(parseFloat(d))||(Z.initialZ=parseFloat(d),Z.initialZ&&0<Z.initialZ&&100>=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":"fit"==d&&(d="-1");"fill"==d&&(d="0");isNaN(parseFloat(d))||(Z.minZ=parseFloat(d),
Z.minZ&&0<Z.minZ&&100>=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(d))||(Z.maxZ=parseFloat(d),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},validateImagePath:function(a){a="undefined"!==typeof a&&Z.Utils.stringValidate(a)?a:Z.imagePath;if(null!==a){var b=this.getResource("z213");-1!=a.toLowerCase().indexOf(".zif")?Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):alert(this.getResource("z16")):-1!=a.toLowerCase().indexOf(".jpg")||-1!=a.toLowerCase().indexOf(".png")?
Z.tileSource="unconverted":Z.Utils.stringValidate(Z.tileHandlerPath)?-1!=a.toLowerCase().indexOf(".pff")?Z.specialStorageEnabled?(Z.tileSource="ZoomifyPFFFile",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(b):Z.Utils.stringValidate(Z.tileHandlerPath)&&(Z.specialStorageEnabled?(Z.tileSource="ImageServer",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(b)):Z.tileSource="ZoomifyImageFolder"}else if(Z.imageSet||Z.slideshow)Z.tileSourceMultiple=!0},clearImageParameters:function(){Z.imagePath=null;
Z.parameters=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.minZ=null;Z.maxZ=null;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=null;Z.tour=!1;Z.tourPath=null;Z.tourPlaying=null;Z.tourStop=!1;Z.annotations=!1;Z.annotationPath=null;Z.annotationPanelVisible=null;Z.annotationFolder=null;Z.annotationJSONObject=null;Z.annotationXMLText=null;Z.annotationsAddMultiple=null;Z.annotationsAutoSave=null;Z.postingXML=!1;Z.postingImage=!1;Z.initialR=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=
null;Z.imageProperties=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.annotationPathProvided=!1;Z.imageSetPathProvided=!1;Z.tileSource=null;Z.tileSourceMultiple=null;Z.focal=null;Z.quality=null;Z.markupMode=null;Z.editMode=null;Z.editing=null;Z.labelMode="view";Z.editModePrior=Z.editMode;Z.sliderFocus="zoom";Z.animation=!1;Z.animationPath=null;Z.animationCount=0;Z.animationAxis=null;Z.animator=null;Z.slidestack=!1;Z.slidestackPath=null;Z.imageSet=!1;Z.imageSetPath=null;Z.imageSetLength=null;Z.sliderImageSetVisible=
null;Z.imageSetSliderVisible=null;Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.imageSetHotspotPath=null;Z.hotspotFileShared=!1;Z.imageSetAnnotationPath=null;Z.annotationFileShared=!1;Z.imageW=null;Z.imageH=null;Z.imageCenterX=null;Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.fullViewPrior=!1},getResource:function(a){var b="";switch(a){case "z110":b=
"Enable Express parameters";break;case "z109":b="Changing This Violates License Agreement";break;case "z108":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";break;case "z187":b="Enable Pro parameters";break;case "z186":b="Changing This Violates License Agreement";break;case "z185":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";
break;case "z215":b="Enable special storage support";break;case "z214":b="Changing this violates License Agreement";break;case "z213":b="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";break;case "z107":b="Enable Enterprise parameters";break;case "z106":b="Changing this violates License Agreement";break;case "z105":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";
break;case "z125":b="0";break;case "z124":b="8192";break;case "z123":b="1060";break;case "z90":b="ZoomifyImageFile"==Z.tileSource?"1024":"256";break;case "z90-PFF":b="256";break;case "z221":b="256";break;case "z219":b="256";break;case "z140":b="300";break;case "z139":b="60000";break;case "DEFAULT_IMAGELOADQUEUEDELAY":b="100";break;case "z218":b="1.15";break;case "z220":b="300";break;case "z81":b="6";break;case "z78":b="3";break;case "z80":b="5";break;case "z77":b="3";break;case "z79":b="3";break;
case "z76":b="2";break;case "z75":b="0";break;case "z173":b=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(b="2");break;case "z173UNCONVERTED":b=Z.mobileDevice?Z.rotationVisible?"2":"1":"10";break;case "DEFAULT_z310SIZEMAXBROWSER":b="10000";break;case "DEFAULT_z310SIZEMAXFIREFOX":b="4000";break;case "DEFAULT_z310SIZEMAXIMAGESET":b="1000";break;case "z74":b=Z.mobileDevice?"1":"2";break;case "z88":b="1";break;case "z230":b="2000";break;case "DEFAULT_VALIDATEVIEWRETRYLIMIT":b="2";break;case "DEFAULT_VALIDATEVIEWRETRYDELAY":b=
"1000";break;case "z104":b="0";break;case "z175":b="5";break;case "z176":b="10";break;case "z241":b="5";break;case "z242":b="0.02";break;case "z238":b="30";break;case "z240":b="20";break;case "z239":b="800";break;case "z93TIERSKIPTHRESHOLD":b="0.2";break;case "z122":b="10";break;case "DEFAULT_AUTORESIZESKIPDURATION":b="10";break;case "DEFAULT_MOUSEWHEEL":b="1";break;case "DEFAULT_MOUSEWHEELANIMATION":b="1";break;case "DEFAULT_MOUSEWHEELSLIDESTACK":b="1";break;case "z165":b="300";break;case "z111":b=
"5";break;case "z112":b="0.067";break;case "z146":b="1";break;case "z164":b="1";break;case "z92":b="1";break;case "z93":b="1";break;case "DEFAULT_DOUBLECLICKZOOM":b="1";break;case "DEFAULT_DOUBLECLICKDELAY":b="250";break;case "z95":b="1";break;case "z95STRICT":b="0";break;case "DEFAULT_SMOOTHPAN":b="1";break;case "DEFAULT_SMOOTHPANEASING":b="2";break;case "DEFAULT_SMOOTHPANGLIDE":b="2";break;case "z143":b=null;break;case "z144":b=null;break;case "z145":b=null;break;case "z163":b=null;break;case "z153":b=
"1";break;case "z83":b="#FBFAFA";break;case "z83NOALPHA":b="#FBFAFA";break;case "z83LIGHT":b="#FEFEFE";break;case "z82":b="0.75";break;case "z86":b="0.75";break;case "z87":b="#C0C0C0";break;case "z200":b="skinFiles.xml";break;case "z201":b="Assets/Skins/Default";break;case "z199":b="0";break;case "z171":b="2";break;case "z172":b="150";break;case "z167":b="100";break;case "z168":b="-1";break;case "z170":b="-1";break;case "z166":b=null;break;case "z169":b="#0000FF";break;case "z223":b="4";break;case "z222":b=
"1";break;case "z224":b="1";break;case "z128":b="1";break;case "z150":b="1";break;case "z149":b=null;break;case "z162":b="1";break;case "DEFAULT_SLIDERZOOMVISIBLE":b="1";break;case "z205ZOOM":b="10";break;case "z174":b="1";break;case "DEFAULT_RESETVISIBLE":b="1";break;case "z121":b="1";break;case "z119":b="1";break;case "z120":b="white";break;case "z118":b="0";break;case "z141":b="0";break;case "z232":b="Assets/VirtualPointer/virtualPointer.png";break;case "z157":b="undefined"===typeof Z.parameters||
null===Z.parameters||"undefined"!==typeof Z.parameters.zMeasureVisible&&"0"==Z.parameters.zMeasureVisible||!("undefined"!==typeof Z.parameters.zMarkupMode&&"1"==Z.parameters.zMarkupMode||"undefined"!==typeof Z.parameters.zEditMode&&"1"==Z.parameters.zEditMode)?"0":"1";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":b="\t#F8F8F8";break;case "z190":b="0";break;case "DEFAULT_INITIALR":b="0";break;case "z184":b="1";break;case "z182":b="500";break;case "z183":b=" ";break;case "z183COLOR":b="#000000";
break;case "DEFAULT_MESSAGESVISIBLE":b="1";break;case "z212":b="40";break;case "z231":b="pixels";break;case "z233":b="0";break;case "z103":b="0";break;case "z196":b="0";break;case "z193":b="2";break;case "z194":b="10";break;case "z198":b="#696969";break;case "z197":b="150";break;case "z191":b="30";break;case "z192":b="-1";break;case "z195":b="-1";break;case "z100":b="0";break;case "z234":b="0.6";break;case "z235":b="0.33";break;case "z237":b="512";break;case "z236":b="384";break;case "DEFAULT_SAVEIMAGEFULL":b=
"0";break;case "DEFAULT_SAVEIMAGEFILENAME":b="zoomifySavedImage";break;case "DEFAULT_SAVEIMAGEFORMAT":b="jpg";break;case "DEFAULT_SAVEIMAGECOMPRESSION":b="0.8";break;case "DEFAULT_SAVEIMAGEBACKCOLOR":b="#FFFFFF";break;case "DEFAULT_SAVEIMAGELABELMARGIN":b="50";break;case "DEFAULT_SCREENSAVERSPEED":b="5";break;case "DEFAULT_MASKFADESPEED":b="5";break;case "DEFAULT_MASKFADESTEP":b="0.05";break;case "DEFAULT_MASKCLEARONUSERACTION":b="1";break;case "z102":b="#D3D3D3";break;case "z101":b="#FFFFFF";break;
case "z227":b="destinations.xml";break;case "z226":b=!0;break;case "z225":b=!0;break;case "z209":b="slides.xml";break;case "DEFAULT_SLIDESHOWAUTOSTART":b=!0;break;case "DEFAULT_SLIDESHOWAUTOLOOP":b=!0;break;case "z203":b="NAME";break;case "z204":b="200";break;case "z202":b="2";break;case "z210":b="2";break;case "z211":b="0.05";break;case "z156":b="170";break;case "z155":b="12";break;case "DEFAULT_MEASURECAPTIONBACKOPACITY":b="0.3";break;case "z154":b="11";break;case "z135":b="hotspots.xml";break;
case "z130":b="6";break;case "z130CANVAS":b="12";break;case "z161":b="2";break;case "z152":b="7";break;case "z129":b="14";break;case "z160":b="3";break;case "z151":b="14";break;case "z115":b="1.8";break;case "z134":b=!0;break;case "DEFAULT_HOTSPOTSMINSCALE":b="0.2";break;case "DEFAULT_HOTSPOTSMAXSCALE":b="2";break;case "z132":b="NAME";break;case "z133":b="200";break;case "z131":b="2";break;case "z138":b="0";break;case "z142":b="1";break;case "z137":b="150";break;case "z116":b="1";break;case "z217":b=
"1";break;case "z136":b="1";break;case "z189":b="1";break;case "z181":b="1";break;case "DEFAULT_ANNOTATIONPANELVISIBLE":b="2";break;case "DEFAULT_ANNOTATIONSADDMULTIPLE":b="1";break;case "DEFAULT_ANNOTATIONSAUTOSAVE":b="1";break;case "DEFAULT_ANNOTATIONSAVEBUTTONVISIBLE":b="1";break;case "DEFAULT_LABELCLICKSELECT":b="0";break;case "z69":b="annotations.xml";break;case "z68":b="annotations.json";break;case "z57":b="circle.png";break;case "z57TYPE":b="icon";break;case "z70":b="save";break;case "z71":b=
"upload";break;case "z67":b=!0;break;case "z65":b="220";break;case "z61":b="257";break;case "z62":b="11";break;case "z63":b="11";break;case "z64":b="11";break;case "z72SMALL":b="2";break;case "z72":b="3";break;case "z53":b="50";break;case "z51":b="122";break;case "z55":b="160";break;case "z54":b="88";break;case "z56":b="10";break;case "DEFAULT_ANNOTATIONCOMMENTHEIGHT":b="82";break;case "z59":b="82";break;case "z66":b="0";break;case "z52":b="1";break;case "z60":b="0";break;case "DEFAULT_ANNOTATIONCOMMENTVISIBILITY":b=
"1";break;case "z147":b="0.02";break;case "z148":b="30";break;case "z177":b=2;break;case "z179":b=.3;break;case "z180":b=300;break;case "z96":b="1";break;case "z98":b="#FFFFFF";break;case "z89":b="#FFFFFF";break;case "DEFAULT_CAPTIONBACKCOLOR":b="#000000";break;case "z177FREEHAND":b=2;break;case "z113":b="#FFFFFF";break;case "z216":b="#999999";break;case "z97":b="10";break;case "DEFAULT_IMAGESETLISTSOURCE":b="NAME";break;case "DEFAULT_IMAGESETLISTWIDTH":b="222";break;case "DEFAULT_IMAGESETLISTPOSITION":b=
"2";break;case "DEFAULT_IMAGESETSLIDERVISIBLE":b="1";break;case "z205IMAGESET":b="10";break;case "DEFAULT_ANIMATIONOPTIMALMOTIONIMAGES":b="30";break;case "DEFAULT_ANIMATIONOPTIMALPOSITIONDELTA":b="50";break;case "DEFAULT_ANIMATIONAXIS":b="horizontal";break;case "DEFAULT_ANIMATOR":b="motion";break;case "z127":b="lightgray";break;case "z126":b="white";break;case "z159":b="lightgray";break;case "z158":b="white";break;case "z99":b="lightgray";break;case "DEFAULT_TRACEDISPLAYTEXTFONTSIZE":b="11";break;
case "DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL":b="2";break;case "z229":b="#D3D3D3";break;case "z228":b="#FFFFFF";break;case "z114":b="1";break;case "z188":b="55";break;case "DEFAULT_IMAGESETXMLFILE":b=Z.animation?"animation.xml":"slidestack.xml";break;case "z9":b="Displaying or editing polygon hotspots requires a browser that supports the HTML5 canvas feature.";break;case "z12":b="Rotation requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z16":b=
"Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z8":b="\nClick the '?' button for help.";break;case "ALERT_LOADINGANNOTATIONS":b="\nLoading annotations...";break;case "z6":b="5000";break;case "z6SHORT":b="3000";break;case "z4SHORT":b="Click a button to\npick a label type";break;case "z4":b="Click a button to pick a label type.\nTips will show only on first use of each button.";break;case "ALERT_HOWTOEDITMODEVIEW":b=
"Click image to zoom-in.\nAlt-click to zoom-out.\nClick-drag to pan.";break;case "ALERT_HOWTOEDITMODEFREEHAND":b="\nClick-drag in image to draw.";break;case "ALERT_HOWTOEDITMODETEXT":b="\nClick in image to create caption. Edit text in panel.";break;case "ALERT_HOWTOEDITMODEICON":b="Select icon type from list.\nClick image to create icon.\nAlt-click-drag icon to position.";break;case "ALERT_HOWTOEDITMODERECTANGLE":b="\nClick-drag in image to create rectangle.";break;case "ALERT_HOWTOEDITMODEPOLYGON":b=
"Click in image to start polygon and add control points.\nRe-click first point to close the polygon.\nOr alt-click in image to leave polygon open.";break;case "ALERT_HOWTOEDITMODEMEASURE":b="Click in image to measure length.\nAdditional clicks measure perimeter.\nRe-click starting point to measure area.";break;case "z3":b="Click links are disabled in edit mode\nto allow hotspot positioning by click-dragging:\n";break;case "ALERT_UNSAVEDEDITSEXIST-BROWSER":b="\nYou have unsaved edits. Stay on page to save edits?";
break;case "ALERT_UNSAVEDEDITSEXIST-CUSTOM":b="\nYou have unsaved edits.\nClick Cancel to stay on page to save edits.\nClick OK to DISCARD edits and proceed.";break;case "z2":b="\nCancelling all unsaved edits.";break;case "z15":b="\nSaving unsaved edits.";break;case "z1":b="\nXML save complete.";break;case "ALERT_IMAGESAVEPREPARING":b="\nPreparing to save full image...";break;case "ALERT_VIEWSAVEPREPARING":b="\nPreparing to save view...";break;case "ALERT_IMAGESAVELOADINGDATA":b="\nDownloading image data...";
break;case "ALERT_IMAGESAVERECEIVINGTILE":b="\nReceiving image tile: ";break;case "ALERT_IMAGESAVEDRAWINGTILE":b="\nDrawing image tile: ";break;case "ALERT_IMAGESAVEDRAWINGANNOTATION":b="\nDrawing annotation: ";break;case "ALERT_IMAGESAVEUPLOADING":b="\nUploading...";break;case "ALERT_IMAGESAVEINPROGRESS":b="\nUploading image data to save as file: ";break;case "ALERT_VIEWSAVEINPROGRESS":b="\nUploading view data to save as file: ";break;case "ALERT_IMAGESAVEUNABLETOCOMPUTEPROGRESS":b="unable to calculate progress";
break;case "ALERT_IMAGESAVESUCCESSFUL":b="\nImage save complete";break;case "ALERT_IMAGESAVEHTMLCAPTIONUNSUPPORTED":b="\nSaving HTML captions to image is not currently supported";break;case "z13":b="SAVEDISABLEDFORDEMO";break;case "z14":b="\nDemo edits are saved only during the browser session.";break;case "z11":b="\nProcessing image filter...";break;case "z10":b="\nProcessing backfill image filter...";break;case "ALERT_LOADINGIMAGESET":b=Z.animation?"\nLoading animation images...":"\nLoading slidestack slides...";
break;case "ERROR_ERROR":b="error";break;case "z268LONG":b="9000";break;case "z268":b="3000";break;case "z268MEDIUM":b="1500";break;case "z268SHORT":b="750";break;case "z287":b="Parameter unrecognized or deprecated - see the Parameters List documentation: ";break;case "z275":b="Parameter deprecated - please replace: ";break;case "z288":b="Recent versions of most browsers allow dynamic content loading (such as viewing of Zoomify Images) only from a web server.  Please change your browser settings (see READ ME FIRST file for details) or use FireFox or an earlier version of your browser for local viewing.";
break;case "z290":b="Browsers allow ZIF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z289":b="Browsers allow PFF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z249":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website may be missing a file:  ";break;
case "ERROR_VALIDATEVIEW":b="Sorry!  Part of this view is not refreshing. The network\nmay be slow, or the website may be missing a file.  ";break;case "z280-ZIF":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";break;case "z247":b="Attempt to initiate Edit mode without providing path to hotspots or annotations XML data file.";break;case "z248":b="Hotspot media failed to load: possible invalid path, missing file, or legacy hotspot media such as library clip of Flash-based viewer.";
break;case "z246":b="Media of one or more hotspots unsupported: hotspot media of type 'symbol' depend on internal Library of Flash-based viewers.";break;case "z298":b="Attempt to initiate Edit mode without providing path to Save Handler - server side script or other resource to post XML data.";break;case "z297":b="Annotations cannot be saved: missing or incorrect save\nhandler path parameter, or missing file on server.";break;case "z256-ZIFBYTERANGE":b="Error loading image: ZIF file data request failed. Request content type: ";
break;case "z256-ZIFBYTES":b="Error loading image: ZIF file invalid.";break;case "z295":b="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256-PFFIMAGEHEADER":b="Error loading image: image header request invalid.";break;case "z256-PFFIMAGEOFFSET":b="Error loading image: image offset request invalid.";break;case "z256-TOOLBARSKINSXML":b="Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page. The zSkinPath parameter may be required if using a content management system such as Drupal, Joomla, or WordPress.";
break;case "z256-SLIDESXML":b="Error loading slides: please make sure slide path in web page matches slides folder location on webserver.";break;case "z256-HOTSPOTSXML":b="Error loading hotspots: please make sure hotspot path in web page matches hotspots folder location on webserver.";break;case "z256-CREATINGANNOTATIONSXMLFILE":b="Error finding annotations XML at location provided.\nCreating new file.";break;case "z256-ANNOTATIONSXML":b="Error loading annotations: please make sure annotation XML path in web page matches annotation folder location on webserver.";
break;case "z256-ANNOTATIONSJSON":b="Error loading annotations: please make sure annotation JSON path in web page matches annotation folder location on webserver.";break;case "z256-ANNOTATIONSSAVEHANDLER":b="Error saving annotations: please make sure save handler path in web page matches save handler file location on webserver.";break;case "z256":b="Error making network request:\npossible invalid path or network error.";break;case "z272":b="Error related to network security: ";break;case "z273":b=
"Error related to network status: ";break;case "z273RANGEREQUESTS":b="Network error. If using ZIF storage, setting MIME type on web server may be necessary. See READ ME FIRST file in ZIF Storage folder or contact Support: ";break;case "z244":b=" converting XML text to XML doc (DOMParser): ";break;case "z243":b=" converting XML doc to XML text (DOMParser): ";break;case "z276":b=" parsing JSON file to JSON object: ";break;case "z277":b=" parsing JSON label to JSON object: ";break;case "z294":b="Browser does not support XML DOM.";
break;case "z293":b="XML Doc invalid.";break;case "z296":b="XML invalid.";break;case "z255":b="Image XML invalid.";break;case "z252":b="Image properties XML invalid.";break;case "z250":b="Image properties invalid.";break;case "z251":b="Image properties parameter invalid.";break;case "z254":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";break;case "z245":b=" while executing callback: ";break;case "z253":b="\nImage tile request not fulfilled within time period expected";
break;case "ERROR_UNCONVERTEDIMAGEPATHINVALID":b="Unconverted JPEG or PNG image failed to load: possible invalid path, missing image, or network error.";break;case "ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE":b="\nTranslation of canvas failed";break;case "ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE":b="\nScaling of canvas failed";break;case "ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE":b="\nTransform on canvas failed";break;case "z271":b="Navigator image failed to load: possible invalid path, missing image, or network error.";
break;case "z278":b="Skin XML invalid.";break;case "z279":b="The skin XML file has one or more faulty name lines.";break;case "z291":b="Virtual pointer graphic failed to load: ";break;case "z292":b="Watermark image failed to load: ";break;case "ERROR_SAVEIMAGEHANDLERPATHINVALID":b="Image failed to save";break;case "z283":b="Unknown element style - no known method to identify.";break;case "z284":b="Unknown mouse position - no known method to calculate.";break;case "z285":b="Unknown mouse scroll - no known method to calculate.";
break;case "z286":b="Unknown window size - no known method to calculate.";break;case "z282":b="Selected filter requires assignment of increment or toggle interface.";break;case "z360":b="Launch Zoomify Website";break;case "z363":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Minimize Toolbar"+a;break;case "z341":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");
b="Expand Toolbar"+a;break;case "z400":b="Zoom Out";break;case "z385":b="Zoom In And Out";break;case "z399":b="Zoom In";break;case "z370":b="Pan Left";break;case "z372":b="Pan Up";break;case "z369":b="Pan Down";break;case "z371":b="Pan Right";break;case "z378":b="Reset Initial View\nAlt-Click: Prior View";break;case "z391":b="Enter Full View";break;case "z391EXIT":b="Exit Full View";break;case "z391EXITEXTERNAL":b="Exit Full View";break;case "z342":b="Show Help";break;case "z342MARKUP":b="Show Markup Help";
break;case "z342ANNOTATION":b="Show Annotation Help";break;case "z380":b="Rotate Clockwise 90 Degrees";break;case "z381":b="Rotate Counterwise 90 Degrees";break;case "z398":b="Click-Drag To Position";break;case "z392":b="Begin Measuring";break;case "z392EXIT":b="Stop Measuring";break;case "z394":b="Prior Destination";break;case "z393":b="Next Destination";break;case "z395":b="Start Tour";break;case "z396":b="Stop Tour";break;case "z384":b="Prior Slide";break;case "z383":b="Next Slide";break;case "z386":b=
"Start Slideshow";break;case "z387":b="Stop Slideshow";break;case "z321":b="Mute Sound";break;case "z322":b="Enable Sound";break;case "z350":b="Hide Image Filter Panel";break;case "z351":b="Show Image Filter Panel";break;case "z352":b="Increase Filter";break;case "z349":b="Decrease Filter";break;case "z346":b="Apply Selected Filter";break;case "z347":b="Clear Last Application Of Selected Filter";break;case "z347ALL":b="Clear All Filters";break;case "TIP_IMAGESETPRIOR":b=Z.animation?"Prior Image":
"Prior Slide";break;case "TIP_IMAGESETSLIDER":b=Z.animation?"Change Image":"Change Slide";break;case "TIP_IMAGESETNEXT":b=Z.animation?"Next Image":"Next Slide";break;case "z397":b="Image Navigation";break;case "z334":b="Toggle Color Palette";break;case "z335":b="Freehand Drawings";break;case "z340":b="Text Labels";break;case "z336":b="Icon Labels";break;case "z339":b="Rectangle Labels";break;case "z338":b="Polygon Labels";break;case "z337":b="Measurements";break;case "z373":b="Add New POI";break;
case "z376":b="Edit Current POI";break;case "z375":b="Delete Current POI";break;case "z374":b="Cancel POI Changes";break;case "z377":b="Save POI Changes";break;case "z353":b="Add New Label";break;case "z356":b="Edit Current Label";break;case "z355":b="Delete Current Label";break;case "z354":b="Cancel Label Changes";break;case "z357":b="Save Label Changes";break;case "z364":b="Add New Note";break;case "z367":b="Edit Current Note";break;case "z366":b="Delete Current Note";break;case "z365":b="Cancel Note Changes";
break;case "z368":b="Save Note Changes";break;case "z324":b="Select Color";break;case "z325":b="Select Color";break;case "z326":b="Select Color";break;case "z327":b="Select Color";break;case "z328":b="Select Color";break;case "z329":b="Select Color";break;case "z330":b="Select Color";break;case "z331":b="Select Color";break;case "z359":b="Grow Label";break;case "z358":b="Shrink Label";break;case "z379":b="Hide Icon Until Mouse-Over";break;case "z342OK":b="Close Help Display";break;case "z362":b="Accept And Close Message";
break;case "z361":b="Decline And Close Message";break;case "z332":b="Agree To Copyright And View Images";break;case "z333":b="Exit And Do Not View Images";break;case "z382":b="Toggle Full Page View";break;case "z390":b="Toggle Viewport Display";break;case "z388":b="Toggle Viewport Backfill";break;case "z389":b="Toggle Constrain Pan";break;case "z427DISPLAY":b="www.zoomify.com";break;case "z427":b="http://www.zoomify.com";break;case "z427TARGET":b="_blank";break;case "z439":b="Navigator Bird's Eye View";
break;case "z420":b="X";break;case "z441":b=" min";break;case "z440":b=" max";break;case "z442":b="units in %s";break;case "z431":b="Length: ";break;case "z431TOTAL":b="Total length: ";break;case "z433":b="Perimeter: ";break;case "z430":b="Area: ";break;case "z434":b="\u00b2";break;case "z425":b="Select Filter Type,<>,Brightness,Contrast,Sharpness,Blurriness,<>,Edges,Inversion,Grayscale,Threshold";break;case "z426":b="null,null,brightness,contrast,sharpness,blurriness,null,edges,inversion,grayscale,threshold";
break;case "z418":b="Agree";break;case "z419":b="Exit";break;case "UI_LISTMOUSEDOWNTEXT":b="Select an item...";break;case "z444":b="Tour Destinations";break;case "z443":b="Slides";break;case "z424":b="Hotspots";break;case "z410":b="POI";break;case "z408":b="Label";break;case "z407":b="Caption";break;case "z413":b="Tooltip";break;case "z414":b="Click";break;case "z412":b="Scale";break;case "z411":b="Rollover";break;case "z409":b="Note";break;case "z403":b="Select Icon Type,Circle,Triangle,Square,Arrow Down,Arrow Down Left,Arrow Down Right,Arrow Left,Arrow Right,Arrow Up,Arrow Up Left,Arrow Up Right,Line Horizontal,Line Vertical,External Graphics File";
break;case "z404":b="shim,circle.png,triangle.png,square.png,arrowDown.png,arrowDownLeft.png,arrowDownRight.png,arrowLeft.png,arrowRight.png,arrowUp.png,arrowUpLeft.png,arrowUpRight.png,lineHorizontal.png,lineVertical.png,External Graphics File";break;case "z401":b="Caption position...,Bottom Left,Bottom Center,Bottom Right,Center Left,Center Center,Center Right,Top Left,Top Center,Top Right";break;case "z402":b="shim,7,8,9,4,5,6,1,2,3";break;case "z405":b="Open URL in...,Same Window,New Window,Parent Frame,Top Frame";
break;case "z406":b="shim,_self,_blank,_parent,_top";break;case "UI_IMAGESETLISTTITLE":b="ImageSet Slide List";break;case "UI_IMAGESETSTART":b="0";break;case "UI_IMAGESETLOOP":b="1";break;case "UI_IMAGESETSLIDER":b="1";break;case "z422":b="430";break;case "z421":b="300";break;case "z423":b="OK";break;case "z437":b="430";break;case "z436":b="84";break;case "z435":b="Cancel";break;case "z438":b="OK";break;case "z417":b="290";break;case "z415":b="200";break;case "z416":b="Mouse Coordinates\nAlt-click, select in list, right-click, Copy";
break;case "UI_TRACEDISPLAYTITLE":b="Trace Values\n\n";break;case "z445":b="This panel is enabled using the HTML parameter 'zDebug=1' (basic) or 'zDebug=2' (adds tile tracing). It can be called in JavaScript as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";break;case "UI_TRACEDISPLAYTILESTATUSTEXT":b=
"Required Cached Requested Loaded Displayed Waiting";break;case "UI_TRACEDISPLAYELAPSEDTIMETEXT":b="Seconds";break;case "UI_TRACEDISPLAYTILESPERSECONDTEXT":b="Loads / Second";break;case "z446":b="Show Globals";break;case "z449":b="Toggle Display";break;case "z447":b="Toggle Backfill";break;case "z448":b="Toggle Constrain Pan";break;case "z32":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply click the image to zoom, double-click to zoom out, or click-drag to pan.<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.</font></p>";
break;case "z31":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Markup Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>Markup Mode allows fast, easy addition of labels to a zoomable image.<br><br><strong>Creating A Label</strong><br><br>Click any of the buttons at the top of the Markup Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Next, click or click-drag in the image:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and positioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons but the caption dynamically changes to display the current length or area.<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul>Use the Color button to set a color. The color selected affects freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode.<br><br><strong>Editing Label Values</strong><br><br>The Markup Panel also displays the name and caption of the currently selected label for easy editing. Use the TAB key to implement any edits or click in the image.<br><br>Delete a label using the trash can button. The label will be removed from the image and the Markup Panel will display the prior label in the label list.<br><br>Save a label using the button with the disk icon. Or, use the label list to change the selected label - the previously selected label will be automatically saved.<br><br><i><strong>Special Tips:</strong><ul><li>Alt-click any label to display its name and caption in the Markup Panel for editing.<li>Alt-click-drag any completed label to reposition it in the image.<li>If using a mouse, hold the cursor over any button at any time to see a helpful reminder.</ul></i></font></p>";
break;case "z28":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Editing Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive, visual means, to add <i>Points of Interest</i> to a zoomable image, including the option of associated <i>Labels</i> and <i>Notes</i>.<br><br><strong>Point Of Interests</strong><br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>To create a Point Of Interest, click the <i>Add</i> button beneath the Point Of Interest choice list at the top of the Annotation Panel to create a new Point of Interest. Or, click the <i>Edit</i> button to modify the current POI. If no Annotations have been created, a placeholder POI will be the only item in the Point Of Interest list.<br><br><i><strong>More Buttons:</strong></i><br><br>When the Add button is clicked, two different buttons will be displayed: <i>Save</i> and <i>Cancel</i>. If the Edit button is clicked, a third button will also be displayed: <i>Delete</i>.<br><br>Save a Point Of Interest using the button with the disk icon. Cancel edits to a Point Of Interest using the button with the large X icon.<br><br>Delete a Point Of Interest using the trash can button. The POI will be removed from the list and the prior POI in the list will be displayed.<br><br><i><strong>Important:</strong><ul><li>Changing the selected POI in the POI list will automatically save any edits to the current POI.<li>Clicking any of the buttons Save, Cancel, and Delete will leave the Add or Edit mode and return to Annotation Panel to its default display.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Labels</strong><br><br>To add a new Label to the current Point Of Interest, click the Add button beneath the Label section of the Annotation Panel. Or, click the Edit button to edit the current Label. If no Labels have been created yet, the Label list will be empty.<br><br>If adding a new Label, click any of the buttons at the top of the Label section of the Annotation Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Now click or click-drag in the image to create a new Label:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and repositioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons except that the caption dynamically changes to display the current length or area.</ul>Use the Color button to set the color of new freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode in the current Label.<br><br><i><strong>Important:</strong><ul><li>In Add mode, multiple clicks or click-drags will create multiple Labels - to support rapid annotation authoring.<li>In Edit mode, any clicks or click-drags will simple replace the current Label in the image.<li>Alt-click any label in the image to display its values in the Annotatoin Panel for editing. (Add or Edit mode)<li>Alt-click-drag any completed label in the image to reposition it.  (Add or Edit mode)<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul></i><i><strong>More Label Values:</strong></i><br><br>The Annotation Panel also displays the name, caption, tooltip, and click-URL of of the currently selected label for easy editing. Use the TAB key to implement any edits or click in another text field or in the image. <br><br>Two choice lists are also included: the first allows the caption to be positioned relative to the Label in the image while the second determines whether the click-URL (if any) will open in the current browser window or a new browser window or a specific frame in the web page. <br><br>The Scale buttons allow the Label to be sized in the image.  The Rollover checkbox can be used to hide a Label in the image until the cursor is over it (not supported by mobile devices).<br><br>The Save, Cancel, and Delete buttons for Labels work just as they do with Points of Interest, as described above. And remember, changing the selected Label in the Label list will automatically save any edits to the current Label. Alt-clicking or alt-click-dragging a Label in the image will also change the current Label in the Label list and cause any edits to be saved (see the first two Special Tips below).<br><br><i><strong>Important:</strong><ul><li>Changing the selected Label by clicking or click-dragging it in the image will change the selected Point Of Interest if the newly selected Label is associated with a different POI - if editing is in progress the edits will be automatically saved.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Notes</strong><br><br>To add a new Note to the current Point Of Interest, click the Add button beneath the Note section of the Annotation Panel. Or, click the Edit button to edit the current Note. If no Notes have been created yet, the Note list will be empty.<br><br>Use the name and text fields to easily add or edit the Note values. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area. Notes can contain carriage returns.<br><br>The Save, Cancel, and Delete buttons for Notes work just as they do with Points of Interest, as described above. And remember, changing the selected Note in the Note list will automatically save any edits to the current Note.</font></p>";
break;case "z30":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>\\/ \\/ \\/</strong></font></p>";break;case "z29":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive display of <i>Points of Interest</i> in a zoomable image, along with associated <i>Labels</i> and <i>Notes</i>, if any.<br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>A Label is a visual element in the image: a freehand drawing, text caption, rectangle or other polygon, or a measurement.<br><br>A Note is text associated with a Point Of Interest. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area.</font></p>";
break;case "z50":b="Anonymous";break;case "z27":b="Whole Image";break;case "z43":b="New Point Of Interest ";break;case "z44":b=this.getResource("z50");break;case "z34":b="New Hotspot ";break;case "z33":b="Caption for hotspot ";break;case "z37":b="New Label ";break;case "z35":b="Caption for label ";break;case "CONTENT_LABELCOMMENT":b="Comment for label ";break;case "CONTENT_LABELCOMMENTMARKUPNOLABELS":b="Pick a label type above then click in the image to create!";break;case "CONTENT_ANNOTATIONPLACEHOLDERCOMMENTTEXT":b=
"";break;case "z45":b="Polygon ";break;case "z38":b="Tooltip for label ";break;case "z36":b="";break;case "z39":b=this.getResource("z50");break;case "z40":b="New Note ";break;case "z41":b="Note text";break;case "z42":b=this.getResource("z50");break;case "z20":b="List creation in progress...";break;case "z21":b="Note loading in progress...";break;case "z25":b=Z.captionTextColor?Z.captionTextColor:"#FFFFFF";break;case "z22":b=Z.captionBackColor?Z.captionBackColor:"#000000";break;case "z48":b=Z.polygonLineColor?
Z.polygonLineColor:"#FFFFFF";break;case "z46":b=Z.polygonFillColor?Z.polygonFillColor:"#FFFFFF";break;case "z26":b=Z.captionTextVisible?"1":"0";break;case "z23":b=Z.captionBackVisible?"1":"0";break;case "z49":b=Z.polygonLineVisible?"1":"0";break;case "z47":b=Z.polygonFillVisible?"1":"0";break;case "z24":b="8";break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},
clearCanvas:function(a){a=a.getContext("2d");a.save();try{a.setTransform(1,0,0,1,0,0)}catch(b){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE")),console.log("In function clearCanvas setting transform on canvas:  "+b)}a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},colorCanvas:function(a,b){var c=a.getContext("2d");c.save();c.setTransform(1,0,0,1,0,0);c.fillStyle=b;c.fillRect(0,0,c.canvas.width,c.canvas.height);c.restore()},deleteDiv:function(a){for(a=
document.getElementById(a);a.hasChildNodes();)a.removeChild(a.lastChild);a.parentNode.removeChild(a)},createCallback:function(a,b){for(var c=[],d=2,f=arguments.length;d<f;d++)c[c.length]=arguments[d];return function(){for(var d=c.concat([]),f=0,n=arguments.length;f<n;f++)d[d.length]=arguments[f];return b.apply(a,d)}},validateCallback:function(a){var b=Z.callbacks.slice(0);Z.Utils.functionCallWithDelay(function(){Z.Utils.validateCallbackDelayed(a,b)},10)},validateCallbackDelayed:function(a,b){for(var c=
0,d=b.length;c<d;c++){var f=b[c];if(f&&f.callbackEvent==a&&"object"===typeof f&&"function"===typeof f.callbackFunction)switch(a){case "viewZoomingGetCurrentZoom":var l=Z.Viewport.getZoom();f.callbackFunction(l);break;case "viewUpdateCompleteGetLabelIDs":l=Z.Viewport.getLabelIDsInCurrentView(!1,!0,!0);f.callbackFunction(l);break;case "viewUpdateCompleteGetLabelInternalIDs":l=Z.Viewport.getLabelIDsInCurrentView(!0,!0,!0);f.callbackFunction(l);break;case "labelSavedGetJSONObject":if(l=Z.Viewport.getCurrentLabel())l=
l.internalID,l=Z.Viewport.getLabelJSONObject(l,!0),f.callbackFunction(l);break;case "labelCreatedGetInternalID":Z.Viewport&&Z.Viewport.getStatus("XMLParsed")&&(l=Z.Viewport.getCurrentLabel())&&(l=l.internalID,f.callbackFunction(l));break;case "labelSelectedInViewportGetIDs":Z.Viewport&&(l=Z.Viewport.getCurrentLabel())&&f.callbackFunction(l.id,l.internalID);break;case "currentLabelChangedGetID":Z.Viewport&&(l=Z.Viewport.getCurrentLabel())&&f.callbackFunction(l.id,l.internalID);break;default:f.callbackFunction()}}Z.Utils.arrayClear(b)},
getContainerSize:function(a,b){var c=Z.Utils.getElementStyle(a),d=parseFloat(c.width),f=parseFloat(c.height);Z.Utils.stringValidate(c.width)&&-1!=c.width.indexOf("%")&&(d=parseFloat(Z.Utils.getElementStyleProperty(a,"width")));Z.Utils.stringValidate(c.height)&&-1!=c.height.indexOf("%")&&(f=parseFloat(Z.Utils.getElementStyleProperty(a,"height")));isNaN(d)&&(d=b.clientWidth);isNaN(f)&&(f=b.clientHeight);if(0==d||0==f)winDimensions=Z.Utils.getWindowSize(),0==d&&(a.parentNode.style.width=winDimensions.x+
"px",d=a.clientWidth),0==f&&(a.parentNode.style.height=winDimensions.y+"px",f=a.clientHeight);return new Z.Utils.Point(d,f)},createContainerElement:function(a,b,c,d,f,l,k,n,C,E,B,Q,G,M,q,P,W){var w=document.createElement(a);this.stringValidate(b)&&(w.id=b);b=w.style;b.display=this.stringValidate(c)?c:"inline-block";b.position=this.stringValidate(d)?d:"static";b.overflow=this.stringValidate(f)?f:"hidden";"canvas"==a?(this.stringValidate(l)&&w.setAttribute("width",l),this.stringValidate(k)&&w.setAttribute("height",
k)):(this.stringValidate(l)&&(b.width=l),this.stringValidate(k)&&(b.height=k));this.stringValidate(n)&&(b.left=n);this.stringValidate(C)&&(b.top=C);b.borderStyle=this.stringValidate(E)?E:"none";b.borderWidth=this.stringValidate(B)?B:"0px";b.borderColor="#696969";b.background=this.stringValidate(Q)?Q:"transparent none";b.margin=this.stringValidate(G)?G:"0px";b.padding=this.stringValidate(M)?M:"0px";b.whiteSpace=this.stringValidate(q)?q:"normal";this.stringValidate(P)&&(b.cursor=P);"undefined"!==W&&
W&&(Z.Utils.addEventListener(w,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(w,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(w,"contextmenu",Z.Utils.preventDefault));return w},createCenteredElement:function(a,b){var c=this.createContainerElement("div"),d=[];d[d.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';d[d.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';
d[d.length]='<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';c.innerHTML=d.join("");for(var d=c=c.firstChild,f=c.getElementsByTagName("div");0<f.length;)d=f[0],f=d.getElementsByTagName("div");d.appendChild(a);return c},createTextElement:function(a,b,c,d,f,l,k,n,C,E,B,Q,G,M,q,P,W,w){c=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",c,d,f,l,n,C,"white","0px",k,"normal");
d=document.createElement("textarea");c.appendChild(d);f=d.style;d.id=a;d.value=b;d.readOnly=E;f.width="100%";f.height="100%";f.margin="0";f.border="0";this.stringValidate(B)&&(f.fontFamily=B);this.stringValidate(Q)&&(f.fontSize=Q);this.stringValidate(G)&&(f.resize=G);this.stringValidate(M)&&(d.columns=M);this.stringValidate(q)&&(d.rows=q);this.stringValidate(P)&&(f.overflowX=P);this.stringValidate(W)&&(f.overflowY=W);this.stringValidate(w)&&(d.wrap=w,"off"==w&&(f.whiteSpace="nowrap"));return c},createSelectElement:function(a,
b,c,d,f,l,k,n,C,E){var B=document.createElement("select");B.id=a;Z.Utils.stringValidate(b)&&"none"!=b&&(B.options[0]=new Option(b,null));a=0;for(b=c.length;a<b;a++)B.options[B.options.length]=new Option(c[a].text,c[a].value);Z.Utils.addEventListener(B,"undefined"!==typeof E&&null!==E?E:"change",C);c=B.style;c.width=d+"px";c.position="absolute";c.left=f+"px";c.top=l+"px";c.fontSize=null==k?"11px":k+"px";c.fontFamily="verdana";c.visibility=n;return B},updateSelectElement:function(a,b,c){if(a){var d=
-1!=a.selectedIndex?a.selectedIndex:0;a.innerHTML="";for(var f=0,l=b.length;f<l;f++)a.options[a.options.length]=new Option(b[f].text,b[f].value.toString());"undefined"!==typeof c&&null!==c&&(b=parseInt(Z.Utils.arrayIndexOfObjectValue(b,"value",c),10),-1!=b&&(d=b));b=a.options.length-1;a.selectedIndex=d<=b?d:b}},getChildElementByID:function(a,b){for(var c=null,d=0,f=a.childNodes.length;d<f&&(c=a.childNodes[d],c.id!=b)&&(c=Z.Utils.getChildElementByID(c,b),null===c);d++);return c},getElementPosition:function(a){for(var b=
0,c=0,d="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,d);f;)b+=a.offsetLeft,c+=a.offsetTop,d&&(a=this.getPageScroll(),b+=a.x,c+=a.y),a=f,d="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,d);return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,
"");this.showMessage(this.getResource("z283"))},getElementStyleProperty:function(a,b){if(window.getComputedStyle)return window.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return a.currentStyle[b];this.showMessage(this.getResource("z283"))},isElementFluid:function(a){var b,c,d,f,l,k=a.cloneNode(!1);d=c=!1;window.getComputedStyle?value=window.getComputedStyle(k,null).width:k.currentStyle&&(value=k.currentStyle.width);"undefined"!==typeof value&&null!==value&&""!==value?c=-1!=value.toString().indexOf("%")||
"auto"==value:(k.style.margin="0",k.style.padding="0",k.style.maxWidth="none",k.style.minWidth="none",b=document.createElement("testContainer"),b.style.display="block",b.style.width="800px",b.style.padding="0",b.style.margin="0",b.appendChild(k),a.parentNode.insertBefore(b,a),c=k.offsetWidth,b.style.width="900px",k.offsetWidth==c?(a.parentNode.removeChild(b),c=!1):(f=Math.floor(.125*c),l=Math.floor(100/900*k.offsetWidth),a.parentNode.removeChild(b),c=f==l?!0:!1));0==d&&(window.getComputedStyle?value=
window.getComputedStyle(k,null).height:k.currentStyle&&(value=k.currentStyle.height),"undefined"!==typeof value&&null!==value&&""!=value?d=-1!=value.toString().indexOf("%")||"auto"==value:(k.style.margin="0",k.style.padding="0",k.style.maxHeight="none",k.style.minHeight="none",b=document.createElement("testContainer"),b.style.display="block",b.style.height="800px",b.style.padding="0",b.style.margin="0",b.appendChild(k),a.parentNode.insertBefore(b,a),d=k.offsetHeight,b.style.height="900px",k.offsetHeight==
d?(a.parentNode.removeChild(b),d=!1):(f=Math.floor(.125*d),l=Math.floor(100/900*k.offsetHeight),a.parentNode.removeChild(b),d=f==l?!0:!1)));return c||d},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=null,c=a.touches;a=a.changedTouches;"undefined"!==typeof c?b=c[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=0,c=0;"DOMMouseScroll"==a.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,
c=a.screenY):"number"===typeof a.pageX?(b=a.pageX,c=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("z284"));return new this.Point(b,c)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:"number"===typeof a.detail?b=-1*a.detail:this.showMessage(this.getResource("z285"));return b?b/Math.abs(b):0},getPageScroll:function(){var a=
0,b=0,c=document.documentElement||{},d=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(d.scrollLeft||d.scrollTop)a=d.scrollLeft,b=d.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,b=c.scrollTop;return new this.Point(a,b)},getScreenSize:function(){return new this.Point(screen.width,screen.height)},getWindowSize:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};"number"===typeof window.innerWidth?(a=window.innerWidth,
b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):d.clientWidth||d.clientHeight?(a=d.clientWidth,b=d.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(a,b)},Button:function(a,b,c,d,f,l,k,n,C,E,B,Q,G,M,q,P,W,w,I,r){a=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",k,n,C,E,M,q,P,W,w,I,r);if(Z.Utils.stringValidate(b)){var L=document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(L));Z.Utils.setTextNodeStyle(L,
"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{c=Z.Utils.stringRemoveTrailingSlashCharacters(c);var ma=Z.Utils.createGraphicElement(c+"/"+d),ja=Z.Utils.createGraphicElement(c+"/"+f),La=Z.Utils.createGraphicElement(c+"/"+l);ma.style.width=ja.style.width=La.style.width=k;ma.style.height=ja.style.height=La.style.height=n;ma.style.position=ja.style.position=La.style.position="absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(ma.style.top=ja.style.top=
La.style.top="");ja.style.visibility=La.style.visibility="hidden";ma.alt=ja.alt=La.alt="";"undefined"!==typeof G&&Z.Utils.stringValidate(G)&&(ma.alt=Z.Utils.getResource(G));a.appendChild(ma);a.appendChild(ja);a.appendChild(La)}Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mouseup",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,
"mouseout",Z.Utils.stopPropagation);"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(ma,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ja,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(La,"contextmenu",Z.Utils.preventDefault));Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchend",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault);Z.Utils.stringValidate(b)||(Z.Utils.disableTextInteraction(L),
Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.stringValidate(G)&&(a.title=Z.Utils.getResource(G));Z.Utils.setButtonHandler(a,B,Q);this.elmt=a},buttonSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=c+"px";c=a.firstChild;d=a.childNodes[1];a=a.childNodes[2];c&&d&&a&&(c.style.width=d.style.width=a.style.width=b+"px",c.style.height=d.style.height=a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);Z.Utils.setButtonState(a,
"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(a){var b=a.firstChild,c=a.childNodes[1],d=a.childNodes[2];b&&c&&d&&(b.style.visibility=c.style.visibility=d.style.visibility="hidden",Z.Utils.removeEventListener(b,"mouseover",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(d,"mouseup",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchstart",Z.Toolbar.z457),
Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchcancel",Z.Toolbar.z457));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.z457)},setButtonState:function(a,b){var c="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];c&&(c.style.visibility="visible")},setButtonHandler:function(a,
b,c){c="undefined"!==c?c:Z.Toolbar.z457;var d="undefined"!==b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&(a=a.childNodes[1]);Z.Utils.addEventListener(a,"mousedown"==b?"touchstart":"touchend",c);Z.Utils.addEventListener(a,d,c)},Checkbox:function(a,b,c,d,f,l,k,n,C){var E=Z.Utils.createContainerElement("div",
"containerFor-"+a,"inline-block","absolute","hidden",c,d,f,l,"none","0px","transparent none","0px","0px","normal"),B=document.createElement("input");E.appendChild(B);B.type="checkbox";B.id=a;B.value=b;B.width=c;B.height=d;a=E.style;a.width=c+"px";a.height=d+"px";a.left=f+"px";a.top=l+"px";Z.Utils.addEventListener(B,k,n);Z.Utils.addEventListener(B,"touchstart",n);Z.tooltipsVisible&&Z.Utils.stringValidate(C)&&(B.title=Z.Utils.getResource(C));return E},Graphic:function(a,b,c,d,f,l,k,n){b=Z.Utils.stringRemoveTrailingSlashCharacters(b);
b=Z.Utils.createGraphicElement(c?b+"/"+c:b);c=b.style;c.width=d;c.height=f;"undefined"!==typeof n&&Z.Utils.stringValidate(n)?b.alt=Z.Utils.getResource(n):b.alt="";c=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",d,f,l,k,"none","0px","transparent none","0px","0px","normal");c.appendChild(b);this.elmt=c;Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault)},
createGraphicElement:function(a){var b=this.createContainerElement("img"),c=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(c=this.createContainerElement("span",null,"inline-block"),b.onload=function(){c.style.width=c.style.width||b.width+"px";c.style.height=c.style.height||b.height+"px";b=b.onload=null},c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale")'):(c=b,c.src=a);return c},graphicSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=
c+"px";a=a.firstChild.style;a.width=b+"px";a.height=c+"px"},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,c){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0;this.z="number"===typeof c?c:0},Trio:function(a,b,c){this.a=a;this.b=b;this.c=c},Range:function(a,b){this.start="number"===typeof a?a:0;this.end="number"===typeof b?b:0},swapZIndices:function(a,b){var c=Z.Utils.getElementStyleProperty(a,"z-index"),d=Z.Utils.getElementStyleProperty(b,
"z-index");a.style.zIndex=d;b.style.zIndex=c},stringValidate:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&"null"!==a},stringReadable:function(a){return a.replace(RegExp("%20","g")," ")},stringLowerCaseFirstLetter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},stringUpperCaseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},stringMultiply:function(a,b){var c=Math.ceil(Math.log(b)/Math.LN2),d=a;do d+=d;while(0<--c);return d.slice(0,a.length*b)},stringRemoveTrailingSlashCharacters:function(a){return"/"==
a.slice(-1,a.length)?a.slice(0,a.length-1):a},stringRemoveTabAndLineWrapCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");return a=a.replace(/\t/g,"")},stringUnescapeAmpersandCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/&#38;/g,"&");a=a.replace(/&#038;/g,"&");return a=a.replace(/&amp;/g,"&")},setHTMLTextDefaultCaptionStyle:function(a,b,c,d,f,l,k,n,C,E,B,Q,G){a=a.style;-1==b.indexOf("color=")&&(a.color=c);-1==b.indexOf("font-family=")&&(a.fontFamily=d);-1==b.indexOf("font-size=")&&
(a.fontSize=f);-1==b.indexOf("font-size-adjust=")&&(a.fontSizeAdjust=l);-1==b.indexOf("font-style=")&&(a.fontStyle=k);-1==b.indexOf("font-stretch=")&&(a.fontStretch=n);-1==b.indexOf("font-variant=")&&(a.fontVariant=C);-1==b.indexOf("font-weight=")&&(a.fontWeight=E);-1==b.indexOf("line-height=")&&(a.lineHeight=B);-1==b.indexOf("text-align=")&&(a.textAlign=Q);-1==b.indexOf("text-decoration=")&&(a.textDecoration=G)},setHTMLTextStyle:function(a,b,c,d,f,l,k,n,C,E,B,Q){a=a.style;a.color=b;a.fontFamily=
c;a.fontSize=d;a.fontSizeAdjust=f;a.fontStyle=l;a.fontStretch=k;a.fontVariant=n;a.fontWeight=C;a.lineHeight=E;a.textAlign=B;a.textDecoration=Q},setTextAreaStyle:function(a,b,c,d,f,l,k,n,C,E,B,Q,G){a=a.firstChild.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=f;a.fontStyle=l;a.fontStretch=k;a.fontVariant=n;a.fontWeight=C;a.lineHeight=E;a.textAlign=B;a.textDecoration=Q;a.padding=G},setTextNodeStyle:function(a,b,c,d,f,l,k,n,C,E,B,Q){a=a.parentNode.style;a.color=b;a.fontFamily=c;a.fontSize=
d;a.fontSizeAdjust=f;a.fontStyle=l;a.fontStretch=k;a.fontVariant=n;a.fontWeight=C;a.lineHeight=E;a.textAlign=B;a.textDecoration=Q},stringValidateColorValue:function(a){Z.Utils.stringValidate(a)||(a="#000000");0!=a.indexOf("#")&&(a="#"+a);return a},hexToRGB:function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,d,f){return c+c+d+d+f+f});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},xmlConvertTextToDoc:function(a){var b=
null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){this.showMessage(c.name+this.getResource("z244")+c.message)}else if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(d){this.showMessage(d.name+this.getResource("z244")+d.message)}else this.showMessage(this.getResource("z294"));return b},xmlConvertDocToText:function(a){var b=null;if(window.ActiveXObject)try{b=a.xml}catch(c){this.showMessage(c.name+this.getResource("z243")+
c.message)}else if(window.DOMParser)try{b=(new XMLSerializer).serializeToString(a)}catch(d){this.showMessage(d.name+this.getResource("z243")+d.message)}else this.showMessage(this.getResource("z294"));return b},xmlEscapeMinimal:function(a){var b=null;"undefined"!==typeof a&&null!==a&&(b=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\r?\n/g,"%0A"));return b},xmlUnescapeMinimal:function(a){var b=null;"undefined"!==typeof a&&null!==
a&&(b=a.replace(/%0A/g,"\n").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"));return b},jsonConvertObjectToXMLText:function(a){var b=function(a,c){var d="";if(a instanceof Array)for(var n=0,C=a.length;n<C;n++)d+=b(a[n],c)+"\n";else if("object"===typeof a){n=!1;d+="<"+c;for(C in a)"object"!==typeof a[C]?d+=" "+C+'="'+a[C].toString()+'"':n=!0;d+=">";if(n)for(C in a)"#text"==C?d+=a[C]:"object"===typeof a[C]&&(d+=b(a[C],C));d+="</"+c+">"}else d+=
"<"+c+">"+a.toString()+"</"+c+">";return d},c="",d;for(d in a)c+=b(a[d],d);return c.replace(/\t|\n/g,"")},jsonConvertXMLTextToJSONText:function(a){var b={convertToObject:function(a){var d={};if(1==a.nodeType){if(a.attributes.length)for(var f=0,l=a.attributes.length;f<l;f++)d[a.attributes[f].nodeName]=(a.attributes[f].nodeValue||"").toString();if(a.firstChild){for(var f=0,l=!1,k=a.firstChild;k;k=k.nextSibling)1==k.nodeType?l=!0:3==k.nodeType&&k.nodeValue.match(/[^ \f\n\r\t\v]/)&&f++;if(l)if(2>f)for(b.reduceWhitespace(a),
k=a.firstChild;k;k=k.nextSibling)3==k.nodeType?d["#text"]=b.escapeMinimal(k.nodeValue):d[k.nodeName]?d[k.nodeName]instanceof Array?d[k.nodeName][d[k.nodeName].length]=b.convertToObject(k):d[k.nodeName]=[d[k.nodeName],b.convertToObject(k)]:d[k.nodeName]=b.convertToObject(k);else a.attributes.length?d["#text"]=b.escapeMinimal(b.innerXML(a)):d=b.escapeMinimal(b.innerXML(a));else f&&(a.attributes.length?d["#text"]=b.escapeMinimal(b.innerXML(a)):d=b.escapeMinimal(b.innerXML(a)))}a.attributes.length||a.firstChild||
(d=null)}else 9==a.nodeType?d=b.convertToObject(a.documentElement):alert("This node type not supported : "+a.nodeType);return d},convertToJSONText:function(a,d){var f=d?'"'+d+'"':"";if(a instanceof Array){for(var l=0,k=a.length;l<k;l++)a[l]=b.convertToJSONText(a[l],"","\t");f+=(d?":[":"[")+(1<a.length?"\n\t"+a.join(",\n\t")+"\n":a.join(""))+"]"}else if(null==a)f+=(d&&":")+"null";else if("object"===typeof a){l=[];for(k in a)l[l.length]=b.convertToJSONText(a[k],k,"\t");f+=(d?":{":"{")+(1<l.length?"\n\t"+
l.join(",\n\t")+"\n":l.join(""))+"}"}else f="string"==typeof a?f+((d&&":")+'"'+a.toString()+'"'):f+((d&&":")+a.toString());return f},reduceWhitespace:function(a){a.normalize();for(var d=a.firstChild;d;)if(3==d.nodeType)if(d.nodeValue.match(/[^ \f\n\r\t\v]/))d=d.nextSibling;else{var f=d.nextSibling;a.removeChild(d);d=f}else 1==d.nodeType&&b.reduceWhitespace(d),d=d.nextSibling;return a},escapeMinimal:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,
"\\r")},innerXML:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var f=function(a){var b="";if(1==a.nodeType){for(var b=b+("<"+a.nodeName),c=0,d=a.attributes.length;c<d;c++)b+=" "+a.attributes[c].nodeName+"='"+(a.attributes[c].nodeValue||"").toString()+"'";if(a.firstChild){b+=">";for(c=a.firstChild;c;c=c.nextSibling)b+=f(c);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType&&(b+=a.nodeValue);return b};for(a=a.firstChild;a;a=a.nextSibling)b+=f(a)}return b}};9==a.nodeType&&(xml=xml.documentElement);
return jsonTextOut="{\n  "+b.convertToJSONText(b.convertToObject(b.reduceWhitespace(a)),a.nodeName,"\t").replace(/\t/g,"  ")+"\n}"},arrayClear:function(a){if(a)for(;0<a.length;)a.pop()},arrayClone:function(a,b,c){c=[];switch(a){case "pois":a=0;for(var d=b.length;a<d;a++)c[c.length]={text:b[a].text,value:b[a].value,id:b[a].id,x:b[a].x,y:b[a].y,z:b[a].z};break;case "labels":a=0;for(d=b.length;a<d;a++)c[c.length]={text:b[a].text,value:b[a].value,poiID:b[a].poiID,id:b[a].id};break;case "hotspots":a=0;
for(d=b.length;a<d;a++)c[c.length]={id:b[a].id,internalID:b[a].internalID,poiID:b[a].poiID,name:b[a].name,mediaType:b[a].mediaType,media:b[a].media,audio:b[a].audio,image:b[a].image,iW:b[a].iW,iH:b[a].iH,x:b[a].x,y:b[a].y,z:b[a].z,xScale:b[a].xScale,yScale:b[a].yScale,clickURL:b[a].clickURL,urlTarget:b[a].urlTarget,rollover:b[a].rollover,caption:b[a].caption,comment:b[a].comment,tooltip:b[a].tooltip,user:b[a].user,date:b[a].date,textColor:b[a].textColor,backColor:b[a].backColor,lineColor:b[a].lineColor,
fillColor:b[a].fillColor,textVisible:b[a].textVisible,backVisible:b[a].backVisible,lineVisible:b[a].lineVisible,fillVisible:b[a].fillVisible,captionPosition:b[a].captionPosition,saved:b[a].saved,visibility:b[a].visibility,captionHTML:b[a].captionHTML,tooltipHTML:b[a].tooltipHTML,polyClosed:b[a].polyClosed,polygonPts:b[a].polygonPts,showFor:b[a].showFor,transition:b[a].transition,changeFor:b[a].changeFor,rotation:b[a].rotation};break;case "polygon":a=0;for(d=b.length;a<d;a++)c[c.length]={x:b[a].x,
y:b[a].y};break;case "notes":a=0;for(d=b.length;a<d;a++)c[c.length]={text:b[a].text,value:b[a].value,noteText:b[a].noteText,poiID:b[a].poiID,id:b[a].id};break;case "magnifications":for(a=0,d=b.length;a<d;a++)c[c.length]={text:b[a].text,value:b[a].value}}return c},arrayIndexOf:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayIndexOfObjectValue:function(a,b,c,d){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var f=
a.length;d<f;d++)if(a[d][b]===c)return d}return-1},arrayIndexOfObjectTwoValues:function(a,b,c,d,f,l){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var k=a.length;d<k;d++)if(a[d][b]===c&&a[d][f].toString()===l.toString())return d}return-1},arrayIndexOfSubstring:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(-1!=a[c].indexOf(b))return c;return-1},arrayIndexOfObjectValueSubstring:function(a,b,c,d,f){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var l=
a.length;d<l;d++)if(f){if(-1!=a[d][b].toLowerCase().indexOf(c))return d}else if(-1!=a[d][b].indexOf(c))return d;return-1},arrayIntersect:function(a,b){for(var c,d,f,l=[],k=0,n=a.length;k<n;k++){c=a[k];f=!1;for(var C=0,E=b.length;C<E&&c>=(d=b[C]);C++)if(d==c){f=!0;break}f&&(l[l.length]=a[k])}return l},arrayMap:function(a,b){var c=[];if(Z.arrayMapSupported)c=a.map(b);else for(var d=0,f=a.length;d<f;d++)c[d]=b(a[d]);return c},arraySplice:function(a,b,c){if(Z.arraySpliceSupported)if(3<arguments.length)for(var d=
3,f=arguments.length;d<f;d++)a.splice(b,c,arguments[d]);else a.splice(b,c);else{0>c&&(c=0);var l=[];if(3<arguments.length)for(d=3,f=arguments.length;d<f;d++)l[l.length]=arguments[d];for(var d=Z.Utils.arraySubarray(a,0,b),k=Z.Utils.arraySubarrayLen(a,b,c),f=Z.Utils.arraySubarray(a,b+c),l=d.concat(l,f),d=a.length=0,f=l.length;d<f;d++)a[a.length]=l[d];a=k}return a},arraySubarraySimple:function(a,b){return this.slice(a,b)},arraySortNumericAscending:function(a,b,c){a.sort(function(a,b){return a-b});return a},
arraySortNumericDescending:function(a,b,c){a.sort(function(a,b){return b-a});return a},arraySortByObjectValue:function(a,b,c,d){a.sort(function(a,c){return a[b]>c[b]});return a},arraySubarray:function(a,b,c){0>b&&(b=0);if(!c||c>a.length)c=a.length;if(b==c)return[];for(var d=[];b<c;b++)d[d.length]=a[b];return d},arraySubarrayLen:function(a,b,c){if(b>=a.length||c&&0>=c)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);if(!c||c+b>a.length)c=a.length-b;for(var d=[],f=b;f<b+c;f++)d[d.length]=a[f];return d},
arraySubtract:function(a,b){for(var c=a.slice(0),d=0,f=c.length;d<f;d++){for(var l=c[d],k=!1,n=0,C=b.length;n<C&&l>=(elmt2=b[n]);n++)if(elmt2==l){k=!0;break}k&&(c=Z.Utils.arraySplice(c,d--,1))}return c},arrayToArrayOfStrings:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]="undefined"!==typeof a[c]&&"undefined"!=a[c]&&null!==a[c]?a[c].toString():"";return b},arrayUnique:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},arrayUniqueByObjectValue:function(a,
b){if("undefined"!==typeof a)for(var c=1;c<a.length;)a[c-1][b]==a[c][b]?a=Z.Utils.arraySplice(a,c,1):c++;return a},playAudio:function(a,b){Z.audioMuted||("undefined"!==typeof a&&null!==a?a.play():Z.Utils.stringValidate(b)&&(new Audio(b)).play())},loadAudio:function(a){Z.Utils.stringValidate(a)&&(new Audio(a)).load()},calculatePointsDistance:function(a,b,c,d){return Math.sqrt((a-=c)*a+(b-=d)*b)},convertPixelsToUnits:function(a,b,c){var d=1;"undefined"!==typeof b&&null!==b&&0!=b?d=b:"undefined"!==typeof c&&
null!==c&&0!=c&&(d=Z.imageW/c);return a/d},polygonArea:function(a,b,c,d){if("undefined"===typeof d||null===d)d=4;a=a.slice(0);b?a[a.length]={x:a[0].x,y:a[0].y}:"undefined"!==typeof c&&null!==c&&(a[a.length]={x:c.x,y:c.y});for(var f=c=b=0,l=a.length-1;f<l;f++)b+=a[f].x*a[f+1].y,c+=a[f].y*a[f+1].x;a=Z.Utils.convertPixelsToUnits((b-c)/2,Z.pixelsPerUnit,Z.unitsPerImage);a=Z.Utils.convertPixelsToUnits(a,Z.pixelsPerUnit,Z.unitsPerImage);return a=Z.Utils.roundToFixed(Math.abs(a),d)},polygonCenter:function(a,
b,c){var d=0,f=0;if("undefined"!==typeof a&&null!==a&&0<a.length){d=a.slice(0);b?d[d.length]={x:d[0].x,y:d[0].y}:"undefined"!==typeof c&&null!==c&&(d[d.length]={x:c.x,y:c.y});a=d[0];f=a.x;b=a.y;var l=a.x;c=a.y;for(var k=1,n=d.length;k<n;k++)a=d[k],f=Math.min(f,a.x),b=Math.min(b,a.y),l=Math.max(l,a.x),c=Math.max(c,a.y);d=f+(l-f)/2;f=b+(c-b)/2}return new Z.Utils.Point(d,f)},polygonDimensions:function(a,b){var c=0,d=0;if("undefined"!==typeof a&&null!==a&&0<a.length){c=a.slice(0);"undefined"!==typeof b&&
null!==b&&(c[c.length]={x:b.x+.1*(c[c.length-1].x-b.x),y:b.y+.1*(c[c.length-1].y-b.y)});for(var f=c[0].x,d=c[0].y,l=c[0].x,k=c[0].y,n=1,C=c.length;n<C;n++)c[n].x<f&&(f=c[n].x),c[n].x>l&&(l=c[n].x),c[n].y<d&&(d=c[n].y),c[n].y>k&&(k=c[n].y);c=l-f;d=k-d}return new Z.Utils.Point(c,d)},polygonPerimeter:function(a,b,c,d){if("undefined"===typeof d||null===d)d=5;a=a.slice(0);b?a[a.length]={x:a[0].x,y:a[0].y}:"undefined"!==typeof c&&null!==c&&(a[a.length]={x:c.x,y:c.y});c=b=0;for(var f=a.length-1;c<f;c++)b+=
Z.Utils.calculatePointsDistance(a[c].x,a[c].y,a[c+1].x,a[c+1].y);b=Z.Utils.convertPixelsToUnits(b,Z.pixelsPerUnit,Z.unitsPerImage);return b=Z.Utils.roundToFixed(Math.abs(b),d)},fullScreenView:function(a,b,c){if("undefined"===typeof c||null===c)c=!1;b?(b=document.documentElement,b.requestFullScreen?(a.requestFullScreen(),Z.Utils.addEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.mozRequestFullScreen?(a.mozRequestFullScreen(),Z.Utils.addEventListener(document,"mozfullscreenchange",
Z.Viewport.fullScreenEscapeHandler)):b.webkitRequestFullScreen?(a.webkitRequestFullScreen(),Z.Utils.addEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.msRequestFullscreen&&(a.msRequestFullscreen(),Z.Utils.addEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler))):document.cancelFullScreen?(c||document.cancelFullScreen(),Z.Utils.removeEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.msExitFullscreen?
(c||document.msExitFullscreen(),Z.Utils.removeEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler)):document.mozCancelFullScreen?(c||document.mozCancelFullScreen(),Z.Utils.removeEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.webkitCancelFullScreen&&(c||document.webkitCancelFullScreen(),Z.Utils.removeEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler))},rotatePoint:function(a,b,c){var d=Math.PI/180*
-c;c=a*Math.cos(d)-b*Math.sin(d);a=a*Math.sin(d)+b*Math.cos(d);return new Z.Utils.Point(c,a)},rotateElement:function(a,b,c){if(b!=Z.imageR||c)b="rotate("+b.toString()+"deg)",a.transform=b,a.msTransform=b,a.mozTransform=b,a.webkitTransform=b,a.oTransform=b},getDisplayPositionRotated:function(a,b){if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var c=parseFloat(a.width)/2,d=parseFloat(a.height)/2,f=Z.Utils.rotatePoint,l=new Z.Utils.Point(0,0);0!=b&&(90==b?l=f(-c,d,-b):180==b?l=f(c,d,-b):
270==b&&(l=f(c,-d,-b)),l.x+=c,l.y+=d);return new Z.Utils.Point(l.x,l.y)},translateElement:function(a,b,c){b="translate("+b.toString()+"px,"+c.toString()+"px)";a.transform=b;a.msTransform=b;a.mozTransform=b;a.webkitTransform=b;a.oTransform=b},filterImage:function(a,b,c){var d=a.data;switch(b){case "brightness":if("undefined"===typeof c||null===c)c=40;b=0;for(var f=d.length;b<f;b+=4)d[b]+=c,d[b+1]+=c,d[b+2]+=c;break;case "contrast":if("undefined"===typeof c||null===c)c=10;b=0;for(f=d.length;b<f;b+=
4){var l=Math.round((d[b]+d[b+1]+d[b+2])/3);127<l?(d[b]+=d[b]/l*c,d[b+1]+=d[b+1]/l*c,d[b+2]+=d[b+2]/l*c):(d[b]-=d[b]/l*c,d[b+1]-=d[b+1]/l*c,d[b+2]-=d[b+2]/l*c)}break;case "sharpness":a=Z.Utils.convolveImage(a,[0,-1,0,-1,5,-1,0,-1,0]);break;case "blurriness":if("undefined"===typeof c||null===c)c=3;c=Math.abs(c);if(1<c){b=c/2;f=Math.ceil(c)+(1-Math.ceil(c)%2);c=new Z.Utils.createFloat32Array(f);b=(b+.5)/3;b*=b;var d=-1/(2*b),k=1/Math.sqrt(2*Math.PI*b),n=Math.floor(f/2);for(b=l=0;b<f;b++){var C=b-n,
C=k*Math.exp(C*C*d);c[b]=C;l+=C}b=0;for(f=c.length;b<f;b++)c[b]/=l;a=Z.Utils.convolveImageSeparable(a,c,c,!1)}break;case "edges":b=new Z.Utils.createFloat32Array([-1,-1,-1,-1,8,-1,-1,-1,-1]);a=Z.Utils.convolveImage(a,b,!0);break;case "inversion":b=0;for(f=d.length;b<f;b+=4)d[b]=255-d[b],d[b+1]=255-d[b+1],d[b+2]=255-d[b+2],d[b+3]=255;break;case "grayscale":b=0;for(f=d.length;b<f;b+=4)l=d[b],k=d[b+1],n=d[b+2],d[b]=d[b+1]=d[b+2]=.2126*l+.7152*k+.0722*n;break;case "threshold":if("undefined"===typeof c||
null===c)c=128;b=0;for(f=d.length;b<f;b+=4)l=d[b],k=d[b+1],n=d[b+2],d[b]=d[b+1]=d[b+2]=.2126*l+.7152*k+.0722*n>=c?255:0}return a},getImageData:function(a){var b=this.getCanvas(a.width,a.height),c=b.getContext("2d");c.drawImage(a,0,0);return c.getImageData(0,0,b.width,b.height)},getCanvas:function(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;return c},createImageData:function(a,b){return document.createElement("canvas").getContext("2d").createImageData(a,b)},createImageDataFloat32:function(a,
b){return{width:a,height:b,data:new Z.Utils.createFloat32Array(a*b*4)}},createFloat32Array:function(a){return Z.float32ArraySupported?new Float32Array(a):Array(a)},convolveImage:function(a,b,c){var d=Math.round(Math.sqrt(b.length)),f=Math.floor(d/2),l=a.data,k=a.width;a=a.height;c=c?1:0;for(var n=Z.Utils.createImageData(k,a),C=n.data,E=0;E<a;E++)for(var B=0;B<k;B++){for(var Q=E,G=B,M=4*(E*k+B),q=0,P=0,W=0,w=0,I=0;I<d;I++)for(var r=0;r<d;r++){var L=Q+I-f,ma=G+r-f;0<=L&&L<a&&0<=ma&&ma<k&&(L=4*(L*k+
ma),ma=b[I*d+r],q+=l[L]*ma,P+=l[L+1]*ma,W+=l[L+2]*ma,w+=l[L+3]*ma)}C[M]=q;C[M+1]=P;C[M+2]=W;C[M+3]=w+c*(255-w)}return n},convolveImageHorizontal:function(a,b,c){var d=b.length,f=Math.floor(d/2),l=a.data,k=a.width;a=a.height;c=c?1:0;for(var n=Z.Utils.createImageData(k,a),C=n.data,E=0;E<a;E++)for(var B=0;B<k;B++){for(var Q=E,G=B,M=4*(E*k+B),q=0,P=0,W=0,w=0,I=0;I<d;I++)var r=Q,L=Math.min(k-1,Math.max(0,G+I-f)),r=4*(r*k+L),L=b[I],q=q+l[r]*L,P=P+l[r+1]*L,W=W+l[r+2]*L,w=w+l[r+3]*L;C[M]=q;C[M+1]=P;C[M+2]=
W;C[M+3]=w+c*(255-w)}return n},convolveImageVertical:function(a,b,c){var d=b.length,f=Math.floor(d/2),l=a.data,k=a.width;a=a.height;c=c?1:0;for(var n=Z.Utils.createImageData(k,a),C=n.data,E=0;E<a;E++)for(var B=0;B<k;B++){for(var Q=E,G=B,M=4*(E*k+B),q=0,P=0,W=0,w=0,I=0;I<d;I++)var r=4*(Math.min(a-1,Math.max(0,Q+I-f))*k+G),L=b[I],q=q+l[r]*L,P=P+l[r+1]*L,W=W+l[r+2]*L,w=w+l[r+3]*L;C[M]=q;C[M+1]=P;C[M+2]=W;C[M+3]=w+c*(255-w)}return n},convolveImageSeparable:function(a,b,c,d){return Z.Utils.convolveImageHorizontal(Z.Utils.convolveImageFloat32Vertical(a,
c,d),b,d)},convolveImageFloat32:function(a,b,c){var d=Math.round(Math.sqrt(b.length)),f=Math.floor(d/2),l=a.data,k=a.width;a=a.height;c=c?1:0;for(var n={width:k,height:a,data:new Z.Utils.Float32ArrayZ(k*a*4)},C=n.data,E=0;E<a;E++)for(var B=0;B<k;B++){for(var Q=E,G=B,M=4*(E*k+B),q=0,P=0,W=0,w=0,I=0;I<d;I++)for(var r=0;r<d;r++)var L=Math.min(a-1,Math.max(0,Q+I-f)),ma=Math.min(k-1,Math.max(0,G+r-f)),L=4*(L*k+ma),ma=b[I*d+r],q=q+l[L]*ma,P=P+l[L+1]*ma,W=W+l[L+2]*ma,w=w+l[L+3]*ma;C[M]=q;C[M+1]=P;C[M+2]=
W;C[M+3]=w+c*(255-w)}return n},convolveImageFloat32Horizontal:function(a,b,c){var d=b.length,f=Math.floor(d/2),l=a.data,k=a.width;a=a.height;c=c?1:0;for(var n=Z.Utils.createImageDataFloat32(k,a),C=n.data,E=0;E<a;E++)for(var B=0;B<k;B++){for(var Q=E,G=B,M=4*(E*k+B),q=0,P=0,W=0,w=0,I=0;I<d;I++)var r=Q,L=Math.min(k-1,Math.max(0,G+I-f)),r=4*(r*k+L),L=b[I],q=q+l[r]*L,P=P+l[r+1]*L,W=W+l[r+2]*L,w=w+l[r+3]*L;C[M]=q;C[M+1]=P;C[M+2]=W;C[M+3]=w+c*(255-w)}return n},convolveImageFloat32Vertical:function(a,b,c){var d=
b.length,f=Math.floor(d/2),l=a.data,k=a.width;a=a.height;c=c?1:0;for(var n=Z.Utils.createImageDataFloat32(k,a),C=n.data,E=0;E<a;E++)for(var B=0;B<k;B++){for(var Q=E,G=B,M=4*(E*k+B),q=0,P=0,W=0,w=0,I=0;I<d;I++)var r=4*(Math.min(a-1,Math.max(0,Q+I-f))*k+G),L=b[I],q=q+l[r]*L,P=P+l[r+1]*L,W=W+l[r+2]*L,w=w+l[r+3]*L;C[M]=q;C[M+1]=P;C[M+2]=W;C[M+3]=w+c*(255-w)}return n},intValue:function(a,b){return(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3]},longValue:function(a,b){var c=(a[b]+(a[b+1]<<8)|a[b+2]<<16)+
16777216*a[b+3];0!=a[b+4]&&(c+=4294967296*a[b+4]);return c},shortValue:function(a,b){return a[b]+(a[b+1]<<8)},createUint8Array:function(a,b){return Z.uInt8ArraySupported?new Uint8Array(a,b):new Z.Utils.TypedArray(a,b)},TypedArray:function(a){var b;if("number"===typeof a){b=Array(a);for(var c=0;c<a;++c)b[c]=0}else b=a.slice(0);b.subarray=Z.Utils.arraySubarraySimple;b.buffer=b;b.byteLength=b.length;b.set=Z.Utils.setSimple;"object"===typeof a&&a.buffer&&(b.buffer=a.buffer);return b},setSimple:function(a,
b){2>arguments.length&&(b=0);for(var c=0,d=a.length;c<d;++c,++b)this[b]=a[c]&255},encodeBase64:function(a){var b,c,d,f,l=0,k=0,n="",n=[];if(!a)return a;do b=a[l++],c=a[l++],d=a[l++],f=b<<16|c<<8|d,b=f>>18&63,c=f>>12&63,d=f>>6&63,f&=63,n[k++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);
while(l<a.length);n=n.join("");a=a.length%3;return(a?n.slice(0,a-3):n)+"===".slice(a||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=Z.tileSource||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),Z.responseArrayPrototyped=!0)},defineObjectProperty:function(a,b,c){Z.definePropertySupported?Object.defineProperty(a,b,c):(delete a[b],"get"in c&&
a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),"value"in c&&(a.__defineSetter__(b,function(a){this.__defineGetter__(b,function(){return a});return a}),a[b]=c.value))},createImageElementFromBytes:function(a,b){function c(a){d.onload=null;d.onabort=null;d.onerror=null;f&&window.clearTimeout(f);window.setTimeout(function(){b(d)},1)}var d=new Image,f=null,l=parseFloat(this.getResource("z139")),k=function(){c(!1)};d.onload=function(){c(!0)};d.onabort=k;d.onerror=k;f=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));
c(!1)},l);d.src=a},getCurrentUTCDateAsString:function(){var a=new Date,b=(10>a.getUTCMonth()+1?"0":"")+(a.getUTCMonth()+1),c=(10>a.getUTCDate()?"0":"")+a.getUTCDate(),d=(10>a.getUTCHours()?"0":"")+a.getUTCHours(),f=(10>a.getUTCMinutes()?"0":"")+a.getUTCMinutes(),l=(10>a.getUTCSeconds()?"0":"")+a.getUTCSeconds();return a.getUTCFullYear()+b+c+d+f+l},cacheProofPath:function(a){a+="?t"+(new Date).getTime().toString()+"n"+Z.cacheProofCounter.toString();Z.cacheProofCounter+=1;return a},easing:function(a,
b,c,d){b-=a;return 1>(c/=d/2)?b/2*c*c*c*c*c+a:b/2*((c-=2)*c*c*c*c+2)+a},functionCallWithDelay:function(a,b){window.setTimeout(a,b)},nodeIsInViewer:function(a){for(var b=!1;0==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;else break;return b},roundToFixed:function(a,b){var c=Math.round(a).toString().length,c=b-c,c=Math.pow(10,0>c?0:c);return a=Math.round(a*c)/c},getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},getSign:function(a){return a?0>a?-1:1:0},drawCrosshairs:function(a,
b,c){var d=Z.Utils.createContainerElement("div","viewportCenterLineVertical","inline-block","absolute","visible","1px",c+"px",b/2+"px","0px","solid","1px","transparent none","0px","0px","normal",null,!0);b=Z.Utils.createContainerElement("div","viewportCenterLineHorizontal","inline-block","absolute","visible",b+"px","1px","0px",c/2+"px","solid","1px","transparent none","0px","0px","normal",null,!0);a.appendChild(b);a.appendChild(d)},configureHelpDisplay:function(){var a=80,b=80,c=parseInt(this.getResource("z422"),
10),d=parseInt(this.getResource("z421"),10);c>=Z.viewerW&&(c=Z.viewerW-a,a-=40);d>=Z.viewerH&&(d=Z.viewerH-b,b-=40);var a=Z.viewerW-c-a,f=Z.viewerH-d-b,l=this.getResource("z127"),b=this.getResource("z126");Z.HelpDisplay=this.createContainerElement("div","HelpDisplay","inline-block","absolute","hidden",c+"px",d+"px",a+"px",f+"px","solid","1px",l,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);a=Z.Utils.createContainerElement("div","helpTextBox","inline-block","absolute",null,
c-50+"px",d-74+"px","4px","4px","solid","1px","white","0px","20px",null);a.style.overflowY="auto";Z.HelpDisplay.appendChild(a);Z.help=document.getElementById("helpTextBox");a=parseInt(Z.Utils.getResource("z230"),10);Z.HelpDisplay.style.zIndex=(a+9).toString();d=d-18-5;c-=66;a=this.getResource("z423");c=new Z.Utils.Button("buttonHelpOk",a,null,null,null,null,"56px","18px",c+"px",d+"px","mousedown",this.helpOkButtonHandler,"z342OK","solid","1px",b,"0px","0px");Z.HelpDisplay.appendChild(c.elmt)},helpOkButtonHandler:function(a){Z.Utils.hideHelp();
return!0},showHelp:function(a){Z.HelpDisplay||Z.Utils.configureHelpDisplay();Z.help&&(Z.help.innerHTML=unescape(a),Z.HelpDisplay.style.display="inline-block",document.getElementById("buttonHelpOk").style.display="inline-block")},hideHelp:function(){Z.HelpDisplay.style.display="none"},configureMessageDisplay:function(){var a=parseInt(this.getResource("z437"),10),b=parseInt(this.getResource("z436"),10),c=Z.viewerH-b-40,d=this.getResource("z159"),f=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div",
"MessageDisplay","inline-block","absolute","hidden",a+"px",b+"px","40px",c+"px","solid","1px",d,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.MessageDisplay.style.zIndex=(c+10).toString();c=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(c);Z.messages=document.getElementById("messageBox");b=b-18-
5;a-=66;c=this.getResource("z438");f=new Z.Utils.Button("buttonMessageOk",c,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.messageOkButtonHandler,"z362","solid","1px",f,"0px","0px");Z.MessageDisplay.appendChild(f.elmt)},messageOkButtonHandler:function(a){Z.Utils.hideMessage();Z.Viewport&&Z.coordinatesVisible&&Z.Viewport.setCoordinatesDisplayVisibility(!1);return!0},messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,c,d,f){if(Z.messagesVisible){Z.MessageDisplay||
Z.Utils.configureMessageDisplay();Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);var l=!0;f&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,a)?l=!1:Z.messageDisplayList[Z.messageDisplayList.length]=a);if(l&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof d&&null!==d&&(a=document.getElementById("textBoxFor-messageBox"))&&(a.firstChild.style.textAlign=d),d=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("z436"),
10),"undefined"!==typeof b&&null!==b&&b?(d.style.display="inline-block",Z.MessageDisplay.style.height=a+"px"):(d.style.display="none",Z.MessageDisplay.style.height=a-22+"px"),"undefined"!==typeof c&&null!==c&&!isNaN(c))){"undefined"!==typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof c||null===c)c=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,c)}}},getMessage:function(){var a=
"";Z.messages&&Z.Utils.stringValidate(Z.messages.value)&&(a=Z.messages.value);return a},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()},uploadProgress:function(a){var b=Z.saveImageMessage;a.lengthComputable?(a=Math.round(100*a.loaded/a.total),b+=a.toString()+"%"):b+=Z.Utils.getResource("ALERT_IMAGESAVEUNABLETOCOMPUTEPROGRESS");
Z.Utils.showMessage(b,!1,"none","center")},configureCoordinatesDisplay:function(){var a=parseInt(this.getResource("z417"),10),b=parseInt(this.getResource("z415"),10),c=Z.viewerW-a-20,d=Z.viewerH-b-30,f=this.getResource("z99");Z.CoordinatesDisplay=this.createContainerElement("div","CoordinatesDisplay","inline-block","absolute","hidden",a+"px",b+"px",c+"px",d+"px","solid","1px",f,"0px","0px","normal");Z.ViewerDisplay.appendChild(Z.CoordinatesDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.CoordinatesDisplay.style.zIndex=
(c+8).toString();c=Z.Utils.getResource("z416");c=Z.Utils.createTextElement("coordsLabelBox",c,a-18+"px","28px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(c);if(c=document.getElementById("textBoxFor-coordsLabelBox"))c.firstChild.style.textAlign="center";c=Z.Utils.createTextElement("coordsDisplayBox","",a-18+"px","18px","4px","46px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(c);
Z.coordinates=document.getElementById("coordsDisplayBox");if(c=document.getElementById("textBoxFor-coordsDisplayBox"))c.firstChild.style.textAlign="center";a=Z.Utils.createTextElement("coordsSaveBox","",a-18+"px",b-92+"px","4px","78px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(a);Z.coordinatesSave=document.getElementById("coordsSaveBox");if(a=document.getElementById("textBoxFor-coordsSaveBox"))a.firstChild.style.textAlign="center"},
showCoordinates:function(a){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinates&&(Z.coordinates.value=a)},saveCoordinates:function(a){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinatesSave&&(Z.coordinatesSave.value+=a+"\n")},configureTraceDisplay:function(){if("undefined"!==typeof Z.Viewport&&null!==Z.Viewport){var a=Z.viewerH-330,b=this.getResource("z229");Z.TraceDisplay=this.createContainerElement("div","TraceDisplay","inline-block","absolute","hidden",
"280px","280px","10px",a+"px","solid","1px",b,"0px","10px","normal");Z.ViewerDisplay.appendChild(Z.TraceDisplay);a=parseInt(Z.Utils.getResource("z230"),10);Z.TraceDisplay.style.zIndex=(a+12).toString();a=Z.Utils.getResource("UI_TRACEDISPLAYTITLE");a=Z.Utils.createTextElement("debugTraces",a,"265px","155px","10px","10px","5px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.TraceDisplay.appendChild(a);Z.traces=document.getElementById("debugTraces");var a=parseInt(Z.Utils.getResource("DEFAULT_TRACEDISPLAYTEXTFONTSIZE"),
10),b=parseInt(Z.Utils.getResource("DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL"),10),c=textH=16,d=a-2,f=Z.Utils.createContainerElement("div","labelTileStatusTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),l=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYTILESTATUSTEXT"));f.appendChild(l);Z.TraceDisplay.appendChild(f);if(f=document.getElementById("labelTileStatusTextBox"))l=f.style,l.width="275px",l.height=c+"px",
l.left="10px",l.top="183px",Z.Utils.setTextNodeStyle(f,"black","verdana",d+"px","none","normal","normal","normal","normal","1em","center","none");f=17;l=Z.Utils.createTextElement("tilesRequiredTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(l);if(l=document.getElementById("textBoxFor-tilesRequiredTextElement")){var k=l.style;k.width="37px";k.height=textH+"px";k.left=f+"px";k.top="198px";Z.Utils.setTextAreaStyle(l,
"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");f+=45}l=Z.Utils.createTextElement("tilesCachedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(l);if(l=document.getElementById("textBoxFor-tilesCachedTextElement"))k=l.style,k.width="37px",k.height=textH+"px",k.left=f+"px",k.top="198px",Z.Utils.setTextAreaStyle(l,"black","verdana",a+"px","none","normal","normal",
"normal","normal","1em","center","none",b+"px"),f+=45;l=Z.Utils.createTextElement("tilesRequestedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(l);if(l=document.getElementById("textBoxFor-tilesRequestedTextElement"))k=l.style,k.width="37px",k.height=textH+"px",k.left=f+"px",k.top="198px",Z.Utils.setTextAreaStyle(l,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",
b+"px"),f+=45;l=Z.Utils.createTextElement("tilesLoadedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(l);if(l=document.getElementById("textBoxFor-tilesLoadedTextElement"))k=l.style,k.width="37px",k.height=textH+"px",k.left=f+"px",k.top="198px",Z.Utils.setTextAreaStyle(l,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),f+=45;l=Z.Utils.createTextElement("tilesDisplayedTextElement",
"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(l);if(l=document.getElementById("textBoxFor-tilesDisplayedTextElement"))k=l.style,k.width="37px",k.height=textH+"px",k.left=f+"px",k.top="198px",Z.Utils.setTextAreaStyle(l,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),f+=45;l=Z.Utils.createTextElement("tilesWaitingTextElement","","1px","1px","1px","1px","0px","solid",
"1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(l);if(l=document.getElementById("textBoxFor-tilesWaitingTextElement"))k=l.style,k.width="37px",k.height=textH+"px",k.left=f+"px",k.top="198px",Z.Utils.setTextAreaStyle(l,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");f=Z.Utils.createContainerElement("div","labelElapsedTimeTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0);l=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYELAPSEDTIMETEXT"));f.appendChild(l);Z.TraceDisplay.appendChild(f);if(f=document.getElementById("labelElapsedTimeTextBox"))l=f.style,l.width="85px",l.height=c+"px",l.left="15px",l.top="224px",Z.Utils.setTextNodeStyle(f,"black","verdana",d+"px","none","normal","normal","normal","normal","1em","left","none");f=Z.Utils.createTextElement("tilesTimeElapsedTextElement","","1px","1px","1px","1px","0px","solid","1px",
!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(f);if(f=document.getElementById("textBoxFor-tilesTimeElapsedTextElement"))l=f.style,l.width="50px",l.height=textH+"px",l.left="67.5px",l.top="220px",Z.Utils.setTextAreaStyle(f,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");f=Z.Utils.createContainerElement("div","labelTilesPerSecondTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0);l=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYTILESPERSECONDTEXT"));f.appendChild(l);Z.TraceDisplay.appendChild(f);if(f=document.getElementById("labelTilesPerSecondTextBox"))l=f.style,l.width="85px",l.height=c+"px",l.left="130px",l.top="224px",Z.Utils.setTextNodeStyle(f,"black","verdana",d+"px","none","normal","normal","normal","normal","1em","left","none");c=Z.Utils.createTextElement("tilesPerSecondTextElement","","1px","1px","1px","1px","0px","solid",
"1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(c);if(c=document.getElementById("textBoxFor-tilesPerSecondTextElement"))d=c.style,d.width="50px",d.height=textH+"px",d.left="215px",d.top="220px",Z.Utils.setTextAreaStyle(c,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");a=58;b=10;c=this.getResource("z228");d=this.getResource("z446");d=new this.Button("buttonShowGlobals",d,null,null,null,null,a+"px","42px",b+
"px","249px","mousedown",this.showGlobals,"z382","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(d.elmt);b+=a+10;d=this.getResource("z449");d=new this.Button("buttonToggleDisplay",d,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",Z.Viewport.toggleDisplay,"z390","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(d.elmt);b+=a+10;d=this.getResource("z447");d=new this.Button("buttonToggleBackfill",d,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",Z.Viewport.toggleBackfill,
"z388","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(d.elmt);b+=a+10;a+=12;d=this.getResource("z448");a=new this.Button("buttonToggleConstrainPan",d,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",Z.Viewport.toggleConstrainPan,"z389","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(a.elmt)}else window.setTimeout(function(){Z.Utils.configureTraceDisplay()},100)},showTraces:function(){Z.TraceDisplay?Z.TraceDisplay.style.display="inline-block":Z.Utils.configureTraceDisplay()},
hideTraces:function(){Z.TraceDisplay.style.display="none"},trace:function(a,b,c){b=b?"\n":"";c=c?"\n\n":"\n";Z.TraceDisplay||Z.Utils.configureTraceDisplay();Z.traces&&(Z.traces.value+=b+a+c,2==Z.debug&&(Z.traces.scrollTop=Z.traces.scrollHeight))},traceTileStatus:function(a,b,c,d,f,l){if(!(k&&n&&C&&E&&B&&Q))var k=document.getElementById("tilesRequiredTextElement"),n=document.getElementById("tilesCachedTextElement"),C=document.getElementById("tilesRequestedTextElement"),E=document.getElementById("tilesLoadedTextElement"),
B=document.getElementById("tilesDisplayedTextElement"),Q=document.getElementById("tilesWaitingTextElement");k&&n&&C&&E&&B&&Q&&("undefined"!==typeof a&&null!==a&&(k.value=a.toString()),"undefined"!==typeof b&&null!==b&&(n.value=b.toString()),"undefined"!==typeof c&&null!==c&&(C.value=c.toString()),"undefined"!==typeof d&&null!==d&&(E.value=d.toString()),"undefined"!==typeof f&&null!==f&&(B.value=f.toString()),"undefined"!==typeof l&&null!==l&&(Q.value=l.toString()))},traceTileSpeed:function(a,b){if(!c||
!d)var c=document.getElementById("tilesTimeElapsedTextElement"),d=document.getElementById("tilesPerSecondTextElement");c&&d&&("undefined"!==typeof a&&null!==a&&(c.value=a.toString()),"undefined"!==typeof b&&null!==b&&(d.value=Math.round(b).toString()))},showGlobals:function(){var a;a="\n                            ZOOMIFY IMAGE VIEWER - CURRENT VALUES\n";a+="\n";a+="VIEW:    ";a+="Z.imageX="+Z.imageX+",   ";a+="Z.imageY="+Z.imageY+",   ";a+="Z.imageZ="+Z.imageZ+",   ";a+="Z.imageR="+Z.imageR+",   ";
a+="Z.priorX="+Z.priorX+",   ";a+="Z.priorY="+Z.priorY+",   ";a+="Z.priorZ="+Z.priorZ+",   ";a+="Z.priorR="+Z.priorR+",   ";a+="\n";a+="IMAGE & SKIN:    ";a+="Z.imagePath="+Z.imagePath+",   ";a+="Z.skinPath="+Z.skinPath+",   ";a+="Z.skinMode="+Z.skinMode+",   ";a+="Z.imageW="+Z.imageW+",   ";a+="Z.imageH="+Z.imageH+",   ";a+="tierCount="+Z.Viewport.getTierCount()+",   ";a+="z320="+Z.Viewport.getTileW()+",   ";a+="z319="+Z.Viewport.getTileH()+"\n";a+="\n";a+="PAGE & BROWSER:    ";a+="Z.pageContainer="+
Z.pageContainer+",   ";a+="Z.browser="+Z.browser+",   ";a+="Z.browserVersion="+Z.browserVersion+",   ";a+="Z.canvasSupported="+Z.canvasSupported+",   ";a+="Z.cssTransformsSupported="+Z.cssTransformsSupported+",   ";a+="Z.cssTransformProperty="+Z.cssTransformProperty+",   ";a+="Z.cssTransformNoUnits="+Z.cssTransformNoUnits+",   ";a+="Z.alphaSupported="+Z.alphaSupported+",   ";a+="Z.renderQuality="+Z.renderQuality+",   ";a+="Z.rotationSupported="+Z.rotationSupported+",   ";a+="Z.fullScreenSupported="+
Z.fullScreenSupported+",   ";a+="Z.float32ArraySupported="+Z.float32ArraySupported+",   ";a+="Z.uInt8ArraySupported="+Z.uInt8ArraySupported+",   ";a+="Z.xmlHttpRequestSupport="+Z.xmlHttpRequestSupport+",   ";a+="Z.definePropertySupported="+Z.definePropertySupported+",   ";a+="Z.responseArraySupported="+Z.responseArraySupported+",   ";a+="Z.responseArrayPrototyped="+Z.responseArrayPrototyped+",   ";a+="Z.mobileDevice="+Z.mobileDevice+",   ";a+="Z.zifSupported="+Z.zifSupported+",   ";a+="Z.localUse="+
Z.localUse+"\n";a+="\n";a+="VIEWER OPTIONS & DEFAULTS:    ";a+="Z.initialX="+Z.initialX+",   ";a+="Z.initialY="+Z.initialY+",   ";a+="Z.initialZ="+Z.initialZ+",   ";a+="Z.minZ="+Z.minZ+",   ";a+="Z.maxZ="+Z.maxZ+",   ";a+="Z.fitZ="+Z.fitZ+",   ";a+="Z.zoomSpeed="+Z.zoomSpeed+",   ";a+="Z.panSpeed="+Z.panSpeed+",   ";a+="Z.fadeInSpeed="+Z.fadeInSpeed+",   ";a+="Z.toolbarVisible="+Z.toolbarVisible+",   ";a+="Z.toolbarW="+Z.toolbarW+",   ";a+="Z.toolbarCurrentW="+Z.toolbarCurrentW+",   ";a+="Z.toolbarH="+
Z.toolbarH+",   ";a+="Z.toolbarPosition="+Z.toolbarPosition+",   ";a+="Z.tooltipsVisible="+Z.tooltipsVisible+",   ";a+="Z.helpVisible="+Z.helpVisible+",   ";a+="Z.navigatorVisible="+Z.navigatorVisible+",   ";a+="Z.navigatorW="+Z.navigatorW+",   ";a+="Z.navigatorH="+Z.navigatorH+",   ";a+="Z.navigatorL="+Z.navigatorL+",   ";a+="Z.navigatorT="+Z.navigatorT+",   ";a+="Z.navigatorFit="+Z.navigatorFit+",   ";a+="Z.clickZoom="+Z.clickZoom+",   ";a+="Z.clickPan="+Z.clickPan+",   ";a+="Z.mousePan="+Z.mousePan+
",   ";a+="Z.keys="+Z.keys+",   ";a+="Z.constrainPan="+Z.constrainPan+",   ";a+="Z.constrainPanStrict="+Z.constrainPanStrict+",   ";a+="Z.smoothPan="+Z.smoothPan+",   ";a+="Z.smoothPanEasing="+Z.smoothPanEasing+",   ";a+="Watermark alpha = "+Z.Utils.getResource("z234")+",   ";a+="Z.watermarkPath="+Z.watermarkPath+",   ";a+="Z.copyrightPath="+Z.copyrightPath+",   ";a+="Z.hotspotPath="+Z.hotspotPath+",   ";a+="Z.tourPath="+Z.tourPath+",   ";a+="Z.slidePath="+Z.slidePath+",   ";a+="Z.slideTransitionSpeed="+
Z.slideTransitionSpeed+",   ";a+="Z.audioContent="+Z.audioContent+",   ";a+="Z.audioMuted="+Z.audioMuted+",   ";a+="Z.annotationPath="+Z.annotationPath+",   ";a+="Z.saveHandlerPath="+Z.saveHandlerPath+",   ";a+="Z.minimizeVisible="+Z.minimizeVisible+",   ";a+="Z.sliderZoomVisible="+Z.sliderZoomVisible+",   ";a+="Z.panButtonsVisible="+Z.panButtonsVisible+",   ";a+="Z.resetVisible="+Z.resetVisible+",   ";a+="Z.fullScreenVisible="+Z.fullScreenVisible+",   ";a+="Z.fullPageVisible="+Z.fullPageVisible+
",   ";a+="Z.initialFullPage="+Z.initialFullPage+",   ";a+="Z.measureVisible="+Z.measureVisible+",   ";a+="Z.captionTextColor="+Z.captionTextColor+",   ";a+="Z.captionBackColor="+Z.captionBackColor+",   ";a+="Z.polygonLineColor="+Z.polygonLineColor+",   ";a+="Z.polygonFillColor="+Z.polygonFillColor+",   ";a+="Z.captionTextVisible="+Z.captionTextVisible+",   ";a+="Z.captionBackVisible="+Z.captionBackVisible+",   ";a+="Z.polygonFillVisible="+Z.polygonFillVisible+",   ";a+="Z.polygonLineVisible="+Z.polygonLineVisible+
",   ";a+="Z.rotationVisible="+Z.rotationVisible+",   ";a+="Z.initialRotation="+Z.initialRotation+",   ";a+="Z.virtualPointerVisible="+Z.virtualPointerVisible+",   ";a+="Z.crosshairsVisible="+Z.crosshairsVisible+",   ";a+="Z.rulerVisible="+Z.rulerVisible+",   ";a+="Z.units="+Z.units+",   ";a+="Z.unitsPerImage="+Z.unitsPerImage+",   ";a+="Z.pixelsPerUnit="+Z.pixelsPerUnit+",   ";a+="Z.sourceMagnification="+Z.sourceMagnification+",   ";a+="Z.rulerListType="+Z.rulerListType+",   ";a+="Z.rulerW="+Z.rulerW+
",   ";a+="Z.rulerH="+Z.rulerH+",   ";a+="Z.rulerL="+Z.rulerL+",   ";a+="Z.rulerT="+Z.rulerT+",   ";a+="Z.coordinatesVisible="+Z.coordinatesVisible+",   ";a+="Z.imageFiltersVisible="+Z.imageFiltersVisible+",   ";a+="Z.progressVisible="+Z.progressVisible+",   ";a+="Z.logoVisible="+Z.logoVisible+",   ";a+="Z.logoLinkURL="+Z.logoLinkURL+",   ";a+="Z.logoCustomPath="+Z.logoCustomPath+",   ";a+="Z.canvas="+Z.canvas+",   ";a+="Z.debug="+Z.debug+",   ";a+="Z.imageProperties="+Z.imageProperties+",   ";a+=
"Z.serverIP="+Z.serverIP+",   ";a+="Z.serverPort="+Z.serverPort+",   ";a+="Z.tileHandlerPath="+Z.tileHandlerPath+",   ";a+="Z.tileHandlerPathFull="+Z.tileHandlerPathFull+",   ";a+="Z.tileSource="+Z.tileSource+",   ";a+="Z.tileType="+Z.tileType+",   ";a+="Z.freehandVisible="+Z.freehandVisible+",   ";a+="Z.textVisible="+Z.textVisible+",   ";a+="Z.iconVisible="+Z.iconVisible+",   ";a+="Z.rectangleVisible="+Z.rectangleVisible+",   ";a+="Z.polygonVisible="+Z.polygonVisible+",   ";a+="\n";a+="INTERNAL VALUES:    ";
a+="\n";a+="displayW="+Z.Viewport.getDisplayW()+",   ";a+="displayH="+Z.Viewport.getDisplayH()+",   ";a+="tierCurrent="+Z.Viewport.getTierCurrent()+",   ";a+="tierBackfill="+Z.Viewport.getTierBackfill()+",   ";a+="tierBackfillDynamic="+Z.Viewport.getTierBackfillDynamic()+",   ";a+="tierBackfillOversize="+Z.Viewport.getTierBackfillOversize()+",   ";a+="tierScale="+Z.Viewport.getTierScale()+",   ";a+="z315="+Z.Viewport.getTiersScaleUpMax()+",   ";a+="z314="+Z.Viewport.getTiersScaleDownMax()+",   ";
a+="z316="+Z.Viewport.getTilesCacheMax()+",   ";a+="Z.useCanvas="+Z.useCanvas+"\n";a+="Z.specialStorageEnabled="+Z.specialStorageEnabled+"\n";a+="Z.editMode="+Z.editMode+"\n";a+="Z.labelMode="+Z.labelMode+"\n";a+="Z.editing="+Z.editing+"\n";a+="\n";a+="INTERNAL LISTS:    ";a+="tierWs="+Z.Viewport.getTierWs()+",   ";a+="tierHs="+Z.Viewport.getTierHs()+",   ";a+="tierTileCounts="+Z.Viewport.getTierTileCounts()+",   ";a+="tilesLoadingNames="+Z.Viewport.getTilesLoadingNames()+"\n";a+="\n";alert(a)}};