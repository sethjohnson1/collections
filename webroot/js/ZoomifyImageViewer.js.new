(function(){(function(){return this}).call().Z={}})();
Z.showImage=function(a,b,d){Z.showImage.done?(Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof d&&(Z.parameters=Z.Utils.parseParameters(d)),Z.initialize()):(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==
typeof d&&(Z.parameters=Z.Utils.parseParameters(d)),"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};
Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters(Z.parameters);Z.Viewer=new Z.ZoomifyImageViewer;Z.Utils.isStrVal(Z.copyrightPath)?Z.Utils.enforceCopyright():Z.Viewer.configureViewer();0!=Z.debug&&Z.Utils.trace(Z.Utils.getResource("UI_TRACEDISPLAYDEBUGINFOTEXT"))};
Z.ZoomifyImageViewer=function(){Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);var a=Z.Utils.getElementStyle(Z.pageContainer);Z.viewerW=parseFloat(a.width);Z.viewerH=parseFloat(a.height);isNaN(Z.viewerW)&&(Z.viewerW=Z.ViewerDisplay.clientWidth);isNaN(Z.viewerH)&&(Z.viewerH=Z.ViewerDisplay.clientHeight);
if(0==Z.viewerW||0==Z.viewerH)winDimensions=Z.Utils.getWindowSize(),0==Z.viewerW&&(Z.pageContainer.parentNode.style.width=winDimensions.x+"px",Z.viewerW=Z.pageContainer.clientWidth),0==Z.viewerH&&(Z.pageContainer.parentNode.style.height=winDimensions.y+"px",Z.viewerH=Z.pageContainer.clientHeight);Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);this.configureViewer=function(){Z.Viewport=new Z.ZoomifyViewport};this.configureComponents=function(){0<Z.toolbarVisible&&(Z.Toolbar=
new Z.ZoomifyToolbar(Z.Viewport));0<Z.navigatorVisible&&(Z.Navigator=new Z.ZoomifyNavigator(Z.Viewport));Z.Navigator&&Z.Navigator.validateNavigatorGlobals();Z.rulerVisible&&(Z.Ruler=new Z.ZoomifyRuler(Z.Viewport))};this.setSizeAndPosition=function(a,d,e,f,h){Z.viewerW=a;Z.viewerH=d;Z.ViewerDisplay.style.width=a+"px";Z.ViewerDisplay.style.height=d+"px";Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setSizeAndPosition(a,d,e,f);d=1==Z.toolbarPosition?d-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&
(Z.Toolbar.setSizeAndPosition(a,null,null,d),1<Z.toolbarVisible&&Z.Toolbar.show(!0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,e,f,Z.navigatorFit),1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0));h&&Z.Viewport.updateView(!0)};this.setCallback=function(a,d){-1==Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",d)&&(Z.callbacks[Z.callbacks.length]={callbackEvent:a,callbackFunction:d})};this.clearCallback=function(a,
d){var e=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",d);-1!=e&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,e,1))};this.setImageWithFade=function(a,d,e){Z.Viewport&&(Z.Viewport.getInitialized()||e)&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler("out",a,d,e)},50))};this.setImage=function(a,d,e,f){Z.Viewport&&(Z.Viewport.getInitialized()||f)&&(Z.Viewport.zoomAndPanAllStop(!0),Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(a),
Z.Utils.validateImagePath(),"undefined"!==typeof d&&(Z.parameters=Z.Utils.parseParameters(d)),f&&Z.Utils.setParameters(Z.parameters),e||(Z.imageProperties?(a=Z.Utils.xmlConvertTextToDoc(imageProperties),Z.Viewport.parseImageXML(a)):(a=new Z.NetConnector,Z.Viewport.loadImageProperties(a))))};this.setTourPath=function(a,d){Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setHotspotPath(a,d)};this.setHotspotPath=function(a,d){Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setHotspotPath(a,d)};
this.setAnnotationPath=function(a,d){Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setAnnotationPath(a,d)};this.initializePageExitEventHandler=function(){Z.Utils.addEventListener(window,"beforeunload",function(a){var d="";null!==Z.editing&&Z.Viewport.verifyEditsUnsaved()?d="You have unsaved edits. Return to page to save edits?":Z.editing=null;return(a||window.event).returnValue=d})}};
Z.ZoomifyViewport=function(){function a(c){c=(Z.Utils.isStrVal(Z.slidePath),Z.Utils.getResource("DEFAULT_SLIDESXMLFILE"));".xml"!=Z.slidePath.toLowerCase().substring(Z.slidePath.length-4,Z.slidePath.length)&&(Z.slidePath=Z.slidePath+"/"+c);XMLPath=Z.Utils.cacheProofPath(Z.slidePath);"undefined"!==typeof XMLPath&&Z.Utils.isStrVal(XMLPath)&&(c=new Z.NetConnector,c.loadXML(XMLPath))}function b(c,a,b,m,w,d,e,g,k,l,f){Z.imageW=c;Z.imageH=a;dd=d;Rd=e;dc=g;Cc=w;Ha=b;Ia=m;null!==k&&null!==l&&null!==f&&(Z.sourceMagnification=
k,Z.focal=l,Z.quality=f);r();p.validateXYZDefaults();ac=ha(za,Z.initialZ);bc=aa=ha(la,Z.initialZ);Z.useCanvas&&Ja.scale(aa,aa);Na&&ud();ra&&vd();Z.virtualPointerVisible&&Za();t();ed(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);Z.initialFullPage&&p.toggleFullViewMode(!0);Z.Utils.addEventListener(document,"keydown",Eb);Z.Utils.addEventListener(document,"keyup",Eb);Z.mobileDevice?(Z.Utils.addEventListener(ia,"touchstart",ta),Z.Utils.addEventListener(ia,"touchmove",ta),Z.Utils.addEventListener(ia,"touchend",
ta),Z.Utils.addEventListener(ia,"touchcancel",ta),Z.Utils.addEventListener(ia,"gesturestart",ta),Z.Utils.addEventListener(ia,"gesturechange",ta),Z.Utils.addEventListener(ia,"gestureend",ta),document.getElementsByTagName("body")[0].onorientationchange=Dc):(Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",ta),Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",ta),Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault),Z.Utils.addEventListener(ia,"mousedown",ta),Z.Utils.addEventListener(ia,
"mousemove",Z.Utils.preventDefault),Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",ta),Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault),Z.coordinatesVisible&&p.setCoordinatesDisplayVisibility(!0));Z.Utils.addEventListener(ja,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(sa,"contextmenu",Z.Utils.preventDefault);Na&&Z.Utils.addEventListener(Na,"contextmenu",Z.Utils.preventDefault);ra&&Z.Utils.addEventListener(ra,"contextmenu",Z.Utils.preventDefault);
s(!0);Z.Viewer.configureComponents();Z.Utils.isStrVal(Z.slidePath)&&(c=Z.Utils.isStrVal(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,"undefined"!==typeof db&&(db.selectedIndex=c),We&&!Z.slideshowPlaying?p.slideshowStart():Z.slideshowPlaying&&p.nextSlide())}function d(c,a,b,m,w,d,e,g,k,l,f){s(!1);nb=1;za=la=0;Ob=!1;fd=[];eb=[];Fb=[];Pb=[];ob=[];ub=[];Qb=[];Gb=[];gd=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];hd=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];
tierTileByteCountLast=[];ya=[];vb=[];Ra=[];wb=[];Xe=[];Ua=[];Da=[];Ec=[];$a=[];Fc=ec=0;ra&&(v=[],Rb=[],null!=ka?Hb=[]:(ea=[],ua=[],Ib=[],ma=[],Oa=[]));Z.imageW=c;Z.imageH=a;dd=d;Rd=e;dc=g;Cc=w;Ha=b;Ia=m;r();Z.Utils.setParameters(Z.parameters);p.validateXYZDefaults();ac=ha(za,Z.initialZ);bc=aa=ha(la,Z.initialZ);Z.useCanvas&&(Ja.restore(),Ja.scale(aa,aa));ja&&Z.Utils.clearDisplay(ja);sa&&Z.Utils.clearDisplay(sa);fb&&Z.Utils.clearDisplay(fb);Na&&Z.Utils.clearDisplay(Na);ra&&Z.Utils.clearDisplay(ra);
gb&&Z.Utils.clearDisplay(gb);Aa&&Z.Utils.clearDisplay(Aa);fc&&Z.Utils.clearDisplay(fc);Gc&&Z.Utils.clearDisplay(Gc);Na&&ud();ra&&vd();Z.virtualPointerVisible&&Za();t();p.setSizeAndPosition(qb,ab,Ye,Sd);ed(Z.initialX,Z.initialY,Z.initialZ);s(!0);0<Z.navigatorVisible&&Z.Navigator.setImage(Z.imagePath);Z.slideshowPlaying&&p.nextSlide()}function e(c,a,b,m){if("undefined"===typeof b||null===b)b=0;if("undefined"===typeof m||null===m)m=0;Z.viewerW=qb=c;Z.viewerH=ab=a;Ea=qb*Ef;va=ab*Ef;Sb=Ea/2;Tb=va/2;rb=
-((Ea-qb)/2)+b;hb=-((va-ab)/2)+m;ia.width=Ea;ia.height=va;M.width=Ea+"px";M.height=va+"px";M.left=rb+"px";M.top=hb+"px";sa.width=Ea;sa.height=va;Ba.width=Ea+"px";Ba.height=va+"px";Na&&(Na.width=Ea,Na.height=va,jd.width=Ea+"px",jd.height=va+"px");ra&&(ra.width=Ea,ra.height=va,Hc.width=Ea+"px",Hc.height=va+"px",Ze&&(c=parseInt(Z.Utils.getResource("DEFAULT_HOTSPOTLISTWIDTH"),10),c=Qc($e,c,qb,ab),af.left=c.x+"px",af.top=c.y+"px"));gb&&(gb.width=Ea,gb.height=va,Jb.width=Ea+"px",Jb.height=va+"px");Aa&&
(Aa.width=Ea,Aa.height=va,gc.width=Ea+"px",gc.height=va+"px");bf&&(c=new p.calculateAnnotationPanelDimensions(wd,xb,xd),a=p.calculateAnnotationPanelCoords(ze,c.w,c.h,qb,ab),p.sizeAndPositionAnnotationPanel(Td,c.w,c.h,a.x,a.y));Z.useCanvas&&(Ja.translate(Sb,Tb),Ja.save(),gb&&(Ae.translate(Sb,Tb),Ae.save()),Aa&&(pa.translate(Sb,Tb),pa.save()))}function f(c){if("ZoomifyImageFile"==Z.tileSource){var a=parseFloat(Z.Utils.getResource("DEFAULT_HEADERSTARTBYTE")),b=parseFloat(Z.Utils.getResource("DEFAULT_HEADERENDBYTEZIF"));
c.loadByteRange(Z.imagePath,a,b,"header")}else if("ZoomifyImageFolder"==Z.tileSource)a=Z.Utils.cacheProofPath(Z.imagePath+"/ImageProperties.xml"),c.loadXML(a);else if("ZoomifyPFFFile"==Z.tileSource){var a=Z.Utils.getResource("DEFAULT_HEADERSTARTBYTE"),b=Z.Utils.getResource("DEFAULT_HEADERENDBYTEPFF"),m=Z.imagePath.replace(".","%2E");c.loadXML(Z.tileHandlerPathFull+"?file="+m+"&requestType=1&begin="+a+"&end="+b)}}function h(c,a){if("undefined"===typeof p.getInitialized)window.setTimeout(function(){h(c,
a)},100);else{var td=null,m=null,w=null,Nb=null,e=null,g=null,k=null,l=null,f=null,u=null,B=null;"ZoomifyImageFolder"==Z.tileSource?(td=parseInt(c.documentElement.getAttribute("WIDTH"),10),m=parseInt(c.documentElement.getAttribute("HEIGHT"),10),e=parseInt(c.documentElement.getAttribute("NUMTILES"),10),parseInt(c.documentElement.getAttribute("NUMIMAGES"),10),g=parseInt(c.documentElement.getAttribute("VERSION"),10),w=Nb=parseInt(c.documentElement.getAttribute("TILESIZE"),10)):"ZoomifyPFFFile"==Z.tileSource?
(td=parseInt(c.documentElement.getAttribute("WIDTH"),10),m=parseInt(c.documentElement.getAttribute("HEIGHT"),10),w=Nb=parseInt(c.documentElement.getAttribute("TILESIZE"),10),e=parseInt(c.documentElement.getAttribute("NUMTILES"),10),parseInt(c.documentElement.getAttribute("NUMIMAGES"),10),g=parseInt(c.documentElement.getAttribute("VERSION"),10),k=parseInt(c.documentElement.getAttribute("HEADERSIZE"),10),l=1060+k):"ImageServer"==Z.tileSource&&(td=parseInt(c.documentElement.getAttribute("WIDTH"),10),
m=parseInt(c.documentElement.getAttribute("HEIGHT"),10),Nb=c.documentElement.getAttribute("TILESIZE"),w=Z.Utils.isStrVal(Nb)?parseInt(Nb,10):Ha,Nb=Z.Utils.isStrVal(Nb)?parseInt(Nb,10):Ia,f=c.documentElement.getAttribute("MAGNIFICATION"),f=Z.Utils.isStrVal(f)?parseInt(f,10):Z.sourceMagnification,u=c.documentElement.getAttribute("FOCAL"),u=Z.Utils.isStrVal(u)?parseInt(u,10):Z.focal,B=c.documentElement.getAttribute("QUALITY"),B=Z.Utils.isStrVal(B)?parseInt(B,10):Z.quality);null!==Z.tileW&&(w=Z.tileW);
null!==Z.tileH&&(Nb=Z.tileH);if("ZoomifyImageFolder"==Z.tileSource||"ImageServer"==Z.tileSource){if(null===w||isNaN(w))w=Ha;if(null===Nb||isNaN(Nb))Nb=Ia;if(null===e||isNaN(e))e=1}!isNaN(td)&&0<td&&!isNaN(m)&&0<m&&!isNaN(w)&&0<w&&!isNaN(Nb)&&0<Nb&&0<e?p.getInitialized()?d(td,m,w,Nb,e,g,k,l,f,u,B,a):b(td,m,w,Nb,e,g,k,l,f,u,B,a):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEPROPERTIESXMLINVALID")):Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEPROPERTIESINVALID"))}}
function r(){var c;if("ZoomifyImageFile"==Z.tileSource)for(c=nb-1;0<=c;c--)ob[c]=Math.ceil(Fb[c]/Ha),ub[c]=Math.ceil(Pb[c]/Ia),Qb[c]=ob[c]*ub[c];else{c=Z.imageW;for(var a=Z.imageH;c>Ha||a>Ia;)c/=2,a/=2,nb++;c=Z.imageW;for(var a=Z.imageH,b=0,m=nb-1;0<=m;m--)Fb[m]=c,Pb[m]=a,ob[m]=Math.ceil(Fb[m]/Ha),ub[m]=Math.ceil(Pb[m]/Ia),Qb[m]=ob[m]*ub[m],c/=2,a/=2,b+=Qb[m];if(b!=Cc&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){Fb=[];Pb=[];ob=[];ub=[];nb=
0;c=Z.imageW;a=Z.imageH;nb=1;for(b=2;c>Ha||a>Ia;)c=Math.floor(Z.imageW/b),a=Math.floor(Z.imageH/b),b*=2,c%2&&c++,a%2&&a++,nb++;c=Z.imageW;a=Z.imageH;b=2;tileCounter=0;for(m=nb-1;0<=m;m--)ob[m]=Math.floor(c/Ha),c%Ha&&ob[m]++,ub[m]=Math.floor(a/Ia),a%Ia&&ub[m]++,Qb[m]=ob[m]*ub[m],tileCounter+=Qb[m],Fb[m]=c,Pb[m]=a,c=Math.floor(Z.imageW/b),a=Math.floor(Z.imageH/b),b*=2,c%2&&c++,a%2&&a++;c=tileCounter;c!=Cc&&Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGETILECOUNTINVALID"))}}}function s(c){pd=c;
Z.Utils.validateCallback("viewportInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized")}function t(){D(Ff);nb>Gf&&(D(Hf),nb>If&&D(Jf));eb.sort();eb=Z.Utils.arrayUnique(eb);C(eb,ga,"simple","image-backfill")}function D(c){for(var a=ob[c]-1,b=ub[c]-1,m=0;m<=b;m++)for(var w=0;w<=a;w++)eb[eb.length]=c+"-"+w+"-"+m}function y(c){if(c){c=Q(za);eb=[];a=c.t;for(b=c.b;a<=b;a++)for(m=
c.l,w=c.r;m<=w;m++)eb[eb.length]=za+"-"+m+"-"+a;eb.sort();eb=Z.Utils.arrayUnique(eb);C(eb,ga,"simple","image-backfill")}else{c=Q();ya=[];for(var a=c.t,b=c.b;a<=b;a++)for(var m=c.l,w=c.r;m<=w;m++)ya[ya.length]=la+"-"+m+"-"+a;Ra.sort();ya.sort();Ra=Z.Utils.arrayUnique(Ra);ya=Z.Utils.arrayUnique(ya);2==Z.debug&&Z.Utils.trace("Tiles required: "+ya.join(", "));c=Z.Utils.arrayIntersect(ya,Ra);ya=Z.Utils.arraySubtract(ya,Ra);Fc=ec=ya.length;Z.updateViewPercent=p.updateViewValidate(Fc,ec);Z.ToolbarDisplay&&
Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(Fc,ec);Ra=Z.Utils.arraySubtract(Ra,c);Ra=Ra.concat(c);if(0!=ec){c=0;for(a=Gb.length;c<a;c++)Gb[c].alpha=1;Gb=[]}}}function n(c,a,b,m,w,d){if(0<b.length){var e=Q();w||Z.Utils.clearDisplay(c);if("canvasCopy"==m)Z.Utils.clearDisplay(sa),Ja.restore(),Ja.save(),Ja.scale(1,1),Ja.drawImage(fb,-Sb,-Tb),Ja.restore(),Ja.save(),Ja.scale(aa,aa);else if("centerOut"==m)for(m=Math.floor(b.length/2),w=b.length;m<w;m++){var g=b[m];g&&g.t==a&&(a==za||g.c>=e.l&&g.c<=
e.r&&g.r>=e.t&&g.r<=e.b)&&T(c,a,g);b.length-m-1!=m&&(g=b[b.length-m-1])&&g.t==a&&(a==za||g.c>=e.l&&g.c<=e.r&&g.r>=e.t&&g.r<=e.b)&&T(c,a,g)}else for(m=0,w=b.length;m<w;m++)(g=b[m])&&g.t==a&&(a==za||g.c>=e.l&&g.c<=e.r&&g.r>=e.t&&g.r<=e.b)&&T(c,a,g);if(2==Z.debug&&"viewportDisplay"==c.id){c=[];m=0;for(w=b.length;m<w;m++)g&&b[m].t==a&&(a==za||b[m].c>=e.l&&b[m].c<=e.r&&b[m].r>=e.t&&b[m].r<=e.b)&&(c[c.length]=b[m].name);0<c.length&&(c.sort(),c=Z.Utils.arrayUnique(c));a=0<c.length?c.join(", "):"No cached tiles to redisplay";
Z.Utils.trace("Tiles redisplaying - "+d+": "+a)}}}function I(c,a){var b=Q();syncTransitionCanvas();for(var m=0,w=a.length;m<w;m++){var d=a[m];d&&d.t==c&&(c==za||d.c>=b.l&&d.c<=b.r&&d.r>=b.t&&d.r<=b.b)&&T(fb,c,d)}}function C(c,a,b,m){var w="undefined"!==typeof m&&null!==m?" - "+m+": ":": ";2==Z.debug&&" - backfill: "!=w&&Z.Utils.trace("Tiles to be loaded"+w+c.join(", "));if(0==c.length)2==Z.debug&&Z.Utils.trace("No new tiles loaded.");else if(w=(new Date).getTime(),"centerOut"==b){b=Math.floor(c.length/
2);for(var d=c.length;b<d;b++){var e=c[b];e&&(e=new R(e,m),q(e,w,a));c.length-b-1!=b&&(e=c[c.length-b-1])&&(e=new R(e,m),q(e,w,a))}}else for(b=0,d=c.length;b<d;b++)if(e=c[b])e=new R(e,m),q(e,w,a)}function R(c,a){this.name=c;this.t=parseInt(c.substring(0,c.indexOf("-")),10);this.c=parseInt(c.substring(c.indexOf("-")+1,c.lastIndexOf("-")),10);this.r=parseInt(c.substring(c.lastIndexOf("-")+1),10);this.x=Math.floor(this.c*Ha);this.y=Math.floor(this.r*Ia);this.image=null;this.alpha=0;this.url=p.formatTilePath(this.t,
this.c,this.r,a);this.style=this.elmt=this.loadTime=null}function U(c,a,b){b=a+b*ob[c];a=8*b+gd[c];b=Math.floor(b/Fa);var m=b*Fa,m=m+Fa>Qb[c]?8*(Qb[c]-m):qd;this.chunkStart=gd[c]+b*qd;this.chunkEnd=this.chunkStart+m;this.offsetStartInChunk=a-this.chunkStart;this.chunkID=c.toString()+"-"+b.toString()}function P(c,a,b){b=a+b*ob[c];a=4*b+hd[c];b=Math.floor(b/Fa);var m=b*Fa,m=m+Fa>Qb[c]?4*(Qb[c]-m):Ic;this.chunkStart=hd[c]+b*Ic;this.chunkEnd=this.chunkStart+m;this.bcStartInChunk=a-this.chunkStart;this.chunkID=
c.toString()+"-"+b.toString()}function F(c,a,b){Xe[c]=b;b=Z.imagePath.replace(".","%2E");c=Z.tileHandlerPathFull+"?file="+b+"&requestType=2&begin="+c+"&end="+a;(new Z.NetConnector).loadXML(c)}function K(c,a){for(var b=0,m=Da.length;b<m;b++){var w=Da[b].split(",");w[0]==c&&w[5]==a&&(void 0!==w[4]&&"image-display"==w[4]?Ua[Ua.length]=w[1]+"-"+w[2]+"-"+w[3]:"image-backfill"==w[4]&&($a[$a.length]=w[1]+"-"+w[2]+"-"+w[3]),Da=Z.Utils.arraySplice(Da,b,1),b--,m--)}0<Ua.length&&(Ua.sort(),Ua=Z.Utils.arrayUnique(Ua),
2==Z.debug&&Z.Utils.trace("Tiles being requested - offset chunk now loaded: "+Ua.join(", ")),O(Ua,H,"simple","image-display"));0<$a.length&&($a.sort(),$a=Z.Utils.arrayUnique($a),O($a,ga,"simple","image-backfill"))}function O(c,a,b,m){b=(new Date).getTime();for(var w=0,d=c.length;w<d;w++){var e=null;if(e=c[w])if(c=Z.Utils.arraySplice(c,w,1),w--,d--,index=Z.Utils.arrayIndexOfObjectValue(Ec,"name",e),-1!=index?(e=Ec[index],Ec=Z.Utils.arraySplice(Ec,index,1),e.url=p.formatTilePath(e.t,e.c,e.r,m)):e=new R(e,
m),null!=e&&-1==e.url.indexOf("NaN"))2==Z.debug&&Z.Utils.trace(e.name+"  "+e.url+"  "+e.image),q(e,b,a);else if(-1==e.url.indexOf("NaN")){var g=parseInt(Z.Utils.getResource("ERROR_MESSAGEDURATIONMEDIUM"),10);Z.Utils.showMessage(Z.Utils.getResource("ERROR_TILEPATHINVALID-ZIF")+e.name+".jpg",!1,g,"center",!1)}}}function q(c,a,b){var m=c.name;if("skipTile"==c.url.substr(0,8)){0<hc&&(vb[vb.length]=c,Ra[Ra.length]=c.name);a=Z.Utils.arrayIndexOf(ya,c.name);-1!=a&&(ya=Z.Utils.arraySplice(ya,a,1));if("ZoomifyImageFile"==
Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)a=Z.Utils.arrayIndexOf(Ua,c.name),-1!=a&&(Ua=Z.Utils.arraySplice(Ua,a,1));Gb[Gb.length]=c}else"offsetLoading"!=c.url?(2==Z.debug&&Z.Utils.trace("Tile actually being loaded: "+m),b==H&&(type="image-display"),b==ga&&(type="image-backfill"),c.loadTime=a,jg.loadImage(c.url,Z.Utils.createCallback(null,b,c),type,c)):"offsetLoading"==c.url&&(-1==Z.Utils.arrayIndexOfObjectValue(Ec,"name",m)&&(Ec[Ec.length]=c),2==Z.debug&&Z.Utils.trace("Tile not yet being loaded - offset chunk loading in progress: "+
m))}function H(c,a){if(c&&a){c.image=a;var b=c.name,m=Z.Utils.arrayIndexOf(ya,b);if(-1!=m){ya=Z.Utils.arraySplice(ya,m,1);0<hc&&(vb[vb.length]=c,Ra[Ra.length]=b);-1==Z.Utils.arrayIndexOf(Gb,c)&&(Gb[Gb.length]=c);2==Z.debug&&(Z.Utils.trace("Tile received: "+c.name),0==ec&&Z.Utils.trace("Tile loading complete: all requested tiles received."));Be||(Be=window.setInterval(X,50));ec=ya.length;if(0==ec){Z.useCanvas&&0<hc&&(cf?(I(la,vb),n(sa,la,vb,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),
window.setTimeout(function(){Z.Utils.clearDisplay(fb)},200),cf=!1):n(sa,la,vb,"centerOut",!1,"4. Updating view: all new tiles loaded"));Z.imageFiltersVisible&&rd&&Rc(null,null,!0);if(Ra.length>hc)for(;Ra.length>hc&&0<vb.length;)j=Z.Utils.arrayIndexOf(Ra,vb[0].name),-1!=j&&(Ra=Z.Utils.arraySplice(Ra,j,1)),vb=Z.Utils.arraySplice(vb,0,1);Fc=0}Z.updateViewPercent=p.updateViewValidate(Fc,ec);Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(Fc,ec)}}else if("undefined"===typeof a||
null===a)Z.mobileDevice?console.log(Z.Utils.getResource("ERROR_TILEPATHINVALID")+c.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("ERROR_TILEPATHINVALID")+c.name+".jpg")}function ga(c,a){if(c&&a){c.image=a;var b=c.name;fd[fd.length]=c;var m=Z.Utils.arrayIndexOf(eb,b);-1!=m&&(eb=Z.Utils.arraySplice(eb,m,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)b=Z.Utils.arrayIndexOf($a,b),-1!=b&&($a=Z.Utils.arraySplice($a,b,1));c.alpha=1;c.t==za&&T(ja,za,c)}else if("undefined"===
typeof a||null===a)Z.mobileDevice?console.log(Z.Utils.getResource("ERROR_TILEPATHINVALID")+c.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("ERROR_TILEPATHINVALID")+c.name+".jpg")}function X(c){for(var a=c=0,b=Gb.length;a<b;a++){var m=Gb[a];m.t==la?(0!=df&&1>m.alpha+df?m.alpha+=df:(m.alpha=1,c++),T(sa,la,m),c>=b&&(window.clearInterval(Be),Be=null,a=b)):(Gb=Z.Utils.arraySplice(Gb,a,1),m=Z.Utils.arrayIndexOf(ya,m.name),-1!=m&&(ya=Z.Utils.arraySplice(ya,m,1)),b--)}}function T(c,a,b){if("skipTile"!=
b.url.substr(0,8)&&0!=b.image.width&&0!=b.image.height){var m=b.x,w=b.y;a=l(a,1);if(Z.useCanvas){if(c==sa||c==fb||c==ja&&Ob)m-=Z.imageX*a,w-=Z.imageY*a;a=c.getContext("2d");Z.alphaSupported&&1>b.alpha&&"transitionCanvas"!=c.id&&!rd&&(a.globalAlpha=b.alpha);if(Z.imageFiltersVisible&&0!=ib.length)if(rd)"viewportDisplay"==c.id?a=Sc:"viewportBackfillDisplay"==c.id?a=ef:"transitionCanvas"==c.id&&(a=Sc),a.drawImage(b.image,m,w);else{var d;d=Z.Utils.getImageData(b.image);d=yd(d);Z.Utils.clearDisplay(fb);
jb.putImageData(d,0,0);a.drawImage(fb,m,w)}else a.drawImage(b.image,m,w);Z.alphaSupported&&1>b.alpha&&"transitionCanvas"!=c.id&&(a.globalAlpha=1);2==Z.debug&&fa(c,b.name,m,w,aa)}else c==sa?(m-=Z.imageX*a-Sb/aa,w-=Z.imageY*a-Tb/aa,a=aa):a=ac,b.elmt||(b.elmt=Z.Utils.createContainerElement("img"),b.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(b.elmt,"contextmenu",Z.Utils.preventDefault),b.elmt.src=b.url,b.style=b.elmt.style,b.style.position="absolute",Z.Utils.renderQuality(b,Z.renderQuality),
Z.cssTransformsSupported&&(b.style[Z.cssTransformProperty+"Origin"]="0px 0px")),b.elmt.parentNode!=c&&c.appendChild(b.elmt),d=b.style,d.display="none",Z.cssTransformsSupported?d[Z.cssTransformProperty]=["matrix(",(b.image.width/b.elmt.width*a).toFixed(8),",0,0,",(b.image.height/b.elmt.height*a).toFixed(8),",",(m*a).toFixed(8),Z.cssTransformNoUnits?",":"px,",(w*a).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(d.width=b.image.width*a+"px",d.height=b.image.height*a+"px",d.left=m*a+"px",d.top=
w*a+"px"),d.display="inline-block",Z.Utils.setOpacity(b,b.alpha),2==Z.debug&&fa(c,b.name,m,w,a)}}function fa(c,a,b,m,w){if(Z.useCanvas){var d=parseInt(Z.Utils.getResource("DEFAULT_HOTSPOTCAPTIONFONTSIZE"),10),e=parseInt(Z.Utils.getResource("DEFAULT_MINHOTSPOTCAPTIONFONTSIZE"),10),g=parseInt(Z.Utils.getResource("DEFAULT_MAXHOTSPOTCAPTIONFONTSIZE"),10),d=Math.round(d*w),e=2*(d<e?e:d>g?g:d);c=c.getContext("2d");c.font=e+"px verdana";c.textAlign="left";c.textBaseline="top";e=Ha*w/2;w=Ia*w/2;c.fillStyle=
"#FFFFFF";c.fillText(a,b+e,m+w);c.fillStyle="#000000";c.fillText(a,b+e+1,m+w+1)}else{var d=parseInt(Z.Utils.getResource("DEFAULT_HOTSPOTCAPTIONFONTSIZE"),10),e=parseInt(Z.Utils.getResource("DEFAULT_MINHOTSPOTCAPTIONFONTSIZE"),10),g=parseInt(Z.Utils.getResource("DEFAULT_MAXHOTSPOTCAPTIONFONTSIZE"),10),d=Math.round(d*w),k=2*(d<e?e:d>g?g:d),e=parseInt(Z.Utils.getResource("DEFAULT_HOTSPOTCAPTIONPADDING"),10)*w,g=Z.Utils.createContainerElement("div","tileNameTextBox","inline-block","absolute","hidden",
"auto","auto","1px","1px","none","0px","transparent none","0px",e+"px","nowrap"),d=document.createTextNode(a);g.appendChild(d);c.appendChild(g);Z.Utils.setTextNodeStyle(d,"white","verdana",k+"px","none","normal","normal","normal","normal","1em","center","none");var l=Z.Utils.createContainerElement("div","tileNameTextBox2","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",e+"px","nowrap"),f=document.createTextNode(a);l.appendChild(f);c.appendChild(l);
Z.Utils.setTextNodeStyle(f,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","center","none");e=parseFloat(g.style.padding);c=parseFloat(Z.Utils.getElementStyleProperty(g,"width"));isNaN(c)&&(c=parseFloat(Z.Utils.getResource("DEFAULT_FONTTOPIXELSCONVERSIONFACTOR")),c=parseFloat(g.style.fontSize)/c,c=Math.round(parseFloat(a.length*c)));a=Ha*w/2;k=Ia*w/2;g.style.left=b*w+(a-c/2-e)+"px";g.style.top=m*w+k+"px";l.style.left=1+b*w+(a-c/2-e)+"px";l.style.top=1+m*w+k+"px";Z.Utils.addEventListener(g,
"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(d);Z.Utils.addEventListener(l,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(f)}}function Q(c,a){if("undefined"===typeof c||null===c)c=la;if("undefined"===typeof a||null===a)a=!1;return new Sa(da(a),c)}function da(c){var a=parseFloat(M.left)-rb,b=parseFloat(M.top)-hb;if(Z.useCanvas)var m=parseFloat(M.width)/ia.width,a=a/m,b=b/m;m=p.getZoom();0!=a&&(a/=m);0!=b&&(b/=m);a=Z.imageX-a;b=Z.imageY-b;if(c){c=-(qb/2);
var w=qb/2,d=-(ab/2),e=ab/2}else c=-(Ea/2),w=Ea/2,d=-(va/2),e=va/2;return new qa(a,b,c,w,d,e,m)}function Sa(c,a){var b=l(a,1),m=Math.floor(c.l*b/Ha),w=Math.floor(c.r*b/Ha),d=Math.floor(c.t*b/Ia),b=Math.floor(c.b*b/Ia);0>m&&(m=0);w>ob[a]-1&&(w=ob[a]-1);0>d&&(d=0);b>ub[a]-1&&(b=ub[a]-1);this.l=m;this.r=w;this.t=d;this.b=b}function qa(c,a,b,m,w,d,e){this.l=c+b/e;this.r=c+m/e;this.t=a+w/e;this.b=a+d/e}function V(c,a){var b=c-Z.Utils.getElementPosition(Z.ViewerDisplay).x,m=a-Z.Utils.getElementPosition(Z.ViewerDisplay).y;
return new Z.Utils.Point(b,m)}function W(c,a){var b=V(c,a),m=Z.Utils.getPageScroll();return new Z.Utils.Point(b.x-rb+m.x,b.y-hb+m.y)}function A(c,a,b,m){if("undefined"===typeof b||null===b)b=Z.imageZ;if("undefined"===typeof m||null===m)m=Z.imageR;0>m&&(m+=360);var w=parseFloat(M.left)+Sb,d=parseFloat(M.top)+Tb;c-=w;a-=d;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(c,a,m),c=viewportClickPt.x,a=viewportClickPt.y);return new Z.Utils.Point(Z.imageX+c/b,Z.imageY+a/b)}function ba(c,a,b,m){if("undefined"===
typeof b||null===b)b=Z.imageZ;if("undefined"===typeof m||null===m)m=Z.imageR;0>m&&(m+=360);c=(Z.imageX-c)*b;a=(Z.imageY-a)*b;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(c,a,-m),c=viewportClickPt.x,a=viewportClickPt.y);return new Z.Utils.Point(rb+c,hb+a)}function l(c,a){return Fb[c]/Z.imageW*a}function ha(c,a){return a/(Fb[c]/Z.imageW)}function u(c,a,b,m,w){if(Z.constrainPan){m=Math.round(m);var d=c,e=a;b="undefined"!==typeof b&&null!==b?b:Z.imageZ;m="undefined"!==typeof m&&null!==m?m:Z.imageR;
0>m&&(m+=360);var g=Z.Utils.getDisplayPositionRotated(M,m),k=Z.imageW,l=Z.imageH,f=qb,p=ab;if("container"==w){var u=b,B=m;if("undefined"===typeof u||null===u)u=Z.imageZ;if("undefined"===typeof B||null===B)B=Z.imageR;0>B&&(B+=360);c=(rb-c)/u;a=(hb-a)/u;var h,q;switch(B){case 0:h=Z.imageX+c;q=Z.imageY+a;break;case 90:h=Z.imageX+a;q=Z.imageY-c;break;case 180:h=Z.imageX-c;q=Z.imageY-a;break;case 270:h=Z.imageX-a,q=Z.imageY+c}a=new Z.Utils.Point(h,q);c=a.x;a=a.y}h=(f+g.y)/2/b;q=k-(f+g.y)/2/b;B=(p+g.x)/
2/b;g=l-(p+g.x)/2/b;c=(0==m||180==m)&&k*b>f||(90==m||270==m)&&l*b>p?c<=h?h:c>=q?q:c:k/2;a=(0==m||180==m)&&l*b>p||(90==m||270==m)&&k*b>f?a<=B?B:a>=g?g:a:l/2;if("container"==w){var n;w=b;b=m;if("undefined"===typeof w||null===w)w=Z.imageZ;if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var N;switch(b){case 0:n=c-Z.imageX;N=a-Z.imageY;break;case 90:n=Z.imageY-a;N=c-Z.imageX;break;case 180:n=Z.imageX-c;N=Z.imageY-a;break;case 270:n=a-Z.imageY,N=Z.imageX-c}n=new Z.Utils.Point(rb-n*w,hb-N*w);
c=n.x;a=n.y}c==d&&a==e||Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(c,a)}function B(c){c>Z.maxZ?(c=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):c<Z.minZ&&(c=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return c}function ic(c){c=90*Math.round(Math.abs(c)/90)*Z.Utils.sign(c);-360>=c?c+=360:360<=c&&(c-=360);return c}function cc(){if(Z.ToolbarDisplay&&Z.Toolbar.getInitialized()){var c=p.getZoom();Z.Toolbar.syncSliderToViewport(c)}}function N(){Z.Navigator&&
Z.Navigator.getInitialized()&&Z.Navigator.syncToViewport()}function Ta(c){Z.Ruler&&Z.Ruler.getInitialized()&&Z.Ruler.syncToViewport(c)}function Za(){Tc=new Image;Tc.url=Kf;Tc.onload=yb;Tc.onerror=qc;Tc.src=Kf}function yb(){var c=Tc.width,a=Tc.height,b=Z.viewerW/2+100,m=Z.viewerH-200,w=Tc.cloneNode(!1);w.width=c;w.height=a;$=Z.Utils.createContainerElement("div","piC","inline-block","absolute","hidden",c+"px",a+"px",b+"px",m+"px","none","0px","transparent none","0px","0px","normal");$.appendChild(w);
Z.ViewerDisplay.appendChild($);$.setAttribute("title",Z.Utils.getResource("TIP_VIRTUALPOINTER"));c=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);$.style.zIndex=(c+13).toString();Z.mobileDevice?(Z.Utils.addEventListener($,"touchstart",kg),Z.Utils.addEventListener($,"touchmove",lg),Z.Utils.addEventListener($,"touchend",mg),Z.Utils.addEventListener($,"touchcancel",Ud)):Z.Utils.addEventListener($,"mousedown",zd);Z.Utils.addEventListener(w,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(w,
"mousedown",Z.Utils.preventDefault)}function qc(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_VIRTUALPOINTERPATHINVALID")+this.url,!0)}function zd(c){if((c=Z.Utils.event(c))&&$){Z.Utils.removeEventListener($,"mousedown",zd);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",rc);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseup",Lf);var a=Z.Utils.getMousePosition(c);oa=new Z.Utils.Point(a.x,a.y);var a=W(c.clientX,c.clientY),b=new Z.Utils.Point(parseFloat($.style.left),parseFloat($.style.top));
c=a.x-b.x;a=a.y-b.y;$.mouseXPrior=oa.x;$.mouseYPrior=oa.y;$.mouseXOffset=c;$.mouseYOffset=a}}function rc(c){if((c=Z.Utils.event(c))&&$){c=Z.Utils.getMousePosition(c);Ca=new Z.Utils.Point(c.x,c.y);var a=Ca.x-$.mouseXPrior,b=Ca.y-$.mouseYPrior;$.mouseXPrior=Ca.x;$.mouseYPrior=Ca.y;c=$.style;a=parseFloat(c.left)+a;b=parseFloat(c.top)+b;c.left=a+"px";c.top=b+"px"}}function Lf(c){if((c=Z.Utils.event(c))&&$){c=Z.Utils.getMousePosition(c);c=kb?kb:new Z.Utils.Point(c.x,c.y);Z.Utils.removeEventListener(Z.ViewerDisplay,
"mousemove",rc);Z.Utils.removeEventListener(Z.ViewerDisplay,"mouseup",Lf);Z.Utils.addEventListener($,"mousedown",zd);var a=c.x-$.mouseXPrior,b=c.y-$.mouseYPrior;c=$.style;a=parseFloat(c.left)+a;b=parseFloat(c.top)+b;c.left=a+"px";c.top=b+"px"}}function kg(c){!Z.interactivityOff&&(c=Z.Utils.event(c))&&(c.preventDefault(),$&&(c=Z.Utils.getFirstTouch(c)))&&(c=new Z.Utils.Point(c.pageX,c.pageY),oa=new Z.Utils.Point(c.x,c.y),$.mouseXPrior=c.x,$.mouseYPrior=c.y)}function lg(c){if(!Z.interactivityOff&&Z.mousePan){if(c=
Z.Utils.event(c))if(c.preventDefault(),$&&(c=Z.Utils.getFirstTouch(c))){c=new Z.Utils.Point(c.pageX,c.pageY);var a=$.style,b=parseFloat(a.left),m=parseFloat(a.top);a.left=b+(c.x-$.mouseXPrior)+"px";a.top=m+(c.y-$.mouseYPrior)+"px";$.mouseXPrior=c.x;$.mouseYPrior=c.y}return!1}}function mg(c){if(!Z.interactivityOff&&(c=Z.Utils.event(c))&&$&&(c=Z.Utils.getFirstTouch(c))){c=new Z.Utils.Point(c.pageX,c.pageY);c=new Z.Utils.Point(c.x,c.y);var a=c.x-$.mouseXPrior,b=c.y-$.mouseYPrior;c=$.style;a=parseFloat(c.left)+
a;b=parseFloat(c.top)+b;c.left=a+"px";c.top=b+"px"}}function Ud(c){if(!Z.interactivityOff&&(c=Z.Utils.event(c))&&$&&(c=Z.Utils.getFirstTouch(c))){c=new Z.Utils.Point(c.pageX,c.pageY);c=new Z.Utils.Point(c.x,c.y);var a=c.x-$.mouseXPrior,b=c.y-$.mouseYPrior;c=$.style;a=parseFloat(c.left)+a;b=parseFloat(c.top)+b;c.left=a+"px";c.top=b+"px"}}function ud(){Uc=new Image;Mf=parseFloat(Z.Utils.getResource("DEFAULT_WATERMARKALPHA"));Uc.url=Z.watermarkPath;Uc.onload=Nf;Uc.onerror=ng;Uc.src=Z.watermarkPath}function Nf(){if(Na)for(var c=
parseFloat(Z.Utils.getResource("DEFAULT_WATERMARKMINSCALE")),a=parseFloat(Z.Utils.getResource("DEFAULT_WATERMARKSPANW")),b=parseFloat(Z.Utils.getResource("DEFAULT_WATERMARKSPANH")),m=p.getZoom(),w=(Z.imageW*m-Na.width)/2,d=(Z.imageH*m-Na.height)/2,e=(Z.imageW/2-Z.imageX)*m,g=(Z.imageH/2-Z.imageY)*m,k=m<c?c:m,a=Math.round(Z.imageW/a),b=Math.round(Z.imageH/b),c=da(),l=Uc.width*k,k=Uc.height*k,f=0,u=0,B=1;B<=a;B++)for(var h=1;h<=b;h++){var q=Math.round(Z.imageW/(a+1)*B),n=Math.round(Z.imageH/(b+1)*h);
if(q>c.l&&q<c.r&&n>c.t&&n<c.b){var N=Math.round(q*m-l/2-w+e),ha=Math.round(n*m-k/2-d+g);if(4E3<Z.imageW){n=u+100;if(N<f+100&&ha<n)continue;f=N;u=ha}var n=l,q=k,t=ha,ha=Uc.cloneNode(!1);Z.Utils.setOpacity(ha,Mf);ha.width=n;ha.height=q;n=Z.Utils.createContainerElement("div","wiC","inline-block","absolute","hidden",n+"px",q+"px",N+"px",t+"px","none","0px","transparent none","0px","0px","normal");n.appendChild(ha);Na.appendChild(n);Z.Utils.addEventListener(ha,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(ha,
"mousedown",Z.Utils.preventDefault)}}}function E(){Na&&(Z.Utils.clearDisplay(Na),Nf())}function ng(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_WATERMARKPATHINVALID")+this.url)}function vd(){if(Z.Utils.isStrVal(Z.hotspotPath)){var c=Z.Utils.isStrVal(Z.tourPath)?Z.Utils.getResource("DEFAULT_TOURSXMLFILE"):Z.Utils.getResource("DEFAULT_HOTSPOTSXMLFILE");".xml"!=Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotPath=Z.hotspotPath+"/"+c);XMLPath=Z.Utils.cacheProofPath(Z.hotspotPath)}else Z.Utils.isStrVal(Z.annotationPath)&&
(".xml"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationPath=Z.annotationPath+"/"+Z.Utils.getResource("DEFAULT_ANNOTATIONSXMLFILE")),XMLPath=Z.Utils.cacheProofPath(Z.annotationPath));"undefined"!==typeof XMLPath&&Z.Utils.isStrVal(XMLPath)?(new Z.NetConnector).loadXML(XMLPath):Z.measureVisible&&null==Z.editMode&&(c=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),p.parseAnnotationsXML(c))}function Ce(c,a){var b=Z.Utils.arrayIndexOfObjectValue(Rb,
"media",c.media);if(-1!=b){var m=new Image;m.src=c.media;var w=m.width,m=m.height;Rb[b].element&&(c.image=Rb[b].element.cloneNode(!1));c.iW=w;c.iH=m;a&&(b=new Ka,Ub(c,b))}else Rb[Rb.length]={media:c.media,element:null},b=(new Date).getTime(),w=c.media,og.loadImage(w,Z.Utils.createCallback(null,ff,w,b),"hotspot")}function De(c){var a;a=c.getAttribute("ID");this.id=""!=a?a:Va("labelExternal");a=c.getAttribute("INTERNALID");this.internalID=isNaN(parseInt(a))?ka?Va("hotspot"):Va("label"):a;this.poiID=
c.getAttribute("POIID");a=unescape(c.getAttribute("NAME"));this.name=""!=a?a:this.id;this.mediaType=c.getAttribute("MEDIATYPE");this.media=c.getAttribute("MEDIA");this.iH=this.iW=this.image=null;a=parseFloat(c.getAttribute("X"));this.x=isNaN(a)?0:a;a=parseFloat(c.getAttribute("Y"));this.y=isNaN(a)?0:a;a=parseFloat(c.getAttribute("ZOOM"));this.z=isNaN(a)?-1:a;a=parseFloat(c.getAttribute("XSCALE"));this.xScale=isNaN(a)?100:a;a=parseFloat(c.getAttribute("YSCALE"));this.yScale=isNaN(a)?100:a;this.clickURL=
c.getAttribute("CLICKURL");this.urlTarget=c.getAttribute("URLTARGET");a=c.getAttribute("ROLLOVER");this.rollover="1"==a||"true"==a;this.caption=unescape(c.getAttribute("CAPTION"));this.tooltip=unescape(c.getAttribute("TOOLTIP"));this.user=c.getAttribute("USER");this.date=c.getAttribute("DATE");this.textColor=c.getAttribute("TEXTCOLOR");this.backColor=c.getAttribute("BACKCOLOR");this.lineColor=c.getAttribute("LINECOLOR");this.fillColor=c.getAttribute("FILLCOLOR");a=c.getAttribute("TEXTVISIBLE");this.textVisible=
"false"!=a;a=c.getAttribute("BACKVISIBLE");this.backVisible="false"!=a;a=c.getAttribute("LINEVISIBLE");this.lineVisible="false"!=a;a=c.getAttribute("FILLVISIBLE");this.fillVisible="false"!=a;a=c.getAttribute("CAPTIONPOSITION");this.captionPosition=Z.Utils.isStrVal(a)?a:"8";a=c.getAttribute("SAVED");this.saved=null===a?!0:a;this.visibility=!0;a=c.getElementsByTagName("CAPTION");0<a.length&&(this.captionHTML=unescape(Z.Utils.xmlConvertDocToText(a[0])));a=c.getElementsByTagName("TOOLTIP");0<a.length&&
(this.tooltipHTML=unescape(Z.Utils.xmlConvertDocToText(a[0])));if(("freehand"==c.getAttribute("MEDIA")||"rectangle"==c.getAttribute("MEDIA")||"polygon"==c.getAttribute("MEDIA")||"measure"==c.getAttribute("MEDIA"))&&0<c.getElementsByTagName("POLYGON").length){a=c.getElementsByTagName("POLYGON")[0];this.polyClosed="0"!=a.getAttribute("CLOSED");a=a.getElementsByTagName("POINT");for(var b=[],m=0,w=a.length;m<w;m++){var d=parseFloat(a[m].getAttribute("X")),d=isNaN(d)?0:d,e=parseFloat(a[m].getAttribute("Y")),
e=isNaN(e)?0:e;b[b.length]={x:d,y:e}}this.polygonPts=b}this.audio=c.getAttribute("AUDIO");Z.Utils.isStrVal(this.audio)&&(Z.audioContent=!0);a=parseFloat(c.getAttribute("SHOWFOR"));this.showFor=isNaN(a)?0:a;this.transition=c.getAttribute("TRANSITION");a=parseFloat(c.getAttribute("CHANGEFOR"));this.changeFor=isNaN(a)?0:a;a=parseFloat(c.getAttribute("ROTATION"));this.rotation=isNaN(a)?0:a;this.category=c.getAttribute("CATEGORY");this.zIndex=v.length.toString()}function ff(c,a,b){if(c&&a&&b){a=new Ka;
for(var m=0,w=v.length;m<w;m++){var d=v[m];if(d.media==c){var e=Z.Utils.arrayIndexOfObjectValue(Rb,"media",c);-1!=e?Rb[e].element=b:Rb[Rb.length]={media:c,element:b};d.image=b.cloneNode(!1);d.iW=b.width;d.iH=b.height;Ub(d,a)}}}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_HOTSPOTPATHINVALID"))}function Wa(){if(ra&&(Z.Utils.clearDisplay(ra),gb&&Z.Utils.clearDisplay(gb),Aa&&Z.Utils.clearDisplay(Aa),"inline-block"==Hc.display)){for(var c=new Ka,a=0,b=v.length;a<b;a++)Ub(v[a],c);0==ra.childNodes.length&&
(c=Z.Utils.createContainerElement("div","hotspotImmortal","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),ra.appendChild(c))}}function Ub(c,a){"polygon"==c.media&&c.x+Vc>a.box.l&&c.x-Vc<a.box.r&&c.y+Vc>a.box.t&&c.y-Vc<a.box.b&&sc(c,a);c.x>a.box.l&&c.x<a.box.r&&c.y>a.box.t&&c.y<a.box.b&&Ee(c,a)}function Ee(c,a){-1!=Z.Utils.arrayIndexOfObjectValue(v,"internalID",c.internalID)&&tc(c.internalID);if(Z.useCanvas&&"polygon"==c.media){var b=
Z.Utils.polygonDimensions(c.polygonPts);c.iW=b.x;c.iH=b.y}var m=!Z.Utils.isStrVal(c.media),b=!Z.Utils.isStrVal(c.caption)&&!Z.Utils.isStrVal(c.captionHTML)&&"measure"!=c.mediaType,w=null===c.iW||null===c.iH,d="polygon"!=c.media;if(!(m&&b&&w&&d)){var w="polygon"!=c.media?c.z:100,d="polygon"!=c.media?a.constrainedScale:a.currentZ,m=c.xScale/100/(w/100)*d*c.iW,w=c.yScale/100/(w/100)*d*c.iH,e;"placeholder"!=c.media&&c.image&&(e=c.image,e.align="top",e.width=m,e.height=w);var g=Math.round(c.x*a.currentZ-
m/2-a.displayOffsetL+a.imageOffsetL),k=Math.round(c.y*a.currentZ-w/2-a.displayOffsetT+a.imageOffsetT),l=d=null;b||(Z.captionBoxes||"measure"==c.mediaType?d=Ad(c,a):(l=Ad(c,a,!0,!0),d=Ad(c,a,!0,!1)));b=Z.Utils.createContainerElement("div","hCloak","inline-block","absolute","visible");g=Z.Utils.createContainerElement("div","hot"+c.internalID.toString(),"inline-block","absolute","visible",m+"px",w+"px",g+"px",k+"px","none","0px","transparent none","0px","0px","normal");g.title=Z.Utils.isStrVal(c.tooltip)?
c.tooltip:"";if(Z.Utils.isStrVal(c.clickURL))if(null===Z.editMode){if(e){var f=document.createElement("a");f.setAttribute("href",c.clickURL);f.setAttribute("target",c.urlTarget);f.setAttribute("outline","none");f.appendChild(e);e.style.cursor="help";e.style.border="none"}if(d){var u=document.createElement("a");u.setAttribute("href",c.clickURL);u.setAttribute("target",c.urlTarget);u.setAttribute("outline","none");l&&(u.appendChild(l),l.style.cursor="help");u.appendChild(d);d.style.cursor="help"}b.style.border=
"none";(Z.clickZoom||Z.clickPan)&&Z.Utils.addEventListener(b,"mousedown",Fe)}else Z.Utils.addEventListener(b,"mousedown",Ge);Z.Utils.isStrVal(c.clickURL)&&null===Z.editMode?(f&&b.appendChild(f),u&&b.appendChild(u)):(e&&b.appendChild(e),l&&b.appendChild(l),d&&b.appendChild(d));g.appendChild(b);ra.appendChild(g);g.zIndex=c.zIndex;c.rollover&&(b.rollover=c.rollover);g.internalID=c.internalID;p.setHotspotVisibility(g,!c.rollover&&c.visibility);l&&Jc(c,l,m,w,!0);Jc(c,d,m,w);c.rollover&&(Z.Utils.addEventListener(g,
"mouseover",Vd),Z.Utils.addEventListener(g,"mouseout",Wd));Z.Utils.addEventListener(g,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(g,"contextmenu",Z.Utils.preventDefault)}}function Ka(){this.box=da();this.currentZ=p.getZoom();this.constrainedScale=this.currentZ<He?He:this.currentZ>Ie?Ie:this.currentZ;this.displayOffsetL=(Z.imageW*this.currentZ-ra.width)/2;this.displayOffsetT=(Z.imageH*this.currentZ-ra.height)/2;this.imageOffsetL=(Z.imageW/2-Z.imageX)*this.currentZ;this.imageOffsetT=
(Z.imageH/2-Z.imageY)*this.currentZ}function lb(c){if("undefined"===typeof c||null===c)c=document.getElementById("progressTextBox");var a=null;-1!=c.id.indexOf("hot")&&-1==c.id.indexOf("hotspotDisplay")?a=c:c.parentNode&&-1!=c.parentNode.id.indexOf("hot")&&-1==c.parentNode.id.indexOf("hotspotDisplay")?a=c.parentNode:c.parentNode.parentNode&&-1!=c.parentNode.parentNode.id.indexOf("hot")&&-1==c.parentNode.parentNode.id.indexOf("hotspotDisplay")?a=c.parentNode.parentNode:c.parentNode.parentNode.parentNode&&
-1!=c.parentNode.parentNode.parentNode.id.indexOf("hot")&&-1==c.parentNode.parentNode.parentNode.id.indexOf("hotspotDisplay")&&(a=c.parentNode.parentNode.parentNode);return a}function pb(c,a,b){hotID=a.id.substring(3,a.id.length);var m=Z.Utils.arrayIndexOfObjectValue(v,"internalID",hotID);if(-1!=m&&(m=v[m],"mouseup"==c.type||"mousemove"==c.type&&"polygon"==m.media)){var d=b.x-=a.mouseXOffset-parseFloat(a.style.width)/2;a=b.y-=a.mouseYOffset-parseFloat(a.style.height)/2;a=new Z.Utils.Point(d,a);c=
p.getClickCoordsInImage(c,p.getZoom(),a);"polygon"==m.media&&(uc(m,c),jc());m.x=c.x;m.y=c.y}}function uc(c,a){for(var b=a.x-c.x,m=a.y-c.y,d=c.polygonPts.slice(0),e=0,l=d.length;e<l;e++)d[e].x+=b,d[e].y+=m;c.polygonPts=d.slice(0)}function Ad(c,a,b,m){var d=c.xScale/100/(c.z/100)*a.constrainedScale;a=Math.round(pg*d);a=a<Of?Of:a>Pf?Pf:a;var d=qg*d,e=d<Qf?Qf:d>Rf?Rf:d,l,g;"undefined"!==typeof b&&null!==b&&b?(l="0px",g="transparent-none",b="bold"):(l="1px",g=c.backColor,b="normal");d=c.textColor;"undefined"!==
typeof m&&null!==m&&m&&(d=c.backColor);"measure"==c.mediaType&&(d=c.backColor,g=c.textColor);m=Z.Utils.createContainerElement("div","captionTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","solid",l,g,"0px",e+"px","nowrap");"undefined"!==typeof c.captionHTML&&Z.Utils.isStrVal(c.captionHTML)?(m.innerHTML=c.captionHTML,Z.Utils.setHTMLTextDefaultCaptionStyle(m,c.captionHTML,d,"verdana",a+"px","none","normal","normal","normal","normal","1em","center","none")):"undefined"!==typeof c.caption&&
Z.Utils.isStrVal(c.caption)?(c=document.createTextNode(c.caption),m.appendChild(c),Z.Utils.setTextNodeStyle(c,d,"verdana",a+"px","none","normal","normal","normal",b,"1em","center","none"),Z.Utils.disableTextInteraction(c)):"measure"==c.mediaType&&(a=new Z.Utils.Point(c.x,c.y),Je(c,a));Z.Utils.addEventListener(m,"contextmenu",Z.Utils.preventDefault);return m}function Jc(c,a,b,m,d){var e;if(a){var l=d?1:0;e=c.captionPosition;c=Z.imageR;var g,k,f=a.style;g=p.getZoom();d=parseFloat(f.padding);k=c;e=parseInt(e,
10);0>k&&(k+=360);switch(e){case 1:e=0==k?e:90==k?7:180==k?9:270==k?3:5;break;case 2:e=0==k?e:90==k?4:180==k?8:270==k?6:5;break;case 3:e=0==k?e:90==k?1:180==k?7:270==k?9:5;break;case 4:e=0==k?e:90==k?8:180==k?6:270==k?2:5;break;case 6:e=0==k?e:90==k?2:180==k?4:270==k?8:5;break;case 7:e=0==k?e:90==k?9:180==k?3:270==k?1:5;break;case 8:e=0==k?e:90==k?6:180==k?2:270==k?4:5;break;case 9:e=0==k?e:90==k?3:180==k?1:270==k?7:5}e=e.toString();e=parseInt(e,10);0>c&&(c+=360);var u=parseFloat(Z.Utils.getElementStyleProperty(a,
"width"));isNaN(u)&&(k=parseFloat(Z.Utils.getResource("DEFAULT_FONTTOPIXELSCONVERSIONFACTOR")),k=parseFloat(f.fontSize)/k,u=Math.round(parseFloat(a.firstChild.length*k)));var B=20*g;g=(b-u)/2-d;k=(m-B)/2-d;Z.Utils.rotateElement(f,-c);m=m/2+B+d;b=b/2+u/2+d;if(90==c||270==c)c=b,b=m,m=c;switch(e){case 1:g-=b;k-=m;break;case 2:k-=m;break;case 3:g+=b;k-=m;break;case 4:g-=b;break;case 6:g+=b;break;case 7:g-=b;k+=m;break;case 8:k+=m;break;case 9:g+=b,k+=m}e=new Z.Utils.Point(g,k)}else"measure"==c.mediaType&&
(b=c.backColor,"undefined"===typeof c.captionHTML?Z.Utils.setTextNodeStyle(a.firstChild,b,"verdana",Sf+"px","none","normal","normal","normal","normal","1em","center","none"):Z.Utils.setHTMLTextStyle(a,b,"verdana",Sf+"px","none","normal","normal","normal","normal","1em","center","none"),a.style.width=Tf+"px",e.x-=Tf/2*(1-p.getZoom()),e.y+=20+25*(1-p.getZoom()));a&&e&&(a.style.left=e.x+l+"px",a.style.top=e.y+l+"px")}function Je(c,a){var b=c.polyClosed,m=c.polygonPts.slice(0),d=m.length,e="",l=0,g="",
k="pixels"==Z.units?1:5,f="um"!=Z.units?Z.units:"\u03bcm";b?(e=rg,l=Z.Utils.polygonPerimeter(m,b,a,k),g=sg,captionText="<CAPTION>"+e+l.toString()+"  "+f,e=tg,l=Z.Utils.polygonArea(m,b,a,k),captionText+="<br/>"+e+l.toString()+"  "+f+g+"</CAPTION>",c.captionHTML=captionText):0<d?(e=ug,l=Z.Utils.polygonPerimeter(m,b,a,k),captionText=e+l.toString()+"  "+f,c.caption=captionText):0==d&&(e=vg,l=Z.Utils.polygonPerimeter(m,b,a,k),captionText=e+l.toString()+"  "+f,c.caption=captionText)}function kd(c,a,b){var m=
"0"==c?"hidden":"visible",d=parseInt(Z.Utils.getResource("DEFAULT_HOTSPOTLISTWIDTH"),10),e=Qc(c,d,qb,ab);if("undefined"===typeof ka||null===ka)Ze=ka=new Z.Utils.createSelectElement("hotspotList",a,b,d,e.x,e.y,null,m,Xd),af=Ze.style,"0"!=c&&Z.ViewerDisplay.appendChild(ka),Z.tourPath&&(vc=0),c=Z.Utils.isStrVal(Z.hotspotListTitle)&&"none"!=Z.hotspotListTitle?1:0,ka.selectedIndex=c}function tc(c){c=document.getElementById("hot"+c);null!==c&&c.parentNode.removeChild(c)}function Qc(c,a,b,m){switch(c){case "0":m=
c=0;break;case "1":m=c=25;break;case "2":c=b-a-25;m=20;break;case "3":c=b-a-25;m=null!=toolbar?m-50:m-37.5;break;case "4":c=25;m=null!=toolbar?m-50:m-37.5;break;default:c=b-a,m=25}return new Z.Utils.Point(c,m)}function Bd(c){var a=c.getAttribute("MEDIATYPE"),b=c.getAttribute("MEDIA");if("symbol"==a){switch(b){case "circle":b=Z.annotationFolder+"/circle.png";break;case "square":b=Z.annotationFolder+"/square.png";break;case "triangle":b=Z.annotationFolder+"/triangle.png";break;case "arrowDown":b=Z.annotationFolder+
"/arrowDown.png";break;case "arrowDownLeft":b=Z.annotationFolder+"/arrowDownLeft.png";break;case "arrowLeft":b=Z.annotationFolder+"/arrowLeft.png";break;case "arrowUpLeft":b=Z.annotationFolder+"/arrowUpLeft.png";break;case "arrowUp":b=Z.annotationFolder+"/arrowUp.png";break;case "arrowUpRight":b=Z.annotationFolder+"/arrowUpRight.png";break;case "arrowRight":b=Z.annotationFolder+"/arrowRight.png";break;case "arrowDownRight":b=Z.annotationFolder+"/arrowDownRight.png";break;case "lineHorizontal":b=Z.annotationFolder+
"/lineHorizontal.png";break;case "lineVertical":b=Z.annotationFolder+"/lineVertical.png";break;default:b=Z.annotationFolder+"/noSubstitutePlaceholder.png"}c.setAttribute("MEDIATYPE","icon");c.setAttribute("MEDIA",b);Yd=!0}return c}function Xa(c,a){var b;switch(a){case "root":b=c.getElementsByTagName("ZAS")[0];break;case "setup":b=c.createElement("SETUP");b.setAttribute("PANELPOSITION","2");b.setAttribute("INITIALVISIBILITY","1");b.setAttribute("POIVISIBILITY","1");b.setAttribute("LABELVISIBILITY",
"1");b.setAttribute("NOTEVISIBILITY","1");b.setAttribute("MINSCALE","1");b.setAttribute("MAXSCALE","1");break;case "poi":b=c.createElement("POI");b.setAttribute("ID","0");b.setAttribute("NAME",Z.Utils.getResource("CONTENT_POINAME"));b.setAttribute("X","center");b.setAttribute("Y","center");b.setAttribute("ZOOM","-1");b.setAttribute("USER",Z.Utils.getResource("CONTENT_POIUSER"));b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());break;case "label":b=c.createElement("LABEL");b.setAttribute("ID",
"0");b.setAttribute("NAME",Z.Utils.getResource("CONTENT_LABELNAME"));b.setAttribute("MEDIATYPE","text");b.setAttribute("MEDIA","");b.setAttribute("X","center");b.setAttribute("Y","center");b.setAttribute("ZOOM","100");b.setAttribute("XSCALE","100");b.setAttribute("YSCALE","100");b.setAttribute("CLICKURL","");b.setAttribute("URLTARGET","");b.setAttribute("ROLLOVER","0");b.setAttribute("TOOLTIP","");b.setAttribute("USER",Z.Utils.getResource("CONTENT_LABELUSER"));b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());
b.setAttribute("TEXTCOLOR",Z.Utils.getResource("CONTENT_CAPTIONTEXTCOLOR"));b.setAttribute("BACKCOLOR",Z.Utils.getResource("CONTENT_CAPTIONBACKCOLOR"));b.setAttribute("LINECOLOR",Z.Utils.getResource("CONTENT_POLYGONLINECOLOR"));b.setAttribute("FILLCOLOR",Z.Utils.getResource("CONTENT_POLYGONFILLCOLOR"));b.setAttribute("TEXTVISIBLE",Z.Utils.getResource("CONTENT_CAPTIONTEXTVISIBLE"));b.setAttribute("BACKVISIBLE",Z.Utils.getResource("CONTENT_CAPTIONBACKVISIBLE"));b.setAttribute("LINEVISIBLE",Z.Utils.getResource("CONTENT_POLYGONLINEVISIBLE"));
b.setAttribute("FILLVISIBLE",Z.Utils.getResource("CONTENT_POLYGONFILLVISIBLE"));b.setAttribute("CAPTIONPOSITION",Z.Utils.getResource("CONTENT_CAPTIONPOSITION"));b.setAttribute("CATEGORY","");break;case "polygon":b=c.createElement("POLYGON");break;case "point":b=c.createElement("POINT");b.setAttribute("X","0");b.setAttribute("Y","0");break;case "note":b=c.createElement("NOTE"),b.setAttribute("ID","0"),b.setAttribute("NAME",Z.Utils.getResource("CONTENT_NOTENAME")),b.setAttribute("TEXT",Z.Utils.getResource("CONTENT_NOTETEXT")),
b.setAttribute("USER",Z.Utils.getResource("CONTENT_NOTEUSER")),b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString())}return b}function Cd(c,a,b,m,d,e){c=Z.Utils.arrayToArrayOfStrings([c,a,b,m,d,e]);c=Z.Utils.xmlConvertTextToDoc('<POI ID="'+c[0]+'" NAME="'+c[1]+'" X="'+c[2]+'" Y="'+c[3]+'" ZOOM="'+c[4]+'" INTERNALID="'+c[5]+'" ></POI>').getElementsByTagName("POI")[0];Zd(c,!0)}function Zd(c,a){p.saveEditsPOI(!0);a&&(c=La(c,"poi"));var b=Z.Utils.arrayIndexOfObjectValue(ea,"value",c.getAttribute("INTERNALID"));
-1==b&&(b=ea.length);ea[b]={text:unescape(c.getAttribute("NAME")),value:c.getAttribute("INTERNALID"),id:c.getAttribute("ID"),x:c.getAttribute("X"),y:c.getAttribute("Y"),z:c.getAttribute("ZOOM"),user:c.getAttribute("USER"),date:c.getAttribute("DATE")}}function wc(c,a){p.saveEditsLabel(!0);a&&(c=La(c,"label"));var b=Z.Utils.arrayIndexOfObjectValue(ma,"value",c.getAttribute("INTERNALID"));-1==b&&(b=ma.length);ma[b]={text:unescape(c.getAttribute("NAME")),value:c.getAttribute("INTERNALID"),poiID:c.getAttribute("POIID")};
p.createHotspotFromXML(c)}function Dd(c,a){p.saveEditsNote(!0);a&&(c=La(c,"note"));var b=Z.Utils.arrayIndexOfObjectValue(ua,"value",c.getAttribute("INTERNALID"));-1==b&&(b=ua.length);ua[b]={text:unescape(c.getAttribute("NAME")),value:c.getAttribute("INTERNALID"),noteText:unescape(c.getAttribute("TEXT")),poiID:c.getAttribute("POIID"),id:c.getAttribute("ID"),user:c.getAttribute("USER"),date:c.getAttribute("DATE")}}function La(c,a){var b;switch(a){case "hotspot":b=ka?Va("hotspot"):Va("label");Z.Utils.isStrVal(c.getAttribute("ID"))||
c.setAttribute("ID",b);var m=ka?Z.Utils.getResource("CONTENT_HOTSPOTNAME"):Z.Utils.getResource("CONTENT_LABELNAME");Z.Utils.isStrVal(c.getAttribute("NAME"))||c.setAttribute("NAME",m+b);m=ka?Z.Utils.getResource("CONTENT_HOTSPOTCAPTION"):Z.Utils.getResource("CONTENT_LABELCAPTION");Z.Utils.isStrVal(c.getAttribute("CAPTION"))||"freehand"==Z.editMode||Z.tourPath||Z.Utils.isStrVal(c.getAttribute("MEDIA"))||Z.Utils.isStrVal(c.getAttribute("MEDIA")&&"polygon"==c.getAttribute("MEDIA"))||c.setAttribute("CAPTION",
m+b);Z.Utils.isStrVal(c.getAttribute("X"))||c.setAttribute("X",Z.imageX.toString());Z.Utils.isStrVal(c.getAttribute("Y"))||c.setAttribute("Y",Z.imageY.toString());Z.Utils.isStrVal(c.getAttribute("ZOOM"))||c.setAttribute("ZOOM",(100*Z.imageZ).toString());!Z.Utils.isStrVal(c.getAttribute("CLICKURL"))&&Z.Utils.isStrVal(c.getAttribute("URL"))&&c.setAttribute("CLICKURL",c.getAttribute("URL"));isNaN(parseInt(c.getAttribute("INTERNALID"),10))&&c.setAttribute("INTERNALID",b);m=c.getAttribute("MEDIATYPE");
!Z.captionBoxes&&"measure"!=m||Z.Utils.isStrVal(c.getAttribute("TEXTCOLOR"))&&Z.Utils.isStrVal(c.getAttribute("BACKCOLOR"))||(c.setAttribute("TEXTCOLOR",Z.Utils.getResource("CONTENT_CAPTIONTEXTCOLOR")),c.setAttribute("BACKCOLOR",Z.Utils.getResource("CONTENT_CAPTIONBACKCOLOR")));break;case "poi":b=Va("poi");Z.Utils.isStrVal(c.getAttribute("ID"))||c.setAttribute("ID",b);Z.Utils.isStrVal(c.getAttribute("NAME"))||c.setAttribute("NAME",Z.Utils.getResource("CONTENT_POINAME")+b);Z.Utils.isStrVal(c.getAttribute("X"))||
c.setAttribute("X",Z.imageX.toString());Z.Utils.isStrVal(c.getAttribute("Y"))||c.setAttribute("Y",Z.imageY.toString());Z.Utils.isStrVal(c.getAttribute("ZOOM"))||c.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(c.getAttribute("INTERNALID"),10))&&c.setAttribute("INTERNALID",b);break;case "label":b=Va("label");Z.Utils.isStrVal(c.getAttribute("ID"))||c.setAttribute("ID",b);Z.Utils.isStrVal(c.getAttribute("NAME"))||c.setAttribute("NAME",Z.Utils.getResource("CONTENT_LABELNAME")+b);var m=
c.getAttribute("MEDIATYPE"),d=c.getAttribute("MEDIA");Z.Utils.isStrVal(d)||"text"==m||(c.setAttribute("MEDIA",Z.annotationFolder+"/"+Z.Utils.getResource("DEFAULT_ANNOTATIONMEDIA")),c.setAttribute("MEDIATYPE",Z.Utils.getResource("DEFAULT_ANNOTATIONMEDIATYPE")));Z.Utils.isStrVal(c.getAttribute("CAPTION"))||c.setAttribute("CAPTION",Z.Utils.getResource("CONTENT_LABELCAPTION")+b);!Z.Utils.isStrVal(c.getAttribute("CLICKURL"))&&Z.Utils.isStrVal(c.getAttribute("URL"))&&c.setAttribute("CLICKURL",c.getAttribute("URL"));
Z.Utils.isStrVal(c.getAttribute("X"))||c.setAttribute("X",Z.imageX.toString());Z.Utils.isStrVal(c.getAttribute("Y"))||c.setAttribute("Y",Z.imageY.toString());Z.Utils.isStrVal(c.getAttribute("ZOOM"))||c.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(c.getAttribute("INTERNALID"),10))&&c.setAttribute("INTERNALID",b);isNaN(parseInt(c.getAttribute("POIID"),10))&&c.setAttribute("POIID",S.options[S.selectedIndex].value);break;case "note":b=Va("note"),Z.Utils.isStrVal(c.getAttribute("ID"))||
c.setAttribute("ID",b),Z.Utils.isStrVal(c.getAttribute("NAME"))||c.setAttribute("NAME",Z.Utils.getResource("CONTENT_NOTENAME")+b),Z.Utils.isStrVal(c.getAttribute("TEXT"))||c.setAttribute("TEXT",""),isNaN(parseInt(c.getAttribute("INTERNALID"),10))&&c.setAttribute("INTERNALID",b),isNaN(parseInt(c.getAttribute("POIID"),10))&&c.setAttribute("POIID",S.options[S.selectedIndex].value)}return c}function zb(c,a){var b=c.text.toLowerCase(),m=a.text.toLowerCase(),d=0;b<m?d=-1:b>m&&(d=1);return d}function Ed(){if(Z.ToolbarDisplay&&
Z.Toolbar.getInitialized()){var c=Z.Toolbar.getSkinArray(),a=Z.Toolbar.getSkinSizes(),b=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONPANELLISTFONTSIZE"),10);if("markup"!=Z.editMode)var m=parseFloat(Z.Utils.getResource("DEFAULT_BACKGROUNSMALLDALPHA")/1.5),d=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLOR"),e=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLORNOALPHA");if("markup"!=Z.editMode){var l=Z.Utils.createContainerElement("div","buttonContainerPOI","inline-block","absolute","visible","1px","1px","0px",
"0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(l);Z.mobileDevice||Z.Utils.addEventListener(l,"mouseover",Z.Toolbar.backgroundEventsHandler);var g=Z.Utils.createTextElement("poiNameTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(g.firstChild,"focus",kc);Z.Utils.addEventListener(g.firstChild,"blur",Kb);Z.AnnotationPanelDisplay.appendChild(g);if(g=
document.getElementById("textBoxFor-poiNameTextElement"))g.style.visibility="hidden";g=new Z.Utils.Button("buttonPOIAdd",null,Z.skinPath,c[147],c[148],c[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_POIADD");l.appendChild(g.elmt);g=new Z.Utils.Button("buttonPOIEdit",null,Z.skinPath,c[150],c[151],c[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_POIEDIT");l.appendChild(g.elmt);g=new Z.Utils.Button("buttonPOIDelete",null,Z.skinPath,c[141],c[142],
c[143],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_POIDELETE");l.appendChild(g.elmt);g=new Z.Utils.Button("buttonPOICancel",null,Z.skinPath,c[153],c[154],c[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_POICANCEL");l.appendChild(g.elmt);Z.saveHandler&&(g=new Z.Utils.Button("buttonPOISave",null,Z.skinPath,c[144],c[145],c[146],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_POISAVE"),l.appendChild(g.elmt));g=Wc?"blue":d;
l=Z.Utils.createContainerElement("div","overlayPOIDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",g,"0px","0px","normal","default",!0);Z.Utils.setOpacity(l,m,e);Z.AnnotationPanelDisplay.appendChild(l)}null!==Z.editMode&&(l=Z.Utils.createTextElement("labelNameTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off"),Z.Utils.addEventListener(l.firstChild,"focus",kc),Z.Utils.addEventListener(l.firstChild,"blur",Kb),
Z.AnnotationPanelDisplay.appendChild(l),"markup"!=Z.editMode&&(l=document.getElementById("textBoxFor-labelNameTextElement")))&&(l.style.visibility="hidden");"markup"!=Z.editMode&&(l=Z.Utils.createContainerElement("div","buttonBorderLabel","inline-block","absolute","visible","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal","default",!0),Z.AnnotationPanelDisplay.appendChild(l));d=Z.Utils.createContainerElement("div","buttonContainerLabel","inline-block","absolute","visible",
"1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(d);l=Z.Utils.createContainerElement("div","buttonContainerLabel2","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(l);Z.mobileDevice||(Z.Utils.addEventListener(d,"mouseover",Z.Toolbar.backgroundEventsHandler),Z.Utils.addEventListener(l,"mouseover",Z.Toolbar.backgroundEventsHandler));
g=Z.Utils.createContainerElement("div","buttonBorderLg","inline-block","absolute","hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);g.style.borderColor=Z.Utils.getResource("DEFAULT_BUTTONBORDERCOLOR");d.appendChild(g);bblG=g;bblgS=bblG.style;g=new Z.Utils.Button("buttonViewMode",null,Z.skinPath,c[95],c[96],c[97],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_VIEWMODE");d.appendChild(g.elmt);"markup"!=Z.editMode&&(g=new Z.Utils.Button("buttonEditColorPicker",
null,Z.skinPath,c[98],c[99],c[100],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_EDITMODECOLORPICKER"),d.appendChild(g.elmt));g=new Z.Utils.Graphic("editModeDivider",Z.skinPath,c[101],"1px","1px","1px","1px");d.appendChild(g.elmt);Z.freehandVisible&&(g=new Z.Utils.Button("buttonEditModeFreehand",null,Z.skinPath,c[102],c[103],c[104],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_EDITMODEFREEHAND"),d.appendChild(g.elmt));Z.textVisible&&(g=new Z.Utils.Button("buttonEditModeText",
null,Z.skinPath,c[105],c[106],c[107],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_EDITMODETEXT"),d.appendChild(g.elmt));Z.iconVisible&&(g=new Z.Utils.Button("buttonEditModeIcon",null,Z.skinPath,c[108],c[109],c[110],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_EDITMODEICON"),d.appendChild(g.elmt));Z.rectangleVisible&&(g=new Z.Utils.Button("buttonEditModeRectangle",null,Z.skinPath,c[111],c[112],c[113],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,
"TIP_EDITMODERECTANGLE"),d.appendChild(g.elmt));Z.polygonVisible&&(g=new Z.Utils.Button("buttonEditModePolygon",null,Z.skinPath,c[114],c[115],c[116],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_EDITMODEPOLYGON"),d.appendChild(g.elmt));Z.measureVisible&&(g=new Z.Utils.Button("buttonEditModeMeasure",null,Z.skinPath,c[43],c[44],c[45],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_EDITMODEMEASURE"),d.appendChild(g.elmt));var g=Z.Utils.createContainerElement("div",
"labelCaptionTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),k=document.createTextNode(Z.Utils.getResource("UI_ANNOTATIONPANELLABELCAPTION"));g.appendChild(k);k=Z.Utils.getResource("CONTENT_LABELCAPTION");k=Z.Utils.createTextElement("captionTextElement",k,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(k.firstChild,"focus",kc);Z.Utils.addEventListener(k.firstChild,
"blur",Kb);Z.AnnotationPanelDisplay.appendChild(g);Z.AnnotationPanelDisplay.appendChild(k);if("markup"!=Z.editMode){g=Z.Utils.createContainerElement("div","labelTooltipTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);k=document.createTextNode(Z.Utils.getResource("UI_ANNOTATIONPANELLABELTOOLTIP"));g.appendChild(k);k=Z.Utils.getResource("CONTENT_LABELTOOLTIP");k=Z.Utils.createTextElement("tooltipTextElement",k,"1px","1px",
"1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(k.firstChild,"focus",kc);Z.Utils.addEventListener(k.firstChild,"blur",Kb);Z.AnnotationPanelDisplay.appendChild(g);Z.AnnotationPanelDisplay.appendChild(k);g=Z.Utils.createContainerElement("div","labelClickURLTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);k=document.createTextNode(Z.Utils.getResource("UI_ANNOTATIONPANELLABELURL"));
g.appendChild(k);k=Z.Utils.getResource("CONTENT_LABELCLICKURL");k=Z.Utils.createTextElement("clickURLTextElement",k,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(k.firstChild,"focus",kc);Z.Utils.addEventListener(k.firstChild,"blur",Kb);Z.AnnotationPanelDisplay.appendChild(g);Z.AnnotationPanelDisplay.appendChild(k);for(var f=Z.Utils.getResource("UI_ANNOTATIONLABELCAPTIONPOSITIONCHOICELISTTEXT").split(","),p=Z.Utils.getResource("UI_ANNOTATIONLABELCAPTIONPOSITIONCHOICELISTVALUES").split(","),
g=0,k=f.length;g<k;g++)labelCaptionPositionListDP[labelCaptionPositionListDP.length]={text:f[g],value:p[g]};g=new Z.Utils.createSelectElement("labelCaptionPositionList","",labelCaptionPositionListDP,1,1,0,b,"hidden",Ke);Z.AnnotationPanelDisplay.appendChild(g);f=Z.Utils.getResource("UI_ANNOTATIONLABELTARGETCHOICELISTTEXT").split(",");p=Z.Utils.getResource("UI_ANNOTATIONLABELTARGETCHOICELISTVALUES").split(",");g=0;for(k=f.length;g<k;g++)labelTargetListDP[labelTargetListDP.length]={text:f[g],value:p[g]};
g=new Z.Utils.createSelectElement("labelTargetList","",labelTargetListDP,1,1,0,b,"hidden",$d);Z.AnnotationPanelDisplay.appendChild(g);g=Z.Utils.createContainerElement("div","labelScaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);k=document.createTextNode(Z.Utils.getResource("UI_ANNOTATIONPANELLABELSCALE"));g.appendChild(k);Z.AnnotationPanelDisplay.appendChild(g);g=new Z.Utils.Button("buttonLabelScaleDown",null,Z.skinPath,
c[27],c[28],c[29],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_LABELSCALEDOWN");Z.AnnotationPanelDisplay.appendChild(g.elmt);g=new Z.Utils.Button("buttonLabelScaleUp",null,Z.skinPath,c[24],c[25],c[26],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_LABELSCALEUP");Z.AnnotationPanelDisplay.appendChild(g.elmt);g=Z.Utils.createContainerElement("div","labelRolloverTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0);k=document.createTextNode(Z.Utils.getResource("UI_ANNOTATIONPANELLABELROLLOVER"));g.appendChild(k);k=new Z.Utils.Checkbox("checkboxRollover","test","1px","1px","1px","1px","click",Le,"TIP_ROLLOVER");Z.AnnotationPanelDisplay.appendChild(g);Z.AnnotationPanelDisplay.appendChild(k)}g=Z.Utils.createContainerElement("div","buttonContainerLabelColors","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);
d.appendChild(g);k=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);g.style.zIndex=(k+5).toString();"markup"!=Z.editMode&&(d=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLOR"),d=Z.Utils.createContainerElement("div","buttonContainerLabelColorsBackground","inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",d,"0px","0px","normal",null,!0),g.appendChild(d),g.style.display="none");d=Z.Utils.createContainerElement("div","buttonBorderSm","inline-block","absolute","hidden",
"1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);d.style.borderColor=Z.Utils.getResource("DEFAULT_BUTTONBORDERCOLOR");g.appendChild(d);bbsM=d;bbsmS=bbsM.style;d=new Z.Utils.Button("buttonColor0",null,Z.skinPath,c[117],c[118],c[119],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_COLOR0");g.appendChild(d.elmt);d=new Z.Utils.Button("buttonColor1",null,Z.skinPath,c[120],c[121],c[122],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,
"TIP_COLOR1");g.appendChild(d.elmt);d=new Z.Utils.Button("buttonColor2",null,Z.skinPath,c[123],c[124],c[125],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_COLOR2");g.appendChild(d.elmt);d=new Z.Utils.Button("buttonColor3",null,Z.skinPath,c[126],c[127],c[128],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_COLOR3");g.appendChild(d.elmt);d=new Z.Utils.Button("buttonColor4",null,Z.skinPath,c[129],c[130],c[131],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,
"TIP_COLOR4");g.appendChild(d.elmt);d=new Z.Utils.Button("buttonColor5",null,Z.skinPath,c[132],c[133],c[134],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_COLOR5");g.appendChild(d.elmt);d=new Z.Utils.Button("buttonColor6",null,Z.skinPath,c[135],c[136],c[137],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_COLOR6");g.appendChild(d.elmt);d=new Z.Utils.Button("buttonColor7",null,Z.skinPath,c[138],c[139],c[140],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,
"TIP_COLOR7");g.appendChild(d.elmt);"edit"==Z.editMode&&(d=new Z.Utils.Button("buttonLabelAdd",null,Z.skinPath,c[147],c[148],c[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_LABELADD"),l.appendChild(d.elmt),d=new Z.Utils.Button("buttonLabelEdit",null,Z.skinPath,c[150],c[151],c[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_LABELEDIT"),l.appendChild(d.elmt),d=new Z.Utils.Button("buttonLabelCancel",null,Z.skinPath,c[153],c[154],c[155],"1px",
"1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_LABELCANCEL"),l.appendChild(d.elmt));d=new Z.Utils.Button("buttonLabelDelete",null,Z.skinPath,c[141],c[142],c[143],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_LABELDELETE");l.appendChild(d.elmt);Z.saveHandler&&(d=new Z.Utils.Button("buttonLabelSave",null,Z.skinPath,c[144],c[145],c[146],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_LABELSAVE"),l.appendChild(d.elmt));f=Z.Utils.createContainerElement("div",
"buttonContainerLabelIcons","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!1);Z.AnnotationPanelDisplay.appendChild(f);d=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLOR");g=Z.Utils.createContainerElement("div","buttonContainerLabelIconsBackground","inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",d,"0px","0px","normal",null,!0);f.appendChild(g);f.style.display="none";for(var p=Z.Utils.getResource("UI_ANNOTATIONLABELICONCHOICELISTTEXT").split(","),
u=Z.Utils.getResource("UI_ANNOTATIONLABELICONCHOICELISTVALUES").split(","),g=0,k=p.length;g<k;g++)Me[Me.length]={text:p[g],value:u[g]};b=new Z.Utils.createSelectElement("labelIconList","",Me,1,1,0,b,"visible",ae);f.appendChild(b);k=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);f.style.zIndex=(k+6).toString();"markup"!=Z.editMode&&(g=Wc?"green":d,b=Z.Utils.createContainerElement("div","overlayLabelDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",g,"0px","0px",
"normal","default",!0),g=Wc?"red":d,k=Z.Utils.createContainerElement("div","overlayLabelDetailDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",g,"0px","0px","normal","default",!0),g=Wc?"yellow":d,f=Z.Utils.createContainerElement("div","overlayLabelDetailEditableDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",g,"0px","0px","normal","default",!0),g=Wc?"pink":d,p=Z.Utils.createContainerElement("div","overlayLabelNameEditableDisable","none","absolute",
"visible","1px","1px","0px","0px","none","0px",g,"0px","0px","normal","default",!0),g=Wc?"brown":d,g=Z.Utils.createContainerElement("div","overlayLabelCaptionPositionDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",g,"0px","0px","normal","default",!0),Z.Utils.setOpacity(b,m,e),Z.Utils.setOpacity(k,m,e),Z.Utils.setOpacity(f,m,e),Z.Utils.setOpacity(p,m,e),Z.Utils.setOpacity(g,m,e),Z.AnnotationPanelDisplay.appendChild(b),Z.AnnotationPanelDisplay.appendChild(k),Z.AnnotationPanelDisplay.appendChild(f),
Z.AnnotationPanelDisplay.appendChild(p),Z.AnnotationPanelDisplay.appendChild(g));if("markup"!=Z.editMode){var B=Z.Utils.createTextElement("noteNameTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(B.firstChild,"focus",kc);Z.Utils.addEventListener(B.firstChild,"blur",Kb);Z.AnnotationPanelDisplay.appendChild(B);if(B=document.getElementById("textBoxFor-noteNameTextElement"))B.style.visibility="hidden";B=Z.Utils.createContainerElement("div",
"buttonContainerNote","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(B);Z.mobileDevice||Z.Utils.addEventListener(B,"mouseover",Z.Toolbar.backgroundEventsHandler);b=new Z.Utils.Button("buttonNoteAdd",null,Z.skinPath,c[147],c[148],c[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_NOTEADD");B.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteEdit",null,Z.skinPath,
c[150],c[151],c[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_NOTEEDIT");B.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteDelete",null,Z.skinPath,c[141],c[142],c[143],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_NOTEDELETE");B.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteCancel",null,Z.skinPath,c[153],c[154],c[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_NOTECANCEL");B.appendChild(b.elmt);Z.saveHandler&&
(b=new Z.Utils.Button("buttonNoteSave",null,Z.skinPath,c[144],c[145],c[146],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_NOTESAVE"),B.appendChild(b.elmt));g=Wc?"pink":d;b=Z.Utils.createContainerElement("div","overlayNoteDetailDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",g,"0px","0px","normal","default",!0);Z.Utils.setOpacity(b,m,e);g=Wc?"purple":d;d=Z.Utils.createContainerElement("div","overlayNoteDisable","none","absolute","visible","1px","1px",
"0px","0px","none","0px",g,"0px","0px","normal","default",!0);Z.Utils.setOpacity(d,m,e);Z.AnnotationPanelDisplay.appendChild(b);Z.AnnotationPanelDisplay.appendChild(d)}if(1==Z.helpVisible||2==Z.helpVisible)"markup"==Z.editMode?(c=new Z.Utils.Button("buttonHelpMarkup",null,Z.skinPath,c[40],c[41],c[42],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_HELPMARKUP"),l.appendChild(c.elmt)):"edit"==Z.editMode&&(c=new Z.Utils.Button("buttonHelpAnnotation",null,Z.skinPath,c[40],c[41],
c[42],"1px","1px","1px","1px","mouseover",Z.Toolbar.buttonEventsHandler,"TIP_HELPANNOTATION"),B.appendChild(c.elmt));be(a);lc();Z.Viewer.initializePageExitEventHandler()}else window.setTimeout(Ed,100)}function be(c){var a=new p.calculateAnnotationPanelDimensions(wd,xb,xd),b=p.calculateAnnotationPanelCoords(ze,a.w,a.h,qb,ab);p.sizeAndPositionAnnotationPanel(Td,a.w,a.h,b.x,b.y);Td.display="0"==ze||Z.measureVisible&&null===Z.editMode?"none":"inline-block";var m=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONLABELWIDTH"),
10),d=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONLABELTEXTWIDTH"),10),e=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONLISTWIDTH"),10),l=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONLISTNARROWWIDTH"),10),g=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONMARGIN"),10),k=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONPANELLABELFONTSIZE"),10);parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONPANELLISTFONTSIZE"),10);var f=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONPANELTEXTFONTSIZE"),10),
u=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONTEXTPADDINGSMALL"),10),B=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONTEXTPADDING"),10),h=parseFloat(Z.Utils.getResource("DEFAULT_BACKGROUNDALPHA")),n=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLOR"),q=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLORNOALPHA"),ha=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONNOTEHEIGHT"),10),N=9,t=e-24,I=0,C=Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.SAFARI?-2:0,r=0,x=0,v=0,s=0,E=0,D=0,Ta=0,K=0;if("edit"==Z.editMode)var F=
0,ic=0,y=0,U=0,H=0,G=0,P=0,R=0,Za=0,J=0,cc=0,M=0;var O=0;if(null===Z.editMode)wd&&(F=g+4,O=F+17),xb&&(r=O+4+1,O=r+17),xd&&(Za=O+4+1,J=Za+17+4);else{var A=c[6],Y=c[7],yb=c[8],V=c[4],$=c[5];15<A&&(A=15);15<Y&&(Y=15);22<yb&&(yb=22);1<V&&(V=1);18<$&&($=18);var T=0.75*A,qc=0.75*Y,W=2*T,ba=g+3,ca=1.5*Y,ea=2*Y+1.5*qc,zd=A/2,ga=($-Y)/2,da=0.5*Y,aa=1.75*g,ja=a.w-2*g-2,ia=7*Y+46.5,L=0,ka=a.w-3*g,ma=40.5,X=a.w-g-A-5,rc=X-yb,la=rc-yb;if("markup"==Z.editMode){if(N=0,aa=g+4,e=a.w-2*g,t=e-24,ba=0,x=2,v=da,s=v+Y+
8.5-1,E=x+2*Y-1,rIconList=11.5,r=x+ea+8.5-4-2,D=r+15+8,Ta=D+15,K=da,1==Z.helpVisible||2==Z.helpVisible)I=yb}else if("edit"==Z.editMode){wd&&(F=g+4,ic=F+17-1,y=da,O=ic+ca+4);xb&&(r=O+g,x=r+17+4+1,v=da+1,U=v+Y+da,s=5,E=x+2*Y-1,rIconList=12.75,D=x+ca+8.5+4,H=D+Y+8.5,G=H+Y+8.5,P=G+Y+8.5,R=P+Y+8.5,Ta=R+Y+8.5,K=da,O=Ta+ca+4);xd&&(Za=O+g,J=Za+17+4+1,cc=J+ha+2,M=da);var ra=8.5*W+1,Ce=1.8*qc}}var sa=document.getElementById("annotationPanelBackground");if(sa){var pa=sa.style;pa.width=a.w+"px";pa.height=a.h+
"px";pa.backgroundColor=n;Z.Utils.setOpacity(annotationPanelBackground,h,q)}if(wd){var fa=document.getElementById("labelPOITextBox");if(fa&&S){var na=fa.style;na.width=m+"px";na.height="15px";na.left=g+"px";na.top=F+3+"px";na.visibility="visible";Z.Utils.setTextNodeStyle(fa,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");var qa=S.style;qa.width=e+"px";qa.left=m+"px";qa.top=F+C+"px";qa.visibility="visible";if(null!==Z.editMode){var ta=document.getElementById("textBoxFor-poiNameTextElement");
if(ta){var Q=ta.style;Q.width=t+"px";Q.height="15px";Q.left=m+"px";Q.top=F+"px";Z.Utils.setTextAreaStyle(ta,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none",u+"px")}var ya=document.getElementById("buttonContainerPOI");if(ya){var ua=ya.style;ua.width=a.w+"px";ua.height=ca+"px";ua.left="0px";ua.top=ic+"px"}var za=document.getElementById("buttonPOIEdit");if(za){Z.Utils.buttonSize(za,A,Y);var Da=za.style;Da.left=X+"px";Da.top=y+"px"}var Aa=document.getElementById("buttonPOIAdd");
if(Aa){Z.Utils.buttonSize(Aa,A,Y);var Ea=Aa.style;Ea.left=rc+"px";Ea.top=y+"px"}var va=document.getElementById("buttonPOISave");if(va){Z.Utils.buttonSize(va,A,Y);var Ba=va.style;Ba.left=X+"px";Ba.top=y+"px";Ba.display="none"}var Ca=document.getElementById("buttonPOICancel");if(Ca){Z.Utils.buttonSize(Ca,A,Y);var Ga=Ca.style;Ga.left=va?rc+"px":X+"px";Ga.top=y+"px";Ga.display="none"}var Ha=document.getElementById("buttonPOIDelete");if(Ha){Z.Utils.buttonSize(Ha,A,Y);var Ja=Ha.style;Ja.left=va&&Ca?la+
"px":va?rc+"px":X+"px";Ja.top=y+"px";Ja.display="none"}var Na=document.getElementById("overlayPOIDisable");if(Na){var Ia=Na.style;Ia.width=a.w+"px";Ia.height=g+15+Y+17+4+"px";Ia.left="0px";Ia.top="0px"}}}}if(xb){var Oa=document.getElementById("labelLabelTextBox");if(Oa){var Fa=Oa.style;Fa.width=m+"px";Fa.height="15px";Fa.left=g+"px";Fa.top=r+3+"px";Fa.visibility="visible";Z.Utils.setTextNodeStyle(Oa,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none")}}if(("markup"==
Z.editMode||xb)&&xa){var Ka=xa.style;Ka.width=e+"px";Ka.left="markup"==Z.editMode?g+"px":m+"px";Ka.top=r+C+"px";Ka.visibility="visible"}if("edit"==Z.editMode&&xb||"markup"==Z.editMode){var Pa=document.getElementById("textBoxFor-labelNameTextElement");if(Pa){var Ma=Pa.style;Ma.width=t+"px";Ma.height="15px";Ma.left="markup"==Z.editMode?g+"px":m+"px";Ma.top=r+"px";Z.Utils.setTextAreaStyle(Pa,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none",u+"px")}var Ua=document.getElementById("buttonBorderLabel");
if(Ua){var oa=Ua.style;oa.width=ja+"px";oa.height=ia+"px";oa.left=g+"px";oa.top=x+"px"}var Va=document.getElementById("buttonContainerLabel");if(Va){var Qa=Va.style;Qa.width=a.w-2*g-2+"px";Qa.height=ea+"px";Qa.left="0px";Qa.top=x+"px"}var Ra=document.getElementById("buttonViewMode");if(Ra){L+=aa+1;Z.Utils.buttonSize(Ra,A,Y);var Sa=Ra.style;Sa.left=L+"px";Sa.top=v+"px"}var Xa=document.getElementById("buttonEditColorPicker");if(Xa){L+=yb;Z.Utils.buttonSize(Xa,A,Y);var bb=Xa.style;bb.left=L+"px";bb.top=
v+"px"}var $a=document.getElementById("editModeDivider");if($a){L+=yb+1;"markup"==Z.editMode&&(L+=zd-1);Z.Utils.graphicSize($a,V,$);var gb=$a.style;gb.left=L+"px";gb.top=v-ga+"px"}var Wa=document.getElementById("buttonEditModeFreehand");if(Wa){L+=yb-A+4;"markup"==Z.editMode&&(L+=zd-4);Z.Utils.buttonSize(Wa,A,Y);var Ya=Wa.style;Ya.left=L+"px";Ya.top=v+"px"}var eb=document.getElementById("buttonEditModeText");if(eb){L+=yb;Z.Utils.buttonSize(eb,A,Y);var ob=eb.style;ob.left=L+"px";ob.top=v+"px"}var lb=
document.getElementById("buttonEditModeIcon");if(lb){L+=yb;Z.Utils.buttonSize(lb,A,Y);var pb=lb.style;pb.left=L+"px";pb.top=v+"px"}var db=document.getElementById("buttonEditModeRectangle");if(db){L+=yb;Z.Utils.buttonSize(db,A,Y);var fb=db.style;fb.left=L+"px";fb.top=v+"px"}var ib=document.getElementById("buttonEditModePolygon");if(ib){L+=yb;Z.Utils.buttonSize(ib,A,Y);var jb=ib.style;jb.left=L+"px";jb.top=v+"px"}var kb=document.getElementById("buttonEditModeMeasure");if(kb){L+=yb;Z.Utils.buttonSize(kb,
A,Y);var mb=kb.style;mb.left=L+"px";mb.top=v+"px"}if("markup"!=Z.editMode){var tb=document.getElementById("buttonContainerLabelColorsBackground");if(tb){var nb=tb.style;nb.width=ra+"px";nb.height=Ce+"px";nb.left="0px";nb.top="0px"}}var vb=document.getElementById("buttonContainerLabelColors");if(vb){var wb=vb.style;wb.left=ba+"px";wb.top=U+"px"}var rb=document.getElementById("buttonColor0");if(rb){L=g+4+1;Z.Utils.buttonSize(rb,T,qc);var hb=rb.style;hb.left=L+"px";hb.top=s+"px"}var sb=document.getElementById("buttonColor1");
if(sb){L+=W;Z.Utils.buttonSize(sb,T,qc);var Fb=sb.style;Fb.left=L+"px";Fb.top=s+"px"}var zb=document.getElementById("buttonColor2");if(zb){L+=W;Z.Utils.buttonSize(zb,T,qc);var Lb=zb.style;Lb.left=L+"px";Lb.top=s+"px"}var Ab=document.getElementById("buttonColor3");if(Ab){L+=W;Z.Utils.buttonSize(Ab,T,qc);var Mb=Ab.style;Mb.left=L+"px";Mb.top=s+"px"}var Db=document.getElementById("buttonColor4");if(Db){L+=W;Z.Utils.buttonSize(Db,T,qc);var vd=Db.style;vd.left=L+"px";vd.top=s+"px"}var Eb=document.getElementById("buttonColor5");
if(Eb){L+=W;Z.Utils.buttonSize(Eb,T,qc);var Qb=Eb.style;Qb.left=L+"px";Qb.top=s+"px"}var Gb=document.getElementById("buttonColor6");if(Gb){L+=W;Z.Utils.buttonSize(Gb,T,qc);var Rb=Gb.style;Rb.left=L+"px";Rb.top=s+"px"}var Ib=document.getElementById("buttonColor7");if(Ib){L+=W;Z.Utils.buttonSize(Ib,T,qc);var Sb=Ib.style;Sb.left=L+"px";Sb.top=s+"px"}var Tb=document.getElementById("buttonBorderLg");if(Tb){var La=Tb.style;La.width=A+"px";La.height=Y+"px";Ra?(La.left=parseFloat(Sa.left)-2+"px",La.top=parseFloat(Sa.top)-
2+"px"):Wa?(La.left=parseFloat(Ya.left)-2+"px",La.top=parseFloat(Ya.top)-2+"px"):db?(La.left=parseFloat(fb.left)-2+"px",La.top=parseFloat(fb.top)-2+"px"):ib?(La.left=parseFloat(jb.left)-2+"px",La.top=parseFloat(jb.top)-2+"px"):kb&&(La.left=parseFloat(mb.left)-2+"px",La.top=parseFloat(mb.top)-2+"px")}var Zb=document.getElementById("buttonBorderSm");if(Zb&&hb){var Bb=Zb.style;Bb.width=T+"px";Bb.height=qc+"px";Bb.left=parseFloat(hb.left)-2+"px";Bb.top=parseFloat(hb.top)-2+"px"}}if("markup"==Z.editMode||
"edit"==Z.editMode&&xb){var Ob=document.getElementById("labelCaptionTextBox"),Pb=document.getElementById("textBoxFor-captionTextElement");if(Ob&&Pb){var ub=Ob.style;ub.width=m+"px";ub.height="15px";ub.left=aa+"px";ub.top=D+3+"px";ub.visibility="markup"==Z.editMode?"hidden":"visible";Z.Utils.setTextNodeStyle(Ob,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");var Hb=Pb.style;Hb.width="markup"==Z.editMode?a.w-2*g-4+1+"px":d+N+"px";Hb.height="15px";Hb.left="markup"==
Z.editMode?g+"px":aa+m+"px";Hb.top=D+"px";Z.Utils.setTextAreaStyle(Pb,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none",u+"px")}}if("edit"==Z.editMode&&xb){var Vb=document.getElementById("labelTooltipTextBox"),$b=document.getElementById("textBoxFor-tooltipTextElement");if(Vb&&$b){var Cb=Vb.style;Cb.width=m+"px";Cb.height="15px";Cb.left=aa+"px";Cb.top=H+3+"px";Cb.visibility="visible";Z.Utils.setTextNodeStyle(Vb,"black","verdana",k+"px","none","normal","normal",
"normal","normal","1em","left","none");var cb=$b.style;cb.width=d+N+"px";cb.height="15px";cb.left=aa+m+"px";cb.top=H+"px";Z.Utils.setTextAreaStyle($b,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none",u+"px")}var ac=document.getElementById("labelClickURLTextBox"),bc=document.getElementById("textBoxFor-clickURLTextElement");if(ac&&bc){var Jb=ac.style;Jb.width=m+"px";Jb.height="15px";Jb.left=aa+"px";Jb.top=G+3+"px";Jb.visibility="visible";Z.Utils.setTextNodeStyle(ac,
"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");cb=bc.style;cb.width=d+N+"px";cb.height="15px";cb.left=aa+m+"px";cb.top=G+"px";Z.Utils.setTextAreaStyle(bc,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none",u+"px")}var gc=document.getElementById("labelCaptionPositionList");if(gc){var Kb=gc.style;Kb.width=l+"px";Kb.left=aa+"px";Kb.top=P+"px";Kb.visibility="visible"}var lc=document.getElementById("labelTargetList");if(lc){var Wb=
lc.style;Wb.width=l+"px";Wb.left=aa+l+yb-A+"px";Wb.top=P+"px";Wb.visibility="visible"}var dc=document.getElementById("labelScaleTextBox"),ec=document.getElementById("buttonLabelScaleDown"),hc=document.getElementById("buttonLabelScaleUp");if(dc&&ec&&hc){var L=aa+12,Ub=dc.style;Ub.width=m+"px";Ub.height="15px";Ub.left=L+"px";Ub.top=R+3+"px";Ub.visibility="visible";Z.Utils.setTextNodeStyle(dc,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");L+=m-10;Z.Utils.buttonSize(ec,
A,Y);var tc=ec.style;tc.left=L+"px";tc.top=R+"px";L+=yb;Z.Utils.buttonSize(hc,A,Y);var uc=hc.style;uc.left=L+"px";uc.top=R+"px";L+=yb+3}var kc=document.getElementById("labelRolloverTextBox"),xc=document.getElementById("containerFor-checkboxRollover"),nc=document.getElementById("checkboxRollover");if(kc&&xc&&nc){var Yb=kc.style;Yb.width=m+"px";Yb.height="15px";Yb.left=L+"px";Yb.top=R+3+"px";Yb.visibility="visible";Z.Utils.setTextNodeStyle(kc,"black","verdana",k+"px","none","normal","normal","normal",
"normal","1em","left","none");var L=L+(m-1),fc=xc.style;fc.width=1.5*A+"px";fc.height=1.5*Y+"px";fc.left=L+3+"px";fc.top=R-3+"px";nc.width=A;nc.height=Y}}if("edit"==Z.editMode&&xb||"markup"==Z.editMode){var Gc=document.getElementById("buttonContainerLabel2");if(Gc){var jc=Gc.style;jc.width=a.w+"px";jc.height=ca+"px";jc.left="0px";jc.top=Ta+"px"}}if("edit"==Z.editMode&&xb){var wc=document.getElementById("buttonLabelEdit");if(wc){Z.Utils.buttonSize(wc,A,Y);var Lc=wc.style;Lc.left=X+"px";Lc.top=K+"px"}var zc=
document.getElementById("buttonLabelAdd");if(zc){Z.Utils.buttonSize(zc,A,Y);var Nc=zc.style;Nc.left=rc+"px";Nc.top=K+"px"}}if("edit"==Z.editMode&&xb||"markup"==Z.editMode){var Xb=document.getElementById("buttonLabelSave");if(Xb){Z.Utils.buttonSize(Xb,A,Y);var Ac=Xb.style;Ac.left=X-I+"px";Ac.top=K+"px";"markup"!=Z.editMode&&(Ac.display="none")}}if("edit"==Z.editMode&&xb){var oc=document.getElementById("buttonLabelCancel");if(oc){Z.Utils.buttonSize(oc,A,Y);var Cc=oc.style;Cc.left=Xb?rc+"px":X+"px";
Cc.top=K+"px";"markup"!=Z.editMode&&(Cc.display="none")}}if("edit"==Z.editMode&&xb||"markup"==Z.editMode){var Dc=document.getElementById("buttonLabelDelete");if(Dc){Z.Utils.buttonSize(Dc,A,Y);var Ec=Dc.style;Ec.left=Xb&&oc?la-I+"px":Xb?rc-I+"px":X-I+"px";Ec.top=K+"px";"markup"!=Z.editMode&&(Ec.display="none")}}if("markup"==Z.editMode){var Hc=document.getElementById("buttonHelpMarkup");if(Hc){Z.Utils.buttonSize(Hc,A,Y);var Rc=Hc.style;Rc.left=X+"px";Rc.top=K+"px"}}if("edit"==Z.editMode&&xb||"markup"==
Z.editMode){var Tc=document.getElementById("buttonContainerLabelIcons");if(Tc){var Uc=Tc.style;Uc.left=g/2+"px";Uc.top=E+"px"}var Vc=document.getElementById("buttonContainerLabelIconsBackground");if(Vc){var vc=Vc.style;vc.width=ka+2*g-1+"px";vc.height=ma+"px";vc.left="0px";vc.top="0px"}var Wc=document.getElementById("labelIconList");if(Wc){var Kc=Wc.style;Kc.width=ka+"px";Kc.left=g+"px";Kc.top=rIconList+"px"}}if("edit"==Z.editMode&&xb){var Xc=document.getElementById("overlayLabelDisable");if(Xc){var yc=
Xc.style;yc.width=a.w+"px";yc.height=ia+2*da+2*Y+8+"px";yc.left="0px";yc.top=r+"px"}var Yc=document.getElementById("overlayLabelDetailDisable");if(Yc&&oa){var mc=Yc.style;mc.width=parseFloat(oa.width)+2+"px";mc.height=parseFloat(oa.height)+2+"px";mc.left=parseFloat(oa.left)+"px";mc.top=parseFloat(oa.top)+"px";mc.display="inline-block"}var $c=document.getElementById("overlayLabelDetailEditableDisable");if($c){var Bc=$c.style;Bc.width=parseFloat(oa.width)+"px";Bc.height=parseFloat(oa.height)-Y-8.5-
10+"px";Bc.left=parseFloat(oa.left)+1+"px";Bc.top=parseFloat(oa.top)+Y+8.5+11+"px"}var dd=document.getElementById("overlayLabelNameEditableDisable");if(dd){var ud=dd.style;ud.width=a.w+"px";ud.height="25px";ud.left="0px";ud.top=r-4+"px"}var hd=document.getElementById("overlayLabelCaptionPositionDisable");if(hd){var Fc=hd.style;Fc.width=a.w/2-12+"px";Fc.height="24.5px";Fc.left=g+1+"px";Fc.top=parseFloat(Kb.top)-4+"px"}}if(xd){var Qc=document.getElementById("labelNoteTextBox"),Ud=document.getElementById("textBoxFor-noteTextElement");
if(Qc&&wa&&Ud){var sc=Qc.style;sc.width=m+"px";sc.height="15px";sc.left=g+"px";sc.top=Za+3+"px";sc.visibility="visible";Z.Utils.setTextNodeStyle(Qc,"black","verdana",k+"px","none","normal","normal","normal","normal","1em","left","none");var Jc=wa.style;Jc.width=e+"px";Jc.left=m+"px";Jc.top=Za+C+"px";Jc.visibility="visible";var kd=a.w-2*g-2,sd=Ud.style;sd.width=kd+"px";sd.height=ha+"px";sd.left=g+"px";sd.top=J+"px";sd.visibility="visible";Z.Utils.setTextAreaStyle(Ud,"black","verdana",f+"px","none",
"normal","normal","normal","normal","1.5em","left","none","0px");var ld=document.getElementById("noteTextElement"),g=kd*(1-0.98);ld.style.marginLeft=g+"px";ld.style.width="98%";if(null!==Z.editMode){var Zc=document.getElementById("textBoxFor-noteNameTextElement");if(Zc){var Mc=Zc.style;Mc.width=t+"px";Mc.height="15px";Mc.left=m+"px";Mc.top=Za+"px";Z.Utils.setTextAreaStyle(Zc,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","left","none",u+"px")}var md=document.getElementById("buttonContainerNote");
if(md){var Oc=md.style;Oc.width=a.w+"px";Oc.height=ea+"px";Oc.left="0px";Oc.top=cc+"px"}var ad=document.getElementById("buttonNoteEdit");if(ad){Z.Utils.buttonSize(ad,A,Y);var nd=ad.style;nd.left=X+"px";nd.top=M+"px"}var bd=document.getElementById("buttonNoteAdd");if(bd){Z.Utils.buttonSize(bd,A,Y);var od=bd.style;od.left=rc+"px";od.top=M+"px"}var pc=document.getElementById("buttonNoteSave");if(pc){Z.Utils.buttonSize(pc,A,Y);var cd=pc.style;cd.left=X+"px";cd.top=M+"px";cd.display="none"}var Pc=document.getElementById("buttonNoteCancel");
if(Pc){Z.Utils.buttonSize(Pc,A,Y);var ed=Pc.style;ed.left=pc?rc+"px":X+"px";ed.top=M+"px";ed.display="none"}var fd=document.getElementById("buttonNoteDelete");if(fd){Z.Utils.buttonSize(fd,A,Y);var gd=fd.style;gd.left=pc&&Pc?la+"px":pc?rc+"px":X+"px";gd.top=M+"px";gd.display="none"}if("edit"==Z.editMode){var jd=document.getElementById("buttonHelpAnnotation");if(jd){Z.Utils.buttonSize(jd,A,Y);var pd=jd.style;pd.left=aa+"px";pd.top=M+"px"}}var qd=document.getElementById("overlayNoteDetailDisable");if(qd){var Ic=
qd.style;Ic.width=parseFloat(sd.width)+2+"px";Ic.height=parseFloat(sd.height)+2+"px";Ic.left=parseFloat(sd.left)+"px";Ic.top=parseFloat(sd.top)+"px";Ic.display="inline-block"}var rd=document.getElementById("overlayNoteDisable");if(rd){var Sc=rd.style;Sc.width=a.w+"px";Sc.height=23.5+ha+B+8.5+Y+4+"px";Sc.left="0px";Sc.top=Za+"px"}}}}}function lc(){xc("0");ce=!0}function Va(c){var a=0,b=[];switch(c){case "slide":c=0;for(var m=mb.length;c<m;c++)b[b.length]=parseInt(mb[c].internalID,10);break;case "hotspot":c=
0;for(m=v.length;c<m;c++)b[b.length]=parseInt(v[c].internalID,10);break;case "poi":c=0;for(m=ea.length;c<m;c++)b[b.length]=parseInt(ea[c].value,10);break;case "label":c=0;for(m=ma.length;c<m;c++)b[b.length]=parseInt(ma[c].value,10);break;case "labelExternal":c=0;for(m=v.length;c<m;c++)b[b.length]=parseInt(v[c].id,10);break;case "note":for(c=0,m=ua.length;c<m;c++)b[b.length]=parseInt(ua[c].value,10)}b=Z.Utils.arraySortNumericAscending(b);0<b.length&&(a=b[b.length-1]+1);return a.toString()}function Vd(c){if(c=
Z.Utils.event(c)){var a=Z.Utils.target(c);c=Z.Utils.relatedTarget(c);var b=lb(a);null===b||null===c||"captionTextBox"==c.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||"captionTextBox"==a.id&&-1!=c.id.indexOf("hot")&&-1==c.id.indexOf("hotspotDisplay")||p.setHotspotVisibility(b,!0)}}function Fe(c){if(c=Z.Utils.event(c))Z.clickZoomAndPanBlock=!0}function Wd(c){if(c=Z.Utils.event(c)){var a=Z.Utils.target(c);c=Z.Utils.relatedTarget(c);var b=lb(a);null===b||null===c||"captionTextBox"==
c.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||"captionTextBox"==a.id&&-1!=c.id.indexOf("hot")&&-1==c.id.indexOf("hotspotDisplay")||p.setHotspotVisibility(b,!1)}}function Ge(c){(c=Z.Utils.event(c))&&!c.altKey&&(c=Z.Utils.target(c),c=lb(c),c=c.id.substring(3,c.id.length),Z.Utils.arrayIndexOfObjectValue(v,"internalID",c),c=Z.Utils.getResource("ALERT_HOTSPOTCLICKURLDISABLED"),Z.Utils.showMessage(c,!0,null,"center",!0))}function Xd(c){var a="0";if(c=Z.Utils.event(c))Z.tourPlaying&&
p.tourStop(),c=Z.Utils.target(c),a=c.options[c.selectedIndex].value;isNaN(parseInt(a),10)||(c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",a),-1!=c&&(Z.Utils.playAudio(de,v[c].audio),p.zoomAndPanToView(v[c].x,v[c].y,v[c].z/100,v[c].rotation)))}function xc(c,a,b){ea.sort(zb);Z.Utils.updateSelectElement(S,ea,c);if("undefined"===typeof c||null===c)0==S.options.length&&(c=Z.Utils.getResource("CONTENT_FIRSTPOINAME"),Cd("0",c,"center","center","-1","0"),Fd="0"),c="0";else{var m=Z.Utils.arrayIndexOfObjectValue(ea,
"value",c);-1!=m&&(c=ea[m].value)}var m=Z.Utils.arrayIndexOfObjectValue(ea,"value",c),d=document.getElementById("poiNameTextElement");d&&-1!=m&&(d.value=ea[m].text);Vb(c,a);"markup"!=Z.editMode&&Kc(c,b)}function Vb(c,a){ma.sort(zb);Oa="markup"==Z.editMode?Z.Utils.arrayClone("labels",ma,Oa):Xc(ma,c);Z.Utils.updateSelectElement(xa,Oa,a);if("undefined"===typeof a||null===a)a=0<xa.options.length?xa.options[0].value:null;ee(a)}function ee(c){x=c;na=fe=null;Ga=!0;var a=Z.Utils.arrayIndexOfObjectValue(v,
"internalID",x);J=-1!=a?v[a]:null;if(null!==Z.editMode){if(c=document.getElementById("labelNameTextElement"))c.value=null!==J?J.name:"";if(c=document.getElementById("captionTextElement"))if(c.value="",null!==J){var b=J.captionHTML;"undefined"!==typeof b&&Z.Utils.isStrVal(b)?c.value=b:c.value=J.caption}if("markup"!=Z.editMode){var m=document.getElementById("labelIconList"),d=document.getElementById("tooltipTextElement"),e=document.getElementById("clickURLTextElement"),l=document.getElementById("labelCaptionPositionList");
c=document.getElementById("labelTargetList");b=document.getElementById("checkboxRollover");if(m&&d&&e&&l&&c&&b&&(m.selectedIndex=0,d.value="",e.value="",l.selectedIndex=0,c.selectedIndex=0,b.checked=!1,null!==J)){if("icon"==J.mediaType){var a=J.media,g=a.lastIndexOf("/")+1,k=a.lastIndexOf(".");-1!=g&&-1!=k&&(a=a.substring(g,k).toLowerCase(),a=Z.Utils.arrayIndexOfObjectValueSubstring(m,"value",a,null,!0),-1!=a&&(m.selectedIndex=a),p.toggleLabelIconPicker(!1))}m=J.captionPosition;Z.Utils.isStrVal(m)&&
(a=Z.Utils.arrayIndexOfObjectValue(l,"value",m),-1!=a&&(l.selectedIndex=a));l=J.tooltipHTML;"undefined"!==typeof l&&Z.Utils.isStrVal(l)?d.value=l:d.value=J.tooltip;d=J.clickURL;Z.Utils.isStrVal(d)&&(e.value=d);e=J.urlTarget;Z.Utils.isStrVal(e)&&(a=Z.Utils.arrayIndexOfObjectValue(c,"value",e),-1!=a&&(c.selectedIndex=a));b.checked=!0==J.rollover}}}null!==J&&(x=J.internalID);G?jc():Wa()}function Kc(c,a){ua.sort(zb);Ib=Xc(ua,c);Z.Utils.updateSelectElement(wa,Ib,a);if("undefined"===typeof a||null===a)a=
0<wa.options.length?wa.options[0].value:null;ge(a)}function ge(c){c=Z.Utils.arrayIndexOfObjectValue(Ib,"value",c);if(null!==Z.editMode){var a=document.getElementById("noteNameTextElement");a&&(a.value=-1!=c?Ib[c].text:"")}if(a=document.getElementById("noteTextElement"))a.value=-1!=c?Ib[c].noteText:""}function he(c){if(c=Z.Utils.event(c))if(c=Z.Utils.target(c),(c=c.options[c.selectedIndex].value)&&!isNaN(parseInt(c),10)&&(p.saveEditsPOI(!0),xc(c),c=Z.Utils.arrayIndexOfObjectValue(ea,"value",c),-1!=
c)){var a=Z.imageW/2,b=Z.imageH/2,m;m=ea[c].x;a="center"==m?a:parseFloat(m);m=ea[c].y;b="center"==m?b:parseFloat(m);m=ea[c].z;c="-1"==m?Z.fitZ:parseFloat(m);p.getInitializedAnnotationPanel()?p.zoomAndPanToView(a,b,c/100):p.setView(a,b,c/100)}}function Ne(c){var a;if(c=Z.Utils.event(c))a=Z.Utils.target(c),a=a.options[a.selectedIndex].value;if(a&&!isNaN(parseInt(a,10))&&(p.saveEditsLabel(!0),ee(a),x=a,Ga=!0,a=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x),J=-1!=a?v[a]:null,"view"!=Z.labelMode&&p.setEditModeLabel(J.mediaType,
!0,J.media,!0),c)){a=Z.imageW/2;var b=Z.imageH/2;c=J.x;a="center"==c?a:parseFloat(c);c=J.y;b="center"==c?b:parseFloat(c);c=J.z;c="-1"==c?Z.fitZ:parseFloat(c);p.zoomAndPanToView(a,b,c/100)}}function ae(c){p.toggleLabelIconPicker(!1);c=Z.Utils.event(c);c=Z.Utils.target(c);c=c[c.selectedIndex].value;"External Graphics File"!=c&&"markup"!=Z.editMode&&"editLabel"==Z.editing&&"shim"!=c&&(c=Z.annotationFolder+"/"+c,p.modifyHotspot(x,"mediaType","icon",!0,!0),p.modifyHotspot(x,"media",c,!1,!0))}function Ke(c){c=
Z.Utils.event(c);c=Z.Utils.target(c);c=labelCaptionPositionListDP[c.selectedIndex].value;"shim"!==c&&p.modifyHotspot(x,"captionPosition",c,!1,!0)}function $d(c){c=Z.Utils.event(c);c=Z.Utils.target(c);c=labelTargetListDP[c.selectedIndex].value;"shim"!==c&&p.modifyHotspot(x,"urlTarget",c,!1,!0)}function Le(c){if(c=Z.Utils.event(c))c=Z.Utils.target(c),p.modifyHotspot(x,"rollover",c.checked,!1,!0)}function ie(c){var a;if(c=Z.Utils.event(c))c=Z.Utils.target(c),a=c.options[c.selectedIndex].value;a&&!isNaN(parseInt(a,
10))&&(p.saveEditsNote(!0),ge(a))}function kc(c){if(c=Z.Utils.event(c))if(c=Z.Utils.target(c))je(c.id),Z.Utils.removeEventListener(document,"keydown",Eb),Z.Utils.removeEventListener(document,"keyup",Eb),Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault)}function Kb(c){if(c=Z.Utils.event(c)){if(c=Z.Utils.target(c)){if(0==xa.options.length&&("labelNameTextElement"==c.id||"captionTextElement"==c.id||"tooltipTextElement"==
c.id||"clickURLTextElement"==c.id)){c=parseInt(Z.Utils.getResource("ALERT_HOWTOEDITMESSAGEDURATION"),10);Z.Utils.showMessage(Z.Utils.getResource("ALERT_HOWTOCREATEFIRSTLABEL"),!0,c,"center",!0);return}var a=null;switch(c.id){case "poiNameTextElement":var b=S.selectedIndex,m=S[b].value;ea[b].text=c.value;ea.sort(zb);Z.Utils.updateSelectElement(S,ea,m);break;case "labelNameTextElement":b=xa.selectedIndex;m=xa[b].value;ma[b].text=c.value;Oa[b].text=c.value;ma.sort(zb);Oa.sort(zb);Z.Utils.updateSelectElement(xa,
Oa,m);b=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x);-1!=b&&(v[b].name=c.value);break;case "captionTextElement":b=c.value;a=-1!=b.indexOf("<CAPTION>")?"captionHTML":"caption";break;case "tooltipTextElement":a=b&&-1!=b.indexOf("<TOOLTIP>")?"tooltipHTML":"tooltip";break;case "clickURLTextElement":a="clickURL";break;case "noteNameTextElement":b=wa.selectedIndex;m=wa[b].value;ua[b].text=c.value;Ib[b].text=c.value;ua.sort(zb);Ib.sort(zb);Z.Utils.updateSelectElement(wa,Ib,m);break;case "noteTextElement":ua[wa.selectedIndex].noteText=
c.value,Ib[wa.selectedIndex].noteText=c.value}null!==a&&p.modifyHotspot(x,a,c.value,!1,!0)}Z.Utils.addEventListener(document,"keydown",Eb);Z.Utils.addEventListener(document,"keyup",Eb);Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault);Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)}}function je(c){if("markup"==Z.editMode){var a=document.getElementById("labelNameTextElement"),b=document.getElementById("captionTextElement");if(a&&b)switch(c){case "labelNameTextElement":labelNameTextElement.tabIndex=
1;captionTextElement.tabIndex=2;break;case "captionTextElement":labelNameTextElement.tabIndex=2,captionTextElement.tabIndex=1}}else if(null!==Z.editMode){var m=document.getElementById("poiNameTextElement"),a=document.getElementById("labelNameTextElement"),b=document.getElementById("captionTextElement"),d=document.getElementById("tooltipTextElement"),e=document.getElementById("clickURLTextElement"),l=document.getElementById("noteNameTextElement"),g=document.getElementById("noteTextElement");m&&a&&
b&&d&&e&&l&&g&&(m.tabIndex="",a.tabIndex="",b.tabIndex="",d.tabIndex="",e.tabIndex="",l.tabIndex="",g.tabIndex="");switch(c){case "poi":poiNameTextElement.tabIndex=1;break;case "label":labelNameTextElement.tabIndex=1;captionTextElement.tabIndex=2;tooltipTextElement.tabIndex=3;clickURLTextElement.tabIndex=4;break;case "note":noteNameTextElement.tabIndex=1;noteTextElement.tabIndex=2;break;case "noteNameTextElement":noteNameTextElement.tabIndex=1;noteTextElement.tabIndex=2;break;case "noteTextElement":noteNameTextElement.tabIndex=
2;noteTextElement.tabIndex=1;break;case "clickURLTextElement":labelNameTextElement.tabIndex=2;captionTextElement.tabIndex=3;tooltipTextElement.tabIndex=4;clickURLTextElement.tabIndex=1;break;default:labelNameTextElement.tabIndex=1,captionTextElement.tabIndex=2,tooltipTextElement.tabIndex=3,clickURLTextElement.tabIndex=4}}}function Xc(c,a){for(var b=[],m=0,d=c.length;m<d;m++)c[m].poiID==a&&(b[b.length]=c[m]);return b}function sc(c,a,b,d){if(Z.useCanvas&&"polygon"==c.media){if(c.visibility||c.rollover||
d){d=c.internalID;if("undefined"!==typeof c.polygonPts&&null!==c.polygonPts&&0<c.polygonPts.length){targetCtx="view"==Z.labelMode||d!==x?Ae:pa;targetCtx.save();targetCtx.translate((c.x-Z.imageX)*Z.imageZ,(c.y-Z.imageY)*Z.imageZ);var e=aa/bc,l=p.getZoom(),f="polygon"!=c.media?c.z:100,g="polygon"!=c.media?a.constrainedScale:1;a=c.xScale/100/(f/100)*g/e*l;e=c.yScale/100/(f/100)*g/e*l;1!=a&&1!=e&&targetCtx.scale(a,e);"freehand"==c.mediaType?targetCtx.lineWidth=Uf/l:(targetCtx.lineWidth=Vf/l,targetCtx.fillStyle=
c.fillColor);targetCtx.strokeStyle=c.lineColor;e=c.polygonPts.slice(0);g=e.length;f=c.x;a=c.y;"measure"!=Z.labelMode||c.polyClosed||Ga||"undefined"===typeof b||null===b||(e[g]={x:b.x,y:b.y});targetCtx.beginPath();var k=e[0].x-f,u=e[0].y-a;targetCtx.moveTo(k,u);for(var g=1,B=e.length;g<B;g++){var h=e[g].x-f,n=e[g].y-a;targetCtx.lineTo(h,n)}"freehand"!=c.mediaType&&(c.polyClosed||Ya&&0==na)&&(c.polyClosed&&(targetCtx.lineTo(k,u),targetCtx.closePath()),c.fillVisible&&(c.polyClosed||d!=x)&&(targetCtx.globalAlpha=
wg,targetCtx.fill()),targetCtx.globalAlpha=1);targetCtx.stroke();if((null===Z.editMode&&"measure"==Z.labelMode||"addLabel"==Z.editing||"editLabel"==Z.editing)&&("rectangle"==Z.labelMode&&4==e.length||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&c.internalID==x&&"undefined"!==typeof c&&null!==c&&"freehand"!=c.mediaType)for(c=1/l,g=0,B=e.length;g<B;g++)h=e[g].x-f,n=e[g].y-a,Gd(h,n,!Ga&&0==g,c);targetCtx.restore()}null===d||"undefined"===typeof b||G||Wb(d,b)}}else Wf||(Z.Utils.showMessage(Z.Utils.getResource("ALERT_POLYGONSREQUIRECANVAS")),
Wf=!0)}function Gd(c,a,b,d){var e=Oe*d;pa.lineWidth=xg*d;pa.strokeStyle=gf;pa.fillStyle=b?yg:zg;pa.beginPath();pa.arc(c,a,e,0,2*Math.PI,!1);pa.closePath();pa.globalAlpha=0.5;pa.fill();pa.globalAlpha=1;pa.stroke()}function ke(c,a,b){Z.Utils.clearDisplay(Aa);var d=new Ka,e=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x);if(-1!=e){e=v[e];sc(e,d);var d=p.getZoom(),l=e.polygonPts,f=l[l.length-1],l=(f.x-Z.imageX)*d,d=(f.y-Z.imageY)*d;e.polyClosed||(pa.lineWidth=Vf,pa.strokeStyle=lineStrokeColor,pa.beginPath(),
pa.moveTo(l,d),pa.lineTo(c,a),pa.closePath(),pa.stroke());"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===x||Wb(x,b,!0)}}function jc(c){gb&&Z.Utils.clearDisplay(gb);Aa&&Z.Utils.clearDisplay(Aa);if("inline-block"==Hc.display)for(var a=new Ka,b=0,d=v.length;b<d;b++){var e=v[b];if("polygon"==e.media&&e.visibility&&(c||"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof x||null===x||x!==b)){var l=e.x,f=e.y;l+Vc>a.box.l&&l-Vc<a.box.r&&f+Vc>a.box.t&&f-Vc<
a.box.b&&sc(e,a,null,c)}}}function le(c,a,b,d,e){pa.lineWidth=Uf;pa.strokeStyle=lineStrokeColor;pa.beginPath();pa.moveTo(c,a);pa.lineTo(b,d);pa.closePath();pa.stroke();pa.strokeStyle=gf;2<Z.Utils.calculatePointsDistance(c,a,b,d)&&bb(x,!1,e);Wb(x,e)}function Hd(c,a,b){yc=!0;Z.Utils.clearDisplay(Aa);var d=new Ka;c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",c);if(-1!=c){c=v[c];c.polygonPts[a]=b;var e=c.polygonPts.length;"rectangle"==Z.labelMode&&4==e&&(c.polygonPts=Yc(c.polygonPts,a));sc(c,d,b)}}
function Yc(c,a){var b=c[a].x,d=c[a].y,e=a-1;0>e&&(e+=4);var l=a+1;3<l&&(l-=4);1==e||3==e?(c[e].x=b,c[l].y=d):(c[l].x=b,c[e].y=d);return c}function ld(c,a){c=Z.Utils.event(c);if("undefined"===typeof x||null===x)bb(null,!0,a);else{var b=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x);-1!=b&&(b=v[b],fe=b.polygonPts,b=b.polyClosed,null===fe?(bb(x,!0,a),Wb(x,a)):(na=Zc(c,a),b?null===na&&bb(null,!0,a):null===na?c.altKey?(bb(x,!1,a),Lc(x,!1)):bb(x,!1,a):0==na&&2<fe.length&&!Ga&&Lc(x,!0)))}(!c.altKey||
"measure"==Z.labelMode&&null!==x)&&Wb(x,a)}function bb(c,a,b){var d,e=!1,l=!1;"undefined"===typeof c||null===c||"addLabel"==Z.editing&&Ga&&("polygon"==Z.labelMode||"measure"==Z.labelMode)?(null===Z.editMode&&"measure"==Z.labelMode&&0<v.length&&p.deleteAllMeasureHotspots(),d="freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode?Z.labelMode:null,e=[],e[0]={x:b.x,y:b.y},l="undefined"!==typeof S&&0<S.options.length?l=S.options[S.selectedIndex].value:1,c=(100*
p.getZoom()).toString(),p.createHotspotFromParameters(null,null,d,"polygon",null,b.x.toString(),b.y.toString(),c,null,null,null,null,null,null,null,mc,null,lineStrokeColor,null,null,null,null,null,null,"0",null,l,null,null,"0",e),d=v[v.length-1],x=d.internalID,e=d,l=d.poiID,Z.measureVisible&&null===Z.editMode||(c=Z.Utils.arrayIndexOfObjectValue(ma,"value",x),-1!=c?(ma[c]={text:e.name,value:x,poiID:l},c=Z.Utils.arrayIndexOfObjectValue(Oa,"value",x),-1!=c&&(Oa[c]={text:e.name,value:x,poiID:l},zc||Z.Utils.updateSelectElement(xa,
Oa))):(ma[ma.length]={text:e.name,value:x,poiID:l},Oa[Oa.length]={text:e.name,value:x,poiID:l}),!zc&&xa&&(e=ma[ma.length-1],Vb(e.poiID,e.value))),e=l=!0):(c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",c),-1!=c&&(d=v[c],c=d.polygonPts?d.polygonPts:[],c[c.length]={x:b.x,y:b.y},d.polyClosed=!1,d.polygonPts=c,d.saved=!1));"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof d||null===d||"freehand"==d.mediaType||(d=1/p.getZoom(),Gd(b.x-Z.imageX,b.y-Z.imageY,
e,d));"rectangle"!=Z.labelMode&&"freehand"!=Z.labelMode&&(Ga=!1);l?Wa():a&&jc()}function Zc(c,a){for(var b=null,d=(Oe+1)/Z.imageZ,e=0,l=v.length;e<l;e++)if("polygon"==v[e].media&&v[e].internalID==x){var f=v[e].polygonPts;if("undefined"!==typeof f&&null!==f)for(var g=0,k=f.length;g<k;g++)Z.Utils.calculatePointsDistance(a.x,a.y,f[g].x,f[g].y)<d&&(b=g)}return b}function Lc(c,a){Z.Utils.clearDisplay(Aa);var b=Z.Utils.arrayIndexOfObjectValue(v,"internalID",c);v[b].polyClosed=a;Ga=!0;if(-1!=b){var b=v[b],
d=Z.Utils.polygonCenter(b.polygonPts,b.polyClosed);b.x=d.x;b.y=d.y;"freehand"!=Z.labelMode&&""==b.caption&&"undefined"===typeof b.captionHTML&&(d=Z.Utils.getResource("CONTENT_POLYGONCAPTION"),b.caption=d+c.toString());d=new Ka;Ub(b,d)}}function Wb(c,a){var b=Z.Utils.arrayIndexOfObjectValue(v,"internalID",c);if(-1!=b){b=v[b];if("measure"==Z.labelMode&&"measure"==b.mediaType)Je(b,a);else if("freehand"!=Z.labelMode&&""==b.caption&&"undefined"===typeof b.captionHTML){var d=Z.Utils.getResource("CONTENT_POLYGONCAPTION");
b.caption=d+c.toString()}var e=b.polyClosed,d=b.polygonPts?b.polygonPts.slice(0):[],e=Z.Utils.polygonCenter(d,e,a),d=Z.Utils.polygonDimensions(d);b.x=e.x;b.y=e.y;b.iW=d.x;b.iH=d.y;d=new Ka;if("freehand"!=b.mediaType||Ya)if(G){var l=e=null;(e=document.getElementById("hot"+b.id))&&(l=Z.Utils.getChildElementByID(e,"captionTextBox"));var e=l,l=Z.Utils.polygonDimensions(b.polygonPts),f="polygon"!=b.media?b.z:100,d="polygon"!=b.media?d.constrainedScale:1;Jc(b,e,b.xScale/100/(f/100)*d*l.x,b.yScale/100/(f/
100)*d*l.y)}else Ee(b,d);else Wa()}}function Pa(c,a){Z.editing=a;var b=null!==a?"none":"inline-block",d=null!==a||"markup"==Z.editMode?"inline-block":"none";switch(c){case "poi":var e=document.getElementById("buttonPOIAdd"),l=document.getElementById("buttonPOIEdit"),f=document.getElementById("buttonPOIDelete"),g=document.getElementById("buttonPOICancel"),k=document.getElementById("buttonPOISave");break;case "labelPartial":e=document.getElementById("buttonLabelAdd");l=document.getElementById("buttonLabelEdit");
f=document.getElementById("buttonLabelDelete");g=document.getElementById("buttonLabelCancel");k=document.getElementById("buttonLabelSave");break;case "label":e=document.getElementById("buttonLabelAdd");l=document.getElementById("buttonLabelEdit");f=document.getElementById("buttonLabelDelete");g=document.getElementById("buttonLabelCancel");k=document.getElementById("buttonLabelSave");break;case "note":e=document.getElementById("buttonNoteAdd"),l=document.getElementById("buttonNoteEdit"),f=document.getElementById("buttonNoteDelete"),
g=document.getElementById("buttonNoteCancel"),k=document.getElementById("buttonNoteSave")}e&&(Z.Utils.setButtonDefaults(e),e.style.display=b);l&&(Z.Utils.setButtonDefaults(l),l.style.display=b);f&&(Z.Utils.setButtonDefaults(f),f.style.display=d);g&&(Z.Utils.setButtonDefaults(g),g.style.display=d);k&&(Z.Utils.setButtonDefaults(k),k.style.display=d);var b=document.getElementById("overlayPOIDisable"),d=document.getElementById("overlayLabelDisable"),e=document.getElementById("overlayLabelDetailDisable"),
l=document.getElementById("overlayLabelDetailEditableDisable"),f=document.getElementById("overlayLabelNameEditableDisable"),g=document.getElementById("overlayLabelCaptionPositionDisable"),k=document.getElementById("overlayNoteDisable"),p=document.getElementById("overlayNoteDetailDisable"),u=document.getElementById("textBoxFor-poiNameTextElement"),B=document.getElementById("textBoxFor-labelNameTextElement"),h=document.getElementById("textBoxFor-noteNameTextElement"),n=document.getElementById("noteTextElement");
if(b&&d&&e&&l&&f&&g&&p&&u&&B&&h&&n)if(null===a)Z.Utils.addEventListener(document,"keydown",Eb),Z.Utils.addEventListener(document,"keyup",Eb),b.style.display="none",d.style.display="none",e.style.display="inline-block",l.style.display="none",f.style.display="none",g.style.display="none",k.style.display="none",p.style.display="inline-block",u.style.visibility="hidden",B.style.visibility="hidden",h.style.visibility="hidden",n.readOnly=!0;else{switch(c){case "poi":u.style.visibility="visible";d.style.display=
"inline-block";e.style.display="none";k.style.display="inline-block";p.style.display="none";break;case "labelPartial":e.style.display="none";l.style.display="inline-block";f.style.display="inline-block";g.style.display="text"==Z.labelMode?"inline-block":"none";B.style.visibility="visible";b.style.display="inline-block";k.style.display="inline-block";p.style.display="none";break;case "label":e.style.display="none";l.style.display="none";f.style.display="none";g.style.display="text"==Z.labelMode?"inline-block":
"none";B.style.visibility="visible";b.style.display="inline-block";k.style.display="inline-block";p.style.display="none";break;case "note":b.style.display="inline-block",d.style.display="inline-block",e.style.display="none",p.style.display="none",h.style.visibility="visible",n.readOnly=!1}je(c)}}function Ma(c,a){switch(a){case "pois":"save"==c?hf=Z.Utils.arrayClone("pois",ea,hf):ea=Z.Utils.arrayClone("pois",hf,ea);break;case "labels":var b=Z.Utils.arrayIndexOfObjectValue(v,"internalID",Mc);if("save"==
c)J&&J.polygonPts&&(Pe=Z.Utils.arrayClone("polygon",J.polygonPts,Pe)),jf=Z.Utils.arrayClone("labels",ma,jf),kf=Z.Utils.arrayClone("hotspots",v,kf),J=-1!=b?v[b]:null;else if(ma=Z.Utils.arrayClone("labels",jf,ma),v=Z.Utils.arrayClone("hotspots",kf,v),J=-1!=b?v[b]:null)0<Pe.length?J.polygonPts=Z.Utils.arrayClone("polygon",Pe,J.polygonPts):"polygon"!=J.media&&(J.polygonPts=[]);break;case "notes":"save"==c?lf=Z.Utils.arrayClone("notes",ua,lf):ua=Z.Utils.arrayClone("notes",lf,ua)}}function $c(c){var a=
Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),b=Xa(a,"root"),d=Xa(a,"setup");c=c.getElementsByTagName("SETUP")[0];var e;e=c.getAttribute("PANELPOSITION");Z.Utils.isStrVal(e)&&d.setAttribute("PANELPOSITION",e);e=c.getAttribute("INITIALVISIBILITY");Z.Utils.isStrVal(e)&&d.setAttribute("INITIALVISIBILITY",e);e=c.getAttribute("POIVISIBILITY");Z.Utils.isStrVal(e)&&d.setAttribute("POIVISIBILITY",e);e=c.getAttribute("LABELVISIBILITY");Z.Utils.isStrVal(e)&&d.setAttribute("LABELVISIBILITY",e);e=c.getAttribute("NOTEVISIBILITY");
Z.Utils.isStrVal(e)&&d.setAttribute("NOTEVISIBILITY",e);e=c.getAttribute("MINSCALE");Z.Utils.isStrVal(e)&&!isNaN(parseFloat(e))&&0<parseFloat(e)&&d.setAttribute("MINSCALE",e);e=c.getAttribute("MAXSCALE");Z.Utils.isStrVal(e)&&!isNaN(parseFloat(e))&&0<parseFloat(e)&&d.setAttribute("MAXSCALE",e);b.appendChild(d);c=0;for(d=ea.length;c<d;c++){e=Xa(a,"poi");var l=ea[c],f=Z.Utils.stringReadable(escape(l.text));Z.Utils.isStrVal(f)&&e.setAttribute("NAME",f);f=l.value;Z.Utils.isStrVal(f)&&e.setAttribute("INTERNALID",
f);var f=l.id;Z.Utils.isStrVal(f)&&e.setAttribute("ID",f);f=l.x;Z.Utils.isStrVal(f)&&!isNaN(parseFloat(f))&&e.setAttribute("X","center"==f?imageCenterX.toString():f);f=l.y;Z.Utils.isStrVal(f)&&!isNaN(parseFloat(f))&&e.setAttribute("Y","center"==f?imageCenterY.toString():f);f=l.z;Z.Utils.isStrVal(f)&&!isNaN(parseFloat(f))&&e.setAttribute("ZOOM",f);f=l.user;Z.Utils.isStrVal(f)&&e.setAttribute("USER",f);f=l.date;Z.Utils.isStrVal(f)&&e.setAttribute("DATE",f);b.appendChild(e);labelListTempDP=Xc(ma,ea[c].value);
if(0<labelListTempDP.length){l=a.createElement("LABELS");e.appendChild(l);for(var f=0,g=labelListTempDP.length;f<g;f++){var k=Xa(a,"label"),p=a,u=Z.Utils.arrayIndexOfObjectValue(v,"internalID",labelListTempDP[f].value);if(-1!=u){var u=v[u],B=void 0;k.setAttribute("ID",u.id);k.setAttribute("NAME",Z.Utils.stringReadable(escape(u.name)));k.setAttribute("MEDIATYPE",u.mediaType);k.setAttribute("MEDIA",u.media);k.setAttribute("X",u.x);k.setAttribute("Y",u.y);k.setAttribute("ZOOM",u.z);k.setAttribute("XSCALE",
u.xScale);k.setAttribute("YSCALE",u.yScale);k.setAttribute("CLICKURL",u.clickURL);k.setAttribute("URLTARGET",u.urlTarget);B=!0==u.rollover?"1":"0";k.setAttribute("ROLLOVER",B);k.setAttribute("CAPTION",Z.Utils.stringReadable(escape(u.caption)));k.setAttribute("TOOLTIP",Z.Utils.stringReadable(escape(u.tooltip)));k.setAttribute("USER",u.user);k.setAttribute("DATE",u.date);k.setAttribute("TEXTCOLOR",u.textColor);k.setAttribute("BACKCOLOR",u.backColor);k.setAttribute("LINECOLOR",u.lineColor);k.setAttribute("FILLCOLOR",
u.fillColor);B=!1!=u.textVisible?"1":"0";k.setAttribute("TEXTVISIBLE",B);B=!1!=u.backVisible?"1":"0";k.setAttribute("BACKVISIBLE",B);B=!1!=u.lineVisible?"1":"0";k.setAttribute("LINEVISIBLE",B);B=!1!=u.fillVisible?"1":"0";k.setAttribute("FILLVISIBLE",B);k.setAttribute("CAPTIONPOSITION",u.captionPosition);k.setAttribute("INTERNALID",u.internalID.toString());k.setAttribute("POIID",u.poiID.toString());B=u.captionHTML;if(Z.Utils.isStrVal(B)&&(B=Z.Utils.xmlConvertTextToDoc(B).getElementsByTagName("CAPTION")[0])){var B=
B.innerHTML,h=p.createElement("CAPTION");h.innerHTML=B;k.appendChild(h)}B=u.tooltipHTML;Z.Utils.isStrVal(B)&&(B=Z.Utils.xmlConvertTextToDoc(B).getElementsByTagName("TOOLTIP")[0])&&(B=B.innerHTML,h=p.createElement("TOOLTIP"),h.innerHTML=B,k.appendChild(h));u=u.polygonPts;if(null!=u){for(var B=p.createElement("POLYGON"),h=0,n=u.length;h<n;h++){var q=p.createElement("POINT");q.setAttribute("X",u[h].x);q.setAttribute("Y",u[h].y);B.appendChild(q)}k.appendChild(B)}}l.appendChild(k)}}noteListTempDP=Xc(ua,
ea[c].value);if(0<noteListTempDP.length)for(l=a.createElement("NOTES"),e.appendChild(l),e=0,f=noteListTempDP.length;e<f;e++)g=Xa(a,"note"),p=noteListTempDP[e],k=Z.Utils.stringReadable(escape(p.text)),Z.Utils.isStrVal(k)&&g.setAttribute("NAME",k),k=p.value,Z.Utils.isStrVal(k)&&g.setAttribute("INTERNALID",k),k=Z.Utils.stringReadable(escape(p.noteText)),Z.Utils.isStrVal(k)&&g.setAttribute("TEXT",k),k=p.poiID,Z.Utils.isStrVal(k)&&g.setAttribute("POIID",k),k=p.id,Z.Utils.isStrVal(k)&&g.setAttribute("ID",
k),k=p.user,Z.Utils.isStrVal(k)&&g.setAttribute("USER",k),k=p.date,Z.Utils.isStrVal(k)&&g.setAttribute("DATE",k),l.appendChild(g)}return a}function me(c){var a;this.id=c.getAttribute("ID");this.internalID=c.getAttribute("INTERNALID");isNaN(parseInt(this.internalID,10))&&(this.internalID=Va("slide"));this.media=c.getAttribute("MEDIA");this.audio=c.getAttribute("AUDIO");Z.Utils.isStrVal(this.audio)&&(Z.audioContent=!0);this.name=c.getAttribute("NAME");a=parseFloat(c.getAttribute("INITIALX"));this.initialX=
isNaN(a)?0:a;a=parseFloat(c.getAttribute("INITIALY"));this.initialY=isNaN(a)?0:a;a=parseFloat(c.getAttribute("INITIALZOOM"));this.initialZoom=isNaN(a)?parseFloat(this.getResource("DEFAULT_MINZOOM")):a;a=parseFloat(c.getAttribute("MINZOOM"));this.minZoom=isNaN(a)?parseFloat(this.getResource("DEFAULT_MINZOOM")):a;a=parseFloat(c.getAttribute("MAXZOOM"));this.maxZoom=isNaN(a)?parseFloat(this.getResource("DEFAULT_MAXZOOM")):a;a=parseFloat(c.getAttribute("SHOWFOR"));this.showFor=isNaN(a)?0:a;this.transition=
c.getAttribute("TRANSITION");a=parseFloat(c.getAttribute("CHANGEFOR"));this.changeFor=isNaN(a)?0:a}function ne(c){if(c=Z.Utils.event(c))if(Z.slideshowPlaying&&p.slideshowStop(),c=Z.Utils.target(c),"null"!=c.options[c.selectedIndex].value){var a=Z.Utils.isStrVal(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0;p.goToSlide(c.selectedIndex-a)}}function Id(c){if("undefined"!==typeof db&&null!==db&&0<db.length){var a=Z.slideshowPlaying?mb[Nc].showFor:0;Z.Utils.isStrVal(mb[Nc].audio)&&(a+=500);var b=md(Nc,
c,mb.length-1);null!==b?Z.Utils.functionCallWithDelay(function(){p.goToSlide(b)},a):p.slideshowStop()}}function md(c,a,b){for(var d=Xf||Yf,e="Skip";"Skip"==e;)"next"==a?(c+=1,c>b&&(c=d?0:null)):(c-=1,0>c&&(c=d?b:null)),e=v?null!==c?v[c].transition:null:mb?null!==c?mb[c].transition:null:null;return c}function Oc(c){Z.preventDupCall||(Z.priorX=Z.imageX,Z.priorY=Z.imageY,Z.priorZ=Z.imageZ,Z.priorR=Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof c&&null!==c}function ed(c,a,b,d,e){p.zoomAndPanAllStop();
if("undefined"===typeof c||null===c)c=Z.imageW/2;if("undefined"===typeof a||null===a)a=Z.imageH/2;"undefined"===typeof b||null===b?b=Z.fitZ:1<b&&(b/=100);if("undefined"===typeof d||null===d)d=Z.imageR;b=B(b);d=ic(d);c=u(c,a,b,d,"image");Z.imageX=c.x;Z.imageY=c.y;Z.imageZ=b;d!=Z.imageR&&Z.Utils.rotateElement(M,d);Z.imageR=d;p.updateView(!0);"function"===typeof e&&e()}function ad(){if(Xb&&(0!=Lb||0!=Ab||0!=sb)){var c=Lb,a=Ab,b=sb,d=!1,e=!1,f=p.getZoom();0!=b&&(f=l(la,aa*(1+b)),f=B(f),f!=Z.imageZ&&(d=
e=Ac(f)));if(0!=c||0!=a)c=parseFloat(M.left)+c,a=parseFloat(M.top)+a,a=u(c,a,f,Z.imageR,"container"),M.left=Math.round(a.x)+"px",M.top=Math.round(a.y)+"px",e=!0;0==Zf%2&&(E(),Wa(),d&&(cc(),Ta()),e&&N());Xb=window.setTimeout(ad,mf)}}function oe(c,a,b,d,e,l,f){pe++;var g=e/l,k=pe*g,u=Z.Utils.easing(Z.imageX,c,k,e),B=Z.Utils.easing(Z.imageY,a,k,e),h=Z.Utils.easing(Z.imageZ,b,k,e),k=Z.Utils.easing(Z.imageR,d,k,e),B=ba(u,B,h),u=B.x,B=B.y,n=!1,q=!1;if(parseFloat(M.left)!=u||parseFloat(M.top)!=B)M.left=
u+"px",M.top=B+"px",q=!0;h!=Z.imageZ&&(Ac(h),n=q=!0);k!=Z.imageR&&(Z.Utils.rotateElement(M,k),Z.imageR=k,q=!0);Wa();0==pe%2&&(n&&(cc(),Ta()),q&&N());pe<l+1?Qe=window.setTimeout(function(){oe(c,a,b,d,e,l,f)},g):(Z.interactivityOff=!1,nd(),p.updateView(),p.toggleWatermarks(!0),"function"===typeof f&&f())}function bd(){Zf=sb=Ab=Lb=0;Xb&&(window.clearTimeout(Xb),Xb=null)}function nd(){Qe&&(window.clearTimeout(Qe),Qe=null)}function Ac(c){var a=!1,b=ha(la,c);if(b!=aa){aa=b;var a=b/bc,d=Ea*a,e=va*a,l=(Ea-
d)/2,f=(va-e)/2;b<bc&&(b=u(parseFloat(M.left),parseFloat(M.top),c,Z.imageR,"container"),M.left=b.x+"px",M.top=b.y+"px");Z.useCanvas?(Ba.width=d+"px",Ba.height=e+"px",Ba.left=l+"px",Ba.top=f+"px",gb&&(Jb.width=d+"px",Jb.height=e+"px",Jb.left=l+"px",Jb.top=f+"px"),Aa&&(gc.width=d+"px",gc.height=e+"px",gc.left=l+"px",gc.top=f+"px"),Ob?(ac=c=ha(za,c),b=c/tierBackfillScalePrior,c=nc*b,b*=Yb,a=Zb+(nc-c)/2,d=Bb+(Yb-b)/2,ca.width=c+"px",ca.height=b+"px",ca.left=a+"px",ca.top=d+"px"):(d=nc*a,e=Yb*a,l=Zb+Z.imageX*
(1-a)*Z.imageZ,f=Bb+Z.imageY*(1-a)*Z.imageZ,ca.width=d+"px",ca.height=e+"px",ca.left=l+"px",ca.top=f+"px")):(n(sa,la,vb,"centerOut",!1,"Scaling: non-canvas zoom"),Ob?(c=$f,nc=Ea*c,Yb=va*c,Zb=-(Ea/c),Bb=-(va/c),nf=Sb*c,of=Tb*c,ja.width=nc,ja.height=Yb,ca.width=ja.width+"px",ca.height=ja.height+"px"):(b=Pb[za],ja.width=Fb[za],ja.height=b,b=Z.imageY*c,Zb=Sb-Z.imageX*c,Bb=Tb-b),ca.left=Zb+"px",ca.top=Bb+"px",n(ja,za,fd,"simple",!1,"Scaling: non-canvas zoom - backfill"));a=!0}return a}function Jd(){if(od&&
0!=$b){var c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x);if(-1!=c){var c=v[c],a=c.yScale*(1+$b);p.modifyHotspot(x,"xScale",c.xScale*(1+$b),!0,!0);p.modifyHotspot(x,"yScale",a,!1,!0);od=window.setTimeout(Jd,ag)}}}function qe(){p.toggleFullViewMode(!1)}function Rc(c,a,b){"undefined"!==typeof Re&&null===Re&&"undefined"!==typeof Se&&null===Se?(Z.Utils.showMessage(Z.Utils.getResource("ALERT_PROCESSINGIMAGEFILTER"),!1,null,"center"),Re=window.setTimeout(function(){Kd(sa,c,a,b);Z.Utils.hideMessage();
Re=null;Z.Utils.showMessage(Z.Utils.getResource("ALERT_PROCESSINGBACKFILLIMAGEFILTER"),!1,null,"center");Se=window.setTimeout(function(){Kd(ja,c,a,b);Z.Utils.hideMessage();Se=null},1)},1)):void 0!==typeof re&&(null!==re&&(window.clearTimeout(re),re=null),re=window.setTimeout(function(){Rc(c,a)},200))}function Kd(c,a,b,d){d=(d?"viewportDisplay"==c.id?Sc:ef:c.getContext("2d")).getImageData(0,0,c.width,c.height);a="undefined"!==typeof a&&null!==a?Z.Utils.filterImage(d,a,b):yd(d,a,b);c.getContext("2d").putImageData(a,
0,0)}function yd(c){for(var a=0,b=ib.length;a<b;a++){var d=ib[a].filter,e=ib[a].value;0!=e&&(c=Z.Utils.filterImage(c,d,e))}return c}function Ld(c){Z.imageFiltersVisible&&rd&&fc&&Gc&&("frontfill"==c?(Z.Utils.clearDisplay(fc),fc.width=sa.width,fc.height=sa.height,pf.width=Ba.width,pf.height=Ba.height,Sc.translate(Sb,Tb),Sc.scale(aa,aa)):(Z.Utils.clearDisplay(Gc),Gc.width=ja.width,Gc.height=ja.height,qf.width=ca.width,qf.height=ca.height))}function Eb(c){if(!Z.interactivityOff&&Z.keys&&(c=Z.Utils.event(c),
c.altKey||nd(),c)){var a=c.type;c=c.keyCode;if("keydown"==a)switch(c){case 90:p.zoom("out");break;case 17:p.zoom("out");break;case 65:p.zoom("in");break;case 16:p.zoom("in");break;case 37:p.pan("left");break;case 38:p.pan("up");break;case 40:p.pan("down");break;case 39:p.pan("right");break;case 27:Z.fullView?p.toggleFullViewMode(!1):p.reset();break;case 190:Z.rotationVisible&&p.rotateClockwise();break;case 188:Z.rotationVisible&&p.rotateCounterwise()}else"keyup"==a&&(90==c||17==c||65==c||16==c?p.zoom("stop"):
37==c||39==c?p.pan("horizontalStop"):38!=c&&40!=c||p.pan("verticalStop"))}}function ta(c){c=Z.Utils.event(c);var a=c.type;if(c&&a&&!("mouseover"!=a&&"mouseout"!=a&&Z.interactivityOff||"mousedown"==a&&(Z.interactivityOff||Z.coordinatesVisible&&c.altKey)||Z.Utils.isRightMouseButton(c))){"touchmove"!=a&&"gesturechange"!=a&&c.preventDefault();"mousedown"==a?window.setTimeout(function(){p.zoomAndPanAllStop(!1,!0)},1):"touchstart"!=a&&"gesturestart"!=a||p.zoomAndPanAllStop(!1,!0);switch(a){case "mouseover":"TEXTAREA"!=
document.activeElement.tagName&&(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault));break;case "mousedown":document.activeElement&&document.activeElement.blur();Z.Utils.addEventListener(document,"keydown",Eb);Z.Utils.addEventListener(document,"keyup",Eb);Z.Utils.addEventListener(document,"mousemove",ta);Z.Utils.addEventListener(ia,"mouseup",ta);Z.Utils.addEventListener(document,"mouseup",ta);break;case "mouseup":Z.Utils.removeEventListener(document,
"mousemove",ta);Z.Utils.removeEventListener(ia,"mouseup",ta);Z.Utils.removeEventListener(document,"mouseup",ta);break;case "mouseout":Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault)}se(c);if("mousedown"==a||"mousemove"==a)return!1}}function se(c){c=Z.Utils.event(c);var a=c.type;if(c&&a){var b,d,e,f;"touchstart"==a||"touchmove"==a||"touchend"==a||"touchcancel"==a?(b=Z.Utils.getFirstTouch(c),"undefined"!==typeof b&&
(d=b.target,f=new Z.Utils.Point(b.pageX,b.pageY))):(d=Z.Utils.target(c),e=Z.Utils.relatedTarget(c),f=Z.Utils.getMousePosition(c));"DOMMouseScroll"==a&&(a="mousewheel");var h=p.getZoom(),g=(100*h).toString(),k;"undefined"!==typeof f&&null!==f&&(k=p.getClickCoordsInImage(c,h,f));switch(a){case "mouseover":k=Z.Utils.nodeIsInViewer(d);c=Z.Utils.nodeIsInViewer(e);k&&c||(Z.ToolbarDisplay&&1<Z.toolbarVisible&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.RulerDisplay&&
Z.rulerVisible&&Z.Ruler.setVisibility(!0),ka&&(ka.style.visibility="visible"),db&&(db.style.visibility="visible"),Z.Toolbar&&Z.Toolbar.setAnnotationPanelVisibility(!0),kb=null);break;case "mousedown":Ya=!0;oa=new Z.Utils.Point(f.x,f.y);ia.mouseXPrior=f.x;ia.mouseYPrior=f.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==x||"rectangle"==Z.labelMode&&null===x)na=Zc(c,k);c.altKey||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing?c.altKey&&("addLabel"==
Z.editing||"editLabel"==Z.editing)&&(G=lb(d))&&(c=W(c.clientX,c.clientY),f=new Z.Utils.Point(parseFloat(G.style.left),parseFloat(G.style.top)),k=c.x-f.x,c=c.y-f.y,G.mouseXPrior=oa.x,G.mouseYPrior=oa.y,G.mouseXOffset=k,G.mouseYOffset=c,G.style.zIndex=v.length+1,k=G.id.substring(3,G.id.length),x&&x!=k&&(Ma("save","labels"),k=Z.Utils.arrayIndexOfObjectValue(v,"internalID",k),-1!=k&&(k=v[k],xc(k.poiID,k.internalID)))):(p.toggleLabelIconPicker(!1),Z.Utils.hideMessage(),"addLabel"==Z.editing&&("freehand"==
Z.labelMode||"rectangle"==Z.labelMode&&null===na)&&p.saveEditsLabel(!0),"freehand"==Z.labelMode&&Ya?("editLabel"==Z.editing&&J&&(J.polygonPts=[]),c="editLabel"==Z.editing?x:null,bb(c,!1,k),Md=(k.x-Z.imageX)*h,Nd=(k.y-Z.imageY)*h,Lc(x,!1)):"rectangle"==Z.labelMode&&null===na&&(f=1,c=null,"editLabel"==Z.editing&&(c=x,J&&null===na&&(J.polygonPts=[])),bb(c,!1,k),bb(x,!1,new Z.Utils.Point(k.x+f,k.y)),bb(x,!1,new Z.Utils.Point(k.x+f,k.y+f)),bb(x,!1,new Z.Utils.Point(k.x,k.y+f)),Lc(x,!0),na=2));ka&&(Z.hotspotListTitle||
Z.tourListTitle)&&(ka.selectedIndex=0);break;case "mousemove":Ca=new Z.Utils.Point(f.x,f.y);g=(k.x-Z.imageX)*h;h*=k.y-Z.imageY;c.altKey||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?G?(k=G.style,h=Ca.x-G.mouseXPrior,g=Ca.y-G.mouseYPrior,h=parseFloat(k.left)+h,g=parseFloat(k.top)+g,k.left=h+"px",k.top=g+"px",G.mouseXPrior=Ca.x,G.mouseYPrior=Ca.y,pb(c,G,Ca)):!c.altKey&&Z.mousePan&&(c=f.x-ia.mouseXPrior,k=f.y-ia.mouseYPrior,isNaN(c)||
isNaN(k)||(c=parseFloat(M.left)+c,k=parseFloat(M.top)+k,k=u(c,k,Z.imageZ,Z.imageR,"container"),M.left=k.x+"px",M.top=k.y+"px",ia.mouseXPrior=f.x,ia.mouseYPrior=f.y,Z.Navigator&&(k=p.calculateCurrentCenterCoordinates(k,Z.imageZ,Z.imageR),Z.Navigator.syncNavigatorRectangleToViewport(k)))):(c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x),c=-1!=c?v[c].polyClosed:!1,"freehand"==Z.labelMode&&Ya?(le(Md,Nd,g,h,k),Md=g,Nd=h):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===
na||!Ya?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||c||Ya&&(!Ya||null===na)||ke(g,h,k):Hd(x,na,k));break;case "mouseup":Ya=!1;document.mousemove=null;document.mouseup=null;kb?(f=kb,k=p.getClickCoordsInImage(c,h,kb)):f=new Z.Utils.Point(f.x,f.y);h=Z.Utils.calculatePointsDistance(oa.x,oa.y,f.x,f.y);if(4>h||!c.altKey&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode))if(!G&&(null===Z.editMode&&"measure"==Z.labelMode||"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing)))c.altKey&&
Ga||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?c.altKey?c.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&J&&(p.modifyHotspot(x,"x",k.x,!0,!0),p.modifyHotspot(x,"y",k.y,!1,!0)):(c="undefined"!==typeof S&&0<S.options.length?c=S.options[S.selectedIndex].value:0,f=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(p.createLabelFromParameters(null,null,"text",null,null,k.x.toString(),k.y.toString(),g,null,null,null,null,null,null,null,mc,null,null,
null,null,null,null,null,"5","0",null,c),f=!0):J&&(p.modifyHotspot(x,"x",k.x,!0,!0),p.modifyHotspot(x,"y",k.y,!1,!0)):"icon"==Z.labelMode&&(h=document.getElementById("labelIconList"))&&(h=h[h.selectedIndex].value,h="shim"==h?"":"External Graphics File"==h?h:Z.annotationFolder+"/"+h,"addLabel"==Z.editing?(p.createLabelFromParameters(null,null,"icon",h,null,k.x.toString(),k.y.toString(),g,null,null,null,null,null,null,null,mc,null,null,null,null,null,null,null,null,"0",null,c),f=!0):J&&(p.modifyHotspot(x,
"x",k.x,!0,!0),p.modifyHotspot(x,"y",k.y,!1,!0))),f&&(k=ma[ma.length-1],Vb(k.poiID,k.value))):(ld(c,k),Ga||Z.Utils.addEventListener(document,"mousemove",ta)),Pa("label",Z.editing);else if(null!==G)G=null;else{if((null===Z.editing||"view"==Z.labelMode)&&!G){var n=p.getClickZoomCoords3D(c,oa,la,aa);Z.clickZoom?window.setTimeout(function(){p.zoomAndPanToView(n.x,n.y,n.z)},1):Z.clickPan&&p.zoomAndPanToView(n.x,n.y,Z.imageZ)}}else"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||
!yc&&(null!==na||Ga)?G&&(k=G.style,h=f.x-G.mouseXPrior,g=f.y-G.mouseYPrior,h=parseFloat(k.left)+h,g=parseFloat(k.top)+g,k.left=h+"px",k.top=g+"px",pb(c,G,f),G.style.zIndex=G.zIndex,G=null):(na=null,yc=!1,c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x),-1!=c&&(k=v[c],c=Z.Utils.polygonCenter(k.polygonPts,k.polyClosed),k.x=c.x,k.y=c.y,Z.Utils.clearDisplay(Aa),c=new Ka,Ub(k,c),Ga||Z.Utils.addEventListener(document,"mousemove",ta))),Ca=null,Z.mousePan&&p.updateView();kb&&(Z.ToolbarDisplay&&1<Z.toolbarVisible&&
Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1));break;case "mouseout":k=Z.Utils.nodeIsInViewer(d);c=Z.Utils.nodeIsInViewer(e);k&&c||"[object HTMLSelectElement]"==d||"[object HTMLOptionElement]"==d||"[object HTMLSelectElement]"==e||"[object HTMLOptionElement]"==e||(Ya?kb=new Z.Utils.Point(f.x,f.y):(Z.ToolbarDisplay&&1<Z.toolbarVisible&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.RulerDisplay&&Z.rulerVisible&&
Z.Ruler.setVisibility(!1),ka&&(ka.style.visibility="hidden"),db&&(db.style.visibility="hidden"),Z.Toolbar&&Z.Toolbar.setAnnotationPanelVisibility(!1)));break;case "touchstart":if(b&&!oc){Ya=!0;te=!1;oa=new Z.Utils.Point(f.x,f.y);ia.mouseXPrior=f.x;ia.mouseYPrior=f.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==x||"rectangle"==Z.labelMode&&null===x)na=Zc(c,k);c.altKey||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing?c.altKey&&("addLabel"==
Z.editing||"editLabel"==Z.editing)&&(G=lb(d))&&(c=W(c.clientX,c.clientY),f=new Z.Utils.Point(parseFloat(G.style.left),parseFloat(G.style.top)),k=c.x-f.x,c=c.y-f.y,G.mouseXPrior=oa.x,G.mouseYPrior=oa.y,G.mouseXOffset=k,G.mouseYOffset=c,G.style.zIndex=v.length+1,k=G.id.substring(3,G.id.length),x&&x!=k&&(Ma("save","labels"),k=Z.Utils.arrayIndexOfObjectValue(v,"internalID",k),-1!=k&&(k=v[k],xc(k.poiID,k.internalID)))):(p.toggleLabelIconPicker(!1),Z.Utils.hideMessage(),"addLabel"==Z.editing&&("freehand"==
Z.labelMode||"rectangle"==Z.labelMode&&null===na)&&p.saveEditsLabel(!0),"freehand"==Z.labelMode&&Ya?("editLabel"==Z.editing&&J&&(J.polygonPts=[]),c="editLabel"==Z.editing?x:null,bb(c,!1,k),Md=(k.x-Z.imageX)*h,Nd=(k.y-Z.imageY)*h,Lc(x,!1)):"rectangle"==Z.labelMode&&null===na&&(f=1,c=null,"editLabel"==Z.editing&&(c=x,J&&null===na&&(J.polygonPts=[])),bb(c,!1,k),bb(x,!1,new Z.Utils.Point(k.x+f,k.y)),bb(x,!1,new Z.Utils.Point(k.x+f,k.y+f)),bb(x,!1,new Z.Utils.Point(k.x,k.y+f)),Lc(x,!0),na=2));ka&&(Z.hotspotListTitle||
Z.tourListTitle)&&(ka.selectedIndex=0)}break;case "touchmove":!b||oc||te||((Ca=new Z.Utils.Point(f.x,f.y),g=(k.x-Z.imageX)*h,h*=k.y-Z.imageY,c.altKey||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))?G?(k=G.style,h=Ca.x-G.mouseXPrior,g=Ca.y-G.mouseYPrior,h=parseFloat(k.left)+h,g=parseFloat(k.top)+g,k.left=h+"px",k.top=g+"px",G.mouseXPrior=Ca.x,G.mouseYPrior=Ca.y,pb(c,G,Ca)):!c.altKey&&Z.mousePan&&(c=f.x-ia.mouseXPrior,k=f.y-ia.mouseYPrior,
isNaN(c)||isNaN(k)||(c=parseFloat(M.left)+c,k=parseFloat(M.top)+k,k=u(c,k,Z.imageZ,Z.imageR,"container"),M.left=k.x+"px",M.top=k.y+"px",ia.mouseXPrior=f.x,ia.mouseYPrior=f.y,Z.Navigator&&(k=p.calculateCurrentCenterCoordinates(k,Z.imageZ,Z.imageR),Z.Navigator.syncNavigatorRectangleToViewport(k)))):(c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x),c=-1!=c?v[c].polyClosed:!1,"freehand"==Z.labelMode&&Ya?(le(Md,Nd,g,h,k),Md=g,Nd=h):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||
null===na||!Ya?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||c||Ya&&(!Ya||null===na)||ke(g,h,k):Hd(x,na,k)));break;case "touchend":oc||te||(Ya=!1,document.mousemove=null,document.mouseup=null,kb?(f=kb,k=p.getClickCoordsInImage(c,h,kb)):f="undefined"!==typeof f&&null!==f?new Z.Utils.Point(f.x,f.y):"undefined"!==typeof Ca&&null!==Ca?Ca:oa,h=Z.Utils.calculatePointsDistance(oa.x,oa.y,f.x,f.y),4>h||!c.altKey&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode)?G||(null!==Z.editMode||"measure"!=Z.labelMode)&&
("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?null!==G?G=null:null!==Z.editing&&"view"!=Z.labelMode||G||(n=p.getClickZoomCoords3D(c,oa,la,aa),Z.clickZoom?window.setTimeout(function(){p.zoomAndPanToView(n.x,n.y,n.z)},1):Z.clickPan&&p.zoomAndPanToView(n.x,n.y,Z.imageZ)):(c.altKey&&Ga||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?c.altKey?c.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&J&&(p.modifyHotspot(x,"x",k.x,!0,
!0),p.modifyHotspot(x,"y",k.y,!1,!0)):(c="undefined"!==typeof S&&0<S.options.length?c=S.options[S.selectedIndex].value:0,f=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(p.createLabelFromParameters(null,null,"text",null,null,k.x.toString(),k.y.toString(),g,null,null,null,null,null,null,null,mc,null,null,null,null,null,null,null,"5","0",null,c),f=!0):J&&(p.modifyHotspot(x,"x",k.x,!0,!0),p.modifyHotspot(x,"y",k.y,!1,!0)):"icon"==Z.labelMode&&(h=document.getElementById("labelIconList"))&&(h=h[h.selectedIndex].value,
h="shim"==h?"":"External Graphics File"==h?h:Z.annotationFolder+"/"+h,"addLabel"==Z.editing?(p.createLabelFromParameters(null,null,"icon",h,null,k.x.toString(),k.y.toString(),g,null,null,null,null,null,null,null,mc,null,null,null,null,null,null,null,null,"0",null,c),f=!0):J&&(p.modifyHotspot(x,"x",k.x,!0,!0),p.modifyHotspot(x,"y",k.y,!1,!0))),f&&(k=ma[ma.length-1],Vb(k.poiID,k.value))):(ld(c,k),Ga||Z.Utils.addEventListener(document,"mousemove",ta)),Pa("label",Z.editing)):("rectangle"!=Z.labelMode&&
"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!yc&&(null!==na||Ga)?G&&(k=G.style,h=f.x-G.mouseXPrior,g=f.y-G.mouseYPrior,h=parseFloat(k.left)+h,g=parseFloat(k.top)+g,k.left=h+"px",k.top=g+"px",pb(c,G,f),G.style.zIndex=G.zIndex,G=null):(na=null,yc=!1,c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x),-1!=c&&(k=v[c],c=Z.Utils.polygonCenter(k.polygonPts,k.polyClosed),k.x=c.x,k.y=c.y,Z.Utils.clearDisplay(Aa),c=new Ka,Ub(k,c),Ga||Z.Utils.addEventListener(document,"mousemove",ta))),Ca=null,Z.mousePan&&
p.updateView()),kb&&(Z.ToolbarDisplay&&1<Z.toolbarVisible&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "touchcancel":oc||te||(Ya=!1,document.mousemove=null,document.mouseup=null,kb?(f=kb,k=p.getClickCoordsInImage(c,h,kb)):f=new Z.Utils.Point(f.x,f.y),h=Z.Utils.calculatePointsDistance(oa.x,oa.y,f.x,f.y),4>h||!c.altKey&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode)?G||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||
"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?null!==G?G=null:null!==Z.editing&&"view"!=Z.labelMode||G||(n=p.getClickZoomCoords3D(c,oa,la,aa),Z.clickZoom?window.setTimeout(function(){p.zoomAndPanToView(n.x,n.y,n.z)},1):Z.clickPan&&p.zoomAndPanToView(n.x,n.y,Z.imageZ)):(c.altKey&&Ga||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?c.altKey?c.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&J&&(p.modifyHotspot(x,"x",k.x,!0,!0),p.modifyHotspot(x,
"y",k.y,!1,!0)):(c="undefined"!==typeof S&&0<S.options.length?c=S.options[S.selectedIndex].value:0,f=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(p.createLabelFromParameters(null,null,"text",null,null,k.x.toString(),k.y.toString(),g,null,null,null,null,null,null,null,mc,null,null,null,null,null,null,null,"5","0",null,c),f=!0):J&&(p.modifyHotspot(x,"x",k.x,!0,!0),p.modifyHotspot(x,"y",k.y,!1,!0)):"icon"==Z.labelMode&&(h=document.getElementById("labelIconList"))&&(h=h[h.selectedIndex].value,h="shim"==
h?"":"External Graphics File"==h?h:Z.annotationFolder+"/"+h,"addLabel"==Z.editing?(p.createLabelFromParameters(null,null,"icon",h,null,k.x.toString(),k.y.toString(),g,null,null,null,null,null,null,null,mc,null,null,null,null,null,null,null,null,"0",null,c),f=!0):J&&(p.modifyHotspot(x,"x",k.x,!0,!0),p.modifyHotspot(x,"y",k.y,!1,!0))),f&&(k=ma[ma.length-1],Vb(k.poiID,k.value))):(ld(c,k),Ga||Z.Utils.addEventListener(document,"mousemove",ta)),Pa("label",Z.editing)):("rectangle"!=Z.labelMode&&"polygon"!=
Z.labelMode&&"measure"!=Z.labelMode||!yc&&(null!==na||Ga)?G&&(k=G.style,h=f.x-G.mouseXPrior,g=f.y-G.mouseYPrior,h=parseFloat(k.left)+h,g=parseFloat(k.top)+g,k.left=h+"px",k.top=g+"px",pb(c,G,f),G.style.zIndex=G.zIndex,G=null):(na=null,yc=!1,c=Z.Utils.arrayIndexOfObjectValue(v,"internalID",x),-1!=c&&(k=v[c],c=Z.Utils.polygonCenter(k.polygonPts,k.polyClosed),k.x=c.x,k.y=c.y,Z.Utils.clearDisplay(Aa),c=new Ka,Ub(k,c),Ga||Z.Utils.addEventListener(document,"mousemove",ta))),Ca=null,Z.mousePan&&p.updateView()),
kb&&(Z.ToolbarDisplay&&1<Z.toolbarVisible&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "gesturestart":ue(c);oc||(oc=window.setInterval(ve,Ag));break;case "gesturechange":rf=Math.round(100*c.scale)/100;break;case "gestureend":oc&&(window.clearInterval(oc),te=!0,oc=null);Z.mousePan&&p.updateView();break;case "mousewheel":f=k=!1,we||(we=window.setTimeout(Qa,Bg)),c=0<Math.max(-1,Math.min(1,c.wheelDelta||-c.detail))?Od:-Od,c=l(la,aa*(1+c)),constrainedZ=
B(c),constrainedZ!=Z.imageZ&&(k=f=Ac(constrainedZ)),E(),Wa(),k&&(cc(),Ta()),f&&N()}}}function ue(c){c=Z.Utils.event(c);c.preventDefault();rf=Math.round(100*c.scale)/100}function ve(c){if(Z.mousePan){c=l(la,bc*rf);var a=B(c);c!=Z.imageZ&&Ac(a)}}function Qa(c){we&&(window.clearTimeout(we),we=null,p.updateView())}function Dc(c){!Z.interactivityOff&&Z.fullView&&(Z.ToolbarDisplay&&1<Z.toolbarVisible&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),p.toggleFullViewMode(!1),
p.toggleFullViewMode(!0),Z.ToolbarDisplay&&1<Z.toolbarVisible&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.Toolbar&&Z.Toolbar.setAnnotationPanelVisibility(!0))}function Cb(c){if(c=Z.Utils.event(c)){var a;a=Z.Utils.event(c);var b=p.getZoom(),d=p.getClickCoordsInImage(a,b);a=Math.round(d.x).toString();d=Math.round(d.y).toString();b=(Math.round(1E3*b)/10).toString();coordsString='X="'+a+'"   Y="'+d+'"   ZOOM="'+b+'"';"mousemove"==c.type?Z.Utils.showCoordinates(coordsString):
"mousedown"==c.type&&c.altKey&&Z.Utils.saveCoordinates(coordsString)}}var p=this,pd=!1,ce=!1,dd=-1,Rd=0,dc=0,Fa=parseInt(Z.Utils.getResource("DEFAULT_CHUNKSIZE"),10),qd=8*Fa,Ic=4*Fa,Cc=0,Ha=parseInt(Z.Utils.getResource("DEFAULT_TILEW"),10),Ia=parseInt(Z.Utils.getResource("DEFAULT_TILEH"),10),Mb=parseFloat(Z.Utils.getResource("DEFAULT_TIERSMAXSCALEUP")),Pd=Mb/2,hc=parseInt(Z.Utils.getResource("DEFAULT_TILESMAXCACHE"),10),xe=1==Z.toolbarVisible?Z.toolbarH:0,tb,ia,M,pc,ja,ca,cb,cd,sa,Ba,Ja,Pc,fb,Bc,
jb,sf,fc,pf,Sc,tf,Gc,qf,ef,uf,Na,jd,vf,ra,Hc,Ze,af,bf,Td,wf,gb,Jb,Ae,xf,Aa,gc,pa,Md,Nd;tb=Z.Utils.createContainerElement("div","viewportContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Z.ViewerDisplay.appendChild(tb);ia=tb;M=ia.style;pc=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px",
"normal");tb.appendChild(pc);ja=pc;ca=ja.style;cd=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");tb.appendChild(cd);sa=cd;Ba=sa.style;Z.useCanvas&&(Pc=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(Pc),fb=Pc,Bc=fb.style,Z.imageFiltersVisible&&
(tf=Z.Utils.createContainerElement("canvas","imageFilterBackfillCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(tf),Gc=tf,qf=Gc.style,sf=Z.Utils.createContainerElement("canvas","imageFilterCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(sf),fc=sf,pf=fc.style));Z.Utils.isStrVal(Z.watermarkPath)&&(uf=Z.Utils.createContainerElement("div","watermarkDisplay",
"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(uf),Na=uf,jd=Na.style);if(Z.Utils.isStrVal(Z.hotspotPath)||Z.Utils.isStrVal(Z.annotationPath)||Z.measureVisible)(Z.Utils.isStrVal(Z.annotationPath)||Z.measureVisible)&&Z.useCanvas&&(wf=Z.Utils.createContainerElement("canvas","drawingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(wf),
gb=wf,Jb=gb.style,null!==Z.editMode||Z.measureVisible)&&(xf=Z.Utils.createContainerElement("canvas","editingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(xf),Aa=xf,gc=Aa.style),vf=Z.Utils.createContainerElement("div","hotspotDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(vf),ra=vf,Hc=ra.style;Z.useCanvas?(cb=ja.getContext("2d"),
Ja=sa.getContext("2d"),jb=fb.getContext("2d"),gb&&(Ae=gb.getContext("2d")),Aa&&(pa=Aa.getContext("2d")),Z.imageFiltersVisible&&(Sc=fc.getContext("2d"),ef=Gc.getContext("2d"))):(ja.innerHTML="",sa.innerHTML="");Na&&(Na.innerHTML="");ra&&(ra.innerHTML="");var nb=1,la=0,za=0,Ob=!1,cf=!1,aa,bc,ac,fd=[],eb=[],Fb=[],Pb=[],ob=[],ub=[],Qb=[],Gb=[],gd=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];var hd=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=
[];var ya=[],vb=[],Ra=[],wb=[],Xe=[],Ua=[],Da=[],Ec=[],$a=[],Fc=0,ec=0,jg=new Z.NetConnector,Cg=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLTHRESHOLD3"),10),Dg=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLDYNAMICADJUST"),10),If=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLTHRESHOLD2"),10),Jf=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLCHOICE2"),10),Gf=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLTHRESHOLD1"),10),Hf=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLCHOICE1"),10),Ff=parseInt(Z.Utils.getResource("DEFAULT_BACKFILLCHOICE0"),
10),Ef=parseFloat(Z.Utils.getResource("DEFAULT_PANBUFFER"),10),$f=parseFloat(Z.Utils.getResource("DEFAULT_BACKFILLBUFFER"),10),qb,ab,Ye,Sd,Ea,va,Sb,Tb,rb,hb,nc,Yb,nf,of,Zb,Bb;qb=Z.viewerW;ab=Z.viewerH;Ye=Sd=0;ab-=xe;0==Z.toolbarPosition&&(Sd+=xe);var Ya=!1,kb=null,oa,Ca,oc=null,rf=null,te=!1,Ag=parseInt(Z.Utils.getResource("DEFAULT_GESTURETESTDURATION"),10),Od=parseFloat(Z.Utils.getResource("DEFAULT_ZOOMSTEPDISTANCE"))*Z.zoomSpeed;Z.mobileDevice&&(Od/=2);var Te=Math.round(parseFloat(Z.Utils.getResource("DEFAULT_PANSTEPDISTANCE"))*
Z.panSpeed),Lb=0,Ab=0,sb=0,Xb=null,Zf=0,mf=parseInt(Z.Utils.getResource("DEFAULT_ZAPSTEPDURATION"),10),we,Bg=parseInt(Z.Utils.getResource("DEFAULT_MOUSEWHEELCOMPLETEDURATION"),10),df=parseFloat(Z.Utils.getResource("DEFAULT_FADEINSTEP"))*Z.fadeInSpeed,Be=null,Eg=parseFloat(Z.Utils.getResource("DEFAULT_ZAPTVDURATION")),yf=parseFloat(Z.Utils.getResource("DEFAULT_ZAPTVSTEPS"));Z.mobileDevice&&(yf/=2);var Qe=null,pe=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var bg,cg,dg,eg,zf,fg,Qd,Af;if(Z.virtualPointerVisible)var Kf=
Z.Utils.getResource("DEFAULT_VIRTUALPOINTERPATH"),$,Tc;Z.crosshairsVisible&&Z.Utils.drawCrosshairs(Z.ViewerDisplay,qb,ab);if(Z.measureVisible||null!==Z.editMode)var vg=Z.Utils.getResource("UI_MEASURELENGTH"),ug=Z.Utils.getResource("UI_MEASURELENGTHTOTAL"),rg=Z.Utils.getResource("UI_MEASUREPERIMETER"),tg=Z.Utils.getResource("UI_MEASUREAREA"),sg=Z.Utils.getResource("UI_MEASURESQUARE"),Sf=parseInt(Z.Utils.getResource("DEFAULT_MEASURECAPTIONFONTSIZE"),10),Tf=parseInt(Z.Utils.getResource("DEFAULT_MEASURECAPTIONWIDTH"),
10);if(Z.imageFiltersVisible)var Re=null,Se=null,re=null,rd=!1,ib=[];if(Z.Utils.isStrVal(Z.watermarkPath))var Uc,Mf;if(Z.Utils.isStrVal(Z.tourPath))var vc,de,gg,Xf;null!==Z.imagePath&&-1!=Z.imagePath.indexOf("zSlidePath")&&(Z.slidePath=Z.imagePath.substring(11,Z.imagePath.length));if(Z.Utils.isStrVal(Z.slidePath)){var mb=[],Ue=[],Nc,db,hg,We,Yf,ig=parseFloat(Z.Utils.getResource("DEFAULT_SLIDETRANSITIONSTEP"))*Z.slideTransitionSpeed;Z.slideTransitionTimeout=null;Z.slideOpacity=0}if(Z.Utils.isStrVal(Z.tourPath)||
Z.Utils.isStrVal(Z.hotspotPath)||Z.Utils.isStrVal(Z.annotationPath)||Z.measureVisible){var zc=!1,Yd=!1,v=[],Rb=[],J=null,x=null,G=null,Fd=null,Mc=null,ye=null,fe=null,Wf=!1,Ga=!0,na=null,yc=!1,og=new Z.NetConnector,Vf=Z.Utils.getResource("DEFAULT_POLYGONLINEWIDTH"),wg=parseFloat(Z.Utils.getResource("DEFAULT_POLYGONOPACITY")),Vc=parseInt(Z.Utils.getResource("DEFAULT_POLYGONVIEWBUFFER"),10),xg=Z.Utils.getResource("DEFAULT_CONTROLPOINTLINEWIDTH"),gf=Z.Utils.getResource("DEFAULT_CONTROLPOINTSTROKECOLOR"),
yg=Z.Utils.getResource("DEFAULT_FIRSTCONTROLPOINTFILLCOLOR"),zg=Z.Utils.getResource("DEFAULT_STANDARDCONTROLPOINTFILLCOLOR"),Oe=parseInt(Z.Utils.getResource("DEFAULT_CONTROLPOINTRADIUS"),10),Uf=Z.Utils.getResource("DEFAULT_POLYGONLINEWIDTHFREEHAND"),mc=Z.Utils.getResource("DEFAULT_CAPTIONTEXTCOLOR"),pg=parseInt(Z.Utils.getResource("DEFAULT_HOTSPOTCAPTIONFONTSIZE"),10),Of=parseInt(Z.Utils.getResource("DEFAULT_MINHOTSPOTCAPTIONFONTSIZE"),10),Pf=parseInt(Z.Utils.getResource("DEFAULT_MAXHOTSPOTCAPTIONFONTSIZE"),
10),qg=parseInt(Z.Utils.getResource("DEFAULT_HOTSPOTCAPTIONPADDING"),10),Qf=parseInt(Z.Utils.getResource("DEFAULT_MINHOTSPOTCAPTIONPADDING"),10),Rf=parseInt(Z.Utils.getResource("DEFAULT_MAXHOTSPOTCAPTIONPADDING"),10);Z.mobileDevice&&(Oe*=2);if(Z.Utils.isStrVal(Z.hotspotPath))var ka,Bf,$e,Cf,He,Ie,Hb=[];else if(Z.Utils.isStrVal(Z.annotationPath)){var Db,ze,S,wa,xa,wd,xb,xd,ea=[],ua=[],Ib=[],ma=[],Oa=[],Me=[];labelCaptionPositionListDP=[];labelTargetListDP=[];var kf=[],hf=[],jf=[],Pe=[],lf=[],$b=0,
od=null,Ve=parseFloat(Z.Utils.getResource("DEFAULT_LABELSCALESTEPDISTANCE")),ag=parseInt(Z.Utils.getResource("DEFAULT_LABELSCALESTEPDURATION"),10);Z.mobileDevice&&(Ve/=2)}}e(qb,ab,Ye,Sd);if(null!==Z.imagePath&&"null"!=Z.imagePath)if(!0==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion))Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNSUPPORTEDLOCALVIEWING-BROWSER"),!0);else if(!0==
Z.localUse&&"ZoomifyImageFile"==Z.tileSource)Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNSUPPORTEDLOCALVIEWING-FORMAT-ZIF"),!0);else if(!0==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource)Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNSUPPORTEDLOCALVIEWING-FORMAT-PFF"),!0);else if(null!==Z.imageW&&null!==Z.imageH&&null!==Z.sourceMagnification)"undefined"!==typeof p.getInitialized()?b(Z.imageW,Z.imageH,Ha,Ia,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality):window.setTimeout(function(){b(Z.imageW,
Z.imageH,Ha,Ia,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality)},100);else if(null!==Z.imageProperties){var Fg=Z.Utils.xmlConvertTextToDoc(Z.imageProperties);h(Fg)}else if(-1==Z.imagePath.indexOf("zSlidePath")){var Df=new Z.NetConnector;f(Df)}null!==Z.slidePath&&(Df=new Z.NetConnector,a(Df));this.setSizeAndPosition=function(a,b,d,m){e(a,b,d,m)};this.loadImageProperties=function(a){f(a)};this.parseZIFHeader=function(a){if(73==a[0]&&73==a[1]&&43==a[2]&&0==a[3]&&8==a[4]&&0==a[5]&&0==a[6]&&
0==a[7]&&16==a[8]&&0==a[9]&&0==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&0==a[15]){for(var e=Z.Utils.longValue(a,8),l=Z.Utils.longValue(a,e),m=1,f=null,h=null,u=null,g=null,k=null,B=null,B=2;0!=e;){for(f=0;f<l;f++)switch(h=e+8+20*f,Z.Utils.shortValue(a,h)){case 256:Fb[m-1]=Z.Utils.intValue(a,h+12);break;case 257:Pb[m-1]=Z.Utils.intValue(a,h+12);break;case 322:u=Z.Utils.intValue(a,h+12);break;case 323:g=Z.Utils.intValue(a,h+12);break;case 324:var n=tierTileOffsetsCount[m-1]=Z.Utils.longValue(a,
h+4);gd[m-1]=Z.Utils.longValue(a,h+12);k+=n;break;case 325:n=tierTileByteCountsCount[m-1]=Z.Utils.longValue(a,h+4),hd[m-1]=1==n?Z.Utils.intValue(a,h+12):2==n?Z.Utils.intValue(a,h+12)+","+Z.Utils.intValue(a,h+16):Z.Utils.longValue(a,h+12)}e=Z.Utils.longValue(a,e+20*l+8);l=Z.Utils.longValue(a,e);m++}f=Fb[0];h=Pb[0];nb=m-1;Fb.reverse();Pb.reverse();tierTileOffsetsCount.reverse();gd.reverse();tierTileByteCountsCount.reverse();hd.reverse();!isNaN(f)&&0<f&&!isNaN(h)&&0<h&&!isNaN(u)&&0<u&&!isNaN(g)&&0<g&&
0<k?p.getInitialized()?d(f,h,u,g,k,B,null,null,null,null,null):b(f,h,u,g,k,B,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEPROPERTIESXMLINVALID")):Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEPROPERTIESINVALID"))}};this.parseZIFOffsetChunk=function(a,b){var d=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",b);-1!=d&&(tierTileOffsetChunks[d].chunk=a,K(b,"offset"))};this.parseZIFByteCountChunk=function(a,b){var d=
Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",b);-1!=d&&(tierTileByteCountChunks[d].chunk=a,K(b,"byteCount"))};this.parseZIFTileImage=function(a,b,d){a="data:image/jpeg;base64,"+Z.Utils.encodeBase64(a);b=Z.Utils.createCallback(null,"image-display"==d?H:ga,b);Z.Utils.createImageElementFromBytes(a,b)};this.parseZIFNavigatorImage=function(a,b,d){a="data:image/jpeg;base64,"+Z.Utils.encodeBase64(a);b=Z.Utils.createCallback(null,Z.Navigator.initializeNavigator,b);Z.Utils.createImageElementFromBytes(a,
b)};this.parseImageXML=function(a){h(a)};this.validateXYZDefaults=function(a){a&&Z.Utils.resetParametersXYZ(Z.parameters);a=parseFloat(Z.Utils.getResource("DEFAULT_INITIALX"));var b=parseFloat(Z.Utils.getResource("DEFAULT_INITIALY")),d=parseFloat(Z.Utils.getResource("DEFAULT_INITIALZOOM")),e=parseFloat(Z.Utils.getResource("DEFAULT_MINZOOM")),l=parseFloat(Z.Utils.getResource("DEFAULT_MAXZOOM"));a=isNaN(a)?null:a;b=isNaN(b)?null:b;d=isNaN(d)?null:d;e=isNaN(e)?null:e;l=isNaN(l)?null:l;if(Z.parameters){var f=
Z.parameters.toString();-1==f.indexOf("zInitialX")&&(Z.initialX=a);-1==f.indexOf("zInitialY")&&(Z.initialY=b);-1==f.indexOf("zInitialZoom")&&(Z.initialZ=d);-1==f.indexOf("zMinZ")&&(Z.minZ=e);-1==f.indexOf("zMaxZ")&&(Z.maxZ=l)}else Z.initialX=a,Z.initialY=b,Z.initialZ=d,Z.minZ=e,Z.maxZ=l;null===Z.initialX&&(Z.initialX=Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=Z.imageW/Z.imageH>qb/ab?qb/Z.imageW:ab/Z.imageH;if(null===Z.initialZ||-1==Z.initialZ)Z.initialZ=Z.fitZ;if(null===Z.minZ||
-1==Z.minZ)Z.minZ=Z.fitZ;if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=Z.fitZ;Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getInitialized=function(){return pd};this.getW=function(){return Ea};this.getH=function(){return va};this.getTierCount=function(){return nb};this.getTileW=function(){return Ha};this.getTileH=function(){return Ia};this.getTierCurrent=function(){return la};this.getTierBackfill=function(){return za};this.getTierBackfillDynamic=function(){return Ob};this.getTierScale=
function(){return aa};this.getX=function(){var a=parseFloat(M.left)-rb,b=p.getZoom();return Z.imageX-a/b};this.getY=function(){var a=parseFloat(M.top)-hb,b=p.getZoom();return Z.imageY-a/b};this.getZoom=function(){return l(la,aa)};this.getRotation=function(){return Z.imageR};this.getTiersScaleUpMax=function(){return Mb};this.getTiersScaleDownMax=function(){return Pd};this.getTilesCacheMax=function(){return hc};this.getTierWs=function(){return Fb.join(",")};this.getTierHs=function(){return Pb.join(", ")};
this.getTierTileCounts=function(){return Qb.join(", ")};this.getTilesLoadingNames=function(){return""==ya.join(", ")?"Current view loading complete":ya.join(", ")};this.setCoordinatesDisplayVisibility=function(a){a?(Z.Utils.addEventListener(document,"mousemove",Cb),Z.Utils.addEventListener(document,"mousedown",Cb)):(Z.coordinatesVisible=!1,Z.Utils.removeEventListener(document,"mousemove",Cb),Z.Utils.removeEventListener(document,"mousedown",Cb))};this.setTourPath=function(a,b){p.setHotspotPath(a,b)};
this.setHotspotPath=function(a,b){"undefined"===typeof a||Z.Utils.isStrVal(a)?(Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.hotspotFolder=Z.hotspotPath,".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/"))),b||(p.deleteAllHotspots(),vd())):(Z.hotspotPath=null,Z.hotspotFolder=null,p.deleteAllHotspots())};this.setAnnotationPath=function(a,b){"undefined"===typeof a||
Z.Utils.isStrVal(a)?(Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.annotationFolder=Z.annotationPath,".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/"))),b||(p.deleteAllAnnotations(),vd())):(Z.annotationPath=null,Z.annotationFolder=null,p.deleteAllAnnotations())};this.getAnnotationsXML=function(){return Db=$c(Db)};this.testSetAnnotationPath=function(){p.setAnnotationPath("Assets/Annotations/annotations2.xml")};
this.updateView=function(a){if("undefined"!==typeof a&&!0===a||aa!=bc||Z.imageZ!=Z.priorZ||parseFloat(M.left)!=rb||parseFloat(M.top)!=hb){Z.Utils.validateCallback("viewChanged");parseFloat(M.left)==rb&&parseFloat(M.top)==hb||Z.Utils.validateCallback("viewPanned");aa==bc&&Z.imageZ==Z.priorZ||Z.Utils.validateCallback("viewZoomed");Oc();var b=!1;if(a||parseFloat(Ba.width)!=sa.width)Z.useCanvas&&(Ba.width=sa.width+"px",Ba.height=sa.height+"px",Ba.left="0px",Ba.top="0px",Ja.restore(),Ja.save(),Ja.scale(aa,
aa),gb&&(Jb.width=gb.width+"px",Jb.height=gb.height+"px",Jb.left="0px",Jb.top="0px"),Aa&&(gc.width=Aa.width+"px",gc.height=Aa.height+"px",gc.left="0px",gc.top="0px"),ja&&(Ob?(ca.width=ja.width+"px",ca.height=ja.height+"px",ca.left=Zb+"px",ca.top=Bb+"px",cb.restore(),cb.save(),cb.scale(ac,ac)):(ca.width=nc+"px",ca.height=Yb+"px",ca.left=Zb+"px",ca.top=Bb+"px"))),b=!0;if(a||parseFloat(M.left)!=rb||parseFloat(M.top)!=hb){var b=parseFloat(M.left)-rb,d=parseFloat(M.top)-hb;0!=Z.imageR&&(d=Z.Utils.rotatePoint(b,
d,Z.imageR),b=d.x,d=d.y);M.left=rb+"px";M.top=hb+"px";Ob||(Zb=parseFloat(ca.left)+b,Bb=parseFloat(ca.top)+d,ca.left=Zb+"px",ca.top=Bb+"px");var e=p.getZoom();Z.imageX-=b/e;Z.imageY-=d/e;b=!0}b&&(n(sa,la,vb,"centerOut",!1,"1a. Updating view: resetting display positions"),Ob&&n(ja,za,fd,"simple",!1,"1b. Updating view: resetting backfill positions"));b=!1;if("undefined"!==typeof a&&a||aa!=bc||Z.imageZ!=Z.priorZ||!pd){aa!=bc&&(Z.imageZ=p.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);e=Mb;for(d=nb;e/2>=
Z.imageZ;)d--,e/=2;d=0>d-1?0:d-1;e=ha(d,Z.imageZ);if(d!=la||e!=aa)Z.useCanvas&&(Ja.restore(),Ja.save(),Ja.scale(e,e)),la!=d&&(cf=!0),la=d,aa=e;bc=aa;Ob=!1;la>Cg?(za=la-Dg,Ob=!0):za=la>If?Jf:la>Gf?Hf:Ff;tierBackfillScalePrior=ac=ha(za,Z.imageZ);var d=Fb[za],e=Pb[za],l=Z.imageX*Z.imageZ,f=Z.imageY*Z.imageZ;Ob?(d=$f,nc=Ea*d,Yb=va*d,Zb=-(Ea/d),Bb=-(va/d),nf=Sb*d,of=Tb*d,ja.width=nc,ja.height=Yb,ca.width=ja.width+"px",ca.height=ja.height+"px",ca.left=Zb+"px",ca.top=Bb+"px",Z.useCanvas&&(cb.restore(),cb.translate(nf,
of),cb.save(),cb.scale(ac,ac))):(nc=d*ac,Yb=e*ac,Zb=Sb-l,Bb=Tb-f,ja.width=d,ja.height=e,Z.useCanvas&&(ca.width=nc+"px",ca.height=Yb+"px"),ca.left=Zb+"px",ca.top=Bb+"px");Ld("backfill");n(ja,za,fd,"simple",!1,"2. Updating view: changing tier - backfill");!a&&0<hc&&(b=!0)}else 2==Z.debug&&Z.Utils.trace("2. Updating view: no change to tier.");Ob&&y(!0);y();Ld("frontfill");n(sa,la,vb,"centerOut",b,"3. Updating view: prior to loading of any new tiles");0<ya.length?C(ya,H,"centerOut","image-display"):Z.imageFiltersVisible&&
rd&&Rc(null,null,!0);E();Wa();cc();Ta(!0);N()}};syncTransitionCanvas=function(){fb.width=sa.width;fb.height=sa.height;Bc.width=Ba.width;Bc.height=Ba.height;Bc.left=Ba.left;Bc.top=Ba.top;jb.restore();jb.save();jb.translate(Sb,Tb);jb.scale(aa,aa)};this.formatTilePath=function(a,b,d,e){var l;if("ZoomifyImageFile"==Z.tileSource){var f="offsetLoading",h=l="loading",g;if(1==tierTileOffsetsCount[a])l=gd[a];else{var k=new U(a,b,d),u=k.chunkID+","+a+","+b+","+d+","+e+",offset";g=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,
"chunkID",k.chunkID);-1==g?(-1==Z.Utils.arrayIndexOf(Da,u)&&(Da[Da.length]=u),tierTileOffsetChunks[tierTileOffsetChunks.length]={chunkID:k.chunkID,chunk:"loading"},g=new Z.NetConnector,g.loadByteRange(Z.imagePath,k.chunkStart,k.chunkEnd,"offset",null,k.chunkID)):"loading"==tierTileOffsetChunks[g].chunk?-1==Z.Utils.arrayIndexOf(Da,u)&&(Da[Da.length]=u):"loading"!=tierTileOffsetChunks[g].chunk&&(g=tierTileOffsetChunks[g].chunk,l=Z.Utils.longValue(g,k.offsetStartInChunk))}1==tierTileByteCountsCount[a]?
h=hd[a]:(g=b+d*ob[a],2==tierTileByteCountsCount[a]?(a=hd[a],h=0==g?a.substring(0,a.indexOf(",")):a.substring(a.indexOf(",")+1,a.length)):(k=new P(a,b,d),a=k.chunkID+","+a+","+b+","+d+","+e+",byteCount",g=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",k.chunkID),-1==g?(-1==Z.Utils.arrayIndexOf(Da,a)&&(Da[Da.length]=a),tierTileByteCountChunks[tierTileByteCountChunks.length]={chunkID:k.chunkID,chunk:"loading"},g=new Z.NetConnector,g.loadByteRange(Z.imagePath,k.chunkStart,k.chunkEnd,
"byteCount",null,k.chunkID)):"loading"==tierTileByteCountChunks[g].chunk?-1==Z.Utils.arrayIndexOf(Da,a)&&(Da[Da.length]=a):"loading"!=tierTileByteCountChunks[g].chunk&&(g=tierTileByteCountChunks[g].chunk,h=Z.Utils.intValue(g,k.bcStartInChunk))));"loading"==l||isNaN(l)||"loading"==h||isNaN(h)||(f=Z.imagePath+"?"+l.toString()+","+h.toString());l=f}else if("ZoomifyImageFolder"==Z.tileSource){e=d*ob[a]+b;for(f=0;f<a;f++)e+=Qb[f];a=Z.imagePath+"/TileGroup"+Math.floor(e/256)+"/"+a+"-"+b+"-"+d+"."+Z.tileType;
l=a=Z.Utils.cacheProofPath(a)}else if("ZoomifyPFFFile"==Z.tileSource){h="offsetLoading";k=f=0;for(l=nb-1;l>a;l--)f+=Qb[l];f+=d*ob[a]+b;l=Math.floor(f/Fa);k=-1==f-1?0:f-1;g=Math.floor(k/Fa);void 0==wb[l]||"offsetLoading"==wb[l]||void 0==wb[g]||"offsetLoading"==wb[g]?(f=l+","+a+","+b+","+d+","+e,-1==Z.Utils.arrayIndexOf(Da,f)&&(Da[Da.length]=f),2==Z.debug&&Z.Utils.trace("Tile recorded for load retry after load chunk: "+l+","+a+","+b+","+d+","+e),void 0==wb[l]&&(wb[l]="offsetLoading",a=dc+Fa*l*8,b=a+
8*Fa,F(a,b,l)),void 0==wb[g]&&(wb[g]="offsetLoading",a=dc+Fa*g*8,b=a+8*Fa,F(a,b,l))):(e=Math.floor(wb[l][0]),h=Math.floor(wb[g][0]),g=wb[g][1],l=wb[l][1],k=k%Fa*9,g=Math.floor(parseFloat(g.substring(k,k+9))),k=f%Fa*9,l=Math.floor(parseFloat(l.substring(k,k+9))),f=0==f?dc+8*Cc:h+g,e+=l,h=0<e-f?Z.tileHandlerPathFull+"?file="+Z.imagePath+"&requestType=0&begin="+f.toString()+"&end="+e.toString()+"&vers="+dd.toString()+"&head="+Rd.toString():"skipTile:"+a+"-"+b+"-"+d);l=h}else"ImageServer"==Z.tileSource&&
(a=-1!=Z.imagePath.toLowerCase().indexOf(".svs")?"svs":-1!=Z.imagePath.toLowerCase().indexOf(".ndpi")?"ndpi":null,b=100*Z.imageZ,40==Z.sourceMagnification?f=b<=2.5+Mb?32:b<=5+Mb?16:b<=10+Mb?8:b<=25+Mb?4:b<=50+Mb?2:1:20==Z.sourceMagnification&&(f=b<=5+Mb?16:b<=10+Mb?8:b<=20+Mb?4:b<=50+Mb?2:1),tilePath=Z.tileHandlerPathFull+"?FIF="+Z.imagePath+"&focal="+Z.focal+"&QLT="+Z.quality+"&DSTL="+Z.imageX*Z.imageZ+","+Z.imageY*Z.imageZ+","+Ha+","+Ia+","+f+",1&type="+a,Z.Utils.trace(tilePath),l=tilePath="Assets/Skins/Default/standard/toolbarLogo.png");
return l};this.parseOffsetChunk=function(a){var b=parseInt(a.documentElement.getAttribute("BEGIN"),10),d=a.documentElement.getAttribute("REPLYDATA");a=Xe[b];b=Math.floor((b-dc)/8/Fa);wb[b]=[];wb[b]=d.split(",",2);2==Z.debug&&Z.Utils.trace("In selectTilesRetryPFF-chunk received: "+pffChunkOrZIFChunkNumber);b=0;for(d=Da.length;b<d;b++){var e=Da[b].split(",");e[0]==a&&(void 0!==e[4]&&"image-display"==e[4]?Ua[Ua.length]=e[1]+"-"+e[2]+"-"+e[3]:"image-backfill"==e[4]&&($a[$a.length]=e[1]+"-"+e[2]+"-"+e[3]),
Da=Z.Utils.arraySplice(Da,b,1),b--,d--)}0<Ua.length&&(Ua.sort(),Ua=Z.Utils.arrayUnique(Ua),2==Z.debug&&Z.Utils.trace("Tiles being requested - offset chunk now loaded: "+Ua.join(", ")),O(Ua,H,"simple","image-display"));0<$a.length&&($a.sort(),$a=Z.Utils.arrayUnique($a),O($a,ga,"simple","image-backfill"))};this.updateViewValidate=function(a,b){if(0==a||0==b)Z.Utils.validateCallback("viewUpdateComplete");else{var d=Math.round(100-b/a*100);return Math.round(d/10)}};this.getClickCoordsAtZoom=function(a,
b){var d=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(d.x*b,d.y*b)};this.getClickCoordsInImage=function(a,b,d){a=Z.Utils.event(a);var e=null;if(a){var l=a.type;if("undefined"===typeof d||null===d)"touchstart"==l||"touchend"==l||"touchcancel"==l?(touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,d=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),d=Z.Utils.getMousePosition(a));"undefined"!==typeof d&&
null!==d&&(a=V(d.x,d.y),e=A(a.x,a.y,b))}return e};this.getClickZoomCoords3D=function(a,b,d,e){var f=parseFloat(Z.Utils.getResource("DEFAULT_CLICKZOOMTIERSKIPTHRESHOLD"));b=V(b.x,b.y);b=A(b.x,b.y,Z.imageZ);var h=l(d,e);a.altKey?(e>1+f?h=l(d,1):0<d&&(h=l(d-1,1)),h-Z.fitZ<f&&(h=Z.fitZ)):e<1-f?h=l(d,1):d<nb-1&&(h=l(d+1,1));return new Z.Utils.Point3D(b.x,b.y,h)};this.calculateCurrentCenterCoordinates=function(a,b,d){if("undefined"===typeof a||null===a)a=new Z.Utils.Point(parseFloat(M.left),parseFloat(M.top));
if("undefined"===typeof d||null===d)d=Z.imageR;0>d&&(d+=360);if("undefined"===typeof b||null===b)b=Z.imageZ;var e=(a.x-rb)/b;a=(a.y-hb)/b;var l,f;switch(d){case 0:l=Z.imageX-e;f=Z.imageY-a;break;case 90:l=Z.imageX-a;f=Z.imageY+e;break;case 180:l=Z.imageX+e;f=Z.imageY+a;break;case 270:l=Z.imageX+a,f=Z.imageY-e}return new Z.Utils.Point(l,f)};this.syncViewportToNavigator=function(a){var b=Z.imageR;0>b&&(b+=360);a=u(a.x,a.y,Z.imageZ,b,"image");var d=Z.imageY,e=a.y;a=dX=Z.imageX-a.x;d=dY=d-e;0!=b&&(90==
b?(a=-dY,d=dX):180==b?(a=-dX,d=-dY):270==b&&(a=dY,d=-dX));b=d*Z.imageZ+hb;M.left=a*Z.imageZ+rb+"px";M.top=b+"px"};var Wc=!1;this.parseHotspotsXML=function(a){Hb=[];Rb=[];Yd=!1;zc=!0;var b=a.getElementsByTagName("SETUP")[0];"undefined"!==typeof b&&Z.Utils.isStrVal(b)||(b=a.getElementsByTagName("HOTSPOTSETUP")[0],"undefined"!==typeof b&&Z.Utils.isStrVal(b)||(b=Z.Utils.xmlConvertTextToDoc("<HOTSPOTSETUP />").getElementsByTagName("HOTSPOTSETUP")[0]));var d=b.getAttribute("AUTOSTART");gg=Z.Utils.isStrVal(d)?
"0"!=d&&"false"!=d:Z.Utils.getResource("DEFAULT_TOURAUTOSTART");d=b.getAttribute("AUTOLOOP");Xf=Z.Utils.isStrVal(d)?"0"!=d&&"false"!=d:Z.Utils.getResource("DEFAULT_TOURAUTOLOOP");d=b.getAttribute("CHOICELIST");$e=Z.Utils.isStrVal(d)?d:Z.Utils.getResource("DEFAULT_HOTSPOTLISTPOSITION");d=b.getAttribute("LISTSOURCE");Bf=Z.Utils.isStrVal(d)?d:Z.Utils.getResource("DEFAULT_HOTSPOTLISTSOURCE");b.getAttribute("LISTTITLE");var d="",d=Z.tourPath?Z.Utils.isStrVal(Z.tourListTitle)?Z.tourListTitle:Z.Utils.getResource("UI_TOURLISTTITLE"):
Z.Utils.isStrVal(Z.hotspotListTitle)?Z.hotspotListTitle:Z.Utils.getResource("UI_HOTSPOTLISTTITLE"),e=b.getAttribute("INITIALVISIBILITY");Cf=Z.Utils.isStrVal(e)?"1"==e||"true"==e:Z.Utils.getResource("DEFAULT_HOTSPOTSINITIALVISIBILITY");Hc.visibility=Cf?"visible":"hidden";e=parseFloat(b.getAttribute("MINSCALE"));b=parseFloat(b.getAttribute("MAXSCALE"));He=isNaN(e)||0>=e?1:e;Ie=isNaN(b)||0>=b?1:b;kd($e,d,Hb);a=a.getElementsByTagName("HOTSPOT");b=0;for(d=a.length;b<d;b++)e=a[b],e=Bd(e),p.createHotspotFromXML(e,
!0);2==Z.debug&&Yd&&Z.Utils.trace(Z.Utils.getResource("ERROR_HOTSPOTMEDIAINVALID"));zc=!1;Wa();Z.tourPath?(p.initializeAudioMuteButtons(),Z.Utils.validateCallback("tourLoaded"),gg&&Z.Utils.functionCallWithDelay(function(){p.tourStart()},750)):Z.Utils.validateCallback("hotspotsLoaded")};this.createHotspotFromParameters=function(a,b,d,e,l,f,h,g,k,u,B,n,q,N,ha,t,I,C,r,v,x,s,D,E,K,A,F,Ta,y,ic,Za,R,H,G,U){d=Z.Utils.arrayToArrayOfStrings([a,b,d,e,l,f,h,g,k,u,B,n,q,N,ha,t,I,C,r,v,x,s,D,E,K,A,F,Ta,y,ic,Za,
R,H,G,U]);a=Z.Utils.xmlConvertTextToDoc('<HOTSPOT ID="'+d[0]+'" NAME="'+d[1]+'" MEDIATYPE="'+d[2]+'" MEDIA="'+d[3]+'" AUDIO="'+d[4]+'" X="'+d[5]+'" Y="'+d[6]+'" ZOOM="'+d[7]+'" XSCALE="'+d[8]+'" YSCALE="'+d[9]+'" CLICKURL="'+d[10]+'" URLTARGET="'+d[11]+'" ROLLOVER="'+d[12]+'" CAPTION="'+d[13]+'" TOOLTIP="'+d[14]+'" TEXTCOLOR="'+d[15]+'" BACKCOLOR="'+d[16]+'" LINECOLOR="'+d[17]+'" FILLCOLOR="'+d[18]+'" TEXTVISIBLE="'+d[19]+'" BACKVISIBLE="'+d[20]+'" LINEVISIBLE="'+d[21]+'" FILLVISIBLE="'+d[22]+'" CAPTIONPOSITION="'+
d[23]+'" SAVED="'+d[24]+'" INTERNALID="'+d[25]+'" POIID="'+d[26]+'" SHOWFOR="'+d[31]+'" TRANSITION="'+d[32]+'" CHANGEFOR="'+d[33]+'" ROTATION="'+d[34]+'"></HOTSPOT>').getElementsByTagName("HOTSPOT")[0];null===a.getAttribute("INTERNALID")&&a.setAttribute("INTERNALID",Va("hotspot"));b=Z.Utils.xmlConvertTextToDoc("<TEMP></TEMP>");Z.Utils.isStrVal(d[27])&&(Ta=Z.Utils.xmlConvertTextToDoc(Ta).getElementsByTagName("CAPTION")[0].innerHTML,e=b.createElement("CAPTION"),e.innerHTML=Ta,a.appendChild(e));Z.Utils.isStrVal(d[28])&&
(Ta=Z.Utils.xmlConvertTextToDoc(y).getElementsByTagName("TOOLTIP")[0].innerHTML,y=b.createElement("TOOLTIP"),y.innerHTML=Ta,a.appendChild(y));if(Z.Utils.isStrVal(d[30])){y=b.createElement("POLYGON");y.setAttribute("CLOSED",d[29]);Ta=0;for(d=Za.length;Ta<d;Ta++)e=b.createElement("POINT"),e.setAttribute("X",Za[Ta].x),e.setAttribute("Y",Za[Ta].y),y.appendChild(e);a.appendChild(y)}p.createHotspotFromXML(a,!0)};this.createHotspotFromXML=function(a,b){b&&(a=La(a,"hotspot"));var d=new De(a);if(Z.Utils.isStrVal(d.media)||
Z.Utils.isStrVal(d.caption)||null!==Z.tourPath||Z.Utils.isStrVal(Z.annotationPath)){v[v.length]=d;var e="NAME"==Bf?d.name:"CAPTION"==Bf?d.caption:d.tooltip;if(ka){var l=d.internalID;if(null!=ka){var f=Z.Utils.arrayIndexOfObjectValue(Hb,"value",l);-1!=f?(ka.options[f+("none"!=Z.hotspotListTitle&&"none"!=Z.tourListTitle?1:0)]=new Option(e,l.toString()),Hb[f]={text:e,value:l}):(ka.options[ka.options.length]=new Option(e,l.toString()),Hb[Hb.length]={text:e,value:l})}}}e=new Ka;Z.Utils.isStrVal(d.media)&&
"text"!=d.mediaType&&"polygon"!=d.media?Ce(d,!0):Ub(d,e)};this.modifyHotspot=function(a,b,d,e,l){var f=-1,f=l?Z.Utils.arrayIndexOfObjectValue(v,"internalID",a):Z.Utils.arrayIndexOfObjectValue(v,"id",a.toString());-1!=f&&(a=v[f],"polygon"!=a.media||"x"!=b&&"y"!=b||(l=new Z.Utils.Point("x"==b?d:a.x,"y"==b?d:a.y),uc(a,l)),a[b]=d,"rollover"==b&&!1==d&&(a.visibility=!0),"media"==b&&"icon"==a.mediaType&&Ce(a,!1),"undefined"!==typeof e&&null!==e&&e||Wa())};this.deleteHotspot=function(a,b,d){var e=-1;d?e=
Z.Utils.arrayIndexOfObjectValue(v,"internalID",a):(e=Z.Utils.arrayIndexOfObjectValue(v,"id",a.toString()),a=v[e].internalID);-1!=e&&(v=Z.Utils.arraySplice(v,e,1),tc(a),!b&&Z.hotspotPath&&null!=ka&&(a=Z.Utils.arrayIndexOfObjectValue(Hb,"value",a),-1!=a&&(Hb=Z.Utils.arraySplice(Hb,a,1),Z.Utils.updateSelectElement(ka,Hb),b=ka.length,0!=b&&(ka.selectedIndex=a>b-1?b-1:a))))};this.deleteAllHotspots=function(){v=[];ra&&(ra.innerHTML="");ka.options.length=0};this.deleteAllMeasureHotspots=function(){var a=
v.length;if(0<a&&ra&&0<ra.childNodes.length){for(var b=0;b<a;b++)"measure"==v[b].mediaType&&(v=Z.Utils.arraySplice(v,0,1));Wa()}};this.getHotspotsVisibility=function(){return"inline-block"==Hc.display};this.setHotspotsVisibility=function(a){Hc.display=a?"inline-block":"none";Wa()};this.setHotspotVisibility=function(a,b){var d=a.firstChild;if(d&&d.style){d.style.visibility="visible";var e=b?"visible":"hidden";d.style.backgroundColor=b?"":"#FFFFFF";Z.Utils.setOpacity(d,b?1:0.01);(d=a.firstChild.childNodes[1])&&
d.style&&(d.style.visibility=e);e=Z.Utils.arrayIndexOfObjectValue(v,"internalID",a.internalID);-1!=e&&(a=v[e],a.visibility=b)}};this.setHotspotsVisibilityByFilter=function(a,b,d){if(0<v.length)if(ra&&0<ra.childNodes.length)for(var e=0,l=v.length;e<l;e++){if(v[e][a]==b){var f=document.getElementById("hot"+v[e].id);null!==f&&p.setHotspotVisibility(f,d)}}else window.setTimeout(function(){setHotspotsVisibilityByFilter(a,b,d)},100);return d};this.setHotspotVisibilityByID=function(a,b){if(0<v.length)if(ra&&
0<ra.childNodes.length){var d=Z.Utils.arrayIndexOfObjectValue(v,"id",a);-1!=d&&(d=document.getElementById("hot"+v[d].id),null!=d&&p.setHotspotVisibility(d,b))}else window.setTimeout(function(){setHotspotVisibilityByID(a,b)},100)};this.parseAnnotationsXML=function(a){ea=[];Rb=[];ua=[];Ib=[];ma=[];Oa=[];Me=[];labelCaptionPositionListDP=[];labelTargetListDP=[];Yd=!1;zc=!0;var b=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),d=Xa(b,"root"),e=Xa(b,"setup"),l=a.getElementsByTagName("SETUP");0==l.length&&(l=
a.getElementsByTagName("LABELSETUP"));if(0<l.length){l=l[0];temp=l.getAttribute("PANELPOSITION");Z.Utils.isStrVal(temp)&&e.setAttribute("PANELPOSITION",temp);var f=l.getAttribute("INITIALVISIBILITY");Z.Utils.isStrVal(f)&&(initVis=Z.Utils.getResource("DEFAULT_HOTSPOTSINITIALVISIBILITY")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("INITIALVISIBILITY",initVis));f=l.getAttribute("POIVISIBILITY");Z.Utils.isStrVal(f)&&(initVis=Z.Utils.getResource("DEFAULT_ANNOTATIONPOIVISIBILITY")?
"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("POIVISIBILITY",initVis));f=l.getAttribute("LABELVISIBILITY");Z.Utils.isStrVal(f)&&(initVis=Z.Utils.getResource("DEFAULT_ANNOTATIONLABELVISIBILITY")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("LABELVISIBILITY",initVis));f=l.getAttribute("NOTEVISIBILITY");Z.Utils.isStrVal(f)&&(initVis=Z.Utils.getResource("DEFAULT_ANNOTATIONNOTEVISIBILITY")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("NOTEVISIBILITY",
initVis));temp=l.getAttribute("MINSCALE");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&0<parseFloat(temp)&&e.setAttribute("MINSCALE",temp);temp=l.getAttribute("MAXSCALE");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&0<parseFloat(temp)&&e.setAttribute("MAXSCALE",temp)}d.appendChild(e);a=a.getElementsByTagName("POI");e=0;for(l=a.length;e<l;e++){var f=Xa(b,"poi"),h=a[e];temp=h.getAttribute("ID");Z.Utils.isStrVal(temp)&&f.setAttribute("ID",temp);temp=h.getAttribute("NAME");Z.Utils.isStrVal(temp)&&
f.setAttribute("NAME",temp);temp=h.getAttribute("X");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&f.setAttribute("X","center"==temp?imageCenterX.toString():temp);temp=h.getAttribute("Y");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&f.setAttribute("Y","center"==temp?imageCenterY.toString():temp);temp=h.getAttribute("ZOOM");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&f.setAttribute("ZOOM",temp);temp=h.getAttribute("USER");Z.Utils.isStrVal(temp)&&f.setAttribute("USER",temp);temp=h.getAttribute("DATE");
Z.Utils.isStrVal(temp)&&f.setAttribute("DATE",temp);d.appendChild(f);var g=a[e].getElementsByTagName("LABELS")[0];if("undefined"!==typeof g&&null!==g){h=b.createElement("LABELS");f.appendChild(h);for(var g=g.getElementsByTagName("LABEL"),k=0,u=g.length;k<u;k++){var p=Xa(b,"label"),B=b,n=g[k],q=void 0,N=void 0,q=n.getAttribute("ID");Z.Utils.isStrVal(q)&&p.setAttribute("ID",q);q=n.getAttribute("NAME");Z.Utils.isStrVal(q)&&p.setAttribute("NAME",q);q=n.getAttribute("MEDIATYPE");Z.Utils.isStrVal(q)&&(p.setAttribute("MEDIATYPE",
q),N=n.getAttribute("MEDIA"),Z.Utils.isStrVal(N)&&p.setAttribute("MEDIA",N),"url"==q?p.setAttribute("MEDIATYPE","icon"):"symbol"==q&&Z.Utils.isStrVal(N)&&"polygon"==N?p.setAttribute("MEDIATYPE","polygon"):"symbol"==q&&Z.Utils.isStrVal(N)&&"polygon"!=N&&-1!=N.indexOf(".")?p.setAttribute("MEDIATYPE","icon"):"text"==q&&p.setAttribute("MEDIA",""));q=n.getAttribute("X");Z.Utils.isStrVal(q)&&!isNaN(parseFloat(q))&&p.setAttribute("X","center"==q?imageCenterX.toString():q);q=n.getAttribute("Y");Z.Utils.isStrVal(q)&&
!isNaN(parseFloat(q))&&p.setAttribute("Y","center"==q?imageCenterY.toString():q);q=n.getAttribute("ZOOM");Z.Utils.isStrVal(q)&&!isNaN(parseFloat(q))&&p.setAttribute("ZOOM",q);q=n.getAttribute("XSCALE");Z.Utils.isStrVal(q)&&!isNaN(parseFloat(q))&&p.setAttribute("XSCALE",q);q=n.getAttribute("YSCALE");Z.Utils.isStrVal(q)&&!isNaN(parseFloat(q))&&p.setAttribute("YSCALE",q);q=n.getAttribute("CLICKURL");Z.Utils.isStrVal(q)?p.setAttribute("CLICKURL",q):(q=n.getAttribute("URL"),Z.Utils.isStrVal(q)&&p.setAttribute("CLICKURL",
q));q=n.getAttribute("URLTARGET");Z.Utils.isStrVal(q)&&p.setAttribute("URLTARGET",q);q=n.getAttribute("ROLLOVER");Z.Utils.isStrVal(q)&&p.setAttribute("ROLLOVER",q);q=n.getAttribute("CAPTION");Z.Utils.isStrVal(q)&&p.setAttribute("CAPTION",q);q=n.getAttribute("TOOLTIP");Z.Utils.isStrVal(q)&&p.setAttribute("TOOLTIP",q);q=n.getAttribute("USER");Z.Utils.isStrVal(q)&&p.setAttribute("USER",q);q=n.getAttribute("DATE");Z.Utils.isStrVal(q)&&p.setAttribute("DATE",q);q=n.getAttribute("TEXTCOLOR");Z.Utils.isStrVal(q)&&
p.setAttribute("TEXTCOLOR",Z.Utils.validateColorVal(q));q=n.getAttribute("BACKCOLOR");Z.Utils.isStrVal(q)&&p.setAttribute("BACKCOLOR",Z.Utils.validateColorVal(q));q=n.getAttribute("LINECOLOR");Z.Utils.isStrVal(q)&&p.setAttribute("LINECOLOR",Z.Utils.validateColorVal(q));q=n.getAttribute("FILLCOLOR");Z.Utils.isStrVal(q)&&p.setAttribute("FILLCOLOR",Z.Utils.validateColorVal(q));q=n.getAttribute("TEXTVISIBLE");Z.Utils.isStrVal(q)&&p.setAttribute("TEXTVISIBLE",q);q=n.getAttribute("BACKVISIBLE");Z.Utils.isStrVal(q)&&
p.setAttribute("BACKVISIBLE",q);q=n.getAttribute("LINEVISIBLE");Z.Utils.isStrVal(q)&&p.setAttribute("LINEVISIBLE",q);q=n.getAttribute("FILLVISIBLE");Z.Utils.isStrVal(q)&&p.setAttribute("FILLVISIBLE",q);q=n.getAttribute("CAPTIONPOSITION");Z.Utils.isStrVal(q)&&p.setAttribute("CAPTIONPOSITION",q);q=n.getAttribute("CATEGORY");Z.Utils.isStrVal(q)&&p.setAttribute("CATEGORY",q);tempNode=n.getElementsByTagName("CAPTION")[0];"undefined"!==typeof tempNode&&null!==tempNode&&p.appendChild(tempNode);tempNode=
n.getElementsByTagName("TOOLTIP")[0];"undefined"!==typeof tempNode&&null!==tempNode&&p.appendChild(tempNode);if(N=n.getElementsByTagName("POLYGON")[0]){for(var ha=Xa(B,"polygon"),t=0,I=N.getElementsByTagName("POINT").length;t<I;t++){var C=N.getElementsByTagName("POINT")[t],r=Xa(B,"point"),q=C.getAttribute("X");Z.Utils.isStrVal(q)&&r.setAttribute("X",q);q=C.getAttribute("Y");Z.Utils.isStrVal(q)&&r.setAttribute("Y",q);ha.appendChild(r)}q=n.getAttribute("CLOSED");Z.Utils.isStrVal(q)&&p.setAttribute("CLOSED",
q);p.appendChild(ha)}h.appendChild(p)}}g=a[e].getElementsByTagName("NOTES")[0];if("undefined"!==typeof g&&null!==g)for(h=b.createElement("NOTES"),f.appendChild(h),f=g.getElementsByTagName("NOTE"),g=0,k=f.length;g<k;g++)u=Xa(b,"note"),B=f[g],temp=B.getAttribute("ID"),Z.Utils.isStrVal(temp)&&u.setAttribute("ID",temp),temp=B.getAttribute("NAME"),Z.Utils.isStrVal(temp)&&u.setAttribute("NAME",temp),temp=B.getAttribute("TEXT"),Z.Utils.isStrVal(temp)&&u.setAttribute("TEXT",temp),temp=B.getAttribute("USER"),
Z.Utils.isStrVal(temp)&&u.setAttribute("USER",temp),temp=B.getAttribute("DATE"),Z.Utils.isStrVal(temp)&&u.setAttribute("DATE",temp),h.appendChild(u)}Db=b;b=Db.getElementsByTagName("SETUP")[0];ze=b.getAttribute("PANELPOSITION");d=Z.Utils.getResource("DEFAULT_HOTSPOTSINITIALVISIBILITY");a=b.getAttribute("INITIALVISIBILITY");Cf=d?"0"!=a&&"hide"!=a:"1"!=a&&"show"!=a;"markup"==Z.editMode?wd=xb=xd=!1:(wd="0"!=b.getAttribute("POIVISIBILITY"),xb="0"!=b.getAttribute("LABELVISIBILITY"),xd="0"!=b.getAttribute("NOTEVISIBILITY"));
if("undefined"!==typeof Z.AnnotationPanelDisplay)if(null===Z.AnnotationPanelDisplay){Z.AnnotationPanelDisplay=Z.Utils.createContainerElement("div","AnnotationPanelDisplay","inline-block","absolute","hidden","1px","1px","1px","1px","solid","1px","transparent none","0px","0px","normal","default");bf=Z.AnnotationPanelDisplay;Td=bf.style;Z.ViewerDisplay.appendChild(Z.AnnotationPanelDisplay);d=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);Td.zIndex=(d+4).toString();d=Z.Utils.createContainerElement("div",
"annotationPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Z.AnnotationPanelDisplay.appendChild(d);a=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONPANELLISTFONTSIZE"),10);e=[{text:Z.Utils.getResource("CONTENT_ANNOTATIONPLACEHOLDERLISTTEXT"),value:"0"}];"undefined"===typeof S||null===S?(l=Z.Utils.createContainerElement("div","labelPOITextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("UI_ANNOTATIONPANELLABELPOI")),l.appendChild(f),S=new Z.Utils.createSelectElement("poiList","",e,1,1,0,a,"hidden",he),Z.AnnotationPanelDisplay.appendChild(l),Z.AnnotationPanelDisplay.appendChild(S)):ea=[];"undefined"===typeof xa||null===xa?("markup"!=Z.editMode&&(l=Z.Utils.createContainerElement("div","labelLabelTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px",
"nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("UI_ANNOTATIONPANELLABELLABEL")),l.appendChild(f),Z.AnnotationPanelDisplay.appendChild(l)),xa=new Z.Utils.createSelectElement("labelList","",e,1,1,0,a,"hidden",Ne),Z.AnnotationPanelDisplay.appendChild(xa)):(ma=[],Oa=[]);if("undefined"===typeof wa||null===wa){if(l=Z.Utils.createContainerElement("div","labelNoteTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,
!0),f=document.createTextNode(Z.Utils.getResource("UI_ANNOTATIONPANELLABELNOTE")),l.appendChild(f),wa=new Z.Utils.createSelectElement("noteList","",e,1,1,0,a,"hidden",ie),a=Z.Utils.getResource("CONTENT_ANNOTATIONPLACEHOLDERNOTETEXT"),a=Z.Utils.createTextElement("noteTextElement",a,"1px","1px","1px","1px","0px","solid","1px",!0,"verdana","1px","none",null,1,"auto","auto",null),Z.Utils.addEventListener(a.firstChild,"focus",kc),Z.Utils.addEventListener(a.firstChild,"blur",Kb),Z.AnnotationPanelDisplay.appendChild(l),
Z.AnnotationPanelDisplay.appendChild(wa),Z.AnnotationPanelDisplay.appendChild(a),a=document.getElementById("textBoxFor-noteTextElement"))a.style.visibility="hidden"}else ua=[],Ib=[];null===Z.editMode?(be(),lc()):Ed();Z.Utils.addEventListener(d,"mousedown",Z.Utils.preventDefault)}else zc||lc();d=parseFloat(b.getAttribute("MINSCALE"));b=parseFloat(b.getAttribute("MAXSCALE"));He=isNaN(d)||0>=d?1:d;Ie=isNaN(b)||0>=b?1:b;b=Db.getElementsByTagName("POI");d=0;for(a=b.length;d<a;d++){e=Va("poi");b[d].setAttribute("INTERNALID",
e);Zd(b[d]);if(l=b[d].getElementsByTagName("LABELS")[0])for(l=l.getElementsByTagName("LABEL"),f=0,h=l.length;f<h;f++)g=Va("label"),l[f].setAttribute("INTERNALID",g),l[f].setAttribute("POIID",e),l[f]=Bd(l[f]),wc(l[f]);if(l=b[d].getElementsByTagName("NOTES")[0])for(l=l.getElementsByTagName("NOTE"),f=0,h=l.length;f<h;f++)g=Va("note"),l[f].setAttribute("INTERNALID",g),l[f].setAttribute("POIID",e),Dd(l[f])}2==Z.debug&&Yd&&Z.Utils.trace(Z.Utils.getResource("ERROR_HOTSPOTMEDIAINVALID"));zc=!1;Z.Utils.validateCallback("annotationsLoaded");
Z.Utils.updateSelectElement(S,ea);lc();Db=$c(Db)};this.createLabelFromParameters=function(a,b,d,e,l,f,h,g,k,p,u,q,B,n,N,ha,t,I,C,r,v,x,s,Ta,D,E,K,A,y,F,Za,ic,R,H,G){a=Z.Utils.arrayToArrayOfStrings([a,b,d,e,l,f,h,g,k,p,u,q,B,n,N,ha,t,I,C,r,v,x,s,Ta,D,E,K,A,y,F,Za,ic,R,H,G]);a=Z.Utils.xmlConvertTextToDoc('<LABEL ID="'+a[0]+'" NAME="'+a[1]+'" MEDIATYPE="'+a[2]+'" MEDIA="'+a[3]+'" AUDIO="'+a[4]+'" X="'+a[5]+'" Y="'+a[6]+'" ZOOM="'+a[7]+'" XSCALE="'+a[8]+'" YSCALE="'+a[9]+'" CLICKURL="'+a[10]+'" URLTARGET="'+
a[11]+'" ROLLOVER="'+a[12]+'" CAPTION="'+a[13]+'" TOOLTIP="'+a[14]+'" TEXTCOLOR="'+a[15]+'" BACKCOLOR="'+a[16]+'" LINECOLOR="'+a[17]+'" FILLCOLOR="'+a[18]+'" TEXTVISIBLE="'+a[19]+'" BACKVISIBLE="'+a[20]+'" LINEVISIBLE="'+a[21]+'" FILLVISIBLE="'+a[22]+'" CAPTIONPOSITION="'+a[23]+'" SAVED="'+a[24]+'" INTERNALID="'+a[25]+'" POIID="'+a[26]+'" POLYGONCLOSED="'+a[27]+'" SHOWFOR="'+a[28]+'" TRANSITION="'+a[29]+'" CHANGEFOR="'+a[30]+'" ROTATION="'+a[31]+'"></LABEL>');b=a.getElementsByTagName("LABEL")[0];
Z.Utils.isStrVal(b.getAttribute("INTERNALID"))||b.setAttribute("INTERNALID",Va("label"));Z.Utils.isStrVal(A)&&(A=Z.Utils.xmlConvertTextToDoc(A).getElementsByTagName("CAPTION")[0].innerHTML,d=a.createElement("CAPTION"),d.innerHTML=A,b.appendChild(d));A=y;Z.Utils.isStrVal(A)&&(A=Z.Utils.xmlConvertTextToDoc(A).getElementsByTagName("TOOLTIP")[0].innerHTML,y=a.createElement("TOOLTIP"),y.innerHTML=A,b.appendChild(y));if(null!=Za){y=a.createElement("POLYGON");A=0;for(d=Za.length;A<d;A++)e=a.createElement("POINT"),
e.setAttribute("X",Za[A].x),e.setAttribute("Y",Za[A].y),y.appendChild(e);b.appendChild(y)}wc(b,!0)};this.modifyLabel=function(a,b,d,e,l){p.modifyHotspot(a.toString(),b,d,e,l)};this.calculateAnnotationPanelDimensions=function(a,b,d){var e=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONPANELWIDTH"),10),l=parseInt(Z.Utils.getResource("DEFAULT_ANNOTATIONPANELHEIGHT"),10);"markup"==Z.editMode?(e-=20,l+=105,a||(l-=24),b||(l-=24),d||(l-=115)):null!==Z.editMode?(l+=244,a||(l-=50),b||(l-=235),d||(l-=140)):
(a||(l-=24),b||(l-=24),d||(l-=115));this.w=e;this.h=l};this.calculateAnnotationPanelCoords=function(a,b,d,e,l){switch(a){case "0":d=a=-1E3;break;case "1":d=a=15;break;case "2":a=e-b-15;d=15;break;case "3":a=e-b-15;d=null!=toolbar?l-d-15:l-15;break;case "4":a=15;d=null!=toolbar?l-d-15:l-15;break;default:a=e-b-15,d=15}return new Z.Utils.Point(a,d)};this.getInitializedAnnotationPanel=function(){return ce};this.sizeAndPositionAnnotationPanel=function(a,b,d,e,l){"undefined"!==typeof b&&null!==b&&(a.width=
b+"px");"undefined"!==typeof d&&null!==d&&(a.height=d+"px");"undefined"!==typeof e&&null!==e&&(a.left=e+"px");"undefined"!==typeof l&&null!==l&&(a.top=l+"px")};this.setEditModeLabel=function(a,b,d,e){d=Z.labelMode;Z.labelMode=a;var l=parseInt(Z.Utils.getResource("ALERT_HOWTOEDITMESSAGEDURATION"),10);Z.Utils.showMessage(Z.Utils.getResource("ALERT_HOWTOEDITMODE"+a.toUpperCase())+Z.Utils.getResource("ALERT_HOWTOHELPREMINDER"),!0,l,"center",!0);if("edit"==Z.editMode&&"editLabel"==Z.editing)if(p.modifyHotspot(x,
"mediaType",a,!0,!0),"freehand"==a)"freehand"!=d&&p.modifyHotspot(x,"polygonPts",null,!0,!0),p.modifyHotspot(x,"image",null,!0,!0),p.modifyHotspot(x,"closed","false",!0,!0),p.modifyHotspot(x,"media","polygon",!1,!0);else if("text"==a)p.modifyLabel(x,"image",null,!0,!0),p.modifyLabel(x,"captionPosition","5",!0,!0),p.modifyLabel(x,"media",null,!1,!0);else if("icon"==a)"icon"!=d&&0<labelIconList.selectedIndex&&(e=!0),d=labelIconList[labelIconList.selectedIndex].value,d="External Graphics File"!=d?Z.annotationFolder+
"/"+d:"placeholder",p.modifyHotspot(x,"media",d,!1,!0);else if("rectangle"==a){if(J&&J.polygonPts&&4==J.polygonPts.length&&("polygon"==d||"measure"==d)?(d=Yc(J.polygonPts,0),p.modifyHotspot(x,"polygonPts",d,!0,!0),d=Yc(J.polygonPts,1),p.modifyHotspot(x,"polygonPts",d,!0,!0),d=Yc(J.polygonPts,2),p.modifyHotspot(x,"polygonPts",d,!0,!0),d=Yc(J.polygonPts,3),p.modifyHotspot(x,"polygonPts",d,!0,!0)):p.modifyHotspot(x,"polygonPts",null,!0,!0),p.modifyHotspot(x,"image",null,!0,!0),p.modifyHotspot(x,"media",
"polygon",!1,!0),l=J&&J.polygonPts&&0<J.polygonPts.length)d=new Z.Utils.Point(J.polygonPts[0].x,J.polygonPts[0].y),Wb(x,d)}else"polygon"==a?("rectangle"!=d&&"polygon"!=d&&"measure"!=d&&p.modifyHotspot(x,"polygonPts",null,!0,!0),p.modifyHotspot(x,"image",null,!0,!0),p.modifyHotspot(x,"media","polygon",!1,!0)):"measure"==a&&((l=J&&J.polygonPts&&0<J.polygonPts.length)&&"rectangle"!=d&&"polygon"!=d&&"measure"!=d&&p.modifyHotspot(x,"polygonPts",null,!0,!0),p.modifyHotspot(x,"image",null,!0,!0),p.modifyHotspot(x,
"media","polygon",!1,!0),l&&(d=new Z.Utils.Point(J.polygonPts[0].x,J.polygonPts[0].y),Wb(x,d)));d="view"==a?"buttonViewMode":"buttonEditMode"+Z.Utils.stringUpperCaseFirstLetter(a);Z.Toolbar.positionButtonBorder(d);p.toggleLabelIconPicker("icon"==a&&!e);b&&"icon"==a&&"undefined"!==typeof iconMedia&&Z.Utils.isStrVal(iconMedia)&&(a=document.getElementById("labelIconList"))&&(b=iconMedia.lastIndexOf("/")+1,e=iconMedia.lastIndexOf("."),-1!=b&&-1!=e&&(b=iconMedia.substring(b,e).toLowerCase(),b=Z.Utils.arrayIndexOfObjectValueSubstring(a,
"value",b,null,!0),-1!=b&&(a.selectedIndex=b)));fe=na=null;yc=!1;Ga=!0;G?jc():Wa()};this.toggleLabelColorPicker=function(a){var b=document.getElementById("buttonContainerLabelColors");if(b){var d="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!d)?"inline-block":"none"}};this.setDrawingColor=function(a){"markup"!=Z.editMode&&p.toggleLabelColorPicker(!1);var b;switch(a){case "buttonColor0":b="#FFFFFF";break;case "buttonColor1":b="#FFFF00";break;case "buttonColor2":b=
"#00FFFF";break;case "buttonColor3":b="#800080";break;case "buttonColor4":b="#008000";break;case "buttonColor5":b="#FF0000";break;case "buttonColor6":b="#0000FF";break;case "buttonColor7":b="#000000"}mc=gf=lineStrokeColor=b};this.toggleLabelIconPicker=function(a){var b=document.getElementById("buttonContainerLabelIcons");if(b){var d="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!d)?"inline-block":"none"}};this.addNewPOI=function(){Fd=0<S.options.length?S.options[S.selectedIndex].value:
0;Ma("save","pois");Cd();xc(ea[ea.length-1].value);Pa("poi","addPOI")};this.editCurrentPOI=function(){Fd=S.options[S.selectedIndex].value;Ma("save","pois");Pa("poi","editPOI")};this.deleteCurrentPOI=function(){Pa("poi",null);if("undefined"!==typeof S&&null!==S&&0<S.options.length){var a=-1!=S.selectedIndex?S.selectedIndex:0,b=S[S.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(ea,"value",b);-1!=b&&(ea=Z.Utils.arraySplice(ea,b,1));0<ea.length?(b=ea.length-1,b=ea[a<=b?a:b].value):b=null;xc(b);
Fd=0<S.options.length?S.options[S.selectedIndex].value:0;Ma("save","pois")}p.saveAnnotations()};this.cancelEditsPOI=function(){Pa("poi",null);Z.Utils.showMessage(Z.Utils.getResource("ALERT_CANCELLINGUNSAVEDEDITS"),!1,750,"center");Ma("rollback","pois");xc(Fd)};this.saveEditsPOI=function(a){var b=!zc&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||Pa("poi",null);b&&(Z.Utils.showMessage(Z.Utils.getResource("ALERT_SAVINGUNSAVEDEDITS"),!1,750,"center"),Fd=S.options[S.selectedIndex].value,Ma("save",
"pois"),p.saveAnnotations())};this.addNewLabel=function(){Mc=0<xa.options.length?xa.options[xa.selectedIndex].value:0;Ma("save","labels");parseInt(Z.Utils.getResource("ALERT_HOWTOEDITMESSAGEDURATIONSHORT"),10);Z.Utils.showMessage(Z.Utils.getResource("ALERT_HOWTOCREATEFIRSTLABEL")+Z.Utils.getResource("ALERT_HOWTOHELPREMINDER"),!0,null,"center",!0);x=null;Pa("labelPartial","addLabel")};this.editCurrentLabel=function(){Mc=x;Ma("save","labels");Pa("label","editLabel");"view"!=Z.labelMode&&null!==Z.editing&&
p.setEditModeLabel(J.mediaType,!0,J.media,!0);null!==J&&"polygon"==J.media&&jc()};this.deleteCurrentLabel=function(){p.toggleLabelIconPicker(!1);"markup"!=Z.editMode&&Pa("label",null);if("undefined"!==typeof xa&&null!==xa&&0<xa.options.length){var a=-1!=xa.selectedIndex?xa.selectedIndex:0,b=xa[xa.selectedIndex].value,d=Z.Utils.arrayIndexOfObjectValue(ma,"value",b);-1!=d&&(ma=Z.Utils.arraySplice(ma,d,1));d=Z.Utils.arrayIndexOfObjectValue(Oa,"value",b);-1!=d&&(Oa=Z.Utils.arraySplice(Oa,d,1));b=Z.Utils.arrayIndexOfObjectValue(v,
"internalID",b);-1!=b&&(v=Z.Utils.arraySplice(v,b,1));0<Oa.length?(b=Oa.length-1,b=Oa[a<=b?a:b].value):b=null;Vb(S.options[S.selectedIndex].value,b);Mc=0<xa.options.length?xa.options[xa.selectedIndex].value:0;Ma("save","labels")}p.saveAnnotations()};this.cancelEditsLabel=function(){p.toggleLabelIconPicker(!1);Pa("label",null);Z.Utils.showMessage(Z.Utils.getResource("ALERT_CANCELLINGUNSAVEDEDITS"),!1,750,"center");Ma("rollback","labels");Ga=!0;Vb(S.options[S.selectedIndex].value,Mc);Wa()};this.saveEditsLabel=
function(a){p.toggleLabelIconPicker(!1);var b=!zc&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||"markup"==Z.editMode||Pa("label",null);b&&(Z.Utils.showMessage(Z.Utils.getResource("ALERT_SAVINGUNSAVEDEDITS"),!1,750,"center"),Mc=xa.options[xa.selectedIndex].value,p.saveAnnotations(),Ma("save","labels"),Ga=!0,Vb(S.options[S.selectedIndex].value,Mc));Wa()};this.addNewNote=function(){ye=0<wa.options.length?wa.options[wa.selectedIndex].value:0;Ma("save","notes");var a=Z.Utils.arrayToArrayOfStrings([void 0,
void 0,void 0,void 0,void 0]),a=Z.Utils.xmlConvertTextToDoc('<NOTE ID="'+a[0]+'" NAME="'+a[1]+'" TEXT="'+a[2]+'" INTERNALID="'+a[3]+'" POIID="'+a[4]+'" ></NOTE>').getElementsByTagName("NOTE")[0];Dd(a,!0);a=ua[ua.length-1];Kc(a.poiID,a.value);Pa("note","addNote")};this.editCurrentNote=function(){ye=wa.options[wa.selectedIndex].value;Ma("save","notes");Pa("note","editNote")};this.deleteCurrentNote=function(){Pa("note",null);if("undefined"!==typeof wa&&null!==wa&&0<wa.options.length){var a=-1!=wa.selectedIndex?
wa.selectedIndex:0,b=wa[wa.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(ua,"value",b);-1!=b&&(ua=Z.Utils.arraySplice(ua,b,1));0<ua.length?(b=ua.length-1,b=ua[a<=b?a:b].value):b=null;"markup"!=Z.editMode&&Kc(S.options[S.selectedIndex].value,b);ye=0<wa.options.length?wa.options[wa.selectedIndex].value:0;Ma("save","notes")}p.saveAnnotations()};this.cancelEditsNote=function(){Pa("note",null);Z.Utils.showMessage(Z.Utils.getResource("ALERT_CANCELLINGUNSAVEDEDITS"),!1,750,"center");Ma("rollback",
"notes");Kc(S.options[S.selectedIndex].value,ye)};this.saveEditsNote=function(a){var b=null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||Pa("note",null);b&&(Z.Utils.showMessage(Z.Utils.getResource("ALERT_SAVINGUNSAVEDEDITS"),!1,750,"center"),ye=wa.options[wa.selectedIndex].value,Ma("save","notes"),p.saveAnnotations())};this.deleteAllAnnotations=function(){var a=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),b=a.getElementsByTagName("ZAS")[0],d=Xa(a,"setup");b.appendChild(d);var b=Db.getElementsByTagName("SETUP")[0],
e=b.getAttribute("PANELPOSITION");Z.Utils.isStrVal(e)&&d.setAttribute("PANELPOSITION",e);e=b.getAttribute("INITIALVISIBILITY");Z.Utils.isStrVal(e)&&(e=Z.Utils.getResource("DEFAULT_HOTSPOTSINITIALVISIBILITY")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",d.setAttribute("INITIALVISIBILITY",e));e=b.getAttribute("POIVISIBILITY");Z.Utils.isStrVal(e)&&(e=Z.Utils.getResource("DEFAULT_ANNOTATIONPOIVISIBILITY")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",d.setAttribute("POIVISIBILITY",e));e=
b.getAttribute("LABELVISIBILITY");Z.Utils.isStrVal(e)&&(e=Z.Utils.getResource("DEFAULT_ANNOTATIONLABELVISIBILITY"),d.setAttribute("LABELVISIBILITY",e?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1"));e=b.getAttribute("NOTEVISIBILITY");Z.Utils.isStrVal(e)&&(e=Z.Utils.getResource("DEFAULT_ANNOTATIONNOTEVISIBILITY")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",d.setAttribute("NOTEVISIBILITY",e));e=b.getAttribute("MINSCALE");Z.Utils.isStrVal(e)&&!isNaN(parseFloat(e))&&0<parseFloat(e)&&d.setAttribute("MINSCALE",
e);e=b.getAttribute("MAXSCALE");Z.Utils.isStrVal(e)&&!isNaN(parseFloat(e))&&0<parseFloat(e)&&d.setAttribute("MAXSCALE",e);ra&&(v=[],Rb=[],null!=ka?Hb=[]:(ea=[],ua=[],Ib=[],ma=[],Oa=[]));Z.Viewport.parseAnnotationsXML(a);Wa()};this.saveAnnotations=function(a){Db=$c(Db);a=Z.Utils.xmlConvertDocToText(Db);a=Z.Utils.xmlConvertTextToDoc(a);var b=a.getElementsByTagName("SETUP")[0];"2"==b.getAttribute("PANELPOSITION")&&b.removeAttribute("PANELPOSITION");"1"==b.getAttribute("INITIALVISIBILITY")&&b.removeAttribute("INITIALVISIBILITY");
"1"==b.getAttribute("POIVISIBILITY")&&b.removeAttribute("POIVISIBILITY");"1"==b.getAttribute("LABELVISIBILITY")&&b.removeAttribute("LABELVISIBILITY");"1"==b.getAttribute("NOTEVISIBILITY")&&b.removeAttribute("NOTEVISIBILITY");"1"==b.getAttribute("MINSCALE")&&b.removeAttribute("MINSCALE");"1"==b.getAttribute("MAXSCALE")&&b.removeAttribute("MAXSCALE");for(var b=a.getElementsByTagName("POI"),d=0,e=b.length;d<e;d++){var l=b[d];"0"==l.getAttribute("ID")&&l.removeAttribute("ID");l.getAttribute("NAME")==
Z.Utils.getResource("CONTENT_POINAME")&&l.removeAttribute("NAME");"center"==l.getAttribute("X")&&l.removeAttribute("X");"center"==l.getAttribute("Y")&&l.removeAttribute("Y");"-1"==l.getAttribute("ZOOM")&&l.removeAttribute("ZOOM");l.getAttribute("USER")==Z.Utils.getResource("CONTENT_POIUSER")&&l.removeAttribute("USER");l.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&l.removeAttribute("DATE");l.hasAttribute("INTERNALID")&&l.removeAttribute("INTERNALID");if(l=b[d].getElementsByTagName("LABELS")[0])for(var l=
l.getElementsByTagName("LABEL"),f=0,h=l.length;f<h;f++){var g=l[f];"0"==g.getAttribute("ID")&&g.removeAttribute("ID");g.getAttribute("NAME")==Z.Utils.getResource("CONTENT_LABELNAME")&&g.removeAttribute("NAME");"icon"==g.getAttribute("MEDIATYPE")&&g.removeAttribute("MEDIATYPE");"circle"==g.getAttribute("MEDIA")&&g.removeAttribute("MEDIA");"center"==g.getAttribute("X")&&g.removeAttribute("X");"center"==g.getAttribute("Y")&&g.removeAttribute("Y");"100"==g.getAttribute("ZOOM")&&g.removeAttribute("ZOOM");
"100"==g.getAttribute("XSCALE")&&g.removeAttribute("XSCALE");"100"==g.getAttribute("YSCALE")&&g.removeAttribute("YSCALE");""==g.getAttribute("CLICKURL")&&g.removeAttribute("CLICKURL");"_blank"==g.getAttribute("URLTARGET")&&g.removeAttribute("URLTARGET");"0"==g.getAttribute("ROLLOVER")&&g.removeAttribute("ROLLOVER");""==g.getAttribute("CAPTION")&&g.removeAttribute("CAPTION");""==g.getAttribute("TOOLTIP")&&g.removeAttribute("TOOLTIP");g.getAttribute("USER")==Z.Utils.getResource("CONTENT_LABELUSER")&&
g.removeAttribute("USER");g.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&g.removeAttribute("DATE");g.getAttribute("TEXTCOLOR")==Z.Utils.getResource("CONTENT_CAPTIONTEXTCOLOR")&&g.removeAttribute("TEXTCOLOR");g.getAttribute("BACKCOLOR")==Z.Utils.getResource("CONTENT_CAPTIONBACKCOLOR")&&g.removeAttribute("BACKCOLOR");g.getAttribute("LINECOLOR")==Z.Utils.getResource("CONTENT_POLYGONLINECOLOR")&&g.removeAttribute("LINECOLOR");g.getAttribute("FILLCOLOR")==Z.Utils.getResource("CONTENT_POLYGONFILLCOLOR")&&
g.removeAttribute("FILLCOLOR");g.getAttribute("TEXTVISIBLE")==Z.Utils.getResource("CONTENT_CAPTIONTEXTVISIBLE")&&g.removeAttribute("TEXTVISIBLE");g.getAttribute("BACKVISIBLE")==Z.Utils.getResource("CONTENT_CAPTIONBACKVISIBLE")&&g.removeAttribute("BACKVISIBLE");g.getAttribute("LINEVISIBLE")==Z.Utils.getResource("CONTENT_POLYGONLINEVISIBLE")&&g.removeAttribute("LINEVISIBLE");g.getAttribute("FILLVISIBLE")==Z.Utils.getResource("CONTENT_POLYGONFILLVISIBLE")&&g.removeAttribute("FILLVISIBLE");g.getAttribute("CAPTIONPOSITION")==
Z.Utils.getResource("CONTENT_CAPTIONPOSITION")&&g.removeAttribute("CAPTIONPOSITION");g.hasAttribute("INTERNALID")&&g.removeAttribute("INTERNALID")}if(l=b[d].getElementsByTagName("NOTES")[0])for(l=l.getElementsByTagName("NOTE"),f=0,h=l.length;f<h;f++)g=l[f],"0"==g.getAttribute("ID")&&g.removeAttribute("ID"),g.getAttribute("NAME")==Z.Utils.getResource("CONTENT_NOTENAME")&&g.removeAttribute("NAME"),g.getAttribute("TEXT")==Z.Utils.getResource("CONTENT_NOTETEXT")&&g.removeAttribute("TEXT"),g.getAttribute("USER")==
Z.Utils.getResource("CONTENT_NOTEUSER")&&g.removeAttribute("USER"),g.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&g.removeAttribute("DATE"),g.hasAttribute("INTERNALID")&&g.removeAttribute("INTERNALID")}annotationsXMLOut=a;console.log("XML last saved: "+Z.Utils.xmlConvertDocToText(Db));console.log("XML posting: "+Z.Utils.xmlConvertDocToText(annotationsXMLOut));Z.Utils.isStrVal(Z.saveHandlerPath)?-1!=Z.saveHandlerPath.indexOf(Z.Utils.getResource("ALERT_SAVEDISABLEDFORDEMOKEY"))?Z.Utils.showMessage(Z.Utils.getResource("ALERT_SAVEDISABLEDFORDEMOTEXT"),
!1,2E3,"center"):(Z.Utils.showMessage(Z.Utils.getResource("ALERT_SAVINGUNSAVEDEDITS"),!1,2E3,"center"),(new Z.NetConnector).postXML(Z.saveHandlerPath,annotationsXMLOut)):Z.Utils.showMessage(Z.Utils.getResource("ERROR_XMLSAVEHANDLERPATHINVALID"),!0,null,"center")};this.setAllHotspotsSaved=function(){for(var a=0,b=v.length;a<b;a++)v[a].saved=!0};this.verifyEditsUnsaved=function(a){a=$c(Db);return Z.Utils.xmlConvertDocToText(Db)!=Z.Utils.xmlConvertDocToText(a)};this.tourStart=function(){p.tourStop();
Z.tourPlaying=!0;var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="inline-block",b.style.display="none");Z.Utils.playAudio(de,v[vc].audio);var d=md(vc,"next",v.length-1);null!==d&&Z.Utils.functionCallWithDelay(function(){p.goToDestination(d)},1500)};this.tourStop=function(){Z.tourPlaying=!1;Z.delayedFunctionCallTimer&&(window.clearTimeout(Z.delayedFunctionCallTimer),Z.delayedFunctionCallTimer=null);var a=document.getElementById("buttonTourStop"),
b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorDestination=function(a){Z.tourPlaying&&a&&p.tourStop();destinationChange("prior")};this.nextDestination=function(a){Z.tourPlaying&&a&&p.tourStop();destinationChange("next")};destinationChange=function(a){if("undefined"!==typeof ka&&null!==ka&&0<ka.length){Z.Utils.playAudio(de,v[vc].audio);var b=Z.tourPlaying?v[vc].showFor:0;Z.Utils.isStrVal(v[vc].audio)&&(b+=500);var d=md(vc,a,v.length-
1);null!==d?(Z.Utils.loadAudio(v[d].audio),Z.Utils.functionCallWithDelay(function(){p.goToDestination(d)},b)):p.tourStop()}};this.goToDestination=function(a){vc=a;a=v[a];var b=Z.tourPlaying?p.nextDestination:null;switch(v.transition){case "ZoomAndPanToView":p.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation,a.changeFor,null,b);break;case "SetView":p.setView(a.x,a.y,a.z/100,a.rotation,b);break;default:p.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation,a.changeFor,null,b)}a=Z.Utils.arrayIndexOfObjectValue(ka.options,
"value",a.internalID.toString());-1!=a&&(ka.selectedIndex=a)};this.parseSlidesXML=function(a){mb=[];Ue=[];var b=a.getElementsByTagName("SETUP")[0],d=b.getAttribute("AUTOSTART");We=Z.Utils.isStrVal(d)?"0"!=d&&"false"!=d:Z.Utils.getResource("DEFAULT_SLIDESAUTOSTART");d=b.getAttribute("AUTOLOOP");Yf=Z.Utils.isStrVal(d)?"0"!=d&&"false"!=d:Z.Utils.getResource("DEFAULT_SLIDESAUTOLOOP");d=b.getAttribute("CHOICELIST");hg=Z.Utils.isStrVal(d)?d:Z.Utils.getResource("DEFAULT_SLIDELISTPOSITION");d=b.getAttribute("LISTSOURCE");
Z.Utils.isStrVal(d)||Z.Utils.getResource("DEFAULT_SLIDELISTSOURCE");b.getAttribute("LISTTITLE");Z.slideListTitle=Z.Utils.isStrVal(Z.slideListTitle)?Z.slideListTitle:Z.Utils.getResource("UI_SLIDELISTTITLE");a=a.getElementsByTagName("SLIDE");b=0;for(d=a.length;b<d;b++){var e=new me(a[b]);mb[mb.length]=e;Ue[Ue.length]={text:e.name,value:e.internalID}}var l=hg;a=Z.slideListTitle;var b=Ue,d="0"==l?"hidden":"visible",e=parseInt(Z.Utils.getResource("DEFAULT_SLIDELISTWIDTH"),10),f;switch(l){case "0":f=l=
0;break;case "1":f=l=25;break;case "2":l=qb-e-25;f=20;break;case "3":l=qb-e-25;f=null!=toolbar?ab-50:ab-37.5;break;case "4":l=25;f=null!=toolbar?ab-50:ab-37.5;break;default:l=qb-e,f=25}l=new Z.Utils.Point(l,f);if("undefined"===typeof db||null===db)db=new Z.Utils.createSelectElement("slideList",a,b,e,l.x,l.y,null,d,ne),Z.ViewerDisplay.appendChild(db),Nc=0,a=Z.Utils.isStrVal(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,db.selectedIndex=a;p.initializeAudioMuteButtons();null===Z.imagePath||"null"==
Z.imagePath||-1!=Z.imagePath.indexOf("zSlidePath")?p.goToSlide(0,!0):We&&p.slideshowStart()};this.slideshowStart=function(a){p.slideshowStop();Z.slideshowPlaying=!0;var b=document.getElementById("buttonSlideshowStop"),d=document.getElementById("buttonSlideshowStart");b&&d&&(b.style.display="inline-block",d.style.display="none");Z.Utils.playAudio(de,mb[Nc].audio);var b=Z.slideshowPlaying?mb[Nc].showFor:0,e=a?0:md(Nc,"next",mb.length-1);null!==e&&(Z.Utils.loadAudio(mb[e].audio),Z.Utils.functionCallWithDelay(function(){p.goToSlide(e)},
b))};this.slideshowStop=function(){Z.slideshowPlaying=!1;Z.delayedFunctionCallTimer&&(window.clearTimeout(Z.delayedFunctionCallTimer),Z.delayedFunctionCallTimer=null);var a=document.getElementById("buttonSlideshowStop"),b=document.getElementById("buttonSlideshowStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorSlide=function(a){Z.slideshowPlaying&&a&&p.slideshowStop();Id("prior")};this.nextSlide=function(a){Z.slideshowPlaying&&a&&p.slideshowStop();Id("next")};this.goToSlide=
function(a,b){Nc=a;var d=mb[a],e;temp=d.initialX;var l=Z.Utils.isStrVal(temp)?"center"==temp?"zInitialX="+(Z.imageW/2).toString():isNaN(parseFloat(temp))?null:"zInitialX="+temp:null;temp=d.initialY;e=Z.Utils.isStrVal(temp)?"center"==temp?"zInitialY="+(Z.imageH/2).toString():isNaN(parseFloat(temp))?null:"zInitialY="+temp:null;temp=d.initialZoom;var f=Z.Utils.isStrVal(temp)?isNaN(parseFloat(temp))?null:"zInitialZoom="+temp:null;temp=d.minZoom;var h=Z.Utils.isStrVal(temp)?isNaN(parseFloat(temp))?null:
"zMinZoom="+temp:null;temp=d.maxZoom;var g=Z.Utils.isStrVal(temp)?isNaN(parseFloat(temp))?null:"zMaxZoom="+temp:null,l=null!==l?l:null,l=null!==e?null!==l?l+"&"+e:e:null,l=null!==f?null!==l?l+"&"+f:f:null,l=null!==h?null!==l?l+"&"+h:h:null;e=null!==g?null!==l?l+"&"+g:g:null;switch(d.transition){case "Fade":Z.Viewer.setImageWithFade(d.media,e,b);break;case "None":Z.Viewer.setImage(d.media,e,!1,b);break;default:Z.Viewer.setImageWithFade(d.media,e,b)}d=Z.Utils.arrayIndexOfObjectValue(db.options,"value",
d.internalID.toString());-1!=d&&(db.selectedIndex=d)};this.slideTransitionTimeoutHandler=function(a,b,d,e){e&&(Z.Viewer.setImage(b,d,!1,e),a="in");window.clearTimeout(Z.slideTransitionTimeout);Z.slideTransitionTimeout=null;"out"==a?0<=Z.slideOpacity?(Z.slideOpacity-=ig,a="out"):(Z.slideOpacity=0,a="in",Z.Viewer.setCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,d)},50)}),Z.Viewer.setImage(b,d,!1,null)):(0==
Z.slideOpacity&&(Z.Utils.playAudio(de,mb[Nc].audio),Z.Viewer.clearCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,d)},50)})),1>=Z.slideOpacity?(Z.slideOpacity+=ig,a="in"):(Z.slideOpacity=1,a=null));ia&&Z.Utils.setOpacity(ia,Z.slideOpacity);Z.NavigatorDisplay&&Z.Utils.setOpacity(Z.NavigatorDisplay,Z.slideOpacity);null!==a&&0!=Z.slideOpacity&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,
b,d)},50))};this.initializeAudioMuteButtons=function(){if(Z.audioContent){var a=document.getElementById("buttonAudioOn");a&&(a.style.display="inline-block")}};this.audioMute=function(a){Z.audioMuted=a;var b=document.getElementById("buttonAudioMuted"),d=document.getElementById("buttonAudioOn");b&&d&&(a?(b.style.display="inline-block",d.style.display="none"):(b.style.display="none",d.style.display="inline-block"))};this.setView=function(a,b,d,e,l){ed(a,b,d,e,l)};this.zoom=function(a){if("stop"!=a||
"stop"!=Z.zooming){switch(a){case "out":0<=sb&&(sb-=Od);break;case "in":0>=sb&&(sb+=Od);break;case "stop":sb=0}Z.zooming=0==sb?"stop":0<sb?"in":"out";0!=sb?Xb||((0>sb&&Z.imageZ>Z.minZ||0<sb&&Z.imageZ<Z.maxZ)&&p.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(Na),Xb=window.setTimeout(ad,mf)):(bd(),p.updateView(),p.toggleWatermarks(!0))}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=Z.panningY){switch(a){case "left":0>=Lb&&(Lb+=Te);break;case "up":0>=
Ab&&(Ab+=Te);break;case "down":0<=Ab&&(Ab-=Te);break;case "right":0<=Lb&&(Lb-=Te);break;case "horizontalStop":Lb=0;break;case "verticalStop":Ab=0;break;case "stop":Ab=Lb=0}Z.panningX=0==Lb?"stop":0<Lb?"left":"right";Z.panningY=0==Ab?"stop":0<Ab?"up":"down";l(la,1);l(la,1);0!=Lb||0!=Ab?Xb||(p.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(Na),Xb=window.setTimeout(ad,mf)):(bd(),p.updateView(),p.toggleWatermarks(!0))}};this.zoomAndPanToView=function(a,b,d,e,l,f,h){p.zoomAndPanAllStop();if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=
!1;else{if("undefined"===typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof d||null===d)d=Z.imageZ;if("undefined"===typeof e||null===e)e=Z.imageR;if("undefined"===typeof l||null===l)l=Eg;if("undefined"===typeof f||null===f)f=yf;p.toggleWatermarks(!1);Z.useCanvas||Z.Utils.clearDisplay(Na);if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===typeof e||null===e)e=Z.imageR;"undefined"===typeof d||
null===d?d=Z.initialZ:1<d&&2>d&&0!=d%1?d=1:1<d?d/=100:0.99<d&&1>d&&0!=100*d%1&&(d=1);b=u(a,b,d,e,"image");a=b.x;b=b.y;d=B(d);pe=0;oe(a,b,d,e,l,f,h)}};this.zoomAndPanAllStop=function(a,b){Z.interactivityOff||(bd(),nd(),Z.tourPlaying&&b&&p.tourStop(),Z.slideshowPlaying&&b&&p.slideshowStop(),a||p.updateView())};this.scaleTierToZoom=function(a){Ac(a)&&(E(),Wa(),N(),Ta())};this.reset=function(a){a?p.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):p.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,
Z.initialR);Oc(!0)};this.labelScale=function(a){switch(a){case "down":0<=$b&&($b-=Ve);break;case "up":0>=$b&&($b+=Ve);break;case "stop":$b=0}0!=$b?od||(od=window.setTimeout(Jd,ag)):(od&&(window.clearTimeout(od),od=null),$b=0)};this.toggleWatermarks=function(a){if(jd){var b="inline-block"==jd.display;jd.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none"}};this.toggleConstrainPan=function(){Z.constrainPan=!Z.constrainPan;if(Z.constrainPan){var a=parseFloat(Ba.left),b=parseFloat(Ba.top),
a=u(a,b,Z.imageZ,Z.imageR,"container");M.left=a.x+"px";M.top=a.y+"px";p.updateView()}};this.toggleBackfill=function(){var a=Z.ViewerDisplay.firstChild.firstChild.style;a.display="none"==a.display?"inline-block":"none"};this.toggleDisplay=function(){var a=Z.ViewerDisplay.firstChild.childNodes[1].style;a.display="none"==a.display?"inline-block":"none"};this.toggleFullViewModeExternal=function(){Af=!0;p.toggleFullViewMode()};this.toggleFullViewMode=function(a,b){var d=null,e=null;Z.fullView="undefined"!==
typeof a&&null!==a?a:!Z.fullView;var l=document.body.style,f=document.documentElement.style,h=Z.ViewerDisplay.style,e=Z.Utils.getElementStyle(Z.pageContainer);Z.fullView?(bg=l.width,cg=l.height,dg=l.overflow,eg=f.overflow,zf=Z.Utils.isStrVal(e.backgroundColor)&&"transparent"!=e.backgroundColor?e.backgroundColor:Z.Utils.isStrVal(l.backgroundColor)&&"transparent"!=l.backgroundColor?l.backgroundColor:Z.Utils.getResource("DEFAULT_FULLVIEWBACKCOLOR"),fg=h.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?
(fullScreenEntering=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0),e=Z.Utils.getScreenSize()):(e=Z.Utils.getWindowSize(),Z.mobileDevice?(l.width=e.x,l.height=e.y):(l.width="100%",l.height="100%")),d=e.x,e=e.y,l.overflow="hidden",f.overflow="hidden",h.backgroundColor=zf,h.position="fixed",h.zIndex="99999999"):(l.overflow=dg,f.overflow=eg,h.backgroundColor=zf,h.position="relative",h.zIndex=fg,Z.fullScreenSupported&&!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,!1,b),l.width=bg,l.height=
cg,d=parseFloat(e.width),e=parseFloat(e.height),isNaN(d)&&(d=Z.ViewerDisplay.clientWidth),isNaN(e)&&(e=Z.ViewerDisplay.clientHeight),Af=!1);Z.viewerW=d;Z.viewerH=e;p.setSizeAndPosition(d,e);Af?(Qd||(l=Z.Utils.getResource("UI_FVCANCELBUTTONTEXT"),f=parseFloat(Z.viewerW)-54,h=parseFloat(Z.viewerH)-54,e=Z.Utils.getResource("DEFAULT_FSCANCELBUTTONCOLOR"),Qd=new Z.Utils.Button("buttonFVCancel",l,null,null,null,null,"34px","34px",f+"px",h+"px","mousedown",qe,"TIP_CANCELFULLVIEW","solid","1px",e,"0px","0px"),
Z.ViewerDisplay.appendChild(Qd.elmt)),Qd.elmt.style.display="inline-block"):Qd&&(Qd.elmt.style.display="none");Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.toolbarCurrentW=-1==Z.toolbarW?d:Z.toolbarW,Z.Toolbar.setSizeAndPosition(Z.toolbarCurrentW,null,null,1==Z.toolbarPosition?Z.viewerH-Z.toolbarH:0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&Z.Navigator.setSizeAndPosition(Z.navigatorW,Z.navigatorH,Z.navigatorL,Z.navigatorT);Z.RulerDisplay&&Z.Ruler.getInitialized()&&Z.Ruler.setSizeAndPosition(null,
null,null,null);p.validateXYZDefaults();Z.imageZ=B(Z.imageZ);d=parseFloat(M.left);l=parseFloat(M.top);d=u(d,l,Z.imageZ,Z.imageR,"container");M.left=d.x+"px";M.top=d.y+"px";p.updateView(!0)};this.toggleEditModeMeasure=function(a){p.zoomAndPanAllStop();"undefined"!==typeof a&&!a||"measure"==Z.labelMode?(null===Z.editMode&&"measure"==Z.labelMode&&0<v.length&&p.deleteAllMeasureHotspots(),p.setEditModeLabel("view")):p.setEditModeLabel("measure")};this.rotateClockwise=function(){p.rotate(90,!0)};this.rotateCounterwise=
function(){p.rotate(-90,!0)};this.rotate=function(a,b){if(!Z.interactivityOff)if(Z.rotationSupported){Oc();var d=Z.imageR+a,e=ic(d);Z.interactivityOff=!0;b?p.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ,d,600,12,function(){Z.imageR=e}):(Z.Utils.rotateElement(M,d),Z.imageR=e,p.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ))}else Z.Utils.showMessage(Z.Utils.getResource("ALERT_ROTATIONREQUIRESNEWERBROWSER"))};this.increaseImageFilter=function(a){if(Z.Utils.isStrVal(a)){var b;switch(a){case "brightness":b=
40;break;case "contrast":b=10;break;case "sharpness":b=1;break;case "blurriness":b=3}p.setImageFilter(a,b)}};this.decreaseImageFilter=function(a){if(Z.Utils.isStrVal(a)){var b;switch(a){case "brightness":b=-40;break;case "contrast":b=-10;break;case "sharpness":b=-1;break;case "blurriness":b=-3}p.setImageFilter(a,b)}};this.setImageFilter=function(a,b){"undefined"!==typeof a&&null!==a&&"null"!==a&&(-1==Z.Utils.arrayIndexOfObjectValue(ib,"filter",a)||"edges"!=a&&"inversion"!=a&&"grayscale"!=a&&"threshold"!=
a)&&(Z.Toolbar.addCounterToImageFilterList(a,ib.length),ib[ib.length]={filter:a,value:b},validateImageFiltersConvolve(),Rc(a,b))};validateImageFiltersConvolve=function(){var a=-1!=Z.Utils.arrayIndexOfObjectValue(ib,"filter","sharpness"),b=-1!=Z.Utils.arrayIndexOfObjectValue(ib,"filter","blurriness"),d=-1!=Z.Utils.arrayIndexOfObjectValue(ib,"filter","edges");rd=a||b||d};this.clearImageFilterLast=function(){0<ib.length&&(Z.Toolbar.removeLastCounterFromImageFilterList(ib.length),ib.pop(),validateImageFiltersConvolve(),
p.updateView(!0))};this.clearImageFiltersAll=function(){0<ib.length&&(Z.Toolbar.removeAllCountersFromImageFilterList(),ib=[],validateImageFiltersConvolve(),p.updateView(!0))};this.fullScreenEscapeHandler=function(a){fullScreenEntering?fullScreenEntering=!1:p.toggleFullViewMode(!1,!0)}};
Z.ZoomifyToolbar=function(a){function b(){window.clearInterval(Q);Q=null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function d(a){4>Z.toolbarVisible&&!Z.mobileDevice?e(a):f(!a)}function e(a){P&&(P.display=a?"inline-block":"none")}function f(a){if(P){var b=document.getElementById("buttonContainer"),d=document.getElementById("toolbarBackground"),e=document.getElementById("buttonMinimize"),f=document.getElementById("buttonExpand"),h=document.getElementById("logoDivider"),
q=0;f&&!qa&&(q=parseFloat(f.style.left)+parseFloat(f.style.width)+4);if(Z.imageFiltersVisible)var n=document.getElementById("imageFilterPanelBackground"),t=document.getElementById("buttonContainerImageFilter");var I=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),e&&f&&!qa&&(h&&(h.style.display="none"),e.style.display="none",f.style.display="inline-block"),P.width=q+"px",d&&(d.style.width=q+"px"),n&&t&&(n.style.width="0px",t.style.display="none")):(b&&(b.style.display="inline-block"),e&&f&&!qa&&
(h&&(h.style.display="inline-block"),e.style.display="inline-block",f.style.display="none"),P.width=I+"px",d&&(d.style.width=I+"px"),n&&t&&A&&(n.style.width=V+"px",t.style.display="inline-block"))}}function h(a){if(F&&K){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(F.style.left),d=parseFloat(F.style.left)+parseFloat(F.style.width)-parseFloat(K.style.width)-b;K.style.left=a*d+b+"px"}}function r(a){K&&(X=!0,a=Z.Utils.getMousePosition(a),K.mouseXPrior=a.x,K.mouseYPrior=a.y)}function s(){if(F&&K){var b=
parseFloat(F.style.left),d=parseFloat(F.style.left)+parseFloat(F.style.width)-parseFloat(K.style.width),e=parseFloat(K.style.left)+(fa.x-K.mouseXPrior);e<b?e=b:e>d?e=d:K.mouseXPrior=fa.x;K.style.left=e+"px";a.scaleTierToZoom(Z.minZ+(e-b)/(d-b)*(Z.maxZ-Z.minZ))}}function t(b){if(b=Z.Utils.event(b)){var d=b.type,e=Z.Utils.target(b);if(e){var f=e.parentNode;f&&(tbID=f.id)}e=Z.Utils.relatedTarget(b)}if((!Z.interactivityOff||"mousedown"!=d&&"mouseup"!=d)&&(!e||"[object HTMLSelectElement]"!=e&&"[object HTMLOptionElement]"!=
e)&&!Z.Utils.isRightMouseButton(b)){Z.mobileDevice&&b.preventDefault();if("viewportContainer"==tbID||X)if(f=document.getElementById("buttonSlider"))tbID=f.id;var h=f,e=d;if(-1!=h.id.indexOf("button")&&-1==h.id.indexOf("buttonContainer")){var q=h.firstChild,N=h.childNodes[1],h=h.childNodes[2];if(q&&N&&h)if(q=q.style,N=N.style,h=h.style,q.visibility=N.visibility=h.visibility="hidden","mouseover"==e||"mouseup"==e)N.visibility="visible";else if("mousedown"==e||"mousemove"==e||"touchstart"==e||"MSPointerDown"==
e)h.visibility="visible";else if("mouseout"==e||"touchend"==e||"touchcancel"==e||"MSPointerUp"==e)q.visibility="visible"}if(tbID&&"buttonBackground"!=tbID&&d)switch(d){case "mouseover":Z.Utils.removeEventListener(f.firstChild,"mouseover",t);Z.Utils.addEventListener(f.childNodes[1],"mousedown",t);Z.Utils.addEventListener(f.childNodes[1],"mouseout",t);X&&Z.Utils.addEventListener(f.childNodes[1],"mouseup",t);break;case "mousedown":"trackSlider"!=tbID&&(Z.Utils.removeEventListener(f.childNodes[1],"mousedown",
t),Z.Utils.removeEventListener(f.childNodes[1],"mouseout",t),Z.Utils.addEventListener(f.childNodes[2],"mouseup",t),Z.Utils.addEventListener(f.childNodes[2],"mouseout",t),"buttonSlider"==tbID&&(r(b),y(b),Z.Utils.addEventListener(document,"mousemove",y),T||(T=window.setInterval(s,ga)),Z.Utils.addEventListener(document,"mouseup",t)));a&&D(b,tbID);break;case "mouseup":Z.Utils.removeEventListener(f.childNodes[2],"mouseup",t);Z.Utils.removeEventListener(f.childNodes[2],"mouseout",t);Z.Utils.addEventListener(f.childNodes[1],
"mousedown",t);Z.Utils.addEventListener(f.childNodes[1],"mouseout",t);X&&Z.Utils.removeEventListener(f.childNodes[1],"mouseup",t);a&&D(b,tbID);break;case "mouseout":Z.Utils.removeEventListener(f.childNodes[1],"mousedown",t);Z.Utils.removeEventListener(f.childNodes[1],"mouseout",t);Z.Utils.addEventListener(f.firstChild,"mouseover",t);a&&D(b,tbID);break;case "touchstart":"buttonSlider"==tbID&&(r(b),n(b),Z.Utils.addEventListener(document,"touchmove",n),T||(T=window.setInterval(s,ga)));Z.Utils.addEventListener(f,
"touchend",t);Z.Utils.addEventListener(f,"touchcancel",t);a&&D(b,tbID);break;case "touchend":Z.Utils.addEventListener(f,"touchstart",t);a&&D(b,tbID);break;case "touchcancel":Z.Utils.addEventListener(f,"touchstart",t);a&&D(b,tbID);break;case "MSPointerDown":"buttonSlider"==tbID&&(r(b),n(b),Z.Utils.addEventListener(document,"MSPointerMove",n),T||(T=window.setInterval(s,ga)));Z.Utils.addEventListener(f,"MSPointerUp",t);a&&D(b,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(f,"MSPointerDown",
t),a&&D(b,tbID)}}}function D(b,d){var e=b.type;if("mousedown"==e||"touchstart"==e)switch(e=document.activeElement.id,!Z.Utils.isStrVal(e)||"poiNameTextElement"!=e&&"labelNameTextElement"!=e&&"captionTextElement"!=e&&"tooltipTextElement"!=e&&"clickURLTextElement"!=e&&"noteNameTextElement"!=e&&"noteTextElement"!=e||document.getElementById(e).blur(),C.positionButtonBorder(d),d){case "buttonMinimize":b.altKey?a.setHotspotsVisibility(!a.getHotspotsVisibility()):(C.minimize(!0),Z.Navigator&&Z.Navigator.setVisibility(!1));
break;case "buttonExpand":b.altKey?a.setHotspotsVisibility(!a.getHotspotsVisibility()):(C.minimize(!1),Z.Navigator&&Z.Navigator.setVisibility(!0));break;case "buttonZoomOut":a.zoom("out");break;case "buttonSlider":break;case "trackSlider":if(F){var e=Z.Utils.getElementPosition(F),e=Z.mobileDevice?Z.Utils.getMousePosition(b).x-e.x:b.clientX-e.x,f=parseFloat(F.style.width),e=Z.minZ+(e-0)/(f-0)*(Z.maxZ-Z.minZ);e<Z.minZ+0.1&&(e=Z.minZ);e>Z.maxZ-0.1&&(e=Z.maxZ);a.scaleTierToZoom(e);a.updateView()}break;
case "buttonZoomIn":a.zoom("in");break;case "buttonPanLeft":a.pan("left");break;case "buttonPanUp":a.pan("up");break;case "buttonPanDown":a.pan("down");break;case "buttonPanRight":a.pan("right");break;case "buttonReset":a.reset(b.altKey);break;case "buttonFullView":a.toggleFullViewMode();break;case "buttonMeasure":a.toggleEditModeMeasure();break;case "buttonHelp":Z.Utils.isStrVal(Z.annotationPath)&&null===Z.editMode?Z.Utils.showHelp(Z.Utils.getResource("CONTENT_HELPTOOLBAR")+Z.Utils.getResource("CONTENT_HELPCONCATENATOR")+
Z.Utils.getResource("CONTENT_HELPANNOTATIONVIEWING")):Z.Utils.showHelp(Z.Utils.getResource("CONTENT_HELPTOOLBAR"));break;case "buttonHelpMarkup":Z.Utils.showHelp(Z.Utils.getResource("CONTENT_HELPMARKUP"));break;case "buttonHelpAnnotation":Z.Utils.showHelp(Z.Utils.getResource("CONTENT_HELPANNOTATIONEDITING"));break;case "buttonRotateClockwise":a.rotateClockwise();break;case "buttonRotateCounterwise":a.rotateCounterwise();break;case "buttonTourPrior":a.priorDestination(!0);break;case "buttonTourNext":a.nextDestination(!0);
break;case "buttonTourStart":a.tourStart();break;case "buttonTourStop":a.tourStop();break;case "buttonSlideshowPrior":a.priorSlide(!0);break;case "buttonSlideshowNext":a.nextSlide(!0);break;case "buttonSlideshowStart":a.slideshowStart();break;case "buttonSlideshowStop":a.slideshowStop();break;case "buttonAudioOn":a.audioMute(!0);break;case "buttonAudioMuted":a.audioMute(!1);break;case "buttonImageFilterPanelShow":C.imageFilterPanelShow();break;case "buttonImageFilterPanelHide":C.imageFilterPanelHide();
break;case "buttonImageFilterPlus":a.increaseImageFilter(ba);break;case "buttonImageFilterMinus":a.decreaseImageFilter(ba);break;case "buttonImageFilterApply":a.setImageFilter(ba);break;case "buttonImageFilterClear":a.clearImageFilterLast();break;case "buttonImageFiltersClearAll":a.clearImageFiltersAll();break;case "buttonPOIAdd":a.addNewPOI();break;case "buttonPOIEdit":a.editCurrentPOI();break;case "buttonPOIDelete":a.deleteCurrentPOI();break;case "buttonPOICancel":a.cancelEditsPOI();break;case "buttonPOISave":a.saveEditsPOI();
break;case "buttonLabelAdd":a.addNewLabel();break;case "buttonLabelEdit":a.editCurrentLabel();break;case "buttonLabelDelete":a.deleteCurrentLabel();break;case "buttonLabelCancel":a.cancelEditsLabel();break;case "buttonLabelSave":a.saveEditsLabel();break;case "buttonNoteAdd":a.addNewNote();break;case "buttonNoteEdit":a.editCurrentNote();break;case "buttonNoteDelete":a.deleteCurrentNote();break;case "buttonNoteCancel":a.cancelEditsNote();break;case "buttonNoteSave":a.saveEditsNote();break;case "buttonClearAll":a.deleteAllAnnotations();
break;case "buttonViewMode":a.setEditModeLabel("view");break;case "buttonEditColorPicker":a.toggleLabelColorPicker();break;case "buttonEditModeFreehand":a.setEditModeLabel("freehand");break;case "buttonEditModeText":a.setEditModeLabel("text");break;case "buttonEditModeIcon":a.setEditModeLabel("icon");break;case "buttonEditModeRectangle":a.setEditModeLabel("rectangle");break;case "buttonEditModePolygon":a.setEditModeLabel("polygon");break;case "buttonEditModeMeasure":a.setEditModeLabel("measure");
break;case "buttonLabelScaleDown":a.labelScale("down");break;case "buttonLabelScaleUp":a.labelScale("up");break;default:"buttonColor"==d.substr(0,11)&&a.setDrawingColor(d)}else if("mouseup"==e||"touchend"==e||"touchcancel"==e)if("buttonSlider"==d||X){T&&(window.clearInterval(T),T=null);X&&(Z.mobileDevice?Z.Utils.removeEventListener(document,"touchmove",n):(Z.Utils.removeEventListener(document,"mousemove",y),Z.Utils.removeEventListener(document,"mouseup",t)));for(var e=Z.ToolbarDisplay.childNodes,
f=0,h=e.length;f<h;f++){var q=e[f],N=q.id;if(N&&-1!=N.indexOf("button"))if("buttonContainer"!=N&&"buttonContainerImageFilter"!=N)Z.Utils.setButtonDefaults(q);else for(var q=q.childNodes,N=0,I=q.length;N<I;N++){var r=q[N],s=r.id;s&&-1!=s.indexOf("button")&&Z.Utils.setButtonDefaults(r)}}X=!1;a.updateView()}else"buttonZoomOut"==d||"buttonZoomIn"==d?(a.zoom("stop"),0==Z.debug&&"buttonZoomOut"==d&&b.altKey&&Z.Utils.showGlobals()):"buttonPanLeft"==d||"buttonPanRight"==d?a.pan("horizontalStop"):"buttonPanUp"==
d||"buttonPanDown"==d?a.pan("verticalStop"):"buttonLabelScaleDown"!=d&&"buttonLabelScaleUp"!=d||a.labelScale("stop");else"mouseout"==e&&("buttonZoomOut"==d||"buttonZoomIn"==d?a.zoom("stop"):"buttonPanLeft"==d||"buttonPanRight"==d?a.pan("horizontalStop"):"buttonPanUp"==d||"buttonPanDown"==d?a.pan("verticalStop"):"buttonLabelScaleDown"!=d&&"buttonLabelScaleUp"!=d||a.labelScale("stop"))}function y(a){fa=new Z.Utils.Point(a.clientX,a.clientY)}function n(a){(a=Z.Utils.getFirstTouch(a))&&(fa=new Z.Utils.Point(a.pageX,
a.pageY))}function I(a){if(a=Z.Utils.event(a))if(a=Z.Utils.target(a),ba=a.options[a.selectedIndex].value,"null"!==ba){a=document.getElementById("buttonImageFilterPlus");var b=document.getElementById("buttonImageFilterMinus"),d=document.getElementById("buttonImageFilterApply");"brightness"==ba||"contrast"==ba||"sharpness"==ba||"blurriness"==ba?(a.style.display="inline-block",b.style.display="inline-block",d.style.display="none"):"edges"==ba||"inversion"==ba||"grayscale"==ba||"threshold"==ba?(a.style.display=
"none",b.style.display="none",d.style.display="inline-block"):Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNEXPECTEDFILTERSELECTION"))}else a.selectedIndex=0}var C=this,R=!1;Z.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("DEFAULT_SKINXMLFILE"));var U,P,F,K,O=[],q=[],H=[],ga=parseInt(Z.Utils.getResource("DEFAULT_SLIDERTESTDURATION"),10),X=!1,T=null,fa=null,Q=null,da,Sa,qa;if(Z.imageFiltersVisible)var V,W=[],A=Z.initialImageFilters,
ba="";this.getInitialized=function(){return R};this.getSkinArray=function(){return O};this.getSkinSizes=function(){return H};this.show=function(a){d(a)};this.setVisibility=function(a){e(a)};this.minimize=function(a){f(a)};this.setAnnotationPanelVisibility=function(a){Z.AnnotationPanelDisplay&&(Z.AnnotationPanelDisplay.style.display=!a||Z.measureVisible&&null===Z.editMode?"none":"inline-block")};this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display=
"inline-block")};this.hideProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};this.updateProgress=function(a,d){if(Z.progressVisible){Q&&window.clearInterval(Q);var e,f=document.getElementById("progressTextBoxCenteredDiv");f&&(f=f.firstChild)&&(0==a||0==d?(f.nodeValue="llllllllll",Q=window.setInterval(b,parseInt(Z.Utils.getResource("DEFAULT_PROGRESSDURATION")),10)):(e=Math.round(100-d/a*100),e=Math.round(e/10),f.nodeValue=Z.Utils.stringMultiply("l",
e)))}};this.parseSkinXML=function(b){Z.skinMode=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;var e,f;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(e=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,f="SIZESSTANDARD"):(e=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,f="SIZESLARGE");var n=[];n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("TOOLBARW").nodeValue);
n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("TOOLBARH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("LOGOW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("LOGOH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("DIVIDERW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("DIVIDERH").nodeValue);n[n.length]=
parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);n[n.length]=
parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSH").nodeValue);n[n.length]=
parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var r,s,N;f="edit"==Z.editMode?155:"markup"==Z.editMode?146:Z.imageFiltersVisible?94:Z.tourPath||Z.slidePath?71:Z.rotationVisible?52:Z.measureVisible?45:0<Z.helpVisible?42:Z.fullScreenVisible||Z.fullPageVisible?39:Z.panButtonsVisible?35:Z.sliderVisible?19:Z.minimizeVisible?14:Z.logoVisible?8:6;r=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");null!==r&&(s=r.nodeValue);r=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+
f.toString());null!==r&&(N=r.nodeValue);if("undefined"!==typeof s&&Z.Utils.isStrVal(s)&&"undefined"!==typeof N&&Z.Utils.isStrVal(N)){s=!1;N=0;for(f+=1;N<f;N++)r=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+N).nodeValue,Z.Utils.isStrVal(r)?q[N]=e+"/"+r:(q[N]="null",s=!0);s&&Z.Utils.showMessage(Z.Utils.getResource("ERROR_SKINXMLMISSINGNAMES"));O=q;Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay","inline-block","absolute","visible","1px","1px","0px","1px","none",
"0px","transparent none","0px","0px","normal");P=Z.ToolbarDisplay.style;b=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);P.zIndex=(b+1).toString();b=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,q[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("DEFAULT_BACKGROUNDALPHA"));Z.Utils.getResource("DEFAULT_BACKGROUNDCOLORNOALPHA");Z.ToolbarDisplay.appendChild(b.elmt);H=n;Z.logoVisible&&(Z.Utils.isStrVal(Z.logoCustomPath)?(n=Z.Utils.cacheProofPath(Z.logoCustomPath),n=new Z.Utils.Graphic("toolbarLogo",
n,null,"1px","1px","1px","1px")):n=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,q[7],"1px","1px","1px","1px"),Z.Utils.isStrVal(Z.logoLinkURL)?(b=document.createElement("a"),b.setAttribute("href",Z.logoLinkURL),b.setAttribute("target",Z.Utils.getResource("UI_LOGOLINKTARGET")),b.setAttribute("title",Z.Utils.getResource("TIP_LOGO")),b.setAttribute("outline","none"),b.appendChild(n.elmt),Z.ToolbarDisplay.appendChild(b)):(n.elmt.setAttribute("title",Z.Utils.getResource("UI_LOGOLINKDISPLAY")),Z.ToolbarDisplay.appendChild(n.elmt)),
0==Z.toolbarVisible||1==Z.toolbarVisible)&&(n=new Z.Utils.Graphic("logoDivider",Z.skinPath,q[8],"1px","1px","1px","1px"),Z.ToolbarDisplay.appendChild(n.elmt));n=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(n);Z.mobileDevice?Z.Utils.addEventListener(n,"touchstart",Z.Utils.preventDefault):(Z.Utils.addEventListener(n,"mousedown",Z.Utils.preventDefault),
Z.Utils.addEventListener(n,"mouseover",C.backgroundEventsHandler));b=new Z.Utils.Graphic("buttonBackground",Z.skinPath,q[0],"1px","1px","0px","0px");n.appendChild(b.elmt);Z.Utils.setOpacity(b.elmt,"0","#FBFAFA");(0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible&&(b=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,q[9],q[10],q[11],"1px","1px","1px","1px","mouseover",t,"TIP_MINIMIZE"),Z.ToolbarDisplay.appendChild(b.elmt),b=new Z.Utils.Button("buttonExpand",null,Z.skinPath,
q[12],q[13],q[14],"1px","1px","1px","1px","mouseover",t,"TIP_EXPAND"),Z.ToolbarDisplay.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,q[1],q[2],q[3],"1px","1px","1px","1px","mouseover",t,"TIP_ZOOMOUT");n.appendChild(b.elmt);Z.sliderVisible&&(b=new Z.Utils.Graphic("trackSlider",Z.skinPath,q[15],"1px","1px","0px","0px","TIP_SLIDER"),n.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",t),Z.Utils.addEventListener(b.elmt,"touchstart",t),b=new Z.Utils.Button("buttonSlider",
null,Z.skinPath,q[17],q[18],q[19],"1px","1px","1px","1px","mouseover",t,"TIP_SLIDER"),n.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,q[4],q[5],q[6],"1px","1px","1px","1px","mouseover",t,"TIP_ZOOMIN");n.appendChild(b.elmt);Z.panButtonsVisible&&(b=new Z.Utils.Graphic("panDivider",Z.skinPath,q[20],"1px","1px","1px","1px"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,q[21],q[22],q[23],"1px","1px","1px","1px","mouseover",t,"TIP_PANLEFT"),n.appendChild(b.elmt),
b=new Z.Utils.Button("buttonPanUp",null,Z.skinPath,q[24],q[25],q[26],"1px","1px","1px","1px","mouseover",t,"TIP_PANUP"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,q[27],q[28],q[29],"1px","1px","1px","1px","mouseover",t,"TIP_PANDOWN"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,q[30],q[31],q[32],"1px","1px","1px","1px","mouseover",t,"TIP_PANRIGHT"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonReset",null,Z.skinPath,q[33],q[34],q[35],
"1px","1px","1px","1px","mouseover",t,"TIP_RESET"),n.appendChild(b.elmt));if(Z.fullScreenVisible||Z.fullPageVisible)null===Z.editMode&&(b=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,q[36],"1px","1px","1px","1px"),n.appendChild(b.elmt)),b=new Z.Utils.Button("buttonFullView",null,Z.skinPath,q[37],q[38],q[39],"1px","1px","1px","1px","mouseover",t,"TIP_TOGGLEFULLVIEW"),n.appendChild(b.elmt);if(1==Z.helpVisible||3==Z.helpVisible)b=new Z.Utils.Button("buttonHelp",null,Z.skinPath,q[40],q[41],q[42],
"1px","1px","1px","1px","mouseover",t,"TIP_HELP"),n.appendChild(b.elmt);Z.measureVisible&&null===Z.editMode&&(Z.fullScreenVisible||Z.fullPageVisible||(b=new Z.Utils.Graphic("measureDivider",Z.skinPath,q[36],"1px","1px","1px","1px"),n.appendChild(b.elmt)),b=new Z.Utils.Button("buttonMeasure",null,Z.skinPath,q[43],q[44],q[45],"1px","1px","1px","1px","mouseover",t,"TIP_TOGGLEMEASURING"),n.appendChild(b.elmt));Z.rotationVisible&&(b=new Z.Utils.Graphic("rotateDivider",Z.skinPath,q[46],"1px","1px","1px",
"1px"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateCounterwise",null,Z.skinPath,q[47],q[48],q[49],"1px","1px","1px","1px","mouseover",t,"TIP_ROTATECOUNTERWISE"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateClockwise",null,Z.skinPath,q[50],q[51],q[52],"1px","1px","1px","1px","mouseover",t,"TIP_ROTATECLOCKWISE"),n.appendChild(b.elmt));null!==Z.tourPath&&(b=new Z.Utils.Graphic("tourDivider",Z.skinPath,q[53],"1px","1px","1px","1px"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourPrior",
null,Z.skinPath,q[54],q[55],q[56],"1px","1px","1px","1px","mouseover",t,"TIP_TOURPRIOR"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourNext",null,Z.skinPath,q[57],q[58],q[59],"1px","1px","1px","1px","mouseover",t,"TIP_TOURNEXT"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStart",null,Z.skinPath,q[60],q[61],q[62],"1px","1px","1px","1px","mouseover",t,"TIP_TOURSTART"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStop",null,Z.skinPath,q[63],q[64],q[65],"1px","1px","1px","1px",
"mouseover",t,"TIP_TOURSTOP"),n.appendChild(b.elmt));null!==Z.slidePath&&(b=new Z.Utils.Graphic("slideshowDivider",Z.skinPath,q[53],"1px","1px","1px","1px"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowPrior",null,Z.skinPath,q[54],q[55],q[56],"1px","1px","1px","1px","mouseover",t,"TIP_SLIDEPRIOR"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowNext",null,Z.skinPath,q[57],q[58],q[59],"1px","1px","1px","1px","mouseover",t,"TIP_SLIDENEXT"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStart",
null,Z.skinPath,q[60],q[61],q[62],"1px","1px","1px","1px","mouseover",t,"TIP_SLIDESHOWSTART"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStop",null,Z.skinPath,q[63],q[64],q[65],"1px","1px","1px","1px","mouseover",t,"TIP_SLIDESHOWSTOP"),n.appendChild(b.elmt));if(null!==Z.tourPath||null!==Z.slidePath)b=new Z.Utils.Button("buttonAudioOn",null,Z.skinPath,q[66],q[67],q[68],"1px","1px","1px","1px","mouseover",t,"TIP_AUDIOMUTE"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonAudioMuted",
null,Z.skinPath,q[69],q[70],q[71],"1px","1px","1px","1px","mouseover",t,"TIP_AUDIOON"),n.appendChild(b.elmt);if(Z.imageFiltersVisible){b=new Z.Utils.Graphic("imageFilterDivider",Z.skinPath,q[72],"1px","1px","1px","1px");n.appendChild(b.elmt);b=new Z.Utils.Button("buttonImageFilterPanelHide",null,Z.skinPath,q[73],q[74],q[75],"1px","1px","1px","1px","mouseover",t,"TIP_IMAGEFILTERPANELHIDE");n.appendChild(b.elmt);b=new Z.Utils.Button("buttonImageFilterPanelShow",null,Z.skinPath,q[76],q[77],q[78],"1px",
"1px","1px","1px","mouseover",t,"TIP_IMAGEFILTERPANELSHOW");n.appendChild(b.elmt);b=Z.Utils.createContainerElement("div","buttonContainerImageFilter","none","absolute","visible","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(b);Z.mobileDevice||Z.Utils.addEventListener(b,"mouseover",C.backgroundEventsHandler);e=parseFloat(Z.Utils.getResource("DEFAULT_BACKGROUNDALPHA"));s=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLOR");f=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLORNOALPHA");
s=Z.Utils.createContainerElement("div","imageFilterPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",s,"0px","0px","normal",null,!0);Z.Utils.setOpacity(s,e,f);b.appendChild(s);e=Z.Utils.getResource("UI_IMAGEFILTERCHOICELISTTEXT").split(",");f=Z.Utils.getResource("UI_IMAGEFILTERCHOICELISTVALUES").split(",");s=0;for(N=e.length;s<N;s++)W[W.length]={text:e[s],value:f[s]};e=new Z.Utils.createSelectElement("imageFilterList","",W,1,1,1,null,!0,I);b.appendChild(e);e=
new Z.Utils.Button("buttonImageFilterMinus",null,Z.skinPath,q[79],q[80],q[81],"1px","1px","1px","1px","mouseover",t,"TIP_IMAGEFILTERMINUS");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterPlus",null,Z.skinPath,q[82],q[83],q[84],"1px","1px","1px","1px","mouseover",t,"TIP_IMAGEFILTERPLUS");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterApply",null,Z.skinPath,q[85],q[86],q[87],"1px","1px","1px","1px","mouseover",t,"TIP_IMAGEFILTERAPPLY");b.appendChild(e.elmt);e=new Z.Utils.Graphic("imageFilterStateDivider",
Z.skinPath,q[88],"1px","1px","1px","1px");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterClear",null,Z.skinPath,q[89],q[90],q[91],"1px","1px","1px","1px","mouseover",t,"TIP_IMAGEFILTERCLEAR");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFiltersClearAll",null,Z.skinPath,q[92],q[93],q[94],"1px","1px","1px","1px","mouseover",t,"TIP_IMAGEFILTERCLEARALL");b.appendChild(e.elmt)}Z.progressVisible&&(b=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute",
"hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px","normal",null,!0),e=H[16],n.appendChild(b),n=document.createTextNode(Z.Utils.getResource("DEFAULT_PROGRESSTEXT")),b.appendChild(Z.Utils.createCenteredElement(n,"progressTextBoxCenteredDiv")),Z.Utils.setTextNodeStyle(n,"black","verdana",e+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(n));Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.toolbarW=H[0];Z.toolbarCurrentW=-1==
Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=U=H[1];C.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-U:0);a&&a.getInitialized()&&(1==Z.toolbarVisible&&(n=Z.Utils.getElementStyle(Z.pageContainer),n=parseFloat(n.height),isNaN(n)&&(n=Z.ViewerDisplay.clientHeight),a.setSizeAndPosition(Z.viewerW,n-Z.toolbarH,0,0),a.validateXYZDefaults(!0),a.setView(Z.initialX,Z.initialY,Z.initialZ)),n=a.getZoom(),h(n),a.setDrawingColor("buttonColor0"));d(1==Z.toolbarVisible||2==Z.toolbarVisible||
4==Z.toolbarVisible);Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);R=!0;Z.Utils.validateCallback("toolbarInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized")}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_SKINXMLINVALID"))};this.setSizeAndPosition=function(b,d,e,f){"undefined"===typeof b||null===b?b=0<Z.toolbarVisible?Z.toolbarCurrentW:
0:Z.toolbarCurrentW=b;if("undefined"===typeof d||null===d)d=0<Z.toolbarVisible?U:0;if("undefined"===typeof e||null===e)e=0;if("undefined"===typeof f||null===f)f=1==Z.toolbarPosition?Z.viewerH-U:0;P=Z.ToolbarDisplay.style;P.width=b+"px";P.height=d+"px";P.left=e+"px";P.top=f+"px";var h=b,n=d,q=H[2],t=H[3],r=H[4],I=H[5],C=H[6],s=H[7],y=H[8],D=H[9],R=H[10],O=H[11],T=H[12],W=H[13],X=H[14],ba=H[15],E=0,ga=(n-t)/2+1,fa=(n-I)/2,Q=(n-s)/2,De=1.3*Q,ff=Q+4,Wa=Q+2,Ub=1==Z.logoVisible?0:y/2,Ee=1==Z.logoVisible?
0:y/2,Ka=y-(C-r),lb=2,pb=0;Z.panButtonsVisible&&(lb+=5,pb+=1);if(Z.fullScreenVisible||Z.fullPageVisible)lb+=1,pb+=1;Z.measureVisible&&(Z.fullScreenVisible||Z.fullPageVisible||(pb+=1),lb+=1);Z.rotationVisible&&(lb+=2,pb+=1);Z.imageFiltersVisible&&(lb+=1,pb+=1);var uc=lb*y+pb*Ka;Z.sliderVisible&&(uc+=W);da=Sa=qa=!1;var Ad=(1==Z.logoVisible?q+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&0!=Z.minimizeVisible?y:0),Jc=Ad+20+uc+20+X;Jc>h&&(da=!0,Jc-W>h&&(Sa=!0,Jc-W-X>h&&(qa=!0,Ad=0),X=0),uc-=W);var Je=
(h-uc)/2-20+3,kd=document.getElementById("toolbarBackground");kd&&(kd.style.width=h+"px",kd.style.height=n+"px",kd.firstChild.style.width=h+"px",kd.firstChild.style.height=n+"px");var tc=document.getElementById("buttonContainer");tc&&(tc.style.width=uc+40+"px",tc.style.height=n+"px",tc.style.left=Je+"px");var Qc=document.getElementById("buttonBackground");Qc&&(Qc.style.width=h+"px",Z.Utils.graphicSize(Qc,parseFloat(tc.style.width),parseFloat(tc.style.height)),Qc.style.left="0px");var Bd=document.getElementById("toolbarLogo");
if(Bd){var Xa=Bd.style;if(Xa)if(qa)Xa.display="none";else{Xa.display="inline-block";Z.Utils.graphicSize(Bd,q,t);Xa.left=E+"px";Xa.top=ga+"px";var E=E+(q+2),Cd=document.getElementById("logoDivider");if(Cd){Z.Utils.graphicSize(Cd,r,I);var Zd=Cd.style;Zd.left=E+"px";Zd.top=fa+"px"}}}if(0!=Z.toolbarVisible&&1!=Z.toolbarVisible){var wc=document.getElementById("buttonMinimize"),Dd=document.getElementById("buttonExpand");if(wc&&Dd){var La=wc.style,zb=Dd.style;La&&zb&&(qa?(La.display="none",zb.display="none"):
(La.display="inline-block",zb.display="inline-block",Z.Utils.buttonSize(wc,C,s),Z.Utils.buttonSize(Dd,C,s),La.left=E+Ub+"px",La.top=De+"px",zb.left=E+Ee+"px",zb.top=De+"px"))}}var E=20,Ed=document.getElementById("buttonZoomOut");if(Ed){Z.Utils.buttonSize(Ed,C,s);var be=Ed.style;be.left=E+"px";be.top=Q+"px";E+=y}F=document.getElementById("trackSlider");K=document.getElementById("buttonSlider");if(F&&K){var lc=F.style,Va=K.style;lc&&Va&&(da?(lc.display="none",Va.display="none"):(lc.display="inline-block",
Va.display="inline-block",Z.Utils.graphicSize(F,O,T),lc.left=E-2+"px",lc.top=ff+"px",Z.Utils.buttonSize(K,D,R),Va.left=parseFloat(lc.left)+"px",Va.top=Wa+"px",E+=W))}var Vd=document.getElementById("buttonZoomIn");if(Vd){Z.Utils.buttonSize(Vd,C,s);var Fe=Vd.style;Fe.left=E+"px";Fe.top=Q+"px";E+=y+1}var Wd=document.getElementById("panDivider");if(Wd){Z.Utils.graphicSize(Wd,r,I);var Ge=Wd.style;Ge.left=E+"px";Ge.top=fa+"px";var E=E+Ka,Xd=document.getElementById("buttonPanLeft");if(Xd){Z.Utils.buttonSize(Xd,
C,s);var xc=Xd.style;xc.left=E+"px";xc.top=Q+"px";E+=y}var Vb=document.getElementById("buttonPanUp");if(Vb){Z.Utils.buttonSize(Vb,C,s);var ee=Vb.style;ee.left=E+"px";ee.top=Q+"px";E+=y}var Kc=document.getElementById("buttonPanDown");if(Kc){Z.Utils.buttonSize(Kc,C,s);var ge=Kc.style;ge.left=E+"px";ge.top=Q+"px";E+=y}var he=document.getElementById("buttonPanRight");if(he){Z.Utils.buttonSize(he,C,s);var Ne=he.style;Ne.left=E+"px";Ne.top=Q+"px";E+=y}}var ae=document.getElementById("buttonReset");if(ae){Z.Utils.buttonSize(ae,
C,s);var Ke=ae.style;Ke.left=E+"px";Ke.top=Q+"px";E+=y+1}var $d=document.getElementById("fullViewDivider");if($d){Z.Utils.graphicSize($d,r,I);var Le=$d.style;Le.left=E+"px";Le.top=fa+"px";E+=Ka}var ie=document.getElementById("buttonFullView");if(ie){Z.Utils.buttonSize(ie,C,s);var kc=ie.style;kc.left=E+"px";kc.top=Q+"px";E+=y+1}if(1==Z.helpVisible||3==Z.helpVisible){var Kb=document.getElementById("buttonHelp");if(Kb){Z.Utils.buttonSize(Kb,C,s);var je=Kb.style;je.left=E+"px";je.top=Q+"px";E+=y+1}}var Xc=
document.getElementById("measureDivider");if(Xc){Z.Utils.graphicSize(Xc,r,I);var sc=Xc.style;sc.left=E+"px";sc.top=fa+"px";E+=Ka}if(wc=document.getElementById("buttonMeasure"))Z.Utils.buttonSize(wc,C,s),La=wc.style,La.left=E+"px",La.top=Q+"px",E+=y+1;var Gd=document.getElementById("rotateDivider");if(Gd){Z.Utils.graphicSize(Gd,r,I);var ke=Gd.style;ke.left=E+"px";ke.top=fa+"px";var E=E+Ka,jc=document.getElementById("buttonRotateCounterwise");if(jc){Z.Utils.buttonSize(jc,C,s);var le=jc.style;le.left=
E+"px";le.top=Q+"px";E+=y}var Hd=document.getElementById("buttonRotateClockwise");if(Hd){Z.Utils.buttonSize(Hd,C,s);var Yc=Hd.style;Yc.left=E+"px";Yc.top=Q+"px";E+=y+1}}if(null!==Z.tourPath){var ld=document.getElementById("tourDivider");if(ld){Z.Utils.graphicSize(ld,r,I);var bb=ld.style;bb.left=E+"px";bb.top=fa+"px";var E=E+Ka,Zc=document.getElementById("buttonTourPrior");if(Zc){Z.Utils.buttonSize(Zc,C,s);var Lc=Zc.style;Lc.left=E+"px";Lc.top=Q+"px";E+=y+1}var Wb=document.getElementById("buttonTourNext");
if(Wb){Z.Utils.buttonSize(Wb,C,s);var Pa=Wb.style;Pa.left=E+"px";Pa.top=Q+"px";E+=y+1}var Ma=document.getElementById("buttonTourStop");if(Ma){Z.Utils.buttonSize(Ma,C,s);var $c=Ma.style;$c.left=E+"px";$c.top=Q+"px";$c.display=Z.tourPlaying?"inline-block":"none"}var me=document.getElementById("buttonTourStart");if(me){Z.Utils.buttonSize(me,C,s);var ne=me.style;ne.left=E+"px";ne.top=Q+"px";ne.display=Z.tourPlaying?"none":"inline-block"}}}else if(null!==Z.slidePath){var Id=document.getElementById("slideshowDivider");
if(Id){Z.Utils.graphicSize(Id,r,I);var md=Id.style;md.left=E+"px";md.top=fa+"px";var E=E+Ka,Oc=document.getElementById("buttonSlideshowPrior");if(Oc){Z.Utils.buttonSize(Oc,C,s);var ed=Oc.style;ed.left=E+"px";ed.top=Q+"px";E+=y+1}var ad=document.getElementById("buttonSlideshowNext");if(ad){Z.Utils.buttonSize(ad,C,s);var oe=ad.style;oe.left=E+"px";oe.top=Q+"px";E+=y+1}var bd=document.getElementById("buttonSlideshowStop");if(bd){Z.Utils.buttonSize(bd,C,s);var nd=bd.style;nd.left=E+"px";nd.top=Q+"px";
nd.display=Z.slideshowPlaying?"inline-block":"none"}var Ac=document.getElementById("buttonSlideshowStart");if(Ac){Z.Utils.buttonSize(Ac,C,s);var Jd=Ac.style;Jd.left=E+"px";Jd.top=Q+"px";Jd.display=Z.slideshowPlaying?"none":"inline-block"}}}if(null!==Z.tourPath||null!==Z.slidePath){var E=E+(y+1),qe=document.getElementById("buttonAudioMuted");if(qe){Z.Utils.buttonSize(qe,C,s);var Rc=qe.style;Rc.left=E+"px";Rc.top=Q+"px";Rc.display="none"}var Kd=document.getElementById("buttonAudioOn");if(Kd){Z.Utils.buttonSize(Kd,
C,s);var yd=Kd.style;yd.left=E+"px";yd.top=Q+"px";yd.display="none"}a.initializeAudioMuteButtons()}if(Z.imageFiltersVisible){var Ld=document.getElementById("imageFilterDivider");if(Ld){Z.Utils.graphicSize(Ld,r,I);var Eb=Ld.style;Eb.left=E+"px";Eb.top=fa+"px";var E=E+Ka,ta=document.getElementById("buttonImageFilterPanelHide");if(ta){Z.Utils.buttonSize(ta,C,s);var se=ta.style;se.left=E+"px";se.top=Q+"px";se.display=A?"inline-block":"none"}var ue=document.getElementById("buttonImageFilterPanelShow");
if(ue){Z.Utils.buttonSize(ue,C,s);var ve=ue.style;ve.left=E+"px";ve.top=Q+"px";ve.display=A?"none":"inline-block"}var Qa=15,Dc=H[6],Cb=H[7],p=H[8],pd=H[4],ce=H[5],dd=p-(Dc-pd),Rd=(Cb-ce)/2,dc=parseInt(Z.Utils.getResource("DEFAULT_IMAGEFILTERLISTWIDTH"),10),Fa=V=Math.round(dc+4*p+2*dd+30-4),qd=Math.round(Cb+24),Ic=document.getElementById("buttonImageFilterPanelShow"),Cc=document.getElementById("buttonContainerImageFilter"),Ha=document.getElementById("imageFilterList");if(Cc&&Ic&&Ha){var Ia=parseFloat(Ic.style.left),
Mb=parseFloat(Ic.parentNode.style.left),Pd=Cc.style;Pd.width=Fa+"px";Pd.height=qd+"px";Pd.left=Ia+Mb+p-Fa+"px";Pd.top=-(qd+5)+"px";var hc=document.getElementById("imageFilterPanelBackground");if(hc){var xe=hc.style;xe.width=Fa+"px";xe.height=qd+"px"}var tb=Ha.style;tb.width=dc+"px";tb.left="15px";tb.top="10px";var Qa=Qa+(dc+dd+2),ia=document.getElementById("buttonImageFilterMinus");if(ia){Z.Utils.buttonSize(ia,Dc,Cb);var M=ia.style;M.left=Qa+"px";M.top="12px";Qa+=p}var pc=document.getElementById("buttonImageFilterPlus");
if(pc){Z.Utils.buttonSize(pc,Dc,Cb);var ja=pc.style;ja.left=Qa+"px";ja.top="12px";Qa+=p}var ca=document.getElementById("buttonImageFilterApply");if(ca){Z.Utils.buttonSize(ca,Dc,Cb);var cb=ca.style;ja?cb.left=parseFloat(ja.left)+"px":(cb.left=Qa+"px",Qa+=p);cb.top="12px";ca.style.display="none"}var cd=document.getElementById("imageFilterStateDivider");if(cd){Z.Utils.graphicSize(cd,pd,ce);var sa=cd.style;sa.left=Qa+"px";sa.top=12+Rd+"px";Qa+=dd}var Ba=document.getElementById("buttonImageFilterClear");
if(Ba){Z.Utils.buttonSize(Ba,Dc,Cb);var Ja=Ba.style;Ja.left=Qa+"px";Ja.top="12px";Qa+=p+1}var Pc=document.getElementById("buttonImageFiltersClearAll");if(Pc){Z.Utils.buttonSize(Pc,Dc,Cb);var fb=Pc.style;fb.left=Qa+"px";fb.top="12px"}}}}var Bc=document.getElementById("progressTextBox");if(Bc){var jb=Bc.style;jb&&(Sa?jb.display="none":(jb.display="inline-block",jb.width=X+"px",jb.height=ba+"px",jb.left=h-parseFloat(tc.style.left)-parseFloat(jb.width)+"px",jb.top=(n-parseFloat(jb.height))/2+"px"))}};
this.syncSliderToViewport=function(a){h(a)};this.buttonEventsHandler=function(a){t(a)};this.backgroundEventsHandler=function(a){a=Z.Utils.event(a);if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(X||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}};this.positionButtonBorder=function(a){if("buttonColor"==a.substr(0,11))var b=document.getElementById("buttonBorderSm");else if("buttonViewMode"==a||"buttonEditModeFreehand"==a||"buttonEditModeText"==
a||"buttonEditModeIcon"==a||"buttonEditModeRectangle"==a||"buttonEditModePolygon"==a||"buttonEditModeMeasure"==a)b=document.getElementById("buttonBorderLg");var d=document.getElementById(a);b&&d&&("buttonClearAll"==a&&(d=document.getElementById("buttonViewMode")),a=b.style,d=d.style,a.left=parseFloat(d.left)-2+"px",a.top=parseFloat(d.top)-2+"px")};this.imageFilterPanelShow=function(){var a=document.getElementById("imageFilterPanelBackground"),b=document.getElementById("buttonContainerImageFilter"),
d=document.getElementById("buttonImageFilterPanelShow"),e=document.getElementById("buttonImageFilterPanelHide");a&&b&&(a.style.width=V+"px",b.style.display="inline-block",d.style.display="none",e.style.display="inline-block");A=!0};this.imageFilterPanelHide=function(){var a=document.getElementById("imageFilterPanelBackground"),b=document.getElementById("buttonContainerImageFilter"),d=document.getElementById("buttonImageFilterPanelShow"),e=document.getElementById("buttonImageFilterPanelHide");a&&b&&
(a.style.width="0px",b.style.display="none",d.style.display="inline-block",e.style.display="none");A=!1};this.addCounterToImageFilterList=function(a,b){var d=document.getElementById("imageFilterList"),e=Z.Utils.arrayIndexOfObjectValue(W,"value",a);if(-1!=e){var f=d.options[e].text,f=isNaN(f.substring(f.length-1,f.length))?":  ":",";d.options[e].text+=f+(b+1).toString()}};this.removeLastCounterFromImageFilterList=function(a){for(var b=document.getElementById("imageFilterList"),d,e=a.toString(),f=0,
h=b.options.length;f<h;f++)a=b.options[f].text.length,b.options[f].text.substring(a-1)==e&&(d=b.options[f].text.substring(a-2,a-1),d=","==d?2:3,b.options[f].text=b.options[f].text.substring(0,a-d))};this.removeAllCountersFromImageFilterList=function(){for(var a=document.getElementById("imageFilterList"),b=a.options.length=0,d=W.length;b<d;b++)a.options[a.options.length]=new Option(W[b].text,W[b].value)}};
Z.ZoomifyNavigator=function(a){function b(d,e){"ZoomifyImageFile"==Z.tileSource&&(ba=e);if(0!=ba.width&&0!=ba.height){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block","absolute","hidden",l+"px",ha+"px",u+"px",B+"px","solid","1px","transparent none","0px","0px","normal",null,!0);T=Z.NavigatorDisplay;fa=T.style;Z.slidePath&&Z.Utils.setOpacity(T,0);var f=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);fa.zIndex=(f+2).toString();var f=parseFloat(Z.Utils.getResource("DEFAULT_BACKGROUNDALPHA")),
h=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLOR"),n=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLORNOALPHA"),h=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",l+"px",ha+"px","0px","0px","none","0px",h,"0px","0px","normal",null,!0);Z.Utils.setOpacity(h,f,n);Z.NavigatorDisplay.appendChild(h);Q=h;da=Q.style;f=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",l+"px",ha+"px","0px","0px","none","0px","transparent none",
"0px","0px","normal",null,!0);f.appendChild(ba);ba.alt=Z.Utils.getResource("UI_NAVIGATORACCESSIBILITYALTATTRIBUTE");Z.NavigatorDisplay.appendChild(f);Sa=f;qa=Sa.style;V=ba;f=V.width;n=V.height;h=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",l+1+"px",ha+1+"px",u+"px",B+"px","solid","1px","transparent none","0px","0px","normal",null,!0);h.style.borderColor=Z.Utils.getResource("DEFAULT_NAVIGATORRECTANGLECOLOR");Z.NavigatorDisplay.appendChild(h);W=h;A=W.style;
Z.ViewerDisplay.appendChild(Z.NavigatorDisplay);H.setSizeAndPosition(l,ha,u,B,ic,f,n);s(1==Z.navigatorVisible||2==Z.navigatorVisible);Z.mobileDevice?(Z.Utils.addEventListener(T,"touchstart",F),Z.Utils.addEventListener(T,"touchmove",K),Z.Utils.addEventListener(T,"touchend",O),Z.Utils.addEventListener(T,"touchcancel",q)):(Z.Utils.addEventListener(T,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(T,"mousedown",R));ga=!0;Z.Utils.validateCallback("navigatorInitialized");a&&a.getInitialized()&&
Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized");t()}else window.setTimeout(function(){b(d,e)},100)}function d(b){"ZoomifyImageFile"==Z.tileSource?cc=a.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource?cc=Z.Utils.cacheProofPath(Z.imagePath+"/TileGroup0/0-0-0."+Z.tileType):"ZoomifyPFFFile"==Z.tileSource?cc=a.formatTilePath(0,0,0):"ImageServer"==Z.tileSource&&(cc=a.formatTilePath(0,0,0));ba=null;ba=new Image;ba.onload=
b;ba.onerror=C;"offsetLoading"!=cc?"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(cc,Z.Utils.createCallback(null,b),"navigator"):ba.src=cc:window.setTimeout(function(){d(b)},100)}function e(a,b){if(Z.NavigatorDisplay)if(Z.slidePath&&Z.Utils.setOpacity(Z.NavigatorDisplay,0),"ZoomifyImageFile"==Z.tileSource&&(ba=b),Sa&&ba&&0<ba.width&&0<ba.height){var d=ba.width,f=ba.height;Sa.appendChild(ba);V=Z.NavigatorDisplay.childNodes[1].firstChild;H.setSizeAndPosition(l,ha,u,B,ic,d,f);d=Z.ToolbarDisplay&&
"inline-block"==Z.ToolbarDisplay.style||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;s((1==Z.navigatorVisible||2==Z.navigatorVisible)&&d);d=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);Z.NavigatorDisplay.style.zIndex=(d+2).toString();t()}else window.setTimeout(function(){e()},100)}function f(){ga&&(X&&(window.clearInterval(X),X=null),T&&fa&&Q&&da&&Sa&&qa&&V&&W&&A||(T=Z.NavigatorDisplay,fa=T.style,Q=Z.NavigatorDisplay.firstChild,da=Q.style,
Sa=Z.NavigatorDisplay.childNodes[1],qa=Sa.style,V=Z.NavigatorDisplay.childNodes[1].firstChild,W=Z.NavigatorDisplay.childNodes[2],A=W.style))}function h(a,b){V||(V=Z.NavigatorDisplay.childNodes[1].firstChild);V&&0!=V.width&&0!=V.height?(da||(da=Z.NavigatorDisplay.firstChild.style),qa||(qa=Z.NavigatorDisplay.childNodes[1].style),da&&qa&&(da.width=a+"px",da.height=b+"px",r(a,b),qa.width=V.width+"px",qa.height=V.height+"px",qa.left=(a-V.width)/2+"px",qa.top=(b-V.height)/2+"px",t())):window.setTimeout(function(){h(a,
b)},100)}function r(a,b){V||(V=Z.NavigatorDisplay.childNodes[1].firstChild);if(V){var d=V.width,e=V.height,f=d/e,l=a/d,h=b/e;l<=h?(d=a,e=a/f,navImageT=(b-a/d*e)/2):h<l&&(e=b,d=b*f,navImageL=(a-b/e*d)/2);V.width=d;V.height=e}}function s(a){fa||(fa=Z.NavigatorDisplay.style);fa&&(fa.display=a?"inline-block":"none")}function t(){if(a&&a.getInitialized()){y();D();var b=a.calculateCurrentCenterCoordinates();n(b)}}function D(){if(V&&A){var b=V.width/Z.imageW,d=V.height/Z.imageH,e=a.getZoom(),d=Z.viewerH*
d/e;A.width=Z.viewerW*b/e+"px";A.height=d+"px"}}function y(){if(qa){var b=a.getRotation();Z.Utils.rotateElement(qa,b)}}function n(a){if(V&&A&&qa){if("undefined"===typeof a||null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var d=parseFloat(V.width),e=parseFloat(V.height),b=Z.Utils.rotatePoint(d/Z.imageW*a.x-d/2,e/Z.imageH*a.y-e/2,-b);a=b.x-parseFloat(A.width)/2;d=b.y-parseFloat(A.height)/2;b=parseFloat(fa.width)/
2;d=parseFloat(fa.height)/2+d-1;A.left=b+a+"px";A.top=d+"px"}}function I(){if(V&&A&&qa){if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var d=parseFloat(A.left),e=parseFloat(A.top),f=parseFloat(fa.width)/2,l=parseFloat(fa.height)/2,e=e-l,d=d-f+parseFloat(A.width)/2,f=e+parseFloat(A.height)/2,b=Z.Utils.rotatePoint(d,f,b),d=parseFloat(V.width),f=parseFloat(V.height),e=d/Z.imageW,b=new Z.Utils.Point((b.x+d/2)/e,(b.y+f/2)/e);a.syncViewportToNavigator(b)}}function C(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_NAVIGATORIMAGEPATHINVALID"))}
function R(b){Z.interactivityOff||(a.zoomAndPanAllStop(!1,!0),T&&W&&A&&(b=Z.Utils.event(b),W.mouseXPrior=b.clientX,W.mouseYPrior=b.clientY,dragPtStart=new Z.Utils.Point(b.clientX,b.clientY),Z.Utils.addEventListener(T,"mousemove",U),Z.Utils.addEventListener(T,"mouseup",P),Z.Utils.addEventListener(document,"mouseup",P)))}function U(a){if(!Z.interactivityOff&&W&&A){var b=parseFloat(A.left),d=parseFloat(A.top);A.left=b+(a.clientX-W.mouseXPrior)+"px";A.top=d+(a.clientY-W.mouseYPrior)+"px";W.mouseXPrior=
a.clientX;W.mouseYPrior=a.clientY;I();return!1}}function P(b){if(!Z.interactivityOff&&T&&W&&A){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(T,"mousemove",U);Z.Utils.removeEventListener(T,"mouseup",P);Z.Utils.removeEventListener(document,"mouseup",P);b=Z.Utils.event(b);var d=new Z.Utils.Point(b.clientX,b.clientY);4>Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,d.x,d.y)&&(d=Z.Utils.getElementPosition(Z.NavigatorDisplay),A.left=b.clientX-d.x-parseFloat(A.width)/
2+"px",A.top=b.clientY-d.y-parseFloat(A.height)/2+"px");I();a.updateView()}}function F(a){!Z.interactivityOff&&(a.preventDefault(),T&&W&&A&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,a.y),W.mouseXPrior=a.x,W.mouseYPrior=a.y)}function K(a){if(!Z.interactivityOff&&(a.preventDefault(),Z.mousePan)){if(W&&A&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(A.left),d=parseFloat(A.top);A.left=b+(a.x-W.mouseXPrior)+
"px";A.top=d+(a.y-W.mouseYPrior)+"px";W.mouseXPrior=a.x;W.mouseYPrior=a.y;I()}return!1}}function O(b){if(!Z.interactivityOff&&T&&W&&A){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var d=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,d.x,d.y)<(Z.mobileDevice?6:3)&&(d=Z.Utils.getElementPosition(Z.NavigatorDisplay),A.left=b.x-d.x-parseFloat(A.width)/2+"px",A.top=b.y-d.y-parseFloat(A.height)/2+"px")}I();a.updateView()}}function q(b){if(!Z.interactivityOff&&
T&&W&&A){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var d=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,d.x,d.y)<(Z.mobileDevice?6:3)&&(d=Z.Utils.getElementPosition(Z.NavigatorDisplay),A.left=b.x-d.x-parseFloat(A.width)/2+"px",A.top=b.y-d.y-parseFloat(A.height)/2+"px")}I();a.updateView()}}var H=this,ga=!1,X,T,fa,Q,da,Sa,qa,V,W,A,ba,l=Z.navigatorW,ha=Z.navigatorH,u=Z.navigatorL,B=Z.navigatorT,ic=Z.navigatorFit,cc;d(b);this.initializeNavigator=
function(a,d){b(a,d)};this.setImage=function(a){Sa&&(Sa.innerHTML="");d(e)};this.getInitialized=function(){return ga};this.setVisibility=function(a){s(a)};this.syncToViewport=function(){t()};this.syncNavigatorRectangleDimensions=function(){D()};this.syncNavigatorRotation=function(){y()};this.syncNavigatorRectangleToViewport=function(a){n(a)};this.validateNavigatorGlobals=function(){ga?f():X=window.setInterval(f,300)};this.setSizeAndPosition=function(a,b,d,e,f,l,n){f||(f=ic);if("undefined"===typeof a||
null===a)a=Z.navigatorW;if("undefined"===typeof b||null===b)b=Z.navigatorH;if("undefined"===typeof d||null===d)d=0;if("undefined"===typeof e||null===e)e=0;T||(T=Z.NavigatorDisplay);fa||(fa=T.style);V=T.childNodes[1].firstChild;0==V.width&&"undefined"!==l&&null!==l&&(V.width=l);0==V.height&&"undefined"!==n&&null!==n&&(V.height=n);T&&fa&&V&&(f&&(a=1,a=0==f?Z.viewerW/Z.viewerH:V.width/V.height,a*=b),fa.width=a+"px",fa.height=b+"px",fa.left=d+"px",fa.top=e+"px",h(a,b))}};
Z.ZoomifyRuler=function(a){function b(){return D}function d(a){D=a}function e(a,b,d,e){if("undefined"===typeof a||null===a)a=Z.rulerW;if("undefined"===typeof b||null!==b)b=Z.rulerH;if("undefined"===typeof d||null!==d)d=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;if("undefined"===typeof e||null!==e)e=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;n.width=a+"px";n.height=b+"px";n.left=d+"px";n.top=e+"px"}function b(){return D}function d(a){D=a}function f(a){n||(n=Z.RulerDisplay.style);
n&&(n.display=a?"inline-block":"none")}function h(){var b=a.getZoom(),d="pixels"==Z.units?1:5;if(X){magnificationList.visibility="visible";var e;e=0!=Q?Q*b:100*b;1>e?Math.round(100*e):Math.round(e)}e=0;for(var f=W.length;e<f;e++)W[e].symbol==Z.units&&(A=e);V=null!==qa&&0!=qa?qa:null!==Sa&&0!=Sa?Z.imageW/Sa:1;b=Z.Utils.roundToDigitLimit(ba/V/b,d);K.firstChild.nodeValue=b.toString();H.visibility="visible";q.firstChild.nodeValue="um"!=W[A].symbol?W[A].symbol:"\u03bcm"}function r(b){if(X){var d=Math.round(100*
a.getZoom()),e="%",f=Math.round(100*a.getZoom())==Math.round(1E3*a.getZoom())/1E3*100?"":"~";1==Z.rulerListType&&0!=Q&&(d=Math.round(s(a.getZoom(),Q)),e="x");e=d.toString()+e+f;if(b){for(b=insertIndex=0;d>da[b].value;)b++,insertIndex=b;if(d==da[insertIndex].value)Z.Utils.updateSelectElement(ga,da);else{var h=Z.Utils.arrayClone("magnifications",da,h),h=Z.Utils.arraySplice(h,insertIndex,0,{text:e,value:d.toString()});Z.Utils.updateSelectElement(ga,h)}ga.selectedIndex=insertIndex}else ga.options[0]=
new Option(e,d.toString()),ga.selectedIndex=0}}function s(a,b){return a*b/100}function t(b){var d=0;if(b=Z.Utils.event(b))b=Z.Utils.target(b),d=parseInt(b.options[b.selectedIndex].value,10);isNaN(d)||a.zoomAndPanToView(a.viewX,a.viewY,(1==Z.rulerListType?100*d/Q:d)/100)}var D=!1,y,n,I,C,R,U,P,F,K,O,q,H,ga,X;Z.Utils.getResource("UI_RULERNOPARAMS");var T=Z.Utils.getResource("UI_RULERMIN"),fa=Z.Utils.getResource("UI_RULERMAX"),Q=Z.sourceMagnification,da,Sa=Z.unitsPerImage,qa=Z.pixelsPerUnit,V=1,W=[],
A=-1,ba=1;(function(){Z.RulerDisplay=Z.Utils.createContainerElement("div","RulerDisplay","inline-block","absolute","hidden","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal");y=Z.RulerDisplay;n=y.style;var b=parseFloat(Z.Utils.getResource("DEFAULT_BACKGROUNDALPHA")),s=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLOR"),u=Z.Utils.getResource("DEFAULT_BACKGROUNDCOLORNOALPHA"),s=Z.Utils.createContainerElement("div","rulerBackground","inline-block","absolute","hidden","1px","1px",
"0px","0px","none","0px",s,"0px","0px","normal",null,!0);Z.Utils.setOpacity(s,b,u);Z.RulerDisplay.appendChild(s);I=s;C=I.style;b=Z.Utils.getResource("DEFAULT_SCALEBARCOLOR");u=Z.Utils.createContainerElement("div","rulerScaleBar","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",b,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(u);R=u;U=R.style;u=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);U.zIndex=(u+3).toString();u=Z.Utils.createContainerElement("div",
"rulerScaleBarNotchL","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",b,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(u);rSBNL=u;rsbnlS=rSBNL.style;b=Z.Utils.createContainerElement("div","rulerScaleBarNotchR","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",b,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(b);rSBNR=b;rsbnrS=rSBNR.style;b=parseInt(Z.Utils.getResource("DEFAULT_RULERTEXTFONTSIZE"),10);u=Z.Utils.createContainerElement("div",
"errorTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);s=document.createTextNode("");u.appendChild(s);Z.Utils.setTextNodeStyle(s,"black","verdana",b+"px","none","normal","normal","normal","normal","1em","center","none");Z.RulerDisplay.appendChild(u);P=u;F=P.style;u=Z.Utils.createContainerElement("div","scaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px",
"nowrap",null,!0);s=document.createTextNode("");u.appendChild(s);Z.Utils.setTextNodeStyle(s,"black","verdana",b+"px","none","normal","normal","normal","normal","1em","right","none");Z.RulerDisplay.appendChild(u);K=u;O=K.style;u=Z.Utils.createContainerElement("div","unitTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);s=document.createTextNode("");u.appendChild(s);Z.Utils.setTextNodeStyle(s,"black","verdana",b+"px","none",
"normal","normal","normal","normal","1em","left","none");Z.RulerDisplay.appendChild(u);q=u;H=q.style;if(0!=Z.rulerListType){da=1==Z.rulerListType&&0!=Q?[{text:"2.5x",value:2.5},{text:"5x",value:5},{text:"10x",value:10},{text:"20x",value:20},{text:"40x",value:40},{text:"60x",value:60},{text:"100x",value:100}]:[{text:"10%",value:10},{text:"20%",value:20},{text:"30%",value:30},{text:"40%",value:40},{text:"50%",value:50},{text:"60%",value:60},{text:"70%",value:70},{text:"80%",value:80},{text:"90%",value:90},
{text:"100%",value:100}];b=new Z.Utils.createSelectElement("magnificationList","",da,1,1,1,null,!0,t);Z.RulerDisplay.appendChild(b);ga=b;X=ga.style;var b=100*Z.minZ,u=100*Z.maxZ,s=Math.round(b),B=Math.round(u),A="%";-1==b&&(b=Math.round(100*a.calcZoomDecimalToFitDisplay()));1==Z.rulerListType&&0!=Q&&(b=b*Q/100,A="x");for(;da[0].value<=s;)da=Z.Utils.arraySplice(da,0,1);-1==u&&(u=Math.round(100*a.calcZoomDecimalToFitDisplay()));1==Z.rulerListType&&0!=Q&&(u=u*Q/100,A="x");for(;da[da.length-1].value>=
B;)da=Z.Utils.arraySplice(da,da.length-1,1);da=Z.Utils.arraySplice(da,0,0,{text:s.toString()+A+(s==b?"":"~")+T,value:b});da[da.length]={text:B.toString()+A+(B==u?"":"~")+fa,value:u};Z.Utils.updateSelectElement(ga,da);ga.selectedIndex=0}W=[{magnitude:Math.pow(10,24),symbol:"Ym"},{magnitude:Math.pow(10,21),symbol:"Zm"},{magnitude:Math.pow(10,18),symbol:"Em"},{magnitude:Math.pow(10,15),symbol:"Pm"},{magnitude:Math.pow(10,12),symbol:"Tm"},{magnitude:Math.pow(10,9),symbol:"Gm"},{magnitude:Math.pow(10,
6),symbol:"Mm"},{magnitude:Math.pow(10,3),symbol:"km"},{magnitude:Math.pow(10,2),symbol:"hm"},{magnitude:Math.pow(10,1),symbol:"dam"},{magnitude:Math.pow(10,0),symbol:"m"},{magnitude:Math.pow(10,-1),symbol:"dm"},{magnitude:Math.pow(10,-2),symbol:"cm"},{magnitude:Math.pow(10,-3),symbol:"mm"},{magnitude:Math.pow(10,-6),symbol:"um"},{magnitude:Math.pow(10,-9),symbol:"nm"},{magnitude:Math.pow(10,-12),symbol:"pm"},{magnitude:Math.pow(10,-15),symbol:"fm"},{magnitude:Math.pow(10,-18),symbol:"am"},{magnitude:Math.pow(10,
-21),symbol:"zm"},{magnitude:Math.pow(10,-24),symbol:"ym"},{magnitude:Math.pow(10,-24),symbol:"pixels"}];b=Z.rulerW;u=Z.rulerH;s=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;B=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;ba=0!=Z.rulerListType?b-53-16:b-10;var A=(u-1+5)/2,D=ba/2-5,N=A-10,V="pixels"==Z.units?7:0;C&&U&&rsbnlS&&rsbnrS&&P&&F&&K&&O&&q&&H&&(e(b,u,s,B),C.width=b+"px",C.height=u+"px",C.left="0px",C.top="0px",X&&(X.width="53px",X.left=b-53-3+"px",X.top=(u-20)/2+"px",X.visibility=
"visible"),U.width=ba+"px",U.height="1px",U.left="5px",U.top=A+3+"px",rsbnlS.width="1px",rsbnlS.height="6px",rsbnlS.left="5px",rsbnlS.top=A+"px",rsbnrS.width="1px",rsbnrS.height="6px",rsbnrS.left=5+ba+"px",rsbnrS.top=A+"px",F.width=ba+"px",F.height="15px",F.left="12px",F.top=N+"px",O.width=D+"px",O.height="15px",O.left=15-V+"px",O.top=N+"px",H.width=D+"px",H.height="15px",H.left=ba/2+15-V+"px",H.top=N+"px");Z.ViewerDisplay.appendChild(Z.RulerDisplay);f(Z.rulerVisible);Z.mobileDevice||Z.Utils.addEventListener(y,
"mouseover",Z.Utils.stopPropagation);d(!0);a&&a.getInitialized()&&(h(),r(!0))})();this.getInitialized=function(){return b()};this.setVisibility=function(a){f(a)};this.setSizeAndPosition=function(a,b,d,f,h){e(a,b,d,f,h)};this.syncToViewport=function(b){a&&a.getInitialized()&&(h(),r(b))}};
Z.NetConnector=function(){function a(a,e,f,h,n,s){var r=b();if(r){var t="function"===typeof e;if(t){var q=e;e=function(){window.setTimeout(Z.Utils.createCallback(null,q,r),1)};r.onreadystatechange=function(){4==r.readyState&&(r.onreadystatechange=new Function,e())}}try{"undefined"===typeof f||null===f?(r.open("GET",a,t),r.send(null)):"undefined"!==typeof h&&null!==h&&("postXML"==h?(Z.postingXML=!0,r.open("POST",a,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(f)):
"ZoomifyImageFile"==Z.tileSource&&(r.open("GET",a,!0),r.responseType="arraybuffer",Z.Utils.defineObjectProperty(r,"zType",{value:h,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(r,"zTile",{value:n,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(r,"zChunkNumber",{value:s,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&r.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),r.setRequestHeader("Range","bytes="+
f.start.toString()+"-"+f.end.toString()),r.send(null)))}catch(y){d(y,a,h),r.onreadystatechange=r=null}}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_XMLHTTPREQUESTUNSUPPORTED"))}function b(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}
function d(a,b,d){-1!=b.toUpperCase().indexOf(".ZIF")?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-ZIFBYTERANGE")+d+".",!1,t,"center"):-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-IMAGEXML"),!1,t,"center"):-1!=b.toUpperCase().indexOf(".PFF")?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-IMAGEHEADER"),!1,t,"center"):-1!=b.toUpperCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-IMAGEOFFSET"),
!1,t,"center"):-1!=b.indexOf(Z.Utils.getResource("DEFAULT_SKINXMLFILE"))?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-TOOLBARXML"),!1,t,"center"):-1!=b.indexOf(Z.Utils.getResource("DEFAULT_SLIDESXMLFILE"))?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-SLIDESXML"),!1,t,"center"):-1!=b.indexOf(Z.Utils.getResource("DEFAULT_HOTSPOTSXMLFILE"))?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-HOTSPOTSXML"),!1,t,"center"):-1!=b.indexOf(Z.Utils.getResource("DEFAULT_ANNOTATIONSXMLFILE"))?
Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-ANNOTATIONSXML"),!1,t,"center"):-1!=b.toUpperCase().indexOf(Z.Utils.getResource("DEFAULT_ANNOTATIONSXMLSAVEHANDLERNAME1"))||-1!=b.toUpperCase().indexOf(Z.Utils.getResource("DEFAULT_ANNOTATIONSXMLSAVEHANDLERNAME1"))?Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-ANNOTATIONSSAVEHANDLER"),!1,t,"center"):Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST"),!1,t,"center")}function e(a){if(a)if(200!==
a.status&&0!==a.status&&206!==a.status)if("ZoomifyImageFile"==Z.tileSource){var b=a.status;a=404==b?"Not Found":a.statusText;Z.Utils.showMessage(Z.Utils.getResource("ERROR_NETWORKSTATUSRANGEREQUESTS")+b+" - "+a,!1,t,"center")}else b=a.status,a=404==b?"Not Found":a.statusText,Z.Utils.showMessage(Z.Utils.getResource("ERROR_NETWORKSTATUS")+b+" - "+a,!1,t,"center");else if(b=null,a.response&&a.zType&&"ZoomifyImageFile"==Z.tileSource)Z.Viewport&&(b=new Z.Utils.createUint8Array(a.response,0),"header"==
a.zType?Z.Viewport.parseZIFHeader(b):"offset"==a.zType?Z.Viewport.parseZIFOffsetChunk(b,a.zChunkNumber):"byteCount"==a.zType?Z.Viewport.parseZIFByteCountChunk(b,a.zChunkNumber):"image"==a.zType.substring(0,5)?(D--,Z.Viewport.parseZIFTileImage(b,a.zTile,a.zType)):"navigator"==a.zType?Z.Viewport.parseZIFNavigatorImage(b,a.zTile,a.zType):Z.Utils.showMessage(Z.Utils.getResource("ERROR_MAKINGNETWORKREQUEST-ZIFBYTES"),!1,t,"center"));else if(a.responseXML&&a.responseXML.documentElement)b=a.responseXML,
f(b);else{if(a.responseText)if(a=a.responseText,Z.postingXML)Z.postingXML=!1,Z.Utils.showMessage(Z.Utils.getResource("ALERT_ANNOTATIONSAVESUCCESSFUL"),!1,t,"center"),Z.Viewport&&Z.Viewport.setAllHotspotsSaved();else if("ZoomifyImageFolder"==Z.tileSource)b=Z.Utils.xmlConvertTextToDoc(a),f(b);else if("ZoomifyPFFFile"==Z.tileSource){if(-1!=a.toUpperCase().indexOf("PFFHEADER"))b=a.indexOf("reply_data=")+11,a=a.substring(b,a.length);else{var b=a.indexOf("begin=")+6,d=a.indexOf("&",b);beginValue=a.substring(b,
d);b=a.indexOf("reply_data=")+11;replyDataValue=a.substring(b,a.length);a="<PFFOFFSET BEGIN='"+beginValue+"' REPLYDATA='"+replyDataValue+"' />"}b=Z.Utils.xmlConvertTextToDoc(a);f(b)}}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_NETWORKSECURITY"),!1,t,"center")}function f(a){if(a&&a.documentElement){var b=a.documentElement.tagName;"COPYRIGHT"==b?h("copyright",a):"IMAGE_PROPERTIES"==b||"ZIFHEADER"==b||"PFFHEADER"==b?h("image",a):"PFFOFFSET"==b?h("offset",a):"SKINDATA"==b?h("skin",a):"SLIDEDATA"==
b?h("slides",a):"HOTSPOTDATA"==b?h("hotspots",a):"ZAS"==b?h("annotations",a):Z.Utils.showMessage(Z.Utils.getResource("ERROR_XMLINVALID"),!0)}else Z.Utils.showMessage(Z.Utils.getResource("ERROR_XMLDOCINVALID"),!0)}function h(a,b){if("copyright"==a){var d=b.documentElement.getAttribute("STATEMENTTEXT"),e=b.documentElement.getAttribute("DECLINEDTEXT");Z.Utils.isStrVal(d)?Z.Utils.showCopyright(d,e):Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEXMLINVALID"),!0)}else"image"==a?("ZoomifyImageFile"==
Z.tileSource||"ZoomifyImageFolder"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource||"ImageServer"==Z.tileSource)&&Z.Viewport&&Z.Viewport.parseImageXML(b):"offset"==a?Z.Viewport&&Z.Viewport.parseOffsetChunk(b):"skin"==a?Z.Toolbar&&Z.Toolbar.parseSkinXML(b):"slides"==a?Z.Viewport&&Z.Viewport.parseSlidesXML(b):"hotspots"==a?Z.Viewport&&Z.Viewport.parseHotspotsXML(b):"annotations"==a&&Z.Viewport&&Z.Viewport.parseAnnotationsXML(b)}function r(a,b,d){D--;if("function"===typeof a)try{a(d)}catch(e){Z.Utils.showMessage(e.name+
Z.Utils.getResource("ERROR_EXECUTINGCALLBACK")+b+" "+e.message,!0)}}function s(a,b,d){function e(d){f.onload=null;f.onabort=null;f.onerror=null;h&&window.clearTimeout(h);window.setTimeout(function(){b(a,d?f:null)},1)}var f=null,h=null;this.start=function(){f=new Image;var b=function(){e(!1)};f.onload=function(){e(!0)};f.onabort=b;f.onerror=b;h=window.setTimeout(function(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEREQUESTTIMEDOUT"),!1,t,"center");e(!1);2==Z.debug&&Z.Utils.trace("Image request for "+
d+" timeout: "+a)},n);f.src=a}}var t=parseInt(Z.Utils.getResource("ERROR_MESSAGEDURATIONMEDIUM"),10),D=0,y=parseInt(Z.Utils.getResource("DEFAULT_IMAGESLOADINGMAX"),10),n=parseFloat(Z.Utils.getResource("DEFAULT_IMAGELOADTIMEOUT"));this.loadXML=function(b){a(b,e,null)};this.loadByteRange=function(b,d,f,h,n,r){d=new Z.Utils.Range(d,f);a(b,e,d,h,n,r)};this.loadImageByteRange=function(b,d,f,h){d=b.substring(0,b.indexOf("?"));var n=parseFloat(b.substring(b.indexOf("?")+1,b.indexOf(",")));b=parseFloat(b.substring(b.indexOf(",")+
1,b.length));b=new Z.Utils.Range(n,n+b);a(d,e,b,f,h)};this.postXML=function(b,d){a(b,e,d,"postXML")};this.loadImage=function(a,b,d,e){return D<y?(D++,b=Z.Utils.createCallback(null,r,b),"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof e&&null!==e||"navigator"==d)?this.loadImageByteRange(a,b,d,e):(new s(a,b,d)).start(),!0):!1}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,d){Z.alphaSupported?a.style.opacity=
b:d&&(a.style.backgroundColor=d)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,d){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):d&&
(a.style.backgroundColor=d)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,d){a&&("mousewheel"==b?a.addEventListener("DOMMouseScroll",d,!1):a.addEventListener(b,d,!1))},this.removeEventListener=function(a,b,d){a&&("mousewheel"==b?a.removeEventListener("DOMMouseScroll",d,!1):a.removeEventListener(b,d,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=
function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,d){if(-1==this._findListener(a,b,d)){var e=function(){var b=window.event;Function.prototype.call?d.call(a,b):(a._currentListener=d,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,e);b={target:a,eventName:b,handler:d,handler2:e};var e=(a.document||a).parentWindow,
f="l"+this._listenerCounter++;e._allListeners||(e._allListeners={});e._allListeners[f]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=f;e._unloadListenerAdded||(e._unloadListenerAdded=!0,e.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,d){if(a&&(d=this._findListener(a,b,d),-1!=d)){var e=(a.document||a).parentWindow,f=a._listeners[d];a.detachEvent("on"+b,e._allListeners[f].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,d,1);delete e._allListeners[f]}},
this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,d){var e=a._listeners;if(!e)return-1;a=(a.document||a).parentWindow;for(var f=
e.length-1;0<=f;f--){var h=a._allListeners[e[f]];if(h&&h.eventName==b&&h.handler==d)return f}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.skinPath=null;Z.skinMode=null;Z.parameters=null;Z.browsers=null;Z.browser=null;Z.browserVersion=null;Z.canvasSupported=null;Z.cssTransformsSupported=
null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=null;Z.mobileDevice=null;Z.localUse=null;Z.zifSupported=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.minZ=null;Z.maxZ=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.fadeInSpeed=
null;Z.toolbarVisible=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorH=null;Z.navigatorL=null;Z.navigatorT=null;Z.navigatorFit=null;Z.clickZoom=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=null;Z.keys=null;Z.constrainPan=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.watermarkPath=null;Z.copyrightPath=null;Z.hotspotPath=null;Z.hotspotFolder=null;Z.hotspotListTitle=null;Z.tourPath=null;Z.tourListTitle=null;Z.tourPlaying=
null;Z.slidePath=null;Z.slideListTitle=null;Z.slideTransitionSpeed=null;Z.slideshowPlaying=null;Z.audioContent=!1;Z.audioMuted=!1;Z.captionBoxes=!1;Z.annotationPath=null;Z.annotationFolder=null;Z.saveHandlerPath=null;Z.postingXML=!1;Z.minimizeVisible=null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.measureVisible=null;Z.rotationVisible=null;Z.initialR=0;Z.virtualPointerVisible=null;Z.crosshairsVisible=null;Z.rulerVisible=null;
Z.units=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.rulerListType=null;Z.rulerW=null;Z.rulerH=null;Z.rulerL=null;Z.rulerT=null;Z.coordinatesVisible=null;Z.imageFiltersVisible=null;Z.initialImageFilters=null;Z.progressVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.canvas=null;Z.debug=null;Z.imageProperties=null;Z.serverIP=null;Z.serverPort=null;Z.tileHandlerPath=null;Z.tileHandlerPathFull=null;Z.tileW=null;Z.tileH=null;Z.tileType=
"jpg";Z.freehandVisible=null;Z.rectangleVisible=null;Z.polygonVisible=null;Z.saveHandler=!1;Z.tileSource=null;Z.focal=null;Z.quality=null;Z.editMode=null;Z.editing=null;Z.labelMode="view";Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.TooltipDisplay=null;Z.Navigator=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=[];Z.CoordinatesDisplay=null;Z.coordinates=null;Z.coordinatesSave=null;Z.CopyrightDisplay=null;Z.AnnotationPanelDisplay=
null;Z.imageW=null;Z.imageH=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.interactivityOff=!1;Z.useCanvas=!0;Z.specialStorageEnabled=null;Z.callbacks=[];Z.updateViewPercent=0;Z.TraceDisplay=null;Z.traces=null;Z.delayedFunctionCallTimer=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,
b=0,d=navigator.appName,e=navigator.appVersion,f=!1,h=!1,r=navigator.userAgent.toLowerCase();if("Microsoft Internet Explorer"==d&&window.attachEvent&&window.ActiveXObject)b=r.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(r.substring(b+5,r.indexOf(";",b))),f="undefined"!==typeof document.documentMode;else if("Netscape"==d&&-1!=r.indexOf("trident"))a=Z.browsers.IE,b=11;else if("Netscape"==d&&window.addEventListener){var s=r.indexOf("firefox"),d=r.indexOf("safari"),e=r.indexOf("chrome");0<=s?(a=Z.browsers.FIREFOX,
b=parseFloat(r.substring(s+8))):0<=d&&(b=r.substring(0,d).lastIndexOf("/"),a=0<=e?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(r.substring(b+1,d)));d=new Image;d.style.getPropertyValue&&(h=d.style.getPropertyValue("image-rendering"))}else"Opera"==d&&window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,b=parseFloat(e));var t;if(window.ActiveXObject)for(d=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0,s=d.length;e<s;e++)try{netReq=
new ActiveXObject(d[e]);t=d[e];break}catch(D){}else window.XMLHttpRequest&&(netReq=new XMLHttpRequest,t="XMLHttpRequest");var d="response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype,e=document.createElement("canvas"),e=!(!e.getContext||!e.getContext("2d")),s=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),e=e&&s,s=!(a==Z.browsers.CHROME&&2>b),h=f||h?"high":null,
y=(document.documentElement||{}).style||{},f=!1,n=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],I,C;for(;I=n.shift();)if("undefined"!==typeof y[I]){f=!0;C=/webkit/i.test(I);break}y=f;n=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)n=
!0;var R=Array.prototype.splice,U=!1;try{new Float32Array(1),U=!0}catch(P){}var F=!1;try{new Uint8Array(1),F=!0}catch(K){}var O=!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),O=!0}catch(q){}var r=-1<r.indexOf("android")||-1<r.indexOf("iphone")||-1<r.indexOf("ipad")||-1<r.indexOf("ipod"),H;switch(window.location.protocol){case "http:":H=!1;break;case "https:":H=!1;break;case "file:":H=!0;break;default:H=null}var ga=!(Z.browser==Z.browsers.IE&&9>Z.browserVersion||
Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=a;Z.browserVersion=b;Z.xmlHttpRequestSupport=t;Z.responseArraySupported=d;Z.canvasSupported=e;Z.useCanvas=Z.canvasSupported;Z.imageFiltersVisible=!Z.useCanvas&&Z.imageFiltersVisible?!1:Z.imageFiltersVisible;Z.cssTransformsSupported=f;Z.cssTransformProperty=I;Z.cssTransformNoUnits=C;Z.alphaSupported=
s;Z.renderQuality=h;Z.rotationSupported=y;Z.fullScreenSupported=n;Z.arraySpliceSupported=R;Z.float32ArraySupported=U;Z.uInt8ArraySupported=F;Z.definePropertySupported=O;Z.mobileDevice=r;Z.localUse=H;Z.zifSupported=ga},isStrVal:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&"null"!==a},validateColorVal:function(a){0!=a.indexOf("#")&&(a="#"+a);return a},enforceCopyright:function(){this.readCookie("imageCopyright")?Z.Viewer.configureViewer():this.loadCopyrightText()},readCookie:function(a){a+=
"=";for(var b=document.cookie.split(";"),d=0,e=b.length;d<e;d++){for(var f=b[d];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return f.substring(a.length,f.length)}return null},loadCopyrightText:function(){(new Z.NetConnector).loadXML(Z.copyrightPath)},showCopyright:function(a,b){var d=this.getResource("DEFAULT_COPYRIGHTSCREENCOLOR"),e=this.getResource("DEFAULT_COPYRIGHTBUTTONCOLOR");Z.CopyrightDisplay=this.createContainerElement("div","CopyrightDisplay","inline-block","absolute",
"hidden",Z.viewerW-2+"px",Z.viewerH-2+"px","0px","0px","solid","1px",d,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.CopyrightDisplay);d=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);Z.CopyrightDisplay.style.zIndex=(d+11).toString();var f=parseFloat(Z.CopyrightDisplay.style.width)/2-220,d=parseFloat(Z.CopyrightDisplay.style.height)/2-100,h=this.createContainerElement("div","textBox","inline-block","absolute","hidden","440px","200px",f+"px",d+"px","none","0px","transparent none",
"0px","0px","normal",null,!0);h.id="textBox";Z.CopyrightDisplay.appendChild(h);var r=document.createTextNode(a);h.appendChild(this.createCenteredElement(r,"copyrightTextNode"));this.setTextNodeStyle(r,"black","verdana","16px","none","normal","normal","normal","normal","1em","justify","none");var r=this.createContainerElement("div","declinedTextContainer","hidden","absolute","hidden","0px","0px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0),s=document.createTextNode(b);
r.appendChild(s);h.appendChild(r);f=f+220-95;d=d+200+20;h=this.getResource("UI_COPYRIGHTAGREEBUTTONTEXT");h=new Z.Utils.Button("buttonAgree",h,null,null,null,null,"80px","20px",f+"px",d+"px","mousedown",this.copyrightAgreeButtonHandler,"TIP_COPYRIGHTAGREE","solid","1px",e,"0px","0px");Z.CopyrightDisplay.appendChild(h.elmt);f+=110;h=this.getResource("UI_COPYRIGHTEXITBUTTONTEXT");e=new Z.Utils.Button("buttonExit",h,null,null,null,null,"80px","20px",f+"px",d+"px","mousedown",this.copyrightExitButtonHandler,
"TIP_COPYRIGHTEXIT","solid","1px",e,"0px","0px");Z.CopyrightDisplay.appendChild(e.elmt)},hideCopyright:function(){var a=document.getElementById("copyrightTextNode").firstChild,b=document.getElementById("declinedTextContainer").firstChild.nodeValue;a.nodeValue=b;a=document.getElementById("buttonAgree");Z.Utils.removeEventListener(a,"mousedown",this.copyrightAgreeButtonHandler);Z.CopyrightDisplay.removeChild(a);a=document.getElementById("buttonExit");Z.Utils.removeEventListener(a,"mousedown",this.copyrightExitButtonHandler);
Z.CopyrightDisplay.removeChild(a)},copyrightAgreeButtonHandler:function(a){Z.ViewerDisplay.removeChild(Z.CopyrightDisplay);document.cookie="imageCopyright=confirmed";Z.Viewer.configureViewer()},copyrightExitButtonHandler:function(a){Z.Utils.hideCopyright()},parseParameters:function(a){var b;a&&(b=a.split("&"));return b},setParameters:function(a){var b=this.getResource("DEFAULT_EXPRESSPARAMETERSENABLETEST"),d=this.getResource("DEFAULT_EXPRESSPARAMETERSDISABLEVALUE"),e=this.getResource("DEFAULT_EXPRESSPARAMETERSDISABLEDALERT"),
b=b!=d?!0:!1;b||(Z.logoLinkURL=Z.Utils.getResource("UI_LOGOLINK"));var f=this.getResource("DEFAULT_PROPARAMETERSENABLETEST"),h=this.getResource("DEFAULT_PROPARAMETERSDISABLEVALUE"),d=this.getResource("DEFAULT_PROPARAMETERSDISABLEDALERT"),f=f!=h?!0:!1,r=this.getResource("DEFAULT_SPECIALSTORAGESUPPORTENABLETEST"),h=this.getResource("DEFAULT_SPECIALSTORAGESUPPORTDISABLEVALUE"),s=this.getResource("DEFAULT_SPECIALSTORAGESUPPORTDISABLEDALERT");Z.specialStorageEnabled=r!=h?!0:!1;var t=this.getResource("DEFAULT_ENTERPRISEPARAMETERSENABLETEST"),
D=this.getResource("DEFAULT_ENTERPRISEPARAMETERSDISABLEVALUE"),r=this.getResource("DEFAULT_ENTERPRISEPARAMETERSDISABLEDALERT"),t=t!=D?!0:!1;Z.skinPath=this.getResource("DEFAULT_SKINXMLPATH");Z.skinMode=this.getResource("DEFAULT_SKINMODE");isNaN(parseFloat(this.getResource("DEFAULT_INITIALX")))||(Z.initialX=parseFloat(this.getResource("DEFAULT_INITIALX")));isNaN(parseFloat(this.getResource("DEFAULT_INITIALY")))||(Z.initialY=parseFloat(this.getResource("DEFAULT_INITIALY")));isNaN(parseFloat(this.getResource("DEFAULT_INITIALZOOM")))||
(Z.initialZ=parseFloat(this.getResource("DEFAULT_INITIALZOOM")));isNaN(parseFloat(this.getResource("DEFAULT_MINZOOM")))||(Z.minZ=parseFloat(this.getResource("DEFAULT_MINZOOM")));isNaN(parseFloat(this.getResource("DEFAULT_MAXZOOM")))||(Z.maxZ=parseFloat(this.getResource("DEFAULT_MAXZOOM")));isNaN(parseFloat(this.getResource("DEFAULT_ZOOMSPEED")))||(Z.zoomSpeed=parseFloat(this.getResource("DEFAULT_ZOOMSPEED")));isNaN(parseFloat(this.getResource("DEFAULT_PANSPEED")))||(Z.panSpeed=parseFloat(this.getResource("DEFAULT_PANSPEED")));
isNaN(parseFloat(this.getResource("DEFAULT_FADEINSPEED")))||(Z.fadeInSpeed=parseFloat(this.getResource("DEFAULT_FADEINSPEED")));Z.navigatorVisible=parseInt(this.getResource("DEFAULT_NAVIGATORVISIBLE"),10);Z.navigatorW=parseInt(this.getResource("DEFAULT_NAVIGATORWIDTH"),10);Z.navigatorH=parseInt(this.getResource("DEFAULT_NAVIGATORHEIGHT"),10);Z.navigatorL=parseInt(this.getResource("DEFAULT_NAVIGATORLEFT"),10);Z.navigatorT=parseInt(this.getResource("DEFAULT_NAVIGATORTOP"),10);Z.navigatorFit=this.getResource("DEFAULT_NAVIGATORFIT");
Z.clickZoom="0"!=this.getResource("DEFAULT_CLICKZOOM");Z.clickPan="0"!=this.getResource("DEFAULT_CLICKPAN");Z.mousePan="0"!=this.getResource("DEFAULT_MOUSEPAN");Z.keys="0"!=this.getResource("DEFAULT_KEYS");Z.constrainPan="0"!=this.getResource("DEFAULT_CONSTRAINPAN");Z.canvas="0"!=this.getResource("DEFAULT_CANVAS");Z.debug=parseInt(this.getResource("DEFAULT_DEBUG"),10);Z.toolbarVisible=parseInt(this.getResource("DEFAULT_TOOLBARVISIBLE"),10);Z.toolbarPosition=parseFloat(this.getResource("DEFAULT_TOOLBARPOSITION"));
Z.logoVisible="0"!=this.getResource("DEFAULT_LOGOVISIBLE");Z.logoCustomPath=this.getResource("DEFAULT_LOGOCUSTOMPATH");Z.minimizeVisible="0"!=this.getResource("DEFAULT_MINIMIZEVISIBLE");Z.sliderVisible="0"!=this.getResource("DEFAULT_SLIDERVISIBLE");Z.panButtonsVisible="0"!=this.getResource("DEFAULT_PANBUTTONSVISIBLE");Z.tooltipsVisible="0"!=this.getResource("DEFAULT_TOOLTIPSVISIBLE");Z.helpVisible=parseInt(this.getResource("DEFAULT_HELPVISIBLE"),10);Z.progressVisible="0"!=this.getResource("DEFAULT_PROGRESSVISIBLE");
Z.fullScreenVisible="0"!=this.getResource("DEFAULT_FULLSCREENVISIBLE");Z.fullPageVisible="0"!=this.getResource("DEFAULT_FULLPAGEVISIBLE");Z.initialFullPage="0"!=this.getResource("DEFAULT_INITIALFULLPAGE");Z.measureVisible="0"!=this.getResource("DEFAULT_MEASUREVISIBLE");Z.rotationVisible="0"!=this.getResource("DEFAULT_ROTATIONVISIBLE");Z.units=this.getResource("DEFAULT_UNITS");Z.sourceMagnification=parseInt(this.getResource("DEFAULT_SOURCEMAGNIFICATION"),10);Z.virtualPointerVisible="0"!=this.getResource("DEFAULT_VIRTUALPOINTERVISIBLE");
Z.crosshairsVisible="0"!=this.getResource("DEFAULT_CROSSHAIRSVISIBLE");Z.rulerVisible="0"!=this.getResource("DEFAULT_RULERVISIBLE");Z.rulerListType=this.getResource("DEFAULT_RULERLISTTYPE");Z.rulerW=parseInt(this.getResource("DEFAULT_RULERWIDTH"),10);Z.rulerH=parseInt(this.getResource("DEFAULT_RULERHEIGHT"),10);Z.rulerL=parseInt(this.getResource("DEFAULT_RULERLEFT"),10);Z.rulerT=parseInt(this.getResource("DEFAULT_RULERTOP"),10);isNaN(parseFloat(this.getResource("DEFAULT_SLIDETRANSITIONSPEED")))||
(Z.slideTransitionSpeed=parseFloat(this.getResource("DEFAULT_SLIDETRANSITIONSPEED")));Z.coordinatesVisible="0"!=this.getResource("DEFAULT_COORDINATESVISIBLE");Z.imageFiltersVisible="0"!=this.getResource("DEFAULT_IMAGEFILTERSVISIBLE");Z.initialImageFilters="0"!=this.getResource("DEFAULT_INITIALMAGEFILTERS");Z.freehandVisible="0"!=this.getResource("DEFAULT_FREEHANDVISIBLE");Z.textVisible="0"!=this.getResource("DEFAULT_TEXTVISIBLE");Z.iconVisible="0"!=this.getResource("DEFAULT_ICONVISIBLE");Z.rectangleVisible=
"0"!=this.getResource("DEFAULT_RECTANGLEVISIBLE");Z.polygonVisible="0"!=this.getResource("DEFAULT_POLYGONVISIBLE");Z.focal=parseInt(this.getResource("DEFAULT_FOCAL"),10);Z.quality=parseInt(this.getResource("DEFAULT_QUALITY"),10);if(this.isStrVal(a))for(var D=0,y=a.length;D<y;D++){var n=a[D],I=n.indexOf("=");if(0<I){var C=n.substring(0,I),n=n.substring(I+1);if(!b&&"zNavigatorVisible"!=C)alert(e+" "+C);else if(this.isStrVal(n))switch(C){case "zInitialX":isNaN(parseFloat(n))||(Z.initialX=parseFloat(n));
break;case "zInitialY":isNaN(parseFloat(n))||(Z.initialY=parseFloat(n));break;case "zInitialZoom":isNaN(parseFloat(n))||(Z.initialZ=parseFloat(n),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(n))||(Z.minZ=parseFloat(n),Z.minZ&&-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(n))||(Z.maxZ=parseFloat(n),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=parseInt(n,10);break;case "zToolbarVisible":Z.toolbarVisible=
parseInt(n,10);break;case "zLogoVisible":"0"==n&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==n&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==n&&(Z.sliderVisible=!1);break;case "zPanButtonsVisible":"0"==n&&(Z.panButtonsVisible=!1);break;case "zFullScreenVisible":"0"==n&&(Z.fullScreenVisible=!1);break;case "zFullPageVisible":"1"==n&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==n&&(Z.initialFullPage=!0);break;case "zSkinPath":Z.skinPath=n;break;
case "zTooltipsVisible":"0"==n&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(n,10);break;case "zProgressVisible":"0"==n&&(Z.progressVisible=!1);break;default:if(f)switch(C){case "zZoomSpeed":Z.zoomSpeed=parseInt(n,10);break;case "zPanSpeed":Z.panSpeed=parseInt(n,10);break;case "zFadeInSpeed":Z.fadeInSpeed=parseInt(n,10);break;case "zClickZoom":"0"==n&&(Z.clickZoom=!1);break;case "zClickPan":"0"==n&&(Z.clickPan=!1);break;case "zMousePan":"0"==n&&(Z.mousePan=!1);break;case "zKeys":"0"==
n&&(Z.keys=!1);break;case "zConstrainPan":"0"==n&&(Z.constrainPan=!1);break;case "zCanvas":"0"==n&&(Z.canvas=!1);Z.canvasSupported&&Z.canvas||(Z.useCanvas=!1);break;case "zDebug":Z.debug=parseInt(n,10);break;case "zImageProperties":Z.imageProperties=n;break;case "zNavigatorWidth":isNaN(parseInt(n,10))||(Z.navigatorW=parseInt(n,10));break;case "zNavigatorHeight":isNaN(parseInt(n,10))||(Z.navigatorH=parseInt(n,10));break;case "zNavigatorLeft":isNaN(parseInt(n,10))||(Z.navigatorL=parseInt(n,10));break;
case "zNavigatorTop":isNaN(parseInt(n,10))||(Z.navigatorT=parseInt(n,10));break;case "zNavigatorFit":isNaN(parseFloat(n))||(Z.navigatorFit=parseInt(n,10));break;case "zToolbarPosition":Z.toolbarPosition=parseInt(n,10);break;case "zLogoCustomPath":Z.logoCustomPath=n;break;case "zRotationVisible":"1"==n&&(Z.rotationVisible=!0);break;case "zInitialRotation":isNaN(parseFloat(n))||(Z.initialR=parseInt(n,10));break;case "zVirtualPointerVisible":"1"==n&&(Z.virtualPointerVisible=!0);break;case "zCrosshairsVisible":"1"==
n&&(Z.crosshairsVisible=!0);break;case "zRulerVisible":"1"==n&&(Z.rulerVisible=!0);break;case "zRulerListType":this.isStrVal(n)&&(Z.rulerListType=n);break;case "zRulerWidth":isNaN(parseInt(n,10))||(Z.rulerW=parseInt(n,10));break;case "zRulerHeight":isNaN(parseInt(n,10))||(Z.rulerH=parseInt(n,10));break;case "zRulerLeft":isNaN(parseInt(n,10))||(Z.rulerL=parseInt(n,10));break;case "zRulerTop":isNaN(parseInt(n,10))||(Z.rulerT=parseInt(n,10));break;case "zMeasureVisible":Z.measureVisible="1"==n?!0:!1;
break;case "zUnits":this.isStrVal(n)&&(Z.units=n);break;case "zUnitsPerImage":isNaN(parseFloat(n))||(Z.unitsPerImage=parseFloat(n));break;case "zPixelsPerUnit":isNaN(parseFloat(n))||(Z.pixelsPerUnit=parseFloat(n));break;case "zSourceMagnification":isNaN(parseInt(n,10))||(Z.sourceMagnification=parseInt(n,10));break;case "zWatermarkPath":Z.watermarkPath=n;break;case "zCopyrightPath":Z.copyrightPath=n;break;case "zCoordinatesVisible":"1"==n&&(Z.coordinatesVisible=!0);break;case "zHotspotPath":Z.hotspotPath=
Z.Utils.stringRemoveTrailingSlashCharacters(n);Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));break;case "zHotspotListTitle":Z.hotspotListTitle=n;break;case "zTourPath":Z.tourPath=Z.Utils.stringRemoveTrailingSlashCharacters(n);Z.hotspotPath=Z.tourPath;Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-
4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));break;case "zTourListTitle":Z.tourListTitle=n;break;case "zSlidePath":Z.slidePath=Z.Utils.stringRemoveTrailingSlashCharacters(n);".xml"==Z.slidePath.toLowerCase().substring(Z.slidePath.length-4,Z.slidePath.length)&&(Z.slideFolder=Z.slideFolder.substring(0,Z.slideFolder.lastIndexOf("/")));break;case "zSlideListTitle":Z.slideListTitle=n;break;case "zCaptionBoxes":"1"==n&&(Z.captionBoxes=!0);break;
case "zTilesPNG":"1"==n&&(Z.tileType="png");break;case "zTileW":Z.tileW=parseInt(n,10);break;case "zTileH":Z.tileH=parseInt(n,10);break;default:if(t)switch(C){case "zImageFiltersVisible":"1"==n&&(Z.imageFiltersVisible=!0);break;case "zInitialImageFilters":"0"==n&&(Z.initialImageFilters=!1);break;case "zAnnotationPath":Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(n);Z.annotationFolder=Z.annotationPath;".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&
(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/")));break;case "zFreehandVisible":"0"==n&&(Z.freehandVisible=!1);break;case "zTextVisible":"0"==n&&(Z.textVisible=!1);break;case "zIconVisible":"0"==n&&(Z.iconVisible=!1);break;case "zRectangleVisible":"0"==n&&(Z.rectangleVisible=!1);break;case "zPolygonVisible":"0"==n&&(Z.polygonVisible=!1);break;case "zMarkupMode":"1"==n&&((C=-1!=this.arrayIndexOfSubstring(a,"zHotspotPath")||-1!=Z.Utils.arrayIndexOfSubstring(a,
"zAnnotationPath"))?(Z.editMode="markup",Z.editing="addLabel",Z.saveHandler=-1!=this.arrayIndexOfSubstring(a,"zSaveHandlerPath")):alert(this.getResource("ERROR_HOTSPOTORANNOTATIONPATHMISSING")));break;case "zEditMode":"1"==n&&((C=-1!=this.arrayIndexOfSubstring(a,"zHotspotPath")||-1!=Z.Utils.arrayIndexOfSubstring(a,"zAnnotationPath"))?(Z.editMode="edit",Z.saveHandler=-1!=this.arrayIndexOfSubstring(a,"zSaveHandlerPath")):alert(this.getResource("ERROR_HOTSPOTORANNOTATIONPATHMISSING")));break;case "zSaveHandlerPath":Z.saveHandlerPath=
n;break;default:if(Z.specialStorageEnabled==h)alert(s+" "+C);else switch(C){case "zServerIP":Z.serverIP=n;break;case "zServerPort":Z.serverPort=n;break;case "zTileHandlerPath":Z.tileHandlerPath=n;break;case "zImageW":Z.imageW=parseInt(n,10);break;case "zImageH":Z.imageH=parseInt(n,10);break;case "zFocal":Z.focal=parseInt(n,10);break;case "zQuality":Z.quality=parseInt(n,10)}}else alert(r+" "+C)}else alert(d+" "+C)}}}if(Z.Utils.isStrVal(Z.annotationPath)||Z.Utils.isStrVal(Z.saveHandlerPath))t?Z.Utils.isStrVal(Z.saveHandlerPath)&&
(Z.saveHandlerPath=Z.saveHandlerPath):(Z.annotationPath="",alert(r));Z.Utils.validateImagePath()},resetParametersXYZ:function(a){isNaN(parseFloat(this.getResource("DEFAULT_INITIALX")))||(Z.initialX=parseFloat(this.getResource("DEFAULT_INITIALX")));isNaN(parseFloat(this.getResource("DEFAULT_INITIALY")))||(Z.initialY=parseFloat(this.getResource("DEFAULT_INITIALY")));isNaN(parseFloat(this.getResource("DEFAULT_INITIALZOOM")))||(Z.initialZ=parseFloat(this.getResource("DEFAULT_INITIALZOOM")));isNaN(parseFloat(this.getResource("DEFAULT_MINZOOM")))||
(Z.minZ=parseFloat(this.getResource("DEFAULT_MINZOOM")));isNaN(parseFloat(this.getResource("DEFAULT_MAXZOOM")))||(Z.maxZ=parseFloat(this.getResource("DEFAULT_MAXZOOM")));if(this.isStrVal(a))for(var b=0,d=a.length;b<d;b++){var e=a[b],f=e.indexOf("=");if(0<f){var h=e.substring(0,f),e=e.substring(f+1);if(this.isStrVal(e))switch(h){case "zInitialX":isNaN(parseFloat(e))||(Z.initialX=parseFloat(e));break;case "zInitialY":isNaN(parseFloat(e))||(Z.initialY=parseFloat(e));break;case "zInitialZoom":isNaN(parseFloat(e))||
(Z.initialZ=parseFloat(e),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(e))||(Z.minZ=parseFloat(e),Z.minZ&&-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(e))||(Z.maxZ=parseFloat(e),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},validateImagePath:function(){if(null!==Z.imagePath){var a=this.getResource("DEFAULT_SPECIALSTORAGESUPPORTDISABLEDALERT");-1!=Z.imagePath.toLowerCase().indexOf(".zif")?Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):
alert(this.getResource("ALERT_ZIFREQUIRESNEWERBROWSER")):Z.Utils.isStrVal(Z.tileHandlerPath)?-1!=Z.imagePath.toLowerCase().indexOf(".pff")?Z.specialStorageEnabled?(Z.tileSource="ZoomifyPFFFile",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(a):Z.Utils.isStrVal(Z.tileHandlerPath)&&(Z.specialStorageEnabled?(Z.tileSource="ImageServer",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(a)):Z.tileSource="ZoomifyImageFolder"}},getResource:function(a){var b="";switch(a){case "DEFAULT_EXPRESSPARAMETERSENABLETEST":b=
"Enable Express parameters";break;case "DEFAULT_EXPRESSPARAMETERSDISABLEVALUE":b="Changing This Violates License Agreement";break;case "DEFAULT_EXPRESSPARAMETERSDISABLEDALERT":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";break;case "DEFAULT_PROPARAMETERSENABLETEST":b="Enable Pro parameters";break;case "DEFAULT_PROPARAMETERSDISABLEVALUE":b="Changing This Violates License Agreement";break;case "DEFAULT_PROPARAMETERSDISABLEDALERT":b=
"Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";break;case "DEFAULT_SPECIALSTORAGESUPPORTENABLETEST":b="Enable special storage support";break;case "DEFAULT_SPECIALSTORAGESUPPORTDISABLEVALUE":b="Changing this violates License Agreement";break;case "DEFAULT_SPECIALSTORAGESUPPORTDISABLEDALERT":b="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";
break;case "DEFAULT_ENTERPRISEPARAMETERSENABLETEST":b="Enable Enterprise parameters";break;case "DEFAULT_ENTERPRISEPARAMETERSDISABLEVALUE":b="Changing this violates License Agreement";break;case "DEFAULT_ENTERPRISEPARAMETERSDISABLEDALERT":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";break;case "DEFAULT_HEADERSTARTBYTE":b="0";break;case "DEFAULT_HEADERENDBYTEZIF":b="8192";break;case "DEFAULT_HEADERENDBYTEPFF":b="1060";
break;case "DEFAULT_CHUNKSIZE":b="ZoomifyImageFile"==Z.tileSource?"1024":"256";break;case "DEFAULT_CHUNKSIZE-PFF":b="256";break;case "DEFAULT_TILEW":b="256";break;case "DEFAULT_TILEH":b="256";break;case "DEFAULT_IMAGESLOADINGMAX":b="300";break;case "DEFAULT_IMAGELOADTIMEOUT":b="30000";break;case "DEFAULT_TIERSMAXSCALEUP":b="1.15";break;case "DEFAULT_TILESMAXCACHE":b=Z.mobileDevice?"50":"300";break;case "DEFAULT_BACKFILLTHRESHOLD3":b="6";break;case "DEFAULT_BACKFILLDYNAMICADJUST":b="3";break;case "DEFAULT_BACKFILLTHRESHOLD2":b=
"5";break;case "DEFAULT_BACKFILLCHOICE2":b="3";break;case "DEFAULT_BACKFILLTHRESHOLD1":b="3";break;case "DEFAULT_BACKFILLCHOICE1":b="2";break;case "DEFAULT_BACKFILLCHOICE0":b="0";break;case "DEFAULT_PANBUFFER":b=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(b="2");break;case "DEFAULT_BACKFILLBUFFER":b=Z.mobileDevice?"1":"2";break;case "DEFAULT_CANVAS":b="1";break;case "DEFAULT_UIELEMENTBASEZINDEX":b="2000";break;case "DEFAULT_DEBUG":b="0";break;case "DEFAULT_PANSPEED":b="5";break;case "DEFAULT_PANSTEPDISTANCE":b=
"10";break;case "DEFAULT_ZOOMSPEED":b="5";break;case "DEFAULT_ZOOMSTEPDISTANCE":b="0.02";break;case "DEFAULT_ZAPSTEPDURATION":b="30";break;case "DEFAULT_ZAPTVSTEPS":b="20";break;case "DEFAULT_ZAPTVDURATION":b="800";break;case "DEFAULT_CLICKZOOMTIERSKIPTHRESHOLD":b="0.2";break;case "DEFAULT_GESTURETESTDURATION":b="10";break;case "DEFAULT_MOUSEWHEELCOMPLETEDURATION":b="300";break;case "DEFAULT_FADEINSPEED":b="5";break;case "DEFAULT_FADEINSTEP":b="0.067";break;case "DEFAULT_KEYS":b="1";break;case "DEFAULT_MOUSEPAN":b=
"1";break;case "DEFAULT_CLICKPAN":b="1";break;case "DEFAULT_CLICKZOOM":b="1";break;case "DEFAULT_CONSTRAINPAN":b="1";break;case "DEFAULT_INITIALX":b=null;break;case "DEFAULT_INITIALY":b=null;break;case "DEFAULT_INITIALZOOM":b=null;break;case "DEFAULT_MINZOOM":b=null;break;case "DEFAULT_MAXZOOM":b="1";break;case "DEFAULT_BACKGROUNDCOLOR":b="#FBFAFA";break;case "DEFAULT_BACKGROUNDCOLORNOALPHA":b="#FBFAFA";break;case "DEFAULT_BACKGROUNDALPHA":b="0.75";break;case "DEFAULT_BACKGROUNSMALLDALPHA":b="0.75";
break;case "DEFAULT_BUTTONBORDERCOLOR":b="#C0C0C0";break;case "DEFAULT_SKINXMLFILE":b="skinFiles.xml";break;case "DEFAULT_SKINXMLPATH":b="Assets/Skins/Default";break;case "DEFAULT_SKINMODE":b="0";break;case "DEFAULT_NAVIGATORVISIBLE":b="2";break;case "DEFAULT_NAVIGATORWIDTH":b="150";break;case "DEFAULT_NAVIGATORHEIGHT":b="100";break;case "DEFAULT_NAVIGATORLEFT":b="-1";break;case "DEFAULT_NAVIGATORTOP":b="-1";break;case "DEFAULT_NAVIGATORFIT":b=null;break;case "DEFAULT_NAVIGATORRECTANGLECOLOR":b="#0000FF";
break;case "DEFAULT_TOOLBARVISIBLE":b="4";break;case "DEFAULT_TOOLBARPOSITION":b="1";break;case "DEFAULT_TOOLTIPSVISIBLE":b="1";break;case "DEFAULT_HELPVISIBLE":b="1";break;case "DEFAULT_LOGOVISIBLE":b="1";break;case "DEFAULT_LOGOCUSTOMPATH":b=null;break;case "DEFAULT_MINIMIZEVISIBLE":b="1";break;case "DEFAULT_SLIDERVISIBLE":b="1";break;case "DEFAULT_SLIDERTESTDURATION":b="10";break;case "DEFAULT_PANBUTTONSVISIBLE":b="1";break;case "DEFAULT_FULLSCREENVISIBLE":b="1";break;case "DEFAULT_FULLVIEWBACKCOLOR":b=
"white";break;case "DEFAULT_FULLPAGEVISIBLE":b="0";break;case "DEFAULT_INITIALFULLPAGE":b="0";break;case "DEFAULT_VIRTUALPOINTERPATH":b="Assets/VirtualPointer/virtualPointer.png";break;case "DEFAULT_MEASUREVISIBLE":b="0";"undefined"!==typeof Z.parameters&&null!==Z.parameters&&(a=Z.parameters.toString(),b=-1==a.indexOf("zMarkupMode")&&-1==a.indexOf("zEditMode")?"0":"1");break;case "DEFAULT_FSCANCELBUTTONCOLOR":b="\t#F8F8F8";break;case "DEFAULT_ROTATIONVISIBLE":b="0";break;case "DEFAULT_PROGRESSVISIBLE":b=
"1";break;case "DEFAULT_PROGRESSDURATION":b="500";break;case "DEFAULT_PROGRESSTEXT":b=" ";break;case "DEFAULT_SOURCEMAGNIFICATION":b="40";break;case "DEFAULT_UNITS":b="pixels";break;case "DEFAULT_VIRTUALPOINTERVISIBLE":b="0";break;case "DEFAULT_CROSSHAIRSVISIBLE":b="0";break;case "DEFAULT_RULERVISIBLE":b="0";break;case "DEFAULT_RULERLISTTYPE":b="2";break;case "DEFAULT_RULERTEXTFONTSIZE":b="10";break;case "DEFAULT_SCALEBARCOLOR":b="#696969";break;case "DEFAULT_RULERWIDTH":b="150";break;case "DEFAULT_RULERHEIGHT":b=
"30";break;case "DEFAULT_RULERLEFT":b="-1";break;case "DEFAULT_RULERTOP":b="-1";break;case "DEFAULT_COORDINATESVISIBLE":b="0";break;case "DEFAULT_WATERMARKALPHA":b="0.6";break;case "DEFAULT_WATERMARKMINSCALE":b="0.33";break;case "DEFAULT_WATERMARKSPANW":b="512";break;case "DEFAULT_WATERMARKSPANH":b="384";break;case "DEFAULT_COPYRIGHTSCREENCOLOR":b="#D3D3D3";break;case "DEFAULT_COPYRIGHTBUTTONCOLOR":b="#FFFFFF";break;case "DEFAULT_TOURSXMLFILE":b="destinations.xml";break;case "DEFAULT_TOURAUTOSTART":b=
!0;break;case "DEFAULT_TOURAUTOLOOP":b=!0;break;case "DEFAULT_SLIDESXMLFILE":b="slides.xml";break;case "DEFAULT_SLIDESAUTOSTART":b=!0;break;case "DEFAULT_SLIDESAUTOLOOP":b=!0;break;case "DEFAULT_SLIDELISTSOURCE":b="NAME";break;case "DEFAULT_SLIDELISTWIDTH":b="200";break;case "DEFAULT_SLIDELISTPOSITION":b="2";break;case "DEFAULT_SLIDETRANSITIONSPEED":b="2";break;case "DEFAULT_SLIDETRANSITIONSTEP":b="0.05";break;case "DEFAULT_MEASURECAPTIONWIDTH":b="170";break;case "DEFAULT_MEASURECAPTIONHEIGHT":b=
"12";break;case "DEFAULT_MEASURECAPTIONFONTSIZE":b="11";break;case "DEFAULT_HOTSPOTSXMLFILE":b="hotspots.xml";break;case "DEFAULT_HOTSPOTCAPTIONPADDING":b="6";break;case "DEFAULT_MINHOTSPOTCAPTIONPADDING":b="2";break;case "DEFAULT_MAXHOTSPOTCAPTIONPADDING":b="7";break;case "DEFAULT_HOTSPOTCAPTIONFONTSIZE":b="14";break;case "DEFAULT_MINHOTSPOTCAPTIONFONTSIZE":b="3";break;case "DEFAULT_MAXHOTSPOTCAPTIONFONTSIZE":b="14";break;case "DEFAULT_FONTTOPIXELSCONVERSIONFACTOR":b="1.8";break;case "DEFAULT_HOTSPOTSINITIALVISIBILITY":b=
!0;break;case "DEFAULT_HOTSPOTLISTSOURCE":b="NAME";break;case "DEFAULT_HOTSPOTLISTWIDTH":b="200";break;case "DEFAULT_HOTSPOTLISTPOSITION":b="2";break;case "DEFAULT_IMAGEFILTERSVISIBLE":b="0";break;case "DEFAULT_INITIALMAGEFILTERS":b="1";break;case "DEFAULT_IMAGEFILTERLISTWIDTH":b="150";break;case "DEFAULT_FREEHANDVISIBLE":b="1";break;case "DEFAULT_TEXTVISIBLE":b="1";break;case "DEFAULT_ICONVISIBLE":b="1";break;case "DEFAULT_RECTANGLEVISIBLE":b="1";break;case "DEFAULT_POLYGONVISIBLE":b="1";break;case "DEFAULT_ANNOTATIONSXMLFILE":b=
"annotations.xml";break;case "DEFAULT_ANNOTATIONMEDIA":b="circle.png";break;case "DEFAULT_ANNOTATIONMEDIATYPE":b="icon";break;case "DEFAULT_ANNOTATIONSXMLSAVEHANDLERNAME1":b="save";break;case "DEFAULT_ANNOTATIONSXMLSAVEHANDLERNAME2":b="upload";break;case "DEFAULT_ANNOTATIONSINITIALVISIBILITY":b=!0;break;case "DEFAULT_ANNOTATIONPANELWIDTH":b="220";break;case "DEFAULT_ANNOTATIONPANELHEIGHT":b="177";break;case "DEFAULT_ANNOTATIONPANELLABELFONTSIZE":b="11";break;case "DEFAULT_ANNOTATIONPANELLISTFONTSIZE":b=
"11";break;case "DEFAULT_ANNOTATIONPANELTEXTFONTSIZE":b="11";break;case "DEFAULT_ANNOTATIONTEXTPADDINGSMALL":b="2";break;case "DEFAULT_ANNOTATIONTEXTPADDING":b="3";break;case "DEFAULT_ANNOTATIONLABELWIDTH":b="50";break;case "DEFAULT_ANNOTATIONLABELTEXTWIDTH":b="122";break;case "DEFAULT_ANNOTATIONLISTWIDTH":b="160";break;case "DEFAULT_ANNOTATIONLISTNARROWWIDTH":b="88";break;case "DEFAULT_ANNOTATIONMARGIN":b="10";break;case "DEFAULT_ANNOTATIONNOTEHEIGHT":b="82";break;case "DEFAULT_ANNOTATIONPOIVISIBILITY":b=
!0;break;case "DEFAULT_ANNOTATIONLABELVISIBILITY":b=!0;break;case "DEFAULT_ANNOTATIONNOTEVISIBILITY":b=!0;break;case "DEFAULT_LABELSCALESTEPDISTANCE":b="0.02";break;case "DEFAULT_LABELSCALESTEPDURATION":b="30";break;case "DEFAULT_POLYGONLINEWIDTH":b=2;break;case "DEFAULT_POLYGONOPACITY":b=0.3;break;case "DEFAULT_POLYGONVIEWBUFFER":b=300;break;case "DEFAULT_CONTROLPOINTLINEWIDTH":b="1";break;case "DEFAULT_CONTROLPOINTSTROKECOLOR":b="#FFFFFF";break;case "DEFAULT_CAPTIONTEXTCOLOR":b="#FFFFFF";break;
case "DEFAULT_POLYGONLINEWIDTHFREEHAND":b=2;break;case "DEFAULT_FIRSTCONTROLPOINTFILLCOLOR":b="#FFFFFF";break;case "DEFAULT_STANDARDCONTROLPOINTFILLCOLOR":b="#999999";break;case "DEFAULT_CONTROLPOINTRADIUS":b="10";break;case "DEFAULT_HELPSCREENCOLOR":b="lightgray";break;case "DEFAULT_HELPBUTTONCOLOR":b="white";break;case "DEFAULT_MESSAGESCREENCOLOR":b="lightgray";break;case "DEFAULT_MESSAGEBUTTONCOLOR":b="white";break;case "DEFAULT_COORDINATESSCREENCOLOR":b="lightgray";break;case "DEFAULT_TRACEDISPLAYSCREENCOLOR":b=
"#D3D3D3";break;case "DEFAULT_TRACEDISPLAYBUTTONCOLOR":b="#FFFFFF";break;case "DEFAULT_FOCAL":b="1";break;case "DEFAULT_QUALITY":b="55";break;case "ALERT_POLYGONSREQUIRECANVAS":b="Displaying or editing polygon hotspots requires a browser that supports the HTML5 canvas feature.";break;case "ALERT_ROTATIONREQUIRESNEWERBROWSER":b="Rotation requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "ALERT_ZIFREQUIRESNEWERBROWSER":b="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";
break;case "ALERT_HOWTOEDITMESSAGEDURATION":b="4000";break;case "ALERT_HOWTOEDITMESSAGEDURATIONSHORT":b="3000";break;case "ALERT_HOWTOCREATEFIRSTLABEL":b="Tip: Begin by clicking one of the edit mode buttons.\nTips will show only on first use of each button.";break;case "ALERT_HOWTOEDITMODEVIEW":b="Tip: Click or alt-click image to zoom. Click and drag to pan. Alt-click-drag icon to reposition.";break;case "ALERT_HOWTOEDITMODEFREEHAND":b="Tip: Click and drag in image to draw.";break;case "ALERT_HOWTOEDITMODETEXT":b=
"Tip: Click in image to create label.\nEnter text in panel Caption field.";break;case "ALERT_HOWTOEDITMODEICON":b="Tip: First select icon type from list.\nClick image to create icon. Alt-click-drag icon to position.";break;case "ALERT_HOWTOEDITMODERECTANGLE":b="Tip: Click and drag in image to create rectangle.";break;case "ALERT_HOWTOEDITMODEPOLYGON":b="Tip: Click in image to start polygon and add control points.\nRe-click first point to close the polygon.\nOr alt-click in image to leave polygon open.";
break;case "ALERT_HOWTOEDITMODEMEASURE":b="Tip: Click in image to measure length.\nAdditional clicks measure perimeter.\nRe-click starting point to measure area.";break;case "ALERT_HOWTOHELPREMINDER":b="\nClick the '?' button for help.";break;case "ALERT_HOTSPOTCLICKURLDISABLED":b="Tip: hotspot click links are disabled in edit mode\nto allow hotspot positioning by click-dragging:\n";break;case "ALERT_CANCELLINGUNSAVEDEDITS":b="\nCancelling all unsaved edits.";break;case "ALERT_SAVINGUNSAVEDEDITS":b=
"\nSaving unsaved edits.";break;case "ALERT_ANNOTATIONSAVESUCCESSFUL":b="\nXML save complete.";break;case "ALERT_SAVEDISABLEDFORDEMOKEY":b="SAVEDISABLEDFORDEMO";break;case "ALERT_SAVEDISABLEDFORDEMOTEXT":b="\nDemo edits are saved only during the browser session.";break;case "ALERT_PROCESSINGIMAGEFILTER":b="\nProcessing image filter...";break;case "ALERT_PROCESSINGBACKFILLIMAGEFILTER":b="\nProcessing backfill image filter...";break;case "ERROR_MESSAGEDURATION":b="3000";break;case "ERROR_MESSAGEDURATIONMEDIUM":b=
"1500";break;case "ERROR_MESSAGEDURATIONSHORT":b="750";break;case "ERROR_UNSUPPORTEDLOCALVIEWING-BROWSER":b="Chrome, Opera, and Internet Explorer (v11) allow viewing of Zoomify Images only from a web server.  Please use FireFox, Safari, or Internet Explorer (pre-v11) for local viewing.";break;case "ERROR_UNSUPPORTEDLOCALVIEWING-FORMAT-ZIF":b="Browsers allow ZIF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "ERROR_UNSUPPORTEDLOCALVIEWING-FORMAT-PFF":b=
"Browsers allow PFF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "ERROR_IMAGEPATHINVALID":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "ERROR_TILEPATHINVALID":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website might be missing a file:  ";break;case "ERROR_TILEPATHINVALID-ZIF":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";
break;case "ERROR_HOTSPOTORANNOTATIONPATHMISSING":b="Attempt to initiate Edit mode without providing path to hotspots or annotations XML data file.";break;case "ERROR_HOTSPOTPATHINVALID":b="Hotspot media failed to load: possible invalid path, missing file, or legacy hotspot media such as library clip of Flash-based viewer.";break;case "ERROR_HOTSPOTMEDIAINVALID":b="Media of one or more hotspots unsupported: hotspot media of type 'symbol' depend on internal Library of Flash-based viewers.";break;case "ERROR_XMLSAVEHANDLERPATHMISSING":b=
"Attempt to initiate Edit mode without providing path to Save Handler - server side script or other resource to post XML data.";break;case "ERROR_XMLSAVEHANDLERPATHINVALID":b="Annotations cannot be saved: missing or incorrect save\nhandler path parameter, or missing file on server.";break;case "ERROR_MAKINGNETWORKREQUEST-ZIFBYTERANGE":b="Error loading image: ZIF file data request failed. Request content type: ";break;case "ERROR_MAKINGNETWORKREQUEST-ZIFBYTES":b="Error loading image: ZIF file invalid.";
break;case "ERROR_XMLHTTPREQUESTUNSUPPORTED":b="Browser does not support XMLHttpRequest.";break;case "ERROR_MAKINGNETWORKREQUEST-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "ERROR_MAKINGNETWORKREQUEST-PFFIMAGEHEADER":b="Error loading image: image header request invalid.";break;case "ERROR_MAKINGNETWORKREQUEST-PFFIMAGEOFFSET":b="Error loading image: image offset request invalid.";break;case "ERROR_MAKINGNETWORKREQUEST-TOOLBARXML":b=
"Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page.";break;case "ERROR_MAKINGNETWORKREQUEST-SLIDESXML":b="Error loading slides: please make sure slide path in web page matches slides folder location on webserver.";break;case "ERROR_MAKINGNETWORKREQUEST-HOTSPOTSXML":b="Error loading hotspots: please make sure hotspot path in web page matches hotspots folder location on webserver.";
break;case "ERROR_MAKINGNETWORKREQUEST-ANNOTATIONSXML":b="Error loading annotations: please make sure annotation path in web page matches annotation folder location on webserver.";break;case "ERROR_MAKINGNETWORKREQUEST-ANNOTATIONSSAVEHANDLER":b="Error saving annotations: please make sure save handler path in web page matches save handler file location on webserver.";break;case "ERROR_MAKINGNETWORKREQUEST":b="Error making network request:\npossible invalid path or network error.";break;case "ERROR_NETWORKSECURITY":b=
"Error related to network security: ";break;case "ERROR_NETWORKSTATUS":b="Error related to network status: ";break;case "ERROR_NETWORKSTATUSRANGEREQUESTS":b="Error related to network status - range requests and ZIF storage may not be supported: ";break;case "ERROR_CONVERTINGXMLTEXTTODOC":b=" converting XML text to XML doc (DOMParser): ";break;case "ERROR_CONVERTINGXMLDOCTOTEXT":b=" converting XML doc to XML text (DOMParser): ";break;case "ERROR_XMLDOMUNSUPPORTED":b="Browser does not support XML DOM.";
break;case "ERROR_XMLDOCINVALID":b="XML Doc invalid.";break;case "ERROR_XMLINVALID":b="XML invalid.";break;case "ERROR_IMAGEXMLINVALID":b="Image XML invalid.";break;case "ERROR_IMAGEPROPERTIESXMLINVALID":b="Image properties XML invalid.";break;case "ERROR_IMAGEPROPERTIESINVALID":b="Image properties invalid.";break;case "ERROR_IMAGEPROPERTIESPARAMETERINVALID":b="Image properties parameter invalid.";break;case "ERROR_IMAGETILECOUNTINVALID":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";
break;case "ERROR_EXECUTINGCALLBACK":b=" while executing callback: ";break;case "ERROR_IMAGEREQUESTTIMEDOUT":b="\nImage tile request not fulfilled within time period expected";break;case "ERROR_NAVIGATORIMAGEPATHINVALID":b="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "ERROR_SKINXMLINVALID":b="Skin XML invalid.";break;case "ERROR_SKINXMLMISSINGNAMES":b="The skin XML file has one or more faulty name lines.";break;case "ERROR_VIRTUALPOINTERPATHINVALID":b=
"Virtual pointer graphic failed to load: ";break;case "ERROR_WATERMARKPATHINVALID":b="Watermark image failed to load: ";break;case "ERROR_UNKNOWNELEMENTSTYLE":b="Unknown element style - no known method to identify.";break;case "ERROR_UNKNOWNMOUSEPOSITION":b="Unknown mouse position - no known method to calculate.";break;case "ERROR_UNKNOWNMOUSESCROLL":b="Unknown mouse scroll - no known method to calculate.";break;case "ERROR_UNKNOWNWINDOWSIZE":b="Unknown window size - no known method to calculate.";
break;case "ERROR_UNEXPECTEDFILTERSELECTION":b="Selected filter requires assignment of increment or toggle interface.";break;case "TIP_LOGO":b="Launch Zoomify Website";break;case "TIP_MINIMIZE":a="";Z.hotspotPath?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotationPath&&(a="\nAlt-Click: Toggle Label Visibility");b="Minimize Toolbar"+a;break;case "TIP_EXPAND":a="";Z.hotspotPath?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotationPath&&(a="\nAlt-Click: Toggle Label Visibility");b="Expand Toolbar"+
a;break;case "TIP_ZOOMOUT":b="Zoom Out";break;case "TIP_SLIDER":b="Zoom In And Out";break;case "TIP_ZOOMIN":b="Zoom In";break;case "TIP_PANLEFT":b="Pan Left";break;case "TIP_PANUP":b="Pan Up";break;case "TIP_PANDOWN":b="Pan Down";break;case "TIP_PANRIGHT":b="Pan Right";break;case "TIP_RESET":b="Reset Initial View\nAlt-Click: Prior View";break;case "TIP_TOGGLEFULLVIEW":b="Toggle Full View";break;case "TIP_CANCELFULLVIEW":b="Cancel Full View";break;case "TIP_HELP":b="Show Help";break;case "TIP_HELPMARKUP":b=
"Show Markup Help";break;case "TIP_HELPANNOTATION":b="Show Annotation Help";break;case "TIP_ROTATECLOCKWISE":b="Rotate Clockwise 90 Degrees";break;case "TIP_ROTATECOUNTERWISE":b="Rotate Counterwise 90 Degrees";break;case "TIP_VIRTUALPOINTER":b="Click-Drag To Position";break;case "TIP_TOGGLEMEASURING":b="Toggle Measuring";break;case "TIP_TOURPRIOR":b="Prior Destination";break;case "TIP_TOURNEXT":b="Next Destination";break;case "TIP_TOURSTART":b="Start Tour";break;case "TIP_TOURSTOP":b="Stop Tour";
break;case "TIP_SLIDEPRIOR":b="Prior Slide";break;case "TIP_SLIDENEXT":b="Next Slide";break;case "TIP_SLIDESHOWSTART":b="Start Slideshow";break;case "TIP_SLIDESHOWSTOP":b="Stop Slideshow";break;case "TIP_AUDIOMUTE":b="Mute Sound";break;case "TIP_AUDIOON":b="Enable Sound";break;case "TIP_IMAGEFILTERPANELHIDE":b="Hide Image Filter Panel";break;case "TIP_IMAGEFILTERPANELSHOW":b="Show Image Filter Panel";break;case "TIP_IMAGEFILTERPLUS":b="Increase Filter";break;case "TIP_IMAGEFILTERMINUS":b="Decrease Filter";
break;case "TIP_IMAGEFILTERAPPLY":b="Apply Selected Filter";break;case "TIP_IMAGEFILTERCLEAR":b="Clear Last Application Of Selected Filter";break;case "TIP_IMAGEFILTERCLEARALL":b="Clear All Filters";break;case "TIP_VIEWMODE":b="Image Navigation";break;case "TIP_EDITMODECOLORPICKER":b="Toggle Color Palette";break;case "TIP_EDITMODEFREEHAND":b="Freehand Drawings";break;case "TIP_EDITMODETEXT":b="Text Labels";break;case "TIP_EDITMODEICON":b="Icon Labels";break;case "TIP_EDITMODERECTANGLE":b="Rectangle Labels";
break;case "TIP_EDITMODEPOLYGON":b="Polygon Labels";break;case "TIP_EDITMODEMEASURE":b="Measurements";break;case "TIP_POIADD":b="Add New POI";break;case "TIP_POIEDIT":b="Edit Current POI";break;case "TIP_POIDELETE":b="Delete Current POI";break;case "TIP_POICANCEL":b="Cancel POI Changes";break;case "TIP_POISAVE":b="Save POI Changes";break;case "TIP_LABELADD":b="Add New Label";break;case "TIP_LABELEDIT":b="Edit Current Label";break;case "TIP_LABELDELETE":b="Delete Current Label";break;case "TIP_LABELCANCEL":b=
"Cancel Label Changes";break;case "TIP_LABELSAVE":b="Save Label Changes";break;case "TIP_NOTEADD":b="Add New Note";break;case "TIP_NOTEEDIT":b="Edit Current Note";break;case "TIP_NOTEDELETE":b="Delete Current Note";break;case "TIP_NOTECANCEL":b="Cancel Note Changes";break;case "TIP_NOTESAVE":b="Save Note Changes";break;case "TIP_COLOR0":b="Select Color";break;case "TIP_COLOR1":b="Select Color";break;case "TIP_COLOR2":b="Select Color";break;case "TIP_COLOR3":b="Select Color";break;case "TIP_COLOR4":b=
"Select Color";break;case "TIP_COLOR5":b="Select Color";break;case "TIP_COLOR6":b="Select Color";break;case "TIP_COLOR7":b="Select Color";break;case "TIP_LABELSCALEUP":b="Grow Label";break;case "TIP_LABELSCALEDOWN":b="Shrink Label";break;case "TIP_ROLLOVER":b="Hide Icon Until Mouse-Over";break;case "TIP_HELPOK":b="Close Help Display";break;case "TIP_MESSAGEOK":b="Accept And Close Message";break;case "TIP_MESSAGECANCEL":b="Decline And Close Message";break;case "TIP_COPYRIGHTAGREE":b="Agree To Copyright And View Images";
break;case "TIP_COPYRIGHTEXIT":b="Exit And Do Not View Images";break;case "TIP_SHOWGLOBALS":b="Toggle Full Page View";break;case "TIP_TOGGLEDISPLAY":b="Toggle Viewport Display";break;case "TIP_TOGGLEBACKFILL":b="Toggle Viewport Backfill";break;case "TIP_TOGGLECONSTRAINPAN":b="Toggle Constrain Pan";break;case "UI_LOGOLINKDISPLAY":b="www.zoomify.com";break;case "UI_LOGOLINK":b="http://www.zoomify.com";break;case "UI_LOGOLINKTARGET":b="_blank";break;case "UI_NAVIGATORACCESSIBILITYALTATTRIBUTE":b="Navigator Bird's Eye View";
break;case "UI_FVCANCELBUTTONTEXT":b="X";break;case "UI_RULERMIN":b=" min";break;case "UI_RULERMAX":b=" max";break;case "UI_RULERNOPARAMS":b="units in %s";break;case "UI_MEASURELENGTH":b="Length: ";break;case "UI_MEASURELENGTHTOTAL":b="Total length: ";break;case "UI_MEASUREPERIMETER":b="Perimeter: ";break;case "UI_MEASUREAREA":b="Area: ";break;case "UI_MEASURESQUARE":b="\u00b2";break;case "UI_IMAGEFILTERCHOICELISTTEXT":b="Select Filter Type,<>,Brightness,Contrast,Sharpness,Blurriness,<>,Edges,Inversion,Grayscale,Threshold";
break;case "UI_IMAGEFILTERCHOICELISTVALUES":b="null,null,brightness,contrast,sharpness,blurriness,null,edges,inversion,grayscale,threshold";break;case "UI_COPYRIGHTAGREEBUTTONTEXT":b="Agree";break;case "UI_COPYRIGHTEXITBUTTONTEXT":b="Exit";break;case "UI_TOURLISTTITLE":b="Tour Destinations";break;case "UI_SLIDELISTTITLE":b="Slides";break;case "UI_HOTSPOTLISTTITLE":b="Hotspots";break;case "UI_ANNOTATIONPANELLABELPOI":b="POI";break;case "UI_ANNOTATIONPANELLABELLABEL":b="Label";break;case "UI_ANNOTATIONPANELLABELCAPTION":b=
"Caption";break;case "UI_ANNOTATIONPANELLABELTOOLTIP":b="Tooltip";break;case "UI_ANNOTATIONPANELLABELURL":b="Click";break;case "UI_ANNOTATIONPANELLABELSCALE":b="Scale";break;case "UI_ANNOTATIONPANELLABELROLLOVER":b="Rollover";break;case "UI_ANNOTATIONPANELLABELNOTE":b="Note";break;case "UI_ANNOTATIONLABELICONCHOICELISTTEXT":b="Select Icon Type,Circle,Triangle,Square,Arrow Down,Arrow Down Left,Arrow Down Right,Arrow Left,Arrow Right,Arrow Up,Arrow Up Left,Arrow Up Right,Line Horizontal,Line Vertical,External Graphics File";
break;case "UI_ANNOTATIONLABELICONCHOICELISTVALUES":b="shim,circle.png,triangle.png,square.png,arrowDown.png,arrowDownLeft.png,arrowDownRight.png,arrowLeft.png,arrowRight.png,arrowUp.png,arrowUpLeft.png,arrowUpRight.png,lineHorizontal.png,lineVertical.png,External Graphics File";break;case "UI_ANNOTATIONLABELCAPTIONPOSITIONCHOICELISTTEXT":b="Caption position...,Bottom Left,Bottom Center,Bottom Right,Center Left,Center Center,Center Right,Top Left,Top Center,Top Right";break;case "UI_ANNOTATIONLABELCAPTIONPOSITIONCHOICELISTVALUES":b=
"shim,7,8,9,4,5,6,1,2,3";break;case "UI_ANNOTATIONLABELTARGETCHOICELISTTEXT":b="Open URL in...,Same Window,New Window,Parent Frame,Top Frame";break;case "UI_ANNOTATIONLABELTARGETCHOICELISTVALUES":b="shim,_self,_blank,_parent,_top";break;case "UI_HELPDISPLAYWIDTH":b="430";break;case "UI_HELPDISPLAYHEIGHT":b="300";break;case "UI_HELPOKBUTTONTEXT":b="OK";break;case "UI_MESSAGEDISPLAYWIDTH":b="430";break;case "UI_MESSAGEDISPLAYHEIGHT":b="84";break;case "UI_MESSAGECANCELBUTTONTEXT":b="Cancel";break;case "UI_MESSAGEOKBUTTONTEXT":b=
"OK";break;case "UI_COORDINATESDISPLAYWIDTH":b="290";break;case "UI_COORDINATESDISPLAYHEIGHT":b="200";break;case "UI_COORDINATESDISPLAYTEXT":b="Current Mouse Coordinates\n(Alt-Click add, select, right-click Copy)";break;case "UI_TRACEDISPLAYDEBUGINFOTEXT":b="This panel is enabled using the HTML parameter 'zDebug=1' (basic) or 'zDebug=2' (adds tile tracing). It can be called in JavaScript as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";
break;case "UI_TRACEDISPLAYSHOWGLOBALSBUTTONTEXT":b="Show Globals";break;case "UI_TRACEDISPLAYTOGGLEDISPLAYBUTTONTEXT":b="Toggle Display";break;case "UI_TRACEDISPLAYTOGGLEBACKFILLBUTTONTEXT":b="Toggle Backfill";break;case "UI_TRACEDISPLAYTOGGLECONSTRAINPANBUTTONTEXT":b="Toggle Constrain Pan";break;case "CONTENT_HELPTOOLBAR":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply click the image to zoom, alt-click to zoom out, or click-drag to pan.<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.</font></p>";
break;case "CONTENT_HELPMARKUP":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Markup Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>Markup Mode allows fast, easy addition of labels to a zoomable image.<br><br><strong>Creating A Label</strong><br><br>Click any of the buttons at the top of the Markup Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Next, click or click-drag in the image:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and positioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons but the caption dynamically changes to display the current length or area.<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul>Use the Color button to set a color. The color selected affects freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode.<br><br><strong>Editing Label Values</strong><br><br>The Markup Panel also displays the name and caption of the currently selected label for easy editing. Use the TAB key to implement any edits or click in the image.<br><br>Delete a label using the trash can button. The label will be removed from the image and the Markup Panel will display the prior label in the label list.<br><br>Save a label using the button with the disk icon. Or, use the label list to change the selected label - the previously selected label will be automatically saved.<br><br><i><strong>Special Tips:</strong><ul><li>Alt-click any label to display its name and caption in the Markup Panel for editing.<li>Alt-click-drag any completed label to reposition it in the image.<li>If using a mouse, hold the cursor over any button at any time to see a helpful reminder.</ul></i></font></p>";
break;case "CONTENT_HELPANNOTATIONEDITING":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Editing Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive, visual means, to add <i>Points of Interest</i> to a zoomable image, including the option of associated <i>Labels</i> and <i>Notes</i>.<br><br><strong>Point Of Interests</strong><br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>To create a Point Of Interest, click the <i>Add</i> button beneath the Point Of Interest choice list at the top of the Annotation Panel to create a new Point of Interest. Or, click the <i>Edit</i> button to modify the current POI. If no Annotations have been created, a placeholder POI will be the only item in the Point Of Interest list.<br><br><i><strong>More Buttons:</strong></i><br><br>When the Add button is clicked, two different buttons will be displayed: <i>Save</i> and <i>Cancel</i>. If the Edit button is clicked, a third button will also be displayed: <i>Delete</i>.<br><br>Save a Point Of Interest using the button with the disk icon. Cancel edits to a Point Of Interest using the button with the large X icon.<br><br>Delete a Point Of Interest using the trash can button. The POI will be removed from the list and the prior POI in the list will be displayed.<br><br><i><strong>Important:</strong><ul><li>Changing the selected POI in the POI list will automatically save any edits to the current POI.<li>Clicking any of the buttons Save, Cancel, and Delete will leave the Add or Edit mode and return to Annotation Panel to its default display.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Labels</strong><br><br>To add a new Label to the current Point Of Interest, click the Add button beneath the Label section of the Annotation Panel. Or, click the Edit button to edit the current Label. If no Labels have been created yet, the Label list will be empty.<br><br>If adding a new Label, click any of the buttons at the top of the Label section of the Annotation Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Now click or click-drag in the image to create a new Label:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and repositioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons except that the caption dynamically changes to display the current length or area.</ul>Use the Color button to set the color of new freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode in the current Label.<br><br><i><strong>Important:</strong><ul><li>In Add mode, multiple clicks or click-drags will create multiple Labels - to support rapid annotation authoring.<li>In Edit mode, any clicks or click-drags will simple replace the current Label in the image.<li>Alt-click any label in the image to display its values in the Annotatoin Panel for editing. (Add or Edit mode)<li>Alt-click-drag any completed label in the image to reposition it.  (Add or Edit mode)<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul></i><i><strong>More Label Values:</strong></i><br><br>The Annotation Panel also displays the name, caption, tooltip, and click-URL of of the currently selected label for easy editing. Use the TAB key to implement any edits or click in another text field or in the image. <br><br>Two choice lists are also included: the first allows the caption to be positioned relative to the Label in the image while the second determines whether the click-URL (if any) will open in the current browser window or a new browser window or a specific frame in the web page. <br><br>The Scale buttons allow the Label to be sized in the image.  The Rollover checkbox can be used to hide a Label in the image until the cursor is over it (not supported by mobile devices).<br><br>The Save, Cancel, and Delete buttons for Labels work just as they do with Points of Interest, as described above. And remember, changing the selected Label in the Label list will automatically save any edits to the current Label. Alt-clicking or alt-click-dragging a Label in the image will also change the current Label in the Label list and cause any edits to be saved (see the first two Special Tips below).<br><br><i><strong>Important:</strong><ul><li>Changing the selected Label by clicking or click-dragging it in the image will change the selected Point Of Interest if the newly selected Label is associated with a different POI - if editing is in progress the edits will be automatically saved.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Notes</strong><br><br>To add a new Note to the current Point Of Interest, click the Add button beneath the Note section of the Annotation Panel. Or, click the Edit button to edit the current Note. If no Notes have been created yet, the Note list will be empty.<br><br>Use the name and text fields to easily add or edit the Note values. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area. Notes can contain carriage returns.<br><br>The Save, Cancel, and Delete buttons for Notes work just as they do with Points of Interest, as described above. And remember, changing the selected Note in the Note list will automatically save any edits to the current Note.</font></p>";
break;case "CONTENT_HELPCONCATENATOR":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>\\/ \\/ \\/</strong></font></p>";break;case "CONTENT_HELPANNOTATIONVIEWING":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive display of <i>Points of Interest</i> in a zoomable image, along with associated <i>Labels</i> and <i>Notes</i>, if any.<br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>A Label is a visual element in the image: a freehand drawing, text caption, rectangle or other polygon, or a measurement.<br><br>A Note is text associated with a Point Of Interest. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area.</font></p>";
break;case "CONTENT_SKIPUSERNAMENAME":b="Anonymous";break;case "CONTENT_FIRSTPOINAME":b="Whole Image";break;case "CONTENT_POINAME":b="New Point Of Interest ";break;case "CONTENT_POIUSER":b=this.getResource("CONTENT_SKIPUSERNAMENAME");break;case "CONTENT_HOTSPOTNAME":b="New Hotspot ";break;case "CONTENT_HOTSPOTCAPTION":b="Caption for hotspot ";break;case "CONTENT_LABELNAME":b="New Label ";break;case "CONTENT_LABELCAPTION":b="Caption for label ";break;case "CONTENT_POLYGONCAPTION":b="Polygon ";break;
case "CONTENT_LABELTOOLTIP":b="Tooltip for label ";break;case "CONTENT_LABELCLICKURL":b="";break;case "CONTENT_LABELUSER":b=this.getResource("CONTENT_SKIPUSERNAMENAME");break;case "CONTENT_NOTENAME":b="New Note ";break;case "CONTENT_NOTETEXT":b="Note text";break;case "CONTENT_NOTEUSER":b=this.getResource("CONTENT_SKIPUSERNAMENAME");break;case "CONTENT_ANNOTATIONPLACEHOLDERLISTTEXT":b="List creation in progress...";break;case "CONTENT_ANNOTATIONPLACEHOLDERNOTETEXT":b="Note loading in progress...";
break;case "CONTENT_CAPTIONTEXTCOLOR":b="#000000";break;case "CONTENT_CAPTIONBACKCOLOR":b="#FFFFFF";break;case "CONTENT_POLYGONLINECOLOR":b="#FFFFFF";break;case "CONTENT_POLYGONFILLCOLOR":b="#FFFFFF";break;case "CONTENT_CAPTIONTEXTVISIBLE":b="1";break;case "CONTENT_CAPTIONBACKVISIBLE":b="1";break;case "CONTENT_POLYGONLINEVISIBLE":b="1";break;case "CONTENT_POLYGONFILLVISIBLE":b="1";break;case "CONTENT_CAPTIONPOSITION":b="8";break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&
"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},clearCanvas:function(a){a=a.getContext("2d");a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},createCallback:function(a,b){for(var d=[],e=2,f=arguments.length;e<f;e++)d[d.length]=arguments[e];return function(){for(var e=d.concat([]),f=0,s=arguments.length;f<s;f++)e[e.length]=arguments[f];return b.apply(a,e)}},validateCallback:function(a){a=Z.Utils.arrayIndexOfObjectValue(Z.callbacks,
"callbackEvent",a);-1!=a&&(a=Z.callbacks[a].callbackFunction(),"function"===typeof a&&a())},createContainerElement:function(a,b,d,e,f,h,r,s,t,D,y,n,I,C,R,U,P){var F=document.createElement(a);this.isStrVal(b)&&(F.id=b);b=F.style;b.display=this.isStrVal(d)?d:"inline-block";b.position=this.isStrVal(e)?e:"static";b.overflow=this.isStrVal(f)?f:"hidden";"canvas"==a?(this.isStrVal(h)&&F.setAttribute("width",h),this.isStrVal(r)&&F.setAttribute("height",r)):(this.isStrVal(h)&&(b.width=h),this.isStrVal(r)&&
(b.height=r));this.isStrVal(s)&&(b.left=s);this.isStrVal(t)&&(b.top=t);b.borderStyle=this.isStrVal(D)?D:"none";b.borderWidth=this.isStrVal(y)?y:"0px";b.borderColor="#696969";b.background=this.isStrVal(n)?n:"transparent none";b.margin=this.isStrVal(I)?I:"0px";b.padding=this.isStrVal(C)?C:"0px";b.whiteSpace=this.isStrVal(R)?R:"normal";this.isStrVal(U)&&(b.cursor=U);"undefined"!==P&&P&&(Z.mobileDevice?Z.Utils.addEventListener(F,"touchstart",Z.Utils.preventDefault):(Z.Utils.addEventListener(F,"mousedown",
Z.Utils.preventDefault),Z.Utils.addEventListener(F,"contextmenu",Z.Utils.preventDefault)));return F},createCenteredElement:function(a,b){var d=this.createContainerElement("div"),e=[];e[e.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';e[e.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';e[e.length]=
'<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';d.innerHTML=e.join("");for(var e=d=d.firstChild,f=d.getElementsByTagName("div");0<f.length;)e=f[0],f=e.getElementsByTagName("div");e.appendChild(a);return d},createTextElement:function(a,b,d,e,f,h,r,s,t,D,y,n,I,C,R,U,P,F){d=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",d,e,f,h,s,t,"white","0px",r,"normal");e=document.createElement("textarea");
d.appendChild(e);f=e.style;e.id=a;e.value=b;e.readOnly=D;f.width="100%";f.height="100%";f.margin="0";f.border="0";this.isStrVal(y)&&(f.fontFamily=y);this.isStrVal(n)&&(f.fontSize=n);this.isStrVal(I)&&(f.resize=I);this.isStrVal(C)&&(e.columns=C);this.isStrVal(R)&&(e.rows=R);this.isStrVal(U)&&(f.overflowX=U);this.isStrVal(P)&&(f.overflowY=P);this.isStrVal(F)&&(e.wrap=F,"off"==F&&(f.whiteSpace="nowrap"));return d},createSelectElement:function(a,b,d,e,f,h,r,s,t){var D=document.createElement("select");
D.id=a;Z.Utils.isStrVal(b)&&"none"!=b&&(D.options[0]=new Option(b,null));a=0;for(b=d.length;a<b;a++)D.options[D.options.length]=new Option(d[a].text,d[a].value);D.onchange=t;d=D.style;d.width=e+"px";d.position="absolute";d.left=f+"px";d.top=h+"px";d.fontSize=null==r?"11px":r+"px";d.fontFamily="verdana";d.visibility=s;return D},updateSelectElement:function(a,b,d){if(a){var e=-1!=a.selectedIndex?a.selectedIndex:0;a.innerHTML="";for(var f=0,h=b.length;f<h;f++)a.options[a.options.length]=new Option(b[f].text,
b[f].value.toString());"undefined"!==typeof d&&null!==d&&(b=parseInt(Z.Utils.arrayIndexOfObjectValue(b,"value",d),10),-1!=b&&(e=b));b=a.options.length-1;a.selectedIndex=e<=b?e:b}},getChildElementByID:function(a,b){for(var d=null,e=0,f=a.childNodes.length;e<f&&(d=a.childNodes[e],d.id!=b)&&(d=Z.Utils.getChildElementByID(d,b),null===d);e++);return d},getElementPosition:function(a){for(var b=0,d=0,e="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,e);f;)b+=a.offsetLeft,d+=a.offsetTop,
e&&(a=this.getPageScroll(),b+=a.x,d+=a.y),a=f,e="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,e);return new this.Point(b,d)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,"");this.showMessage(this.getResource("ERROR_UNKNOWNELEMENTSTYLE"))},
getElementStyleProperty:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null).getPropertyValue(b);this.showMessage(this.getResource("ERROR_UNKNOWNELEMENTSTYLE"))},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=null,d=a.touches;a=a.changedTouches;"undefined"!==typeof d?b=d[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=
0,d=0;"DOMMouseScroll"==a.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,d=a.screenY):"number"===typeof a.pageX?(b=a.pageX,d=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("ERROR_UNKNOWNMOUSEPOSITION"));return new this.Point(b,d)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:
"number"===typeof a.detail?b=-1*a.detail:this.showMessage(this.getResource("ERROR_UNKNOWNMOUSESCROLL"));return b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,d=document.documentElement||{},e=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(e.scrollLeft||e.scrollTop)a=e.scrollLeft,b=e.scrollTop;else if(d.scrollLeft||d.scrollTop)a=d.scrollLeft,b=d.scrollTop;return new this.Point(a,b)},getScreenSize:function(){return new this.Point(screen.width,
screen.height)},getWindowSize:function(){var a=0,b=0,d=document.documentElement||{},e=document.body||{};"number"===typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):d.clientWidth||d.clientHeight?(a=d.clientWidth,b=d.clientHeight):e.clientWidth||e.clientHeight?(a=e.clientWidth,b=e.clientHeight):this.showMessage(this.getResource("ERROR_UNKNOWNWINDOWSIZE"));return new this.Point(a,b)},Button:function(a,b,d,e,f,h,r,s,t,D,y,n,I,C,R,U,P,F,K,O){a=Z.Utils.createContainerElement("span",a,
"inline-block","absolute","hidden",r,s,t,D,C,R,U,P,F,K,O);if(Z.Utils.isStrVal(b)){var q=document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(q));Z.Utils.setTextNodeStyle(q,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{d=Z.Utils.stringRemoveTrailingSlashCharacters(d);var H=Z.Utils.createGraphicElement(d+"/"+e),ga=Z.Utils.createGraphicElement(d+"/"+f),X=Z.Utils.createGraphicElement(d+"/"+h);H.style.width=ga.style.width=X.style.width=
r;H.style.height=ga.style.height=X.style.height=s;H.style.position=ga.style.position=X.style.position="absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(H.style.top=ga.style.top=X.style.top="");ga.style.visibility=X.style.visibility="hidden";H.alt=ga.alt=X.alt="";"undefined"!==typeof I&&Z.Utils.isStrVal(I)&&(H.alt=Z.Utils.getResource(I));a.appendChild(H);a.appendChild(ga);a.appendChild(X)}Z.mobileDevice?(Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(a,
"touchend",Z.Utils.preventDefault),Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault)):(Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mouseup",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mouseout",Z.Utils.stopPropagation),"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(H,"contextmenu",Z.Utils.preventDefault),
Z.Utils.addEventListener(ga,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(X,"contextmenu",Z.Utils.preventDefault)));Z.Utils.isStrVal(b)||(Z.Utils.disableTextInteraction(q),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.isStrVal(I)&&(a.title=Z.Utils.getResource(I));Z.Utils.setButtonHandler(a,y,n);this.elmt=a},buttonSize:function(a,b,d){var e=a.style;e.width=b+"px";e.height=d+"px";d=a.firstChild;e=a.childNodes[1];a=a.childNodes[2];d&&e&&
a&&(d.style.width=e.style.width=a.style.width=b+"px",d.style.height=e.style.height=a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);Z.Utils.setButtonState(a,"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.buttonEventsHandler)},clearButtonSettings:function(a){var b=a.firstChild,d=a.childNodes[1],e=a.childNodes[2];b&&d&&e&&(b.style.visibility=d.style.visibility=e.style.visibility="hidden",Z.mobileDevice?(Z.Utils.removeEventListener(a,"touchstart",Z.Toolbar.buttonEventsHandler),
Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.buttonEventsHandler),Z.Utils.removeEventListener(a,"touchcancel",Z.Toolbar.buttonEventsHandler)):(Z.Utils.removeEventListener(b,"mouseover",Z.Toolbar.buttonEventsHandler),Z.Utils.removeEventListener(d,"mousedown",Z.Toolbar.buttonEventsHandler),Z.Utils.removeEventListener(d,"mouseout",Z.Toolbar.buttonEventsHandler),Z.Utils.removeEventListener(e,"mouseup",Z.Toolbar.buttonEventsHandler)));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.buttonEventsHandler);
Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.buttonEventsHandler);Z.Utils.removeEventListener(a,"mouseout",Z.Toolbar.buttonEventsHandler);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.buttonEventsHandler)},setButtonState:function(a,b){var d="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];d&&(d.style.visibility="visible")},setButtonHandler:function(a,b,d){d="undefined"!==d?d:Z.Toolbar.buttonEventsHandler;targetEvent=Z.mobileDevice?"mousedown"==b?"touchstart":"touchend":"undefined"!==
b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&(a=a.childNodes[1]);Z.Utils.addEventListener(a,targetEvent,d)},Checkbox:function(a,b,d,e,f,h,r,s,t){var D=Z.Utils.createContainerElement("div","containerFor-"+a,"inline-block","absolute","hidden",d,e,f,h,"none","0px","transparent none",
"0px","0px","normal"),y=document.createElement("input");D.appendChild(y);y.type="checkbox";y.id=a;y.value=b;y.width=d;y.height=e;a=D.style;a.width=d+"px";a.height=e+"px";a.left=f+"px";a.top=h+"px";Z.mobileDevice?Z.Utils.addEventListener(y,"touchstart",s):Z.Utils.addEventListener(y,r,s);Z.tooltipsVisible&&Z.Utils.isStrVal(t)&&(y.title=Z.Utils.getResource(t));return D},Graphic:function(a,b,d,e,f,h,r,s){b=Z.Utils.stringRemoveTrailingSlashCharacters(b);b=Z.Utils.createGraphicElement(d?b+"/"+d:b);d=b.style;
d.width=e;d.height=f;"undefined"!==typeof s&&Z.Utils.isStrVal(s)?b.alt=Z.Utils.getResource(s):b.alt="";d=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",e,f,h,r,"none","0px","transparent none","0px","0px","normal");d.appendChild(b);this.elmt=d;Z.mobileDevice?Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault):Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault)},createGraphicElement:function(a){var b=
this.createContainerElement("img"),d=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(d=this.createContainerElement("span",null,"inline-block"),b.onload=function(){d.style.width=d.style.width||b.width+"px";d.style.height=d.style.height||b.height+"px";b=b.onload=null},d.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale")'):(d=b,d.src=a);return d},graphicSize:function(a,b,d){var e=a.style;e.width=b+"px";e.height=d+"px";a=a.firstChild.style;a.width=b+
"px";a.height=d+"px"},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,d){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0;this.z="number"===typeof d?d:0},Range:function(a,b){this.start="number"===typeof a?a:0;this.end="number"===typeof b?b:0},stringReadable:function(a){return a.replace(RegExp("%20","g")," ")},stringUpperCaseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},stringMultiply:function(a,b){var d=Math.ceil(Math.log(b)/
Math.LN2),e=a;do e+=e;while(0<--d);return e.slice(0,a.length*b)},stringRemoveTrailingSlashCharacters:function(a){return"/"==a.slice(-1,a.length)?a.slice(0,a.length-1):a},stringRemoveTabAndLineWrapCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");return a=a.replace(/\t/g,"")},setHTMLTextDefaultCaptionStyle:function(a,b,d,e,f,h,r,s,t,D,y,n,I){a=a.style;-1==b.indexOf("color=")&&(a.color=d);-1==b.indexOf("font-family=")&&(a.fontFamily=e);-1==b.indexOf("font-size=")&&(a.fontSize=f);-1==
b.indexOf("font-size-adjust=")&&(a.fontSizeAdjust=h);-1==b.indexOf("font-style=")&&(a.fontStyle=r);-1==b.indexOf("font-stretch=")&&(a.fontStretch=s);-1==b.indexOf("font-variant=")&&(a.fontVariant=t);-1==b.indexOf("font-weight=")&&(a.fontWeight=D);-1==b.indexOf("line-height=")&&(a.lineHeight=y);-1==b.indexOf("text-align=")&&(a.textAlign=n);-1==b.indexOf("text-decoration=")&&(a.textDecoration=I)},setHTMLTextStyle:function(a,b,d,e,f,h,r,s,t,D,y,n){a=a.style;a.color=b;a.fontFamily=d;a.fontSize=e;a.fontSizeAdjust=
f;a.fontStyle=h;a.fontStretch=r;a.fontVariant=s;a.fontWeight=t;a.lineHeight=D;a.textAlign=y;a.textDecoration=n},setTextAreaStyle:function(a,b,d,e,f,h,r,s,t,D,y,n,I){a=a.firstChild.style;a.color=b;a.fontFamily=d;a.fontSize=e;a.fontSizeAdjust=f;a.fontStyle=h;a.fontStretch=r;a.fontVariant=s;a.fontWeight=t;a.lineHeight=D;a.textAlign=y;a.textDecoration=n;a.padding=I},setTextNodeStyle:function(a,b,d,e,f,h,r,s,t,D,y,n){a=a.parentNode.style;a.color=b;a.fontFamily=d;a.fontSize=e;a.fontSizeAdjust=f;a.fontStyle=
h;a.fontStretch=r;a.fontVariant=s;a.fontWeight=t;a.lineHeight=D;a.textAlign=y;a.textDecoration=n},xmlConvertTextToDoc:function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(d){this.showMessage(d.name+this.getResource("ERROR_CONVERTINGXMLTEXTTODOC")+d.message)}else if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(e){this.showMessage(e.name+this.getResource("ERROR_CONVERTINGXMLTEXTTODOC")+e.message)}else this.showMessage(this.getResource("ERROR_XMLDOMUNSUPPORTED"));
return b},xmlConvertDocToText:function(a){var b=null;if(window.ActiveXObject)try{b=a.xml}catch(d){this.showMessage(d.name+this.getResource("ERROR_CONVERTINGXMLDOCTOTEXT")+d.message)}else if(window.DOMParser)try{b=(new XMLSerializer).serializeToString(a)}catch(e){this.showMessage(e.name+this.getResource("ERROR_CONVERTINGXMLDOCTOTEXT")+e.message)}else this.showMessage(this.getResource("ERROR_XMLDOMUNSUPPORTED"));return b},arrayClone:function(a,b,d){d=[];switch(a){case "pois":a=0;for(var e=b.length;a<
e;a++)d[d.length]={text:b[a].text,value:b[a].value,id:b[a].id,x:b[a].x,y:b[a].y,z:b[a].z};break;case "labels":a=0;for(e=b.length;a<e;a++)d[d.length]={text:b[a].text,value:b[a].value,poiID:b[a].poiID,id:b[a].id};break;case "hotspots":a=0;for(e=b.length;a<e;a++)d[d.length]={id:b[a].id,internalID:b[a].internalID,poiID:b[a].poiID,name:b[a].name,mediaType:b[a].mediaType,media:b[a].media,audio:b[a].audio,image:b[a].image,iW:b[a].iW,iH:b[a].iH,x:b[a].x,y:b[a].y,z:b[a].z,xScale:b[a].xScale,yScale:b[a].yScale,
clickURL:b[a].clickURL,urlTarget:b[a].urlTarget,rollover:b[a].rollover,caption:b[a].caption,tooltip:b[a].tooltip,user:b[a].user,date:b[a].date,textColor:b[a].textColor,backColor:b[a].backColor,lineColor:b[a].lineColor,fillColor:b[a].fillColor,textVisible:b[a].textVisible,backVisible:b[a].backVisible,lineVisible:b[a].lineVisible,fillVisible:b[a].fillVisible,captionPosition:b[a].captionPosition,saved:b[a].saved,visibility:b[a].visibility,captionHTML:b[a].captionHTML,tooltipHTML:b[a].tooltipHTML,polyClosed:b[a].polyClosed,
polygonPts:b[a].polygonPts,showFor:b[a].showFor,transition:b[a].transition,changeFor:b[a].changeFor,rotation:b[a].rotation};break;case "polygon":a=0;for(e=b.length;a<e;a++)d[d.length]={x:b[a].x,y:b[a].y};break;case "notes":a=0;for(e=b.length;a<e;a++)d[d.length]={text:b[a].text,value:b[a].value,noteText:b[a].noteText,poiID:b[a].poiID,id:b[a].id};break;case "magnifications":for(a=0,e=b.length;a<e;a++)d[d.length]={text:b[a].text,value:b[a].value}}return d},arrayIndexOf:function(a,b,d){d?0>d&&(d=Math.max(0,
a.length+d)):d=0;for(var e=a.length;d<e;d++)if(a[d]===b)return d;return-1},arrayIndexOfObjectValue:function(a,b,d,e){if("undefined"!==typeof a){e?0>e&&(e=Math.max(0,a.length+e)):e=0;for(var f=a.length;e<f;e++)if(a[e][b]===d)return e}return-1},arrayIndexOfObjectTwoValues:function(a,b,d,e,f,h){if("undefined"!==typeof a){e?0>e&&(e=Math.max(0,a.length+e)):e=0;for(var r=a.length;e<r;e++)if(a[e][b]===d&&a[e][f].toString()===h.toString())return e}return-1},arrayIndexOfSubstring:function(a,b,d){d?0>d&&(d=
Math.max(0,a.length+d)):d=0;for(var e=a.length;d<e;d++)if(-1!=a[d].indexOf(b))return d;return-1},arrayIndexOfObjectValueSubstring:function(a,b,d,e,f){e?0>e&&(e=Math.max(0,a.length+e)):e=0;for(var h=a.length;e<h;e++)if(f){if(-1!=a[e][b].toLowerCase().indexOf(d))return e}else if(-1!=a[e][b].indexOf(d))return e;return-1},arrayIntersect:function(a,b){for(var d,e,f,h=[],r=0,s=a.length;r<s;r++){d=a[r];f=!1;for(var t=0,D=b.length;t<D&&d>=(e=b[t]);t++)if(e==d){f=!0;break}f&&(h[h.length]=a[r])}return h},arraySplice:function(a,
b,d){if(Z.arraySpliceSupported)if(3<arguments.length)for(var e=3,f=arguments.length;e<f;e++)a.splice(b,d,arguments[e]);else a.splice(b,d);else{0>d&&(d=0);var h=[];if(3<arguments.length)for(e=3,f=arguments.length;e<f;e++)h[h.length]=arguments[e];for(var e=Z.Utils.arraySubarray(a,0,b),r=Z.Utils.arraySubarrayLen(a,b,d),f=Z.Utils.arraySubarray(a,b+d),h=e.concat(h,f),e=a.length=0,f=h.length;e<f;e++)a[a.length]=h[e];a=r}return a},arraySubarraySimple:function(a,b){return this.slice(a,b)},arraySortNumericAscending:function(a,
b,d){a.sort(function(a,b){return a-b});return a},arraySortNumericDescending:function(a,b,d){a.sort(function(a,b){return b-a});return a},arraySubarray:function(a,b,d){0>b&&(b=0);if(!d||d>a.length)d=a.length;if(b==d)return[];for(var e=[];b<d;b++)e[e.length]=a[b];return e},arraySubarrayLen:function(a,b,d){if(b>=a.length||d&&0>=d)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);if(!d||d+b>a.length)d=a.length-b;for(var e=[],f=b;f<b+d;f++)e[e.length]=a[f];return e},arraySubtract:function(a,b){for(var d=
0,e=a.length;d<e;d++){for(var f=a[d],h=!1,r=0,s=b.length;r<s&&f>=(elmt2=b[r]);r++)if(elmt2==f){h=!0;break}h&&(a=Z.Utils.arraySplice(a,d--,1))}return a},arrayToArrayOfStrings:function(a){for(var b=[],d=0,e=a.length;d<e;d++)b[d]="undefined"!==typeof a[d]&&"undefined"!=a[d]&&null!==a[d]?a[d].toString():"";return b},arrayUnique:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},playAudio:function(a,b){Z.audioMuted||("undefined"!==typeof a&&null!==a?a.play():Z.Utils.isStrVal(b)&&
(new Audio(b)).play())},loadAudio:function(a){Z.Utils.isStrVal(a)&&(new Audio(a)).load()},calculatePointsDistance:function(a,b,d,e){return Math.sqrt((a-=d)*a+(b-=e)*b)},convertPixelsToUnits:function(a,b,d){var e=1;"undefined"!==typeof b&&null!==b&&0!=b?e=b:"undefined"!==typeof d&&null!==d&&0!=d&&(e=Z.imageW/d);return a/e},polygonArea:function(a,b,d,e){if("undefined"===typeof e||null===e)e=5;a=a.slice(0);var f=a.length;b?(a[f]={x:a[0].x,y:a[0].y},f+=1):"undefined"!==typeof d&&null!==d&&(a[f]={x:d.x,
y:d.y},f+=1);for(var h=d=b=0,f=f-1;h<f;h++)b+=a[h].x*a[h+1].y,d+=a[h].y*a[h+1].x;a=Z.Utils.convertPixelsToUnits((b-d)/2,Z.pixelsPerUnit,Z.unitsPerImage);return a=Z.Utils.roundToDigitLimit(Math.abs(a),e)},polygonCenter:function(a,b,d){var e=0,f=0;if("undefined"!==typeof a&&null!==a&&0<a.length){e=a.slice(0);a=e.length;b?(e[a]={x:e[0].x,y:e[0].y},a+=1):"undefined"!==typeof d&&null!==d&&(e[a]={x:d.x,y:d.y},a+=1);f=e[0].x;b=e[0].y;var h=e[0].x;d=e[0].y;for(var r=1;r<a;r++)f=Math.min(f,e[r].x),b=Math.min(b,
e[r].y),h=Math.max(h,e[r].x),d=Math.max(d,e[r].y);e=f+(h-f)/2;f=b+(d-b)/2}return new Z.Utils.Point(e,f)},polygonDimensions:function(a,b){var d=0,e=0;if("undefined"!==typeof a&&null!==a&&0<a.length){d=a.slice(0);e=d.length;"undefined"!==typeof b&&null!==b&&(d[e]={x:b.x,y:b.y});for(var f=d[0].x,e=d[0].y,h=d[0].x,r=d[0].y,s=1,t=a.length;s<t;s++)d[s].x<f&&(f=d[s].x),d[s].x>h&&(h=d[s].x),d[s].y<e&&(e=d[s].y),d[s].y>r&&(r=d[s].y);d=h-f;e=r-e}return new Z.Utils.Point(d,e)},polygonPerimeter:function(a,b,
d,e){if("undefined"===typeof e||null===e)e=5;a=a.slice(0);var f=a.length;b?(a[f]={x:a[0].x,y:a[0].y},f+=1):"undefined"!==typeof d&&null!==d&&(a[f]={x:d.x,y:d.y},f+=1);d=b=0;for(f-=1;d<f;d++)b+=Z.Utils.calculatePointsDistance(a[d].x,a[d].y,a[d+1].x,a[d+1].y);b=Z.Utils.convertPixelsToUnits(b,Z.pixelsPerUnit,Z.unitsPerImage);return b=Z.Utils.roundToDigitLimit(Math.abs(b),e)},fullScreenView:function(a,b,d){if("undefined"===typeof d||null===d)d=!1;b?document.documentElement.requestFullScreen?(a.requestFullScreen(),
Z.Utils.addEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.documentElement.msRequestFullscreen?(a.msRequestFullscreen(),Z.Utils.addEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler)):document.documentElement.mozRequestFullScreen?(a.mozRequestFullScreen(),Z.Utils.addEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.documentElement.webkitRequestFullScreen&&(a.webkitRequestFullScreen(),Z.Utils.addEventListener(document,
"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.cancelFullScreen?(d||document.cancelFullScreen(),Z.Utils.removeEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.msExitFullscreen?(d||document.msExitFullscreen(),Z.Utils.removeEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler)):document.mozCancelFullScreen?(d||document.mozCancelFullScreen(),Z.Utils.removeEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):
document.webkitCancelFullScreen&&(d||document.webkitCancelFullScreen(),Z.Utils.removeEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler))},rotatePoint:function(a,b,d){var e=Math.PI/180*-d;d=a*Math.cos(e)-b*Math.sin(e);a=a*Math.sin(e)+b*Math.cos(e);return new Z.Utils.Point(d,a)},rotateElement:function(a,b){if(b!=Z.imageR){var d="rotate("+b.toString()+"deg)";a.transform=d;a.msTransform=d;a.mozTransform=d;a.webkitTransform=d;a.oTransform=d}},getDisplayPositionRotated:function(a,
b){if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var d=parseFloat(a.width)/2,e=parseFloat(a.height)/2,f=Z.Utils.rotatePoint,h=new Z.Utils.Point(0,0);0!=b&&(90==b?h=f(-d,e,-b):180==b?h=f(d,e,-b):270==b&&(h=f(d,-e,-b)),h.x+=d,h.y+=e);return new Z.Utils.Point(h.x,h.y)},translateElement:function(a,b,d){b="translate("+b.toString()+"px,"+d.toString()+"px)";a.transform=b;a.msTransform=b;a.mozTransform=b;a.webkitTransform=b;a.oTransform=b},filterImage:function(a,b,d){var e=a.data;switch(b){case "brightness":if("undefined"===
typeof d||null===d)d=40;b=0;for(var f=e.length;b<f;b+=4)e[b]+=d,e[b+1]+=d,e[b+2]+=d;break;case "contrast":if("undefined"===typeof d||null===d)d=10;b=0;for(f=e.length;b<f;b+=4){var h=Math.round((e[b]+e[b+1]+e[b+2])/3);127<h?(e[b]+=e[b]/h*d,e[b+1]+=e[b+1]/h*d,e[b+2]+=e[b+2]/h*d):(e[b]-=e[b]/h*d,e[b+1]-=e[b+1]/h*d,e[b+2]-=e[b+2]/h*d)}break;case "sharpness":a=Z.Utils.convolveImage(a,[0,-1,0,-1,5,-1,0,-1,0]);break;case "blurriness":if("undefined"===typeof d||null===d)d=3;d=Math.abs(d);if(1<d){b=d/2;f=
Math.ceil(d)+(1-Math.ceil(d)%2);d=new Z.Utils.createFloat32Array(f);b=(b+0.5)/3;b*=b;var e=-1/(2*b),r=1/Math.sqrt(2*Math.PI*b),s=Math.floor(f/2);for(b=h=0;b<f;b++){var t=b-s,t=r*Math.exp(t*t*e);d[b]=t;h+=t}b=0;for(f=d.length;b<f;b++)d[b]/=h;a=Z.Utils.convolveImageSeparable(a,d,d,!1)}break;case "edges":b=new Z.Utils.createFloat32Array([-1,-1,-1,-1,8,-1,-1,-1,-1]);a=Z.Utils.convolveImage(a,b,!0);break;case "inversion":b=0;for(f=e.length;b<f;b+=4)e[b]=255-e[b],e[b+1]=255-e[b+1],e[b+2]=255-e[b+2],e[b+
3]=255;break;case "grayscale":b=0;for(f=e.length;b<f;b+=4)h=e[b],r=e[b+1],s=e[b+2],e[b]=e[b+1]=e[b+2]=0.2126*h+0.7152*r+0.0722*s;break;case "threshold":if("undefined"===typeof d||null===d)d=128;b=0;for(f=e.length;b<f;b+=4)h=e[b],r=e[b+1],s=e[b+2],e[b]=e[b+1]=e[b+2]=0.2126*h+0.7152*r+0.0722*s>=d?255:0}return a},getImageData:function(a){var b=this.getCanvas(a.width,a.height),d=b.getContext("2d");d.drawImage(a,0,0);return d.getImageData(0,0,b.width,b.height)},getCanvas:function(a,b){var d=document.createElement("canvas");
d.width=a;d.height=b;return d},createImageData:function(a,b){return document.createElement("canvas").getContext("2d").createImageData(a,b)},createImageDataFloat32:function(a,b){return{width:a,height:b,data:new Z.Utils.createFloat32Array(a*b*4)}},createFloat32Array:function(a){return Z.float32ArraySupported?new Float32Array(a):Array(a)},convolveImage:function(a,b,d){var e=Math.round(Math.sqrt(b.length)),f=Math.floor(e/2),h=a.data,r=a.width;a=a.height;d=d?1:0;for(var s=Z.Utils.createImageData(r,a),
t=s.data,D=0;D<a;D++)for(var y=0;y<r;y++){for(var n=D,I=y,C=4*(D*r+y),R=0,U=0,P=0,F=0,K=0;K<e;K++)for(var O=0;O<e;O++){var q=n+K-f,H=I+O-f;0<=q&&q<a&&0<=H&&H<r&&(q=4*(q*r+H),H=b[K*e+O],R+=h[q]*H,U+=h[q+1]*H,P+=h[q+2]*H,F+=h[q+3]*H)}t[C]=R;t[C+1]=U;t[C+2]=P;t[C+3]=F+d*(255-F)}return s},convolveImageHorizontal:function(a,b,d){var e=b.length,f=Math.floor(e/2),h=a.data,r=a.width;a=a.height;d=d?1:0;for(var s=Z.Utils.createImageData(r,a),t=s.data,D=0;D<a;D++)for(var y=0;y<r;y++){for(var n=D,I=y,C=4*(D*
r+y),R=0,U=0,P=0,F=0,K=0;K<e;K++)var O=n,q=Math.min(r-1,Math.max(0,I+K-f)),O=4*(O*r+q),q=b[K],R=R+h[O]*q,U=U+h[O+1]*q,P=P+h[O+2]*q,F=F+h[O+3]*q;t[C]=R;t[C+1]=U;t[C+2]=P;t[C+3]=F+d*(255-F)}return s},convolveImageVertical:function(a,b,d){var e=b.length,f=Math.floor(e/2),h=a.data,r=a.width;a=a.height;d=d?1:0;for(var s=Z.Utils.createImageData(r,a),t=s.data,D=0;D<a;D++)for(var y=0;y<r;y++){for(var n=D,I=y,C=4*(D*r+y),R=0,U=0,P=0,F=0,K=0;K<e;K++)var O=4*(Math.min(a-1,Math.max(0,n+K-f))*r+I),q=b[K],R=R+
h[O]*q,U=U+h[O+1]*q,P=P+h[O+2]*q,F=F+h[O+3]*q;t[C]=R;t[C+1]=U;t[C+2]=P;t[C+3]=F+d*(255-F)}return s},convolveImageSeparable:function(a,b,d,e){return Z.Utils.convolveImageHorizontal(Z.Utils.convolveImageFloat32Vertical(a,d,e),b,e)},convolveImageFloat32:function(a,b,d){var e=Math.round(Math.sqrt(b.length)),f=Math.floor(e/2),h=a.data,r=a.width;a=a.height;d=d?1:0;for(var s={width:r,height:a,data:new Z.Utils.Float32ArrayZ(r*a*4)},t=s.data,D=0;D<a;D++)for(var y=0;y<r;y++){for(var n=D,I=y,C=4*(D*r+y),R=0,
U=0,P=0,F=0,K=0;K<e;K++)for(var O=0;O<e;O++)var q=Math.min(a-1,Math.max(0,n+K-f)),H=Math.min(r-1,Math.max(0,I+O-f)),q=4*(q*r+H),H=b[K*e+O],R=R+h[q]*H,U=U+h[q+1]*H,P=P+h[q+2]*H,F=F+h[q+3]*H;t[C]=R;t[C+1]=U;t[C+2]=P;t[C+3]=F+d*(255-F)}return s},convolveImageFloat32Horizontal:function(a,b,d){var e=b.length,f=Math.floor(e/2),h=a.data,r=a.width;a=a.height;d=d?1:0;for(var s=Z.Utils.createImageDataFloat32(r,a),t=s.data,D=0;D<a;D++)for(var y=0;y<r;y++){for(var n=D,I=y,C=4*(D*r+y),R=0,U=0,P=0,F=0,K=0;K<e;K++)var O=
n,q=Math.min(r-1,Math.max(0,I+K-f)),O=4*(O*r+q),q=b[K],R=R+h[O]*q,U=U+h[O+1]*q,P=P+h[O+2]*q,F=F+h[O+3]*q;t[C]=R;t[C+1]=U;t[C+2]=P;t[C+3]=F+d*(255-F)}return s},convolveImageFloat32Vertical:function(a,b,d){var e=b.length,f=Math.floor(e/2),h=a.data,r=a.width;a=a.height;d=d?1:0;for(var s=Z.Utils.createImageDataFloat32(r,a),t=s.data,D=0;D<a;D++)for(var y=0;y<r;y++){for(var n=D,I=y,C=4*(D*r+y),R=0,U=0,P=0,F=0,K=0;K<e;K++)var O=4*(Math.min(a-1,Math.max(0,n+K-f))*r+I),q=b[K],R=R+h[O]*q,U=U+h[O+1]*q,P=P+h[O+
2]*q,F=F+h[O+3]*q;t[C]=R;t[C+1]=U;t[C+2]=P;t[C+3]=F+d*(255-F)}return s},intValue:function(a,b){return(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3]},longValue:function(a,b){var d=(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3];0!=a[b+4]&&(d+=4294967296*a[b+4]);return d},shortValue:function(a,b){return a[b]+(a[b+1]<<8)},createUint8Array:function(a,b){return Z.uInt8ArraySupported?new Uint8Array(a,b):new Z.Utils.TypedArray(a,b)},TypedArray:function(a){var b;if("number"===typeof a){b=Array(a);for(var d=
0;d<a;++d)b[d]=0}else b=a.slice(0);b.subarray=Z.Utils.arraySubarraySimple;b.buffer=b;b.byteLength=b.length;b.set=Z.Utils.setSimple;"object"===typeof a&&a.buffer&&(b.buffer=a.buffer);return b},setSimple:function(a,b){2>arguments.length&&(b=0);for(var d=0,e=a.length;d<e;++d,++b)this[b]=a[d]&255},encodeBase64:function(a){var b,d,e,f,h=0,r=0,s="",s=[];if(!a)return a;do b=a[h++],d=a[h++],e=a[h++],f=b<<16|d<<8|e,b=f>>18&63,d=f>>12&63,e=f>>6&63,f&=63,s[r++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);while(h<a.length);s=s.join("");a=a.length%3;return(a?s.slice(0,a-3):s)+"===".slice(a||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=Z.tileSource||Z.responseArraySupported||Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}})},
defineObjectProperty:function(a,b,d){Z.definePropertySupported?Object.defineProperty(a,b,d):(delete a[b],"get"in d&&a.__defineGetter__(b,d.get),"set"in d&&a.__defineSetter__(b,d.set),"value"in d&&(a.__defineSetter__(b,function(a){this.__defineGetter__(b,function(){return a});return a}),a[b]=d.value))},createImageElementFromBytes:function(a,b){function d(a){e.onload=null;e.onabort=null;e.onerror=null;f&&window.clearTimeout(f);window.setTimeout(function(){b(e)},1)}var e=new Image,f=null,h=parseFloat(this.getResource("DEFAULT_IMAGELOADTIMEOUT")),
r=function(){d(!1)};e.onload=function(){d(!0)};e.onabort=r;e.onerror=r;f=window.setTimeout(function(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_IMAGEREQUESTTIMEDOUT"));d(!1)},h);e.src=a},getCurrentUTCDateAsString:function(){var a=new Date,b=(10>a.getUTCMonth()+1?"0":"")+(a.getUTCMonth()+1),d=(10>a.getUTCDate()?"0":"")+a.getUTCDate(),e=(10>a.getUTCHours()?"0":"")+a.getUTCHours(),f=(10>a.getUTCMinutes()?"0":"")+a.getUTCMinutes(),h=(10>a.getUTCSeconds()?"0":"")+a.getUTCSeconds();return a.getUTCFullYear()+
b+d+e+f+h},cacheProofPath:function(a){return a+="?noCacheSfx="+(new Date).getTime().toString()},easing:function(a,b,d,e){b-=a;return 1>(d/=e/2)?b/2*d*d*d*d*d+a:b/2*((d-=2)*d*d*d*d+2)+a},functionCallWithDelay:function(a,b){Z.delayedFunctionCallTimer=window.setTimeout(a,b)},nodeIsInViewer:function(a){for(var b=!1;!1==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;else break;return b},roundToDigitLimit:function(a,b){var d=Math.round(a).toString().length>b-1?1:10;return a=Math.round(a*
d)/d},sign:function(a){return a?0>a?-1:1:0},drawCrosshairs:function(a,b,d){var e=Z.Utils.createContainerElement("div","viewportCenterLineVertical","inline-block","absolute","visible","1px",d+"px",b/2+"px","0px","solid","1px","transparent none","0px","0px","normal",null,!0);b=Z.Utils.createContainerElement("div","viewportCenterLineHorizontal","inline-block","absolute","visible",b+"px","1px","0px",d/2+"px","solid","1px","transparent none","0px","0px","normal",null,!0);a.appendChild(b);a.appendChild(e)},
configureHelpDisplay:function(){var a=parseInt(this.getResource("UI_HELPDISPLAYWIDTH"),10),b=parseInt(this.getResource("UI_HELPDISPLAYHEIGHT"),10),d=Z.viewerW-a-80,e=Z.viewerH-b-80,f=this.getResource("DEFAULT_HELPSCREENCOLOR"),h=this.getResource("DEFAULT_HELPBUTTONCOLOR");Z.HelpDisplay=this.createContainerElement("div","HelpDisplay","inline-block","absolute","hidden",a+"px",b+"px",d+"px",e+"px","solid","1px",f,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);d=Z.Utils.createContainerElement("div",
"helpTextBox","inline-block","absolute",null,a-50+"px",b-74+"px","4px","4px","solid","1px","white","0px","20px",null);d.style.overflowY="auto";Z.HelpDisplay.appendChild(d);Z.help=document.getElementById("helpTextBox");d=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);Z.HelpDisplay.style.zIndex=(d+8).toString();b=b-18-5;a-=66;d=this.getResource("UI_HELPOKBUTTONTEXT");h=new Z.Utils.Button("buttonHelpOk",d,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.helpOkButtonHandler,
"TIP_HELPOK","solid","1px",h,"0px","0px");Z.HelpDisplay.appendChild(h.elmt)},helpOkButtonHandler:function(a){Z.Utils.hideHelp();return!0},showHelp:function(a){Z.HelpDisplay||Z.Utils.configureHelpDisplay();if(Z.help){Z.help.innerHTML=unescape(a);Z.HelpDisplay.style.display="inline-block";a=document.getElementById("buttonHelpOk");var b=parseInt(this.getResource("UI_HELPDISPLAYHEIGHT"),10);a.style.display="inline-block";Z.HelpDisplay.style.height=b+"px"}},hideHelp:function(){Z.HelpDisplay.style.display=
"none"},configureMessageDisplay:function(){var a=parseInt(this.getResource("UI_MESSAGEDISPLAYWIDTH"),10),b=parseInt(this.getResource("UI_MESSAGEDISPLAYHEIGHT"),10),d=Z.viewerH-b-40,e=this.getResource("DEFAULT_MESSAGESCREENCOLOR"),f=this.getResource("DEFAULT_MESSAGEBUTTONCOLOR");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block","absolute","hidden",a+"px",b+"px","40px",d+"px","solid","1px",e,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);
d=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);Z.MessageDisplay.style.zIndex=(d+9).toString();d=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(d);Z.messages=document.getElementById("messageBox");b=b-18-5;a-=66;d=this.getResource("UI_MESSAGEOKBUTTONTEXT");f=new Z.Utils.Button("buttonMessageOk",d,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",
this.messageOkButtonHandler,"TIP_MESSAGEOK","solid","1px",f,"0px","0px");Z.MessageDisplay.appendChild(f.elmt)},messageOkButtonHandler:function(a){Z.Utils.hideMessage();Z.Viewport&&Z.coordinatesVisible&&Z.Viewport.setCoordinatesDisplayVisibility(!1);return!0},messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,d,e,f){Z.MessageDisplay||Z.Utils.configureMessageDisplay();Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);var h=!0;
f&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,a)?h=!1:Z.messageDisplayList[Z.messageDisplayList.length]=a);if(h&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof e&&null!==e&&(a=document.getElementById("textBoxFor-messageBox"))&&(a.firstChild.style.textAlign=e),e=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("UI_MESSAGEDISPLAYHEIGHT"),10),"undefined"!==typeof b&&null!==b&&b?(e.style.display="inline-block",Z.MessageDisplay.style.height=
a+"px"):(e.style.display="none",Z.MessageDisplay.style.height=a-22+"px"),"undefined"!==typeof d&&null!==d&&!isNaN(d))){"undefined"!==typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof d||null===d)d=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,d)}},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&
(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()},configureCoordinatesDisplay:function(){var a=parseInt(this.getResource("UI_COORDINATESDISPLAYWIDTH"),10),b=parseInt(this.getResource("UI_COORDINATESDISPLAYHEIGHT"),10),d=Z.viewerW-a-20,e=Z.viewerH-b-30,f=this.getResource("DEFAULT_COORDINATESSCREENCOLOR");Z.CoordinatesDisplay=this.createContainerElement("div","CoordinatesDisplay","inline-block","absolute","hidden",a+"px",b+"px",d+"px",e+"px",
"solid","1px",f,"0px","0px","normal");Z.ViewerDisplay.appendChild(Z.CoordinatesDisplay);d=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);Z.CoordinatesDisplay.style.zIndex=(d+7).toString();d=Z.Utils.getResource("UI_COORDINATESDISPLAYTEXT");d=Z.Utils.createTextElement("coordsLabelBox",d,a-18+"px","28px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(d);if(d=document.getElementById("textBoxFor-coordsLabelBox"))d.firstChild.style.textAlign=
"center";d=Z.Utils.createTextElement("coordsDisplayBox","",a-18+"px","18px","4px","46px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(d);Z.coordinates=document.getElementById("coordsDisplayBox");if(d=document.getElementById("textBoxFor-coordsDisplayBox"))d.firstChild.style.textAlign="center";a=Z.Utils.createTextElement("coordsSaveBox","",a-18+"px",b-92+"px","4px","78px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",
null);Z.CoordinatesDisplay.appendChild(a);Z.coordinatesSave=document.getElementById("coordsSaveBox");if(a=document.getElementById("textBoxFor-coordsSaveBox"))a.firstChild.style.textAlign="center"},showCoordinates:function(a){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinates&&(Z.coordinates.value=a)},saveCoordinates:function(a){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinatesSave&&(Z.coordinatesSave.value+=a+"\n")},configureTraceDisplay:function(){var a=
Z.viewerW/3+12,b=Z.viewerH/3+45,d=Z.viewerH/3,e=this.getResource("DEFAULT_TRACEDISPLAYSCREENCOLOR");Z.TraceDisplay=this.createContainerElement("div","TraceDisplay","inline-block","absolute","hidden",a+"px",b+"px","10px",d+"px","solid","1px",e,"0px","10px","normal");Z.ViewerDisplay.appendChild(Z.TraceDisplay);d=parseInt(Z.Utils.getResource("DEFAULT_UIELEMENTBASEZINDEX"),10);Z.TraceDisplay.style.zIndex=(d+12).toString();a=Z.Utils.createTextElement("debugTraces","Trace Values\n",a-15+"px",b-60+"px",
"10px","10px","5px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.TraceDisplay.appendChild(a);Z.traces=document.getElementById("debugTraces");var a=58,d=10,b=b-21-10,e=this.getResource("DEFAULT_TRACEDISPLAYBUTTONCOLOR"),f=this.getResource("UI_TRACEDISPLAYSHOWGLOBALSBUTTONTEXT"),f=new this.Button("buttonShowGlobals",f,null,null,null,null,a+"px","42px",d+"px",b+"px","mousedown",this.showGlobals,"TIP_SHOWGLOBALS","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);
d+=a+10;f=this.getResource("UI_TRACEDISPLAYTOGGLEDISPLAYBUTTONTEXT");f=new this.Button("buttonToggleDisplay",f,null,null,null,null,a+"px","42px",d+"px",b+"px","mousedown",Z.Viewport.toggleDisplay,"TIP_TOGGLEDISPLAY","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);d+=a+10;f=this.getResource("UI_TRACEDISPLAYTOGGLEBACKFILLBUTTONTEXT");f=new this.Button("buttonToggleBackfill",f,null,null,null,null,a+"px","42px",d+"px",b+"px","mousedown",Z.Viewport.toggleBackfill,"TIP_TOGGLEBACKFILL","solid",
"1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);d+=a+10;a+=12;f=this.getResource("UI_TRACEDISPLAYTOGGLECONSTRAINPANBUTTONTEXT");a=new this.Button("buttonToggleConstrainPan",f,null,null,null,null,a+"px","42px",d+"px",b+"px","mousedown",Z.Viewport.toggleConstrainPan,"TIP_TOGGLECONSTRAINPAN","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(a.elmt)},showTraces:function(){Z.TraceDisplay?Z.TraceDisplay.style.display="inline-block":Z.Utils.configureTraceDisplay()},hideTraces:function(){Z.TraceDisplay.style.display=
"none"},trace:function(a){Z.TraceDisplay||Z.Utils.configureTraceDisplay();Z.traces&&(Z.traces.value+="\n"+a+"\n")},showGlobals:function(){var a;a="\n                            ZOOMIFY IMAGE VIEWER - CURRENT VALUES\n";a+="\n";a+="VIEW:    ";a+="Z.imageX="+Z.imageX+",   ";a+="Z.imageY="+Z.imageY+",   ";a+="Z.imageZ="+Z.imageZ+",   ";a+="Z.imageR="+Z.imageR+",   ";a+="Z.priorX="+Z.priorX+",   ";a+="Z.priorY="+Z.priorY+",   ";a+="Z.priorZ="+Z.priorZ+",   ";a+="Z.priorR="+Z.priorR+",   ";a+="\n";a+="IMAGE & SKIN:    ";
a+="Z.imagePath="+Z.imagePath+",   ";a+="Z.skinPath="+Z.skinPath+",   ";a+="Z.skinMode="+Z.skinMode+",   ";a+="Z.imageW="+Z.imageW+",   ";a+="Z.imageH="+Z.imageH+",   ";a+="tierCount="+Z.Viewport.getTierCount()+",   ";a+="TILE_WIDTH="+Z.Viewport.getTileW()+",   ";a+="TILE_HEIGHT="+Z.Viewport.getTileH()+"\n";a+="\n";a+="PAGE & BROWSER:    ";a+="Z.pageContainer="+Z.pageContainer+",   ";a+="Z.browser="+Z.browser+",   ";a+="Z.browserVersion="+Z.browserVersion+",   ";a+="Z.canvasSupported="+Z.canvasSupported+
",   ";a+="Z.cssTransformsSupported="+Z.cssTransformsSupported+",   ";a+="Z.cssTransformProperty="+Z.cssTransformProperty+",   ";a+="Z.cssTransformNoUnits="+Z.cssTransformNoUnits+",   ";a+="Z.alphaSupported="+Z.alphaSupported+",   ";a+="Z.renderQuality="+Z.renderQuality+",   ";a+="Z.rotationSupported="+Z.rotationSupported+",   ";a+="Z.fullScreenSupported="+Z.fullScreenSupported+",   ";a+="Z.float32ArraySupported="+Z.float32ArraySupported+",   ";a+="Z.uInt8ArraySupported="+Z.uInt8ArraySupported+",   ";
a+="Z.xmlHttpRequestSupport="+Z.xmlHttpRequestSupport+",   ";a+="Z.definePropertySupported="+Z.definePropertySupported+",   ";a+="Z.responseArraySupported="+Z.responseArraySupported+",   ";a+="Z.mobileDevice="+Z.mobileDevice+",   ";a+="Z.zifSupported="+Z.zifSupported+",   ";a+="Z.localUse="+Z.localUse+"\n";a+="\n";a+="VIEWER OPTIONS & DEFAULTS:    ";a+="Z.initialX="+Z.initialX+",   ";a+="Z.initialY="+Z.initialY+",   ";a+="Z.initialZ="+Z.initialZ+",   ";a+="Z.minZ="+Z.minZ+",   ";a+="Z.maxZ="+Z.maxZ+
",   ";a+="Z.fitZ="+Z.fitZ+",   ";a+="Z.zoomSpeed="+Z.zoomSpeed+",   ";a+="Z.panSpeed="+Z.panSpeed+",   ";a+="Z.fadeInSpeed="+Z.fadeInSpeed+",   ";a+="Z.toolbarVisible="+Z.toolbarVisible+",   ";a+="Z.toolbarW="+Z.toolbarW+",   ";a+="Z.toolbarCurrentW="+Z.toolbarCurrentW+",   ";a+="Z.toolbarH="+Z.toolbarH+",   ";a+="Z.toolbarPosition="+Z.toolbarPosition+",   ";a+="Z.tooltipsVisible="+Z.tooltipsVisible+",   ";a+="Z.helpVisible="+Z.helpVisible+",   ";a+="Z.navigatorVisible="+Z.navigatorVisible+",   ";
a+="Z.navigatorW="+Z.navigatorW+",   ";a+="Z.navigatorH="+Z.navigatorH+",   ";a+="Z.navigatorL="+Z.navigatorL+",   ";a+="Z.navigatorT="+Z.navigatorT+",   ";a+="Z.navigatorFit="+Z.navigatorFit+",   ";a+="Z.clickZoom="+Z.clickZoom+",   ";a+="Z.clickPan="+Z.clickPan+",   ";a+="Z.mousePan="+Z.mousePan+",   ";a+="Z.keys="+Z.keys+",   ";a+="Z.constrainPan="+Z.constrainPan+",   ";a+="Watermark alpha = "+Z.Utils.getResource("DEFAULT_WATERMARKALPHA")+",   ";a+="Z.watermarkPath="+Z.watermarkPath+",   ";a+=
"Z.copyrightPath="+Z.copyrightPath+",   ";a+="Z.hotspotPath="+Z.hotspotPath+",   ";a+="Z.tourPath="+Z.tourPath+",   ";a+="Z.slidePath="+Z.slidePath+",   ";a+="Z.slideTransitionSpeed="+Z.slideTransitionSpeed+",   ";a+="Z.audioContent="+Z.audioContent+",   ";a+="Z.audioMuted="+Z.audioMuted+",   ";a+="Z.annotationPath="+Z.annotationPath+",   ";a+="Z.saveHandlerPath="+Z.saveHandlerPath+",   ";a+="Z.minimizeVisible="+Z.minimizeVisible+",   ";a+="Z.sliderVisible="+Z.sliderVisible+",   ";a+="Z.panButtonsVisible="+
Z.panButtonsVisible+",   ";a+="Z.fullScreenVisible="+Z.fullScreenVisible+",   ";a+="Z.fullPageVisible="+Z.fullPageVisible+",   ";a+="Z.initialFullPage="+Z.initialFullPage+",   ";a+="Z.measureVisible="+Z.measureVisible+",   ";a+="Z.rotationVisible="+Z.rotationVisible+",   ";a+="Z.initialRotation="+Z.initialRotation+",   ";a+="Z.virtualPointerVisible="+Z.virtualPointerVisible+",   ";a+="Z.crosshairsVisible="+Z.crosshairsVisible+",   ";a+="Z.rulerVisible="+Z.rulerVisible+",   ";a+="Z.units="+Z.units+
",   ";a+="Z.unitsPerImage="+Z.unitsPerImage+",   ";a+="Z.pixelsPerUnit="+Z.pixelsPerUnit+",   ";a+="Z.sourceMagnification="+Z.sourceMagnification+",   ";a+="Z.rulerListType="+Z.rulerListType+",   ";a+="Z.rulerW="+Z.rulerW+",   ";a+="Z.rulerH="+Z.rulerH+",   ";a+="Z.rulerL="+Z.rulerL+",   ";a+="Z.rulerT="+Z.rulerT+",   ";a+="Z.coordinatesVisible="+Z.coordinatesVisible+",   ";a+="Z.imageFiltersVisible="+Z.imageFiltersVisible+",   ";a+="Z.progressVisible="+Z.progressVisible+",   ";a+="Z.logoVisible="+
Z.logoVisible+",   ";a+="Z.logoLinkURL="+Z.logoLinkURL+",   ";a+="Z.logoCustomPath="+Z.logoCustomPath+",   ";a+="Z.canvas="+Z.canvas+",   ";a+="Z.debug="+Z.debug+",   ";a+="Z.imageProperties="+Z.imageProperties+",   ";a+="Z.serverIP="+Z.serverIP+",   ";a+="Z.serverPort="+Z.serverPort+",   ";a+="Z.tileHandlerPath="+Z.tileHandlerPath+",   ";a+="Z.tileHandlerPathFull="+Z.tileHandlerPathFull+",   ";a+="Z.tileSource="+Z.tileSource+",   ";a+="Z.tileType="+Z.tileType+",   ";a+="Z.freehandVisible="+Z.freehandVisible+
",   ";a+="Z.textVisible="+Z.textVisible+",   ";a+="Z.iconVisible="+Z.iconVisible+",   ";a+="Z.rectangleVisible="+Z.rectangleVisible+",   ";a+="Z.polygonVisible="+Z.polygonVisible+",   ";a+="\n";a+="INTERNAL VALUES:    ";a+="\n";a+="displayW="+Z.Viewport.getW()+",   ";a+="displayH="+Z.Viewport.getH()+",   ";a+="tierCurrent="+Z.Viewport.getTierCurrent()+",   ";a+="tierBackfill="+Z.Viewport.getTierBackfill()+",   ";a+="tierBackfillDynamic="+Z.Viewport.getTierBackfillDynamic()+",   ";a+="tierScale="+
Z.Viewport.getTierScale()+",   ";a+="TIERS_SCALE_UP_MAX="+Z.Viewport.getTiersScaleUpMax()+",   ";a+="TIERS_SCALE_DOWN_MAX="+Z.Viewport.getTiersScaleDownMax()+",   ";a+="TILES_CACHE_MAX="+Z.Viewport.getTilesCacheMax()+",   ";a+="Z.useCanvas="+Z.useCanvas+"\n";a+="Z.specialStorageEnabled="+Z.specialStorageEnabled+"\n";a+="Z.editMode="+Z.editMode+"\n";a+="Z.labelMode="+Z.labelMode+"\n";a+="Z.editing="+Z.editing+"\n";a+="\n";a+="INTERNAL LISTS:    ";a+="tierWs="+Z.Viewport.getTierWs()+",   ";a+="tierHs="+
Z.Viewport.getTierHs()+",   ";a+="tierTileCounts="+Z.Viewport.getTierTileCounts()+",   ";a+="tilesLoadingNames="+Z.Viewport.getTilesLoadingNames()+"\n";a+="\n";alert(a)}};